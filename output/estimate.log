-----------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/koren/Tresors/Data3/projects/expat-analysis/output/estimate.log
  log type:  text
 opened on:  20 Nov 2018, 20:26:10

. 
. use temp/analysis_sample

. 
. local sample_baseline expat!=.

. local sample_manufacturing `sample_baseline' & manufacturing==1

. local sample_acquisitions `sample_baseline' & ever_foreign==1

. 
. local samples baseline manufacturing acquisitions

. 
. local scale lnL lnK lnQ

. local intensity lnKL lnQL exporter inv

. 
. egen person_tag = tag(frame_id manager_id)

. egen N = sum(person_tag), by(frame_id)

. gen inverse_weight = 1/N

. 
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. foreach sample in `samples' {
  2.         foreach group in scale intensity {
  3.                 foreach X of var ``group'' {
  4.                         xtreg `X' foreign during_domestic after_domestic during_expat afte
> r_expat i.ind_year i.age_cat if `sample_`sample'' [aw=inverse_weight], i(id ) fe vce(cluster 
> id)
  5.                         local r2_w = `e(r2_w)'
  6.                         do regram output/regression/`sample'_`group' `X' `X' R2_within "`r
> 2_w'"
  7.                 }
  8.         }
  9. }
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.1178                                         min =          1
     between = 0.0403                                         avg =       52.1
     overall = 0.0831                                         max =      4,150

                                                F(59,13202)       =      74.99
corr(u_i, Xb)  = -0.0260                        Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0208582   .0343426    -0.61   0.544    -.0881746    .0464583
during_domestic |  -.1047729   .0089017   -11.77   0.000    -.1222216   -.0873242
 after_domestic |  -.1947029   .0122424   -15.90   0.000    -.2186998   -.1707059
   during_expat |   .0087013   .0136449     0.64   0.524    -.0180447    .0354472
    after_expat |   .0319833   .0161437     1.98   0.048     .0003392    .0636273
                |
       ind_year |
             2  |   -.144209   .0173521    -8.31   0.000    -.1782216   -.1101965
             3  |  -.2771524     .02188   -12.67   0.000    -.3200403   -.2342646
             4  |  -.3814614   .0242507   -15.73   0.000    -.4289963   -.3339265
             5  |  -.4777944   .0266549   -17.93   0.000    -.5300419   -.4255469
             6  |  -.5642223   .0285386   -19.77   0.000     -.620162   -.5082825
             7  |  -.6248271   .0303731   -20.57   0.000    -.6843628   -.5652914
             8  |  -.6884238   .0323446   -21.28   0.000    -.7518239   -.6250236
             9  |  -.7563874   .0344605   -21.95   0.000     -.823935   -.6888398
            10  |  -.8086618   .0362402   -22.31   0.000    -.8796978   -.7376259
            11  |   -.880747    .037646   -23.40   0.000    -.9545386   -.8069554
            12  |  -.9081111   .0387051   -23.46   0.000    -.9839786   -.8322435
            13  |  -.9347392   .0395434   -23.64   0.000     -1.01225   -.8572285
            14  |  -.9540454   .0405624   -23.52   0.000    -1.033553   -.8745373
            15  |  -.9518574    .041475   -22.95   0.000    -1.033154   -.8705605
            16  |  -.9561148   .0422729   -22.62   0.000    -1.038976   -.8732539
            17  |   -.972131   .0431345   -22.54   0.000    -1.056681   -.8875812
            18  |  -1.015975   .0436005   -23.30   0.000    -1.101438   -.9305113
            19  |  -1.039647   .0441762   -23.53   0.000    -1.126239   -.9530556
            20  |  -1.063672   .0445834   -23.86   0.000    -1.151062   -.9762824
            21  |  -1.097542   .0451332   -24.32   0.000    -1.186009   -1.009074
            22  |  -1.122737   .0458582   -24.48   0.000    -1.212625   -1.032848
            23  |  -1.134715   .0463342   -24.49   0.000    -1.225537   -1.043894
            24  |  -1.138138    .047098   -24.17   0.000    -1.230457   -1.045819
            25  |  -1.117786   .0475365   -23.51   0.000    -1.210964   -1.024608
            26  |   .5577822   .0604852     9.22   0.000     .4392226    .6763418
            27  |   .3768354   .0590288     6.38   0.000     .2611303    .4925404
            28  |   .2773952   .0574769     4.83   0.000     .1647322    .3900582
            29  |   .1753376   .0564902     3.10   0.002     .0646087    .2860664
            30  |   .1047933   .0552965     1.90   0.058    -.0035958    .2131823
            31  |   .0403551   .0550225     0.73   0.463    -.0674968    .1482071
            32  |  -.0121434   .0543749    -0.22   0.823    -.1187261    .0944393
            33  |  -.0862844   .0542453    -1.59   0.112    -.1926129    .0200442
            34  |  -.1337075   .0542137    -2.47   0.014    -.2399742   -.0274408
            35  |  -.1866897   .0545892    -3.42   0.001    -.2936925    -.079687
            36  |  -.2628585   .0550717    -4.77   0.000     -.370807   -.1549101
            37  |  -.2986922   .0550848    -5.42   0.000    -.4066663   -.1907182
            38  |  -.3526272   .0555836    -6.34   0.000    -.4615791   -.2436754
            39  |  -.3757284   .0559798    -6.71   0.000    -.4854569       -.266
            40  |  -.3939793   .0564919    -6.97   0.000    -.5047115   -.2832471
            41  |  -.3934437   .0567013    -6.94   0.000    -.5045864    -.282301
            42  |  -.4016118   .0572742    -7.01   0.000    -.5138774   -.2893462
            43  |  -.5180217   .0580787    -8.92   0.000    -.6318643    -.404179
            44  |  -.5366969   .0589471    -9.10   0.000    -.6522416   -.4211522
            45  |  -.5082549   .0592998    -8.57   0.000    -.6244911   -.3920187
            46  |  -.5127517   .0599552    -8.55   0.000    -.6302726   -.3952308
            47  |  -.5069016   .0603795    -8.40   0.000     -.625254   -.3885491
            48  |  -.4980914   .0607609    -8.20   0.000    -.6171915   -.3789913
            49  |  -.4705351   .0615486    -7.64   0.000    -.5911791    -.349891
            50  |  -.4401006   .0613562    -7.17   0.000    -.5603676   -.3198337
                |
        age_cat |
             2  |   .4065406   .0168898    24.07   0.000     .3734342     .439647
             3  |   .7212244   .0191084    37.74   0.000     .6837692    .7586796
             4  |   1.097071   .0220713    49.71   0.000     1.053808    1.140334
             5  |    1.46257   .0266604    54.86   0.000     1.410312    1.514829
             6  |   1.768026   .0324415    54.50   0.000     1.704436    1.831616
                |
          _cons |   3.097398   .0359586    86.14   0.000     3.026914    3.167881
----------------+----------------------------------------------------------------
        sigma_u |  1.0149777
        sigma_e |  .77860657
            rho |  .62953725   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1177959547415514

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.1178                                         min =          1
     between = 0.0403                                         avg =       52.1
     overall = 0.0831                                         max =      4,150

                                                F(59,13202)       =      74.99
corr(u_i, Xb)  = -0.0260                        Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0208582   .0343426    -0.61   0.544    -.0881746    .0464583
during_domestic |  -.1047729   .0089017   -11.77   0.000    -.1222216   -.0873242
 after_domestic |  -.1947029   .0122424   -15.90   0.000    -.2186998   -.1707059
   during_expat |   .0087013   .0136449     0.64   0.524    -.0180447    .0354472
    after_expat |   .0319833   .0161437     1.98   0.048     .0003392    .0636273
                |
       ind_year |
             2  |   -.144209   .0173521    -8.31   0.000    -.1782216   -.1101965
             3  |  -.2771524     .02188   -12.67   0.000    -.3200403   -.2342646
             4  |  -.3814614   .0242507   -15.73   0.000    -.4289963   -.3339265
             5  |  -.4777944   .0266549   -17.93   0.000    -.5300419   -.4255469
             6  |  -.5642223   .0285386   -19.77   0.000     -.620162   -.5082825
             7  |  -.6248271   .0303731   -20.57   0.000    -.6843628   -.5652914
             8  |  -.6884238   .0323446   -21.28   0.000    -.7518239   -.6250236
             9  |  -.7563874   .0344605   -21.95   0.000     -.823935   -.6888398
            10  |  -.8086618   .0362402   -22.31   0.000    -.8796978   -.7376259
            11  |   -.880747    .037646   -23.40   0.000    -.9545386   -.8069554
            12  |  -.9081111   .0387051   -23.46   0.000    -.9839786   -.8322435
            13  |  -.9347392   .0395434   -23.64   0.000     -1.01225   -.8572285
            14  |  -.9540454   .0405624   -23.52   0.000    -1.033553   -.8745373
            15  |  -.9518574    .041475   -22.95   0.000    -1.033154   -.8705605
            16  |  -.9561148   .0422729   -22.62   0.000    -1.038976   -.8732539
            17  |   -.972131   .0431345   -22.54   0.000    -1.056681   -.8875812
            18  |  -1.015975   .0436005   -23.30   0.000    -1.101438   -.9305113
            19  |  -1.039647   .0441762   -23.53   0.000    -1.126239   -.9530556
            20  |  -1.063672   .0445834   -23.86   0.000    -1.151062   -.9762824
            21  |  -1.097542   .0451332   -24.32   0.000    -1.186009   -1.009074
            22  |  -1.122737   .0458582   -24.48   0.000    -1.212625   -1.032848
            23  |  -1.134715   .0463342   -24.49   0.000    -1.225537   -1.043894
            24  |  -1.138138    .047098   -24.17   0.000    -1.230457   -1.045819
            25  |  -1.117786   .0475365   -23.51   0.000    -1.210964   -1.024608
            26  |   .5577822   .0604852     9.22   0.000     .4392226    .6763418
            27  |   .3768354   .0590288     6.38   0.000     .2611303    .4925404
            28  |   .2773952   .0574769     4.83   0.000     .1647322    .3900582
            29  |   .1753376   .0564902     3.10   0.002     .0646087    .2860664
            30  |   .1047933   .0552965     1.90   0.058    -.0035958    .2131823
            31  |   .0403551   .0550225     0.73   0.463    -.0674968    .1482071
            32  |  -.0121434   .0543749    -0.22   0.823    -.1187261    .0944393
            33  |  -.0862844   .0542453    -1.59   0.112    -.1926129    .0200442
            34  |  -.1337075   .0542137    -2.47   0.014    -.2399742   -.0274408
            35  |  -.1866897   .0545892    -3.42   0.001    -.2936925    -.079687
            36  |  -.2628585   .0550717    -4.77   0.000     -.370807   -.1549101
            37  |  -.2986922   .0550848    -5.42   0.000    -.4066663   -.1907182
            38  |  -.3526272   .0555836    -6.34   0.000    -.4615791   -.2436754
            39  |  -.3757284   .0559798    -6.71   0.000    -.4854569       -.266
            40  |  -.3939793   .0564919    -6.97   0.000    -.5047115   -.2832471
            41  |  -.3934437   .0567013    -6.94   0.000    -.5045864    -.282301
            42  |  -.4016118   .0572742    -7.01   0.000    -.5138774   -.2893462
            43  |  -.5180217   .0580787    -8.92   0.000    -.6318643    -.404179
            44  |  -.5366969   .0589471    -9.10   0.000    -.6522416   -.4211522
            45  |  -.5082549   .0592998    -8.57   0.000    -.6244911   -.3920187
            46  |  -.5127517   .0599552    -8.55   0.000    -.6302726   -.3952308
            47  |  -.5069016   .0603795    -8.40   0.000     -.625254   -.3885491
            48  |  -.4980914   .0607609    -8.20   0.000    -.6171915   -.3789913
            49  |  -.4705351   .0615486    -7.64   0.000    -.5911791    -.349891
            50  |  -.4401006   .0613562    -7.17   0.000    -.5603676   -.3198337
                |
        age_cat |
             2  |   .4065406   .0168898    24.07   0.000     .3734342     .439647
             3  |   .7212244   .0191084    37.74   0.000     .6837692    .7586796
             4  |   1.097071   .0220713    49.71   0.000     1.053808    1.140334
             5  |    1.46257   .0266604    54.86   0.000     1.410312    1.514829
             6  |   1.768026   .0324415    54.50   0.000     1.704436    1.831616
                |
          _cons |   3.097398   .0359586    86.14   0.000     3.026914    3.167881
----------------+----------------------------------------------------------------
        sigma_u |  1.0149777
        sigma_e |  .77860657
            rho |  .62953725   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    633,552
Group variable: id                              Number of groups  =     12,830

R-sq:                                           Obs per group:
     within  = 0.1971                                         min =          1
     between = 0.1260                                         avg =       49.4
     overall = 0.1004                                         max =      3,984

                                                F(59,12829)       =     127.30
corr(u_i, Xb)  = 0.0924                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,830 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0931893   .0500073     1.86   0.062    -.0048325    .1912111
during_domestic |  -.0802389    .012016    -6.68   0.000     -.103792   -.0566858
 after_domestic |   -.159048   .0158767   -10.02   0.000    -.1901688   -.1279273
   during_expat |  -.1151695   .0193442    -5.95   0.000     -.153087   -.0772521
    after_expat |  -.2103934    .020884   -10.07   0.000     -.251329   -.1694577
                |
       ind_year |
             2  |  -.0831175   .0285163    -2.91   0.004    -.1390136   -.0272214
             3  |   .3078649   .0346252     8.89   0.000     .2399944    .3757355
             4  |    .359773   .0377844     9.52   0.000     .2857099     .433836
             5  |    .435807   .0410095    10.63   0.000     .3554223    .5161918
             6  |   .5780224   .0433485    13.33   0.000      .493053    .6629918
             7  |   .7363894   .0458164    16.07   0.000     .6465824    .8261965
             8  |   .8268637   .0483111    17.12   0.000     .7321667    .9215607
             9  |   .9006134   .0506627    17.78   0.000      .801307    .9999198
            10  |   .9676673   .0526991    18.36   0.000     .8643692    1.070965
            11  |   1.025479   .0545287    18.81   0.000     .9185949    1.132364
            12  |   1.065047   .0563457    18.90   0.000      .954601    1.175493
            13  |   1.114988   .0576554    19.34   0.000     1.001975    1.228001
            14  |   1.130884   .0588081    19.23   0.000     1.015611    1.246156
            15  |   1.109998   .0599357    18.52   0.000     .9925154    1.227481
            16  |   1.145638   .0612358    18.71   0.000     1.025607    1.265669
            17  |   1.168883   .0620109    18.85   0.000     1.047332    1.290434
            18  |   1.145464   .0630517    18.17   0.000     1.021873    1.269054
            19  |   1.081074   .0636863    16.97   0.000     .9562396    1.205909
            20  |   1.053709    .064489    16.34   0.000     .9273007    1.180117
            21  |   1.060253   .0652582    16.25   0.000     .9323377    1.188169
            22  |   1.066072   .0664703    16.04   0.000     .9357802    1.196364
            23  |    1.13993   .0675004    16.89   0.000     1.007619     1.27224
            24  |   .7153666   .0730779     9.79   0.000      .572123    .8586103
            25  |   .7746041   .0790666     9.80   0.000     .6196219    .9295864
            26  |   .8783701   .0829378    10.59   0.000     .7157996    1.040941
            27  |    .806424   .0780166    10.34   0.000     .6534999    .9593481
            28  |   .9574865   .0737123    12.99   0.000     .8129993    1.101974
            29  |   .9711968   .0728382    13.33   0.000     .8284232     1.11397
            30  |   1.018779   .0723168    14.09   0.000     .8770277    1.160531
            31  |   1.093484   .0721628    15.15   0.000     .9520344    1.234934
            32  |   1.265615   .0713626    17.73   0.000     1.125734    1.405496
            33  |   1.320988   .0715617    18.46   0.000     1.180716     1.46126
            34  |   1.377871   .0720024    19.14   0.000     1.236735    1.519006
            35  |   1.419766   .0728496    19.49   0.000      1.27697    1.562562
            36  |   1.459781   .0739328    19.74   0.000     1.314861      1.6047
            37  |   1.511758   .0743073    20.34   0.000     1.366105    1.657411
            38  |   1.528895   .0751116    20.35   0.000     1.381665    1.676125
            39  |   1.540464   .0758384    20.31   0.000     1.391809    1.689118
            40  |   1.550637   .0766814    20.22   0.000     1.400331    1.700944
            41  |   1.604774   .0775728    20.69   0.000     1.452719    1.756828
            42  |   1.654745   .0783366    21.12   0.000     1.501193    1.808296
            43  |   1.603368   .0792985    20.22   0.000     1.447932    1.758805
            44  |   1.572082   .0800342    19.64   0.000     1.415203    1.728961
            45  |   1.645421   .0803425    20.48   0.000     1.487937    1.802904
            46  |   1.641931   .0811205    20.24   0.000     1.482923    1.800939
            47  |   1.700438   .0819216    20.76   0.000      1.53986    1.861017
            48  |   1.770999   .0825559    21.45   0.000     1.609177    1.932821
            49  |   1.685165   .0863872    19.51   0.000     1.515834    1.854497
            50  |   1.794257   .0895282    20.04   0.000     1.618769    1.969746
                |
        age_cat |
             2  |   .4705718   .0279479    16.84   0.000     .4157897    .5253539
             3  |   .7915971   .0307783    25.72   0.000     .7312671    .8519272
             4  |   1.166461   .0340666    34.24   0.000     1.099685    1.233236
             5  |   1.468327   .0398568    36.84   0.000     1.390202    1.546453
             6  |   1.706504   .0475673    35.88   0.000     1.613265    1.799743
                |
          _cons |   7.825888   .0532929   146.85   0.000     7.721426     7.93035
----------------+----------------------------------------------------------------
        sigma_u |  1.8540647
        sigma_e |  1.0660272
            rho |  .75154756   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1970622822342627

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    633,552
Group variable: id                              Number of groups  =     12,830

R-sq:                                           Obs per group:
     within  = 0.1971                                         min =          1
     between = 0.1260                                         avg =       49.4
     overall = 0.1004                                         max =      3,984

                                                F(59,12829)       =     127.30
corr(u_i, Xb)  = 0.0924                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,830 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0931893   .0500073     1.86   0.062    -.0048325    .1912111
during_domestic |  -.0802389    .012016    -6.68   0.000     -.103792   -.0566858
 after_domestic |   -.159048   .0158767   -10.02   0.000    -.1901688   -.1279273
   during_expat |  -.1151695   .0193442    -5.95   0.000     -.153087   -.0772521
    after_expat |  -.2103934    .020884   -10.07   0.000     -.251329   -.1694577
                |
       ind_year |
             2  |  -.0831175   .0285163    -2.91   0.004    -.1390136   -.0272214
             3  |   .3078649   .0346252     8.89   0.000     .2399944    .3757355
             4  |    .359773   .0377844     9.52   0.000     .2857099     .433836
             5  |    .435807   .0410095    10.63   0.000     .3554223    .5161918
             6  |   .5780224   .0433485    13.33   0.000      .493053    .6629918
             7  |   .7363894   .0458164    16.07   0.000     .6465824    .8261965
             8  |   .8268637   .0483111    17.12   0.000     .7321667    .9215607
             9  |   .9006134   .0506627    17.78   0.000      .801307    .9999198
            10  |   .9676673   .0526991    18.36   0.000     .8643692    1.070965
            11  |   1.025479   .0545287    18.81   0.000     .9185949    1.132364
            12  |   1.065047   .0563457    18.90   0.000      .954601    1.175493
            13  |   1.114988   .0576554    19.34   0.000     1.001975    1.228001
            14  |   1.130884   .0588081    19.23   0.000     1.015611    1.246156
            15  |   1.109998   .0599357    18.52   0.000     .9925154    1.227481
            16  |   1.145638   .0612358    18.71   0.000     1.025607    1.265669
            17  |   1.168883   .0620109    18.85   0.000     1.047332    1.290434
            18  |   1.145464   .0630517    18.17   0.000     1.021873    1.269054
            19  |   1.081074   .0636863    16.97   0.000     .9562396    1.205909
            20  |   1.053709    .064489    16.34   0.000     .9273007    1.180117
            21  |   1.060253   .0652582    16.25   0.000     .9323377    1.188169
            22  |   1.066072   .0664703    16.04   0.000     .9357802    1.196364
            23  |    1.13993   .0675004    16.89   0.000     1.007619     1.27224
            24  |   .7153666   .0730779     9.79   0.000      .572123    .8586103
            25  |   .7746041   .0790666     9.80   0.000     .6196219    .9295864
            26  |   .8783701   .0829378    10.59   0.000     .7157996    1.040941
            27  |    .806424   .0780166    10.34   0.000     .6534999    .9593481
            28  |   .9574865   .0737123    12.99   0.000     .8129993    1.101974
            29  |   .9711968   .0728382    13.33   0.000     .8284232     1.11397
            30  |   1.018779   .0723168    14.09   0.000     .8770277    1.160531
            31  |   1.093484   .0721628    15.15   0.000     .9520344    1.234934
            32  |   1.265615   .0713626    17.73   0.000     1.125734    1.405496
            33  |   1.320988   .0715617    18.46   0.000     1.180716     1.46126
            34  |   1.377871   .0720024    19.14   0.000     1.236735    1.519006
            35  |   1.419766   .0728496    19.49   0.000      1.27697    1.562562
            36  |   1.459781   .0739328    19.74   0.000     1.314861      1.6047
            37  |   1.511758   .0743073    20.34   0.000     1.366105    1.657411
            38  |   1.528895   .0751116    20.35   0.000     1.381665    1.676125
            39  |   1.540464   .0758384    20.31   0.000     1.391809    1.689118
            40  |   1.550637   .0766814    20.22   0.000     1.400331    1.700944
            41  |   1.604774   .0775728    20.69   0.000     1.452719    1.756828
            42  |   1.654745   .0783366    21.12   0.000     1.501193    1.808296
            43  |   1.603368   .0792985    20.22   0.000     1.447932    1.758805
            44  |   1.572082   .0800342    19.64   0.000     1.415203    1.728961
            45  |   1.645421   .0803425    20.48   0.000     1.487937    1.802904
            46  |   1.641931   .0811205    20.24   0.000     1.482923    1.800939
            47  |   1.700438   .0819216    20.76   0.000      1.53986    1.861017
            48  |   1.770999   .0825559    21.45   0.000     1.609177    1.932821
            49  |   1.685165   .0863872    19.51   0.000     1.515834    1.854497
            50  |   1.794257   .0895282    20.04   0.000     1.618769    1.969746
                |
        age_cat |
             2  |   .4705718   .0279479    16.84   0.000     .4157897    .5253539
             3  |   .7915971   .0307783    25.72   0.000     .7312671    .8519272
             4  |   1.166461   .0340666    34.24   0.000     1.099685    1.233236
             5  |   1.468327   .0398568    36.84   0.000     1.390202    1.546453
             6  |   1.706504   .0475673    35.88   0.000     1.613265    1.799743
                |
          _cons |   7.825888   .0532929   146.85   0.000     7.721426     7.93035
----------------+----------------------------------------------------------------
        sigma_u |  1.8540647
        sigma_e |  1.0660272
            rho |  .75154756   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.2960                                         min =          1
     between = 0.0926                                         avg =       52.1
     overall = 0.1278                                         max =      4,150

                                                F(59,13202)       =     236.63
corr(u_i, Xb)  = 0.0505                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .062621   .0361207     1.73   0.083    -.0081809    .1334228
during_domestic |  -.1316475   .0100158   -13.14   0.000    -.1512799    -.112015
 after_domestic |    -.20326    .013216   -15.38   0.000    -.2291652   -.1773547
   during_expat |   .0501229   .0150899     3.32   0.001     .0205444    .0797013
    after_expat |   .0802107   .0176238     4.55   0.000     .0456656    .1147558
                |
       ind_year |
             2  |   .0019847   .0207258     0.10   0.924    -.0386408    .0426101
             3  |   .0591545   .0247294     2.39   0.017     .0106813    .1076278
             4  |   .1458565   .0274988     5.30   0.000     .0919549    .1997581
             5  |   .2294089   .0299948     7.65   0.000     .1706148     .288203
             6  |   .3285524   .0319847    10.27   0.000     .2658577    .3912471
             7  |   .4020156   .0339778    11.83   0.000     .3354142    .4686171
             8  |   .4253546   .0361822    11.76   0.000     .3544322     .496277
             9  |   .4803817   .0382838    12.55   0.000     .4053399    .5554235
            10  |    .541661   .0402878    13.44   0.000     .4626911    .6206309
            11  |   .5498114   .0417362    13.17   0.000     .4680026    .6316203
            12  |   .5539982   .0431825    12.83   0.000     .4693543    .6386421
            13  |   .5898402   .0439872    13.41   0.000     .5036189    .6760615
            14  |   .6138552   .0451943    13.58   0.000     .5252678    .7024426
            15  |   .6781203   .0462929    14.65   0.000     .5873796    .7688609
            16  |   .7009716   .0473755    14.80   0.000     .6081088    .7938344
            17  |   .7366926   .0484268    15.21   0.000     .6417691    .8316161
            18  |   .6415497   .0490055    13.09   0.000      .545492    .7376075
            19  |    .651295   .0498768    13.06   0.000     .5535293    .7490606
            20  |   .6726961   .0502409    13.39   0.000     .5742168    .7711755
            21  |   .6548811   .0508726    12.87   0.000     .5551634    .7545988
            22  |   .6853274   .0518505    13.22   0.000      .583693    .7869619
            23  |    .725362   .0525664    13.80   0.000     .6223243    .8283996
            24  |   .7475822   .0530282    14.10   0.000     .6436393    .8515251
            25  |   .7640662   .0535848    14.26   0.000     .6590323    .8691002
            26  |   .2101421   .0650811     3.23   0.001     .0825738    .3377103
            27  |   .1676527   .0617267     2.72   0.007     .0466596    .2886459
            28  |   .2903287   .0590753     4.91   0.000     .1745325    .4061249
            29  |   .4331353   .0579123     7.48   0.000     .3196188    .5466518
            30  |   .5538965   .0568027     9.75   0.000      .442555    .6652379
            31  |   .6631347   .0566991    11.70   0.000     .5519964     .774273
            32  |   .7740157   .0562209    13.77   0.000     .6638146    .8842168
            33  |   .7983645   .0567151    14.08   0.000     .6871946    .9095343
            34  |   .8990156   .0566097    15.88   0.000     .7880525    1.009979
            35  |   .9338191   .0571995    16.33   0.000     .8216998    1.045938
            36  |   .9233389   .0575437    16.05   0.000      .810545    1.036133
            37  |   .9648509   .0576449    16.74   0.000     .8518586    1.077843
            38  |   .9909096   .0585214    16.93   0.000     .8761993     1.10562
            39  |   1.038867   .0590759    17.59   0.000     .9230701    1.154665
            40  |   1.126093   .0600672    18.75   0.000     1.008353    1.243833
            41  |   1.198066   .0601001    19.93   0.000     1.080261    1.315871
            42  |   1.249119   .0606267    20.60   0.000     1.130282    1.367956
            43  |   1.114303   .0615717    18.10   0.000     .9936134    1.234992
            44  |   1.154198    .062869    18.36   0.000     1.030966    1.277431
            45  |   1.260726   .0634442    19.87   0.000     1.136366    1.385086
            46  |   1.270558   .0644482    19.71   0.000      1.14423    1.396886
            47  |   1.310844   .0648511    20.21   0.000     1.183726    1.437961
            48  |   1.359022   .0656555    20.70   0.000     1.230327    1.487716
            49  |   1.382383   .0665878    20.76   0.000     1.251861    1.512905
            50  |   1.439035   .0662101    21.73   0.000     1.309254    1.568817
                |
        age_cat |
             2  |   1.033514   .0240016    43.06   0.000     .9864675    1.080561
             3  |   1.417623   .0255065    55.58   0.000     1.367627     1.46762
             4  |   1.802722   .0280428    64.28   0.000     1.747754     1.85769
             5  |   2.144095   .0325221    65.93   0.000     2.080347    2.207843
             6  |   2.430067   .0389215    62.44   0.000     2.353775    2.506359
                |
          _cons |   10.24264   .0414447   247.14   0.000      10.1614    10.32388
----------------+----------------------------------------------------------------
        sigma_u |  1.5455136
        sigma_e |   .9042321
            rho |  .74498677   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .296003224030948

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.2960                                         min =          1
     between = 0.0926                                         avg =       52.1
     overall = 0.1278                                         max =      4,150

                                                F(59,13202)       =     236.63
corr(u_i, Xb)  = 0.0505                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .062621   .0361207     1.73   0.083    -.0081809    .1334228
during_domestic |  -.1316475   .0100158   -13.14   0.000    -.1512799    -.112015
 after_domestic |    -.20326    .013216   -15.38   0.000    -.2291652   -.1773547
   during_expat |   .0501229   .0150899     3.32   0.001     .0205444    .0797013
    after_expat |   .0802107   .0176238     4.55   0.000     .0456656    .1147558
                |
       ind_year |
             2  |   .0019847   .0207258     0.10   0.924    -.0386408    .0426101
             3  |   .0591545   .0247294     2.39   0.017     .0106813    .1076278
             4  |   .1458565   .0274988     5.30   0.000     .0919549    .1997581
             5  |   .2294089   .0299948     7.65   0.000     .1706148     .288203
             6  |   .3285524   .0319847    10.27   0.000     .2658577    .3912471
             7  |   .4020156   .0339778    11.83   0.000     .3354142    .4686171
             8  |   .4253546   .0361822    11.76   0.000     .3544322     .496277
             9  |   .4803817   .0382838    12.55   0.000     .4053399    .5554235
            10  |    .541661   .0402878    13.44   0.000     .4626911    .6206309
            11  |   .5498114   .0417362    13.17   0.000     .4680026    .6316203
            12  |   .5539982   .0431825    12.83   0.000     .4693543    .6386421
            13  |   .5898402   .0439872    13.41   0.000     .5036189    .6760615
            14  |   .6138552   .0451943    13.58   0.000     .5252678    .7024426
            15  |   .6781203   .0462929    14.65   0.000     .5873796    .7688609
            16  |   .7009716   .0473755    14.80   0.000     .6081088    .7938344
            17  |   .7366926   .0484268    15.21   0.000     .6417691    .8316161
            18  |   .6415497   .0490055    13.09   0.000      .545492    .7376075
            19  |    .651295   .0498768    13.06   0.000     .5535293    .7490606
            20  |   .6726961   .0502409    13.39   0.000     .5742168    .7711755
            21  |   .6548811   .0508726    12.87   0.000     .5551634    .7545988
            22  |   .6853274   .0518505    13.22   0.000      .583693    .7869619
            23  |    .725362   .0525664    13.80   0.000     .6223243    .8283996
            24  |   .7475822   .0530282    14.10   0.000     .6436393    .8515251
            25  |   .7640662   .0535848    14.26   0.000     .6590323    .8691002
            26  |   .2101421   .0650811     3.23   0.001     .0825738    .3377103
            27  |   .1676527   .0617267     2.72   0.007     .0466596    .2886459
            28  |   .2903287   .0590753     4.91   0.000     .1745325    .4061249
            29  |   .4331353   .0579123     7.48   0.000     .3196188    .5466518
            30  |   .5538965   .0568027     9.75   0.000      .442555    .6652379
            31  |   .6631347   .0566991    11.70   0.000     .5519964     .774273
            32  |   .7740157   .0562209    13.77   0.000     .6638146    .8842168
            33  |   .7983645   .0567151    14.08   0.000     .6871946    .9095343
            34  |   .8990156   .0566097    15.88   0.000     .7880525    1.009979
            35  |   .9338191   .0571995    16.33   0.000     .8216998    1.045938
            36  |   .9233389   .0575437    16.05   0.000      .810545    1.036133
            37  |   .9648509   .0576449    16.74   0.000     .8518586    1.077843
            38  |   .9909096   .0585214    16.93   0.000     .8761993     1.10562
            39  |   1.038867   .0590759    17.59   0.000     .9230701    1.154665
            40  |   1.126093   .0600672    18.75   0.000     1.008353    1.243833
            41  |   1.198066   .0601001    19.93   0.000     1.080261    1.315871
            42  |   1.249119   .0606267    20.60   0.000     1.130282    1.367956
            43  |   1.114303   .0615717    18.10   0.000     .9936134    1.234992
            44  |   1.154198    .062869    18.36   0.000     1.030966    1.277431
            45  |   1.260726   .0634442    19.87   0.000     1.136366    1.385086
            46  |   1.270558   .0644482    19.71   0.000      1.14423    1.396886
            47  |   1.310844   .0648511    20.21   0.000     1.183726    1.437961
            48  |   1.359022   .0656555    20.70   0.000     1.230327    1.487716
            49  |   1.382383   .0665878    20.76   0.000     1.251861    1.512905
            50  |   1.439035   .0662101    21.73   0.000     1.309254    1.568817
                |
        age_cat |
             2  |   1.033514   .0240016    43.06   0.000     .9864675    1.080561
             3  |   1.417623   .0255065    55.58   0.000     1.367627     1.46762
             4  |   1.802722   .0280428    64.28   0.000     1.747754     1.85769
             5  |   2.144095   .0325221    65.93   0.000     2.080347    2.207843
             6  |   2.430067   .0389215    62.44   0.000     2.353775    2.506359
                |
          _cons |   10.24264   .0414447   247.14   0.000      10.1614    10.32388
----------------+----------------------------------------------------------------
        sigma_u |  1.5455136
        sigma_e |   .9042321
            rho |  .74498677   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    633,552
Group variable: id                              Number of groups  =     12,830

R-sq:                                           Obs per group:
     within  = 0.1973                                         min =          1
     between = 0.0630                                         avg =       49.4
     overall = 0.0965                                         max =      3,984

                                                F(59,12829)       =     137.60
corr(u_i, Xb)  = 0.0215                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,830 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .1117282   .0402641     2.77   0.006     .0328046    .1906518
during_domestic |   .0236036   .0099482     2.37   0.018     .0041036    .0431036
 after_domestic |     .02123    .012607     1.68   0.092    -.0034816    .0459416
   during_expat |   -.133892   .0160497    -8.34   0.000    -.1653519   -.1024321
    after_expat |  -.2614021   .0166771   -15.67   0.000    -.2940917   -.2287125
                |
       ind_year |
             2  |   .0919022   .0241862     3.80   0.000     .0444937    .1393108
             3  |   .6210602   .0282834    21.96   0.000     .5656206    .6764998
             4  |   .7724654   .0301964    25.58   0.000      .713276    .8316547
             5  |    .945085   .0320772    29.46   0.000      .882209    1.007961
             6  |   1.178582   .0335098    35.17   0.000     1.112897    1.244266
             7  |   1.398418   .0347587    40.23   0.000     1.330286     1.46655
             8  |   1.545957   .0365428    42.31   0.000     1.474327    1.617586
             9  |   1.678059   .0377901    44.40   0.000     1.603985    1.752133
            10  |   1.796174   .0389104    46.16   0.000     1.719904    1.872444
            11  |    1.92652   .0398289    48.37   0.000     1.848449    2.004591
            12  |   1.985858   .0410149    48.42   0.000     1.905463    2.066253
            13  |    2.06003   .0419295    49.13   0.000     1.977842    2.142219
            14  |   2.085709   .0426161    48.94   0.000     2.002175    2.169243
            15  |   2.057319   .0435826    47.21   0.000     1.971891    2.142748
            16  |   2.093585   .0445547    46.99   0.000     2.006252    2.180919
            17  |   2.131019   .0452897    47.05   0.000     2.042244    2.219793
            18  |    2.15876    .046441    46.48   0.000     2.067728    2.249791
            19  |   2.112802   .0468705    45.08   0.000     2.020928    2.204675
            20  |    2.09639   .0478293    43.83   0.000     2.002638    2.190143
            21  |   2.129377   .0488221    43.62   0.000     2.033678    2.225076
            22  |   2.157045   .0497443    43.36   0.000     2.059539    2.254551
            23  |   2.225351   .0508725    43.74   0.000     2.125634    2.325069
            24  |   1.648644   .0587733    28.05   0.000      1.53344    1.763849
            25  |   1.692251    .065236    25.94   0.000     1.564379    1.820124
            26  |   .3853492   .0618451     6.23   0.000     .2641236    .5065747
            27  |   .4967429   .0573868     8.66   0.000     .3842563    .6092295
            28  |   .7501762   .0545519    13.75   0.000     .6432463    .8571062
            29  |   .8693714   .0538951    16.13   0.000     .7637289    .9750139
            30  |   .9849577   .0533702    18.46   0.000     .8803442    1.089571
            31  |   1.114242   .0535744    20.80   0.000     1.009228    1.219256
            32  |   1.345319   .0528043    25.48   0.000     1.241815    1.448824
            33  |   1.470377   .0531201    27.68   0.000     1.366254      1.5745
            34  |    1.57488   .0534989    29.44   0.000     1.470014    1.679746
            35  |   1.662537   .0539511    30.82   0.000     1.556785     1.76829
            36  |   1.776533   .0545707    32.55   0.000     1.669566      1.8835
            37  |   1.865942   .0549884    33.93   0.000     1.758157    1.973728
            38  |   1.926336   .0554119    34.76   0.000     1.817721    2.034952
            39  |   1.960777   .0559929    35.02   0.000     1.851022    2.070531
            40  |   1.987474   .0564347    35.22   0.000     1.876854    2.098094
            41  |   2.032337   .0567599    35.81   0.000     1.921079    2.143595
            42  |   2.089314   .0571888    36.53   0.000     1.977215    2.201412
            43  |   2.151679   .0580616    37.06   0.000     2.037869    2.265488
            44  |   2.133198   .0583947    36.53   0.000     2.018736    2.247661
            45  |   2.174925   .0586903    37.06   0.000     2.059883    2.289966
            46  |   2.178202   .0591027    36.85   0.000     2.062352    2.294052
            47  |   2.225729   .0599975    37.10   0.000     2.108125    2.343334
            48  |   2.273893   .0602052    37.77   0.000     2.155882    2.391904
            49  |   2.035572   .0630214    32.30   0.000      1.91204    2.159103
            50  |   2.110874   .0663111    31.83   0.000     1.980895    2.240854
                |
        age_cat |
             2  |   .0930347   .0258866     3.59   0.000     .0422932    .1437763
             3  |   .1228044   .0278923     4.40   0.000     .0681314    .1774773
             4  |   .1470149   .0298042     4.93   0.000     .0885942    .2054356
             5  |    .102624   .0339685     3.02   0.003     .0360406    .1692073
             6  |   .0578079   .0395255     1.46   0.144    -.0196679    .1352837
                |
          _cons |   4.574827   .0417119   109.68   0.000     4.493065    4.656588
----------------+----------------------------------------------------------------
        sigma_u |  1.6022054
        sigma_e |  .92402382
            rho |   .7504094   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1973219199867533

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    633,552
Group variable: id                              Number of groups  =     12,830

R-sq:                                           Obs per group:
     within  = 0.1973                                         min =          1
     between = 0.0630                                         avg =       49.4
     overall = 0.0965                                         max =      3,984

                                                F(59,12829)       =     137.60
corr(u_i, Xb)  = 0.0215                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,830 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .1117282   .0402641     2.77   0.006     .0328046    .1906518
during_domestic |   .0236036   .0099482     2.37   0.018     .0041036    .0431036
 after_domestic |     .02123    .012607     1.68   0.092    -.0034816    .0459416
   during_expat |   -.133892   .0160497    -8.34   0.000    -.1653519   -.1024321
    after_expat |  -.2614021   .0166771   -15.67   0.000    -.2940917   -.2287125
                |
       ind_year |
             2  |   .0919022   .0241862     3.80   0.000     .0444937    .1393108
             3  |   .6210602   .0282834    21.96   0.000     .5656206    .6764998
             4  |   .7724654   .0301964    25.58   0.000      .713276    .8316547
             5  |    .945085   .0320772    29.46   0.000      .882209    1.007961
             6  |   1.178582   .0335098    35.17   0.000     1.112897    1.244266
             7  |   1.398418   .0347587    40.23   0.000     1.330286     1.46655
             8  |   1.545957   .0365428    42.31   0.000     1.474327    1.617586
             9  |   1.678059   .0377901    44.40   0.000     1.603985    1.752133
            10  |   1.796174   .0389104    46.16   0.000     1.719904    1.872444
            11  |    1.92652   .0398289    48.37   0.000     1.848449    2.004591
            12  |   1.985858   .0410149    48.42   0.000     1.905463    2.066253
            13  |    2.06003   .0419295    49.13   0.000     1.977842    2.142219
            14  |   2.085709   .0426161    48.94   0.000     2.002175    2.169243
            15  |   2.057319   .0435826    47.21   0.000     1.971891    2.142748
            16  |   2.093585   .0445547    46.99   0.000     2.006252    2.180919
            17  |   2.131019   .0452897    47.05   0.000     2.042244    2.219793
            18  |    2.15876    .046441    46.48   0.000     2.067728    2.249791
            19  |   2.112802   .0468705    45.08   0.000     2.020928    2.204675
            20  |    2.09639   .0478293    43.83   0.000     2.002638    2.190143
            21  |   2.129377   .0488221    43.62   0.000     2.033678    2.225076
            22  |   2.157045   .0497443    43.36   0.000     2.059539    2.254551
            23  |   2.225351   .0508725    43.74   0.000     2.125634    2.325069
            24  |   1.648644   .0587733    28.05   0.000      1.53344    1.763849
            25  |   1.692251    .065236    25.94   0.000     1.564379    1.820124
            26  |   .3853492   .0618451     6.23   0.000     .2641236    .5065747
            27  |   .4967429   .0573868     8.66   0.000     .3842563    .6092295
            28  |   .7501762   .0545519    13.75   0.000     .6432463    .8571062
            29  |   .8693714   .0538951    16.13   0.000     .7637289    .9750139
            30  |   .9849577   .0533702    18.46   0.000     .8803442    1.089571
            31  |   1.114242   .0535744    20.80   0.000     1.009228    1.219256
            32  |   1.345319   .0528043    25.48   0.000     1.241815    1.448824
            33  |   1.470377   .0531201    27.68   0.000     1.366254      1.5745
            34  |    1.57488   .0534989    29.44   0.000     1.470014    1.679746
            35  |   1.662537   .0539511    30.82   0.000     1.556785     1.76829
            36  |   1.776533   .0545707    32.55   0.000     1.669566      1.8835
            37  |   1.865942   .0549884    33.93   0.000     1.758157    1.973728
            38  |   1.926336   .0554119    34.76   0.000     1.817721    2.034952
            39  |   1.960777   .0559929    35.02   0.000     1.851022    2.070531
            40  |   1.987474   .0564347    35.22   0.000     1.876854    2.098094
            41  |   2.032337   .0567599    35.81   0.000     1.921079    2.143595
            42  |   2.089314   .0571888    36.53   0.000     1.977215    2.201412
            43  |   2.151679   .0580616    37.06   0.000     2.037869    2.265488
            44  |   2.133198   .0583947    36.53   0.000     2.018736    2.247661
            45  |   2.174925   .0586903    37.06   0.000     2.059883    2.289966
            46  |   2.178202   .0591027    36.85   0.000     2.062352    2.294052
            47  |   2.225729   .0599975    37.10   0.000     2.108125    2.343334
            48  |   2.273893   .0602052    37.77   0.000     2.155882    2.391904
            49  |   2.035572   .0630214    32.30   0.000      1.91204    2.159103
            50  |   2.110874   .0663111    31.83   0.000     1.980895    2.240854
                |
        age_cat |
             2  |   .0930347   .0258866     3.59   0.000     .0422932    .1437763
             3  |   .1228044   .0278923     4.40   0.000     .0681314    .1774773
             4  |   .1470149   .0298042     4.93   0.000     .0885942    .2054356
             5  |    .102624   .0339685     3.02   0.003     .0360406    .1692073
             6  |   .0578079   .0395255     1.46   0.144    -.0196679    .1352837
                |
          _cons |   4.574827   .0417119   109.68   0.000     4.493065    4.656588
----------------+----------------------------------------------------------------
        sigma_u |  1.6022054
        sigma_e |  .92402382
            rho |   .7504094   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.3697                                         min =          1
     between = 0.1641                                         avg =       52.1
     overall = 0.2026                                         max =      4,150

                                                F(59,13202)       =     351.02
corr(u_i, Xb)  = 0.0560                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0834791   .0230195     3.63   0.000     .0383576    .1286007
during_domestic |  -.0268746   .0061267    -4.39   0.000    -.0388839   -.0148653
 after_domestic |  -.0085571   .0077684    -1.10   0.271    -.0237843    .0066701
   during_expat |   .0414216   .0094392     4.39   0.000     .0229195    .0599237
    after_expat |   .0482274   .0108812     4.43   0.000     .0268987    .0695562
                |
       ind_year |
             2  |   .1461937   .0150686     9.70   0.000      .116657    .1757304
             3  |    .336307    .017153    19.61   0.000     .3026846    .3699294
             4  |   .5273179    .018664    28.25   0.000     .4907339    .5639019
             5  |   .7072034   .0195769    36.12   0.000     .6688298    .7455769
             6  |   .8927747    .020602    43.33   0.000     .8523919    .9331575
             7  |   1.026843   .0213653    48.06   0.000     .9849637    1.068722
             8  |   1.113778   .0222006    50.17   0.000     1.070262    1.157295
             9  |   1.236769    .023007    53.76   0.000     1.191672    1.281866
            10  |   1.350323   .0240207    56.22   0.000     1.303239    1.397407
            11  |   1.430558   .0246576    58.02   0.000     1.382226    1.478891
            12  |   1.462109   .0252939    57.80   0.000      1.41253    1.511689
            13  |   1.524579   .0259658    58.71   0.000     1.473683    1.575476
            14  |   1.567901   .0264921    59.18   0.000     1.515972    1.619829
            15  |   1.629978   .0269022    60.59   0.000     1.577245     1.68271
            16  |   1.657086   .0276006    60.04   0.000     1.602985    1.711187
            17  |   1.708824   .0283145    60.35   0.000     1.653323    1.764324
            18  |   1.657524   .0285846    57.99   0.000     1.601495    1.713554
            19  |   1.690942   .0293909    57.53   0.000     1.633332    1.748553
            20  |   1.736368   .0300122    57.86   0.000      1.67754    1.795197
            21  |   1.752423   .0308204    56.86   0.000     1.692011    1.812835
            22  |   1.808064   .0312881    57.79   0.000     1.746735    1.869393
            23  |   1.860077   .0318059    58.48   0.000     1.797733    1.922422
            24  |    1.88572   .0317685    59.36   0.000      1.82345    1.947991
            25  |   1.881852   .0321341    58.56   0.000     1.818865     1.94484
            26  |  -.3476402   .0374192    -9.29   0.000    -.4209871   -.2742932
            27  |  -.2091826   .0365625    -5.72   0.000    -.2808503   -.1375149
            28  |   .0129335   .0351475     0.37   0.713    -.0559606    .0818276
            29  |   .2577977   .0345892     7.45   0.000     .1899978    .3255976
            30  |   .4491032   .0339066    13.25   0.000     .3826413    .5155651
            31  |   .6227795   .0340744    18.28   0.000     .5559887    .6895703
            32  |   .7861591   .0339471    23.16   0.000     .7196179    .8527003
            33  |   .8846489   .0339725    26.04   0.000     .8180578    .9512399
            34  |   1.032723   .0340657    30.32   0.000     .9659495    1.099497
            35  |   1.120509   .0340533    32.90   0.000     1.053759    1.187258
            36  |   1.186197   .0341531    34.73   0.000     1.119252    1.253142
            37  |   1.263543   .0343672    36.77   0.000     1.196179    1.330908
            38  |   1.343537   .0348985    38.50   0.000     1.275131    1.411943
            39  |   1.414596   .0351232    40.28   0.000     1.345749    1.483442
            40  |   1.520072   .0356795    42.60   0.000     1.450135    1.590009
            41  |    1.59151   .0355186    44.81   0.000     1.521888    1.661131
            42  |    1.65073   .0356451    46.31   0.000     1.580861      1.7206
            43  |   1.632324   .0361934    45.10   0.000      1.56138    1.703269
            44  |   1.690895   .0367807    45.97   0.000       1.6188    1.762991
            45  |   1.768981   .0369654    47.86   0.000     1.696523    1.841438
            46  |   1.783309   .0373747    47.71   0.000      1.71005    1.856569
            47  |   1.817745   .0372913    48.74   0.000     1.744649    1.890842
            48  |   1.857113   .0376311    49.35   0.000     1.783351    1.930875
            49  |   1.852918   .0385681    48.04   0.000     1.777319    1.928517
            50  |   1.879136   .0381723    49.23   0.000     1.804313    1.953959
                |
        age_cat |
             2  |   .6269734   .0190483    32.91   0.000      .589636    .6643109
             3  |    .696399   .0198109    35.15   0.000     .6575667    .7352312
             4  |   .7056508   .0208367    33.87   0.000      .664808    .7464937
             5  |   .6815243    .022954    29.69   0.000     .6365311    .7265175
             6  |   .6620416   .0260389    25.43   0.000     .6110017    .7130815
                |
          _cons |   7.145242   .0274213   260.57   0.000     7.091493    7.198992
----------------+----------------------------------------------------------------
        sigma_u |  1.1862269
        sigma_e |  .62443625
            rho |  .78302242   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3696823539100557

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.3697                                         min =          1
     between = 0.1641                                         avg =       52.1
     overall = 0.2026                                         max =      4,150

                                                F(59,13202)       =     351.02
corr(u_i, Xb)  = 0.0560                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0834791   .0230195     3.63   0.000     .0383576    .1286007
during_domestic |  -.0268746   .0061267    -4.39   0.000    -.0388839   -.0148653
 after_domestic |  -.0085571   .0077684    -1.10   0.271    -.0237843    .0066701
   during_expat |   .0414216   .0094392     4.39   0.000     .0229195    .0599237
    after_expat |   .0482274   .0108812     4.43   0.000     .0268987    .0695562
                |
       ind_year |
             2  |   .1461937   .0150686     9.70   0.000      .116657    .1757304
             3  |    .336307    .017153    19.61   0.000     .3026846    .3699294
             4  |   .5273179    .018664    28.25   0.000     .4907339    .5639019
             5  |   .7072034   .0195769    36.12   0.000     .6688298    .7455769
             6  |   .8927747    .020602    43.33   0.000     .8523919    .9331575
             7  |   1.026843   .0213653    48.06   0.000     .9849637    1.068722
             8  |   1.113778   .0222006    50.17   0.000     1.070262    1.157295
             9  |   1.236769    .023007    53.76   0.000     1.191672    1.281866
            10  |   1.350323   .0240207    56.22   0.000     1.303239    1.397407
            11  |   1.430558   .0246576    58.02   0.000     1.382226    1.478891
            12  |   1.462109   .0252939    57.80   0.000      1.41253    1.511689
            13  |   1.524579   .0259658    58.71   0.000     1.473683    1.575476
            14  |   1.567901   .0264921    59.18   0.000     1.515972    1.619829
            15  |   1.629978   .0269022    60.59   0.000     1.577245     1.68271
            16  |   1.657086   .0276006    60.04   0.000     1.602985    1.711187
            17  |   1.708824   .0283145    60.35   0.000     1.653323    1.764324
            18  |   1.657524   .0285846    57.99   0.000     1.601495    1.713554
            19  |   1.690942   .0293909    57.53   0.000     1.633332    1.748553
            20  |   1.736368   .0300122    57.86   0.000      1.67754    1.795197
            21  |   1.752423   .0308204    56.86   0.000     1.692011    1.812835
            22  |   1.808064   .0312881    57.79   0.000     1.746735    1.869393
            23  |   1.860077   .0318059    58.48   0.000     1.797733    1.922422
            24  |    1.88572   .0317685    59.36   0.000      1.82345    1.947991
            25  |   1.881852   .0321341    58.56   0.000     1.818865     1.94484
            26  |  -.3476402   .0374192    -9.29   0.000    -.4209871   -.2742932
            27  |  -.2091826   .0365625    -5.72   0.000    -.2808503   -.1375149
            28  |   .0129335   .0351475     0.37   0.713    -.0559606    .0818276
            29  |   .2577977   .0345892     7.45   0.000     .1899978    .3255976
            30  |   .4491032   .0339066    13.25   0.000     .3826413    .5155651
            31  |   .6227795   .0340744    18.28   0.000     .5559887    .6895703
            32  |   .7861591   .0339471    23.16   0.000     .7196179    .8527003
            33  |   .8846489   .0339725    26.04   0.000     .8180578    .9512399
            34  |   1.032723   .0340657    30.32   0.000     .9659495    1.099497
            35  |   1.120509   .0340533    32.90   0.000     1.053759    1.187258
            36  |   1.186197   .0341531    34.73   0.000     1.119252    1.253142
            37  |   1.263543   .0343672    36.77   0.000     1.196179    1.330908
            38  |   1.343537   .0348985    38.50   0.000     1.275131    1.411943
            39  |   1.414596   .0351232    40.28   0.000     1.345749    1.483442
            40  |   1.520072   .0356795    42.60   0.000     1.450135    1.590009
            41  |    1.59151   .0355186    44.81   0.000     1.521888    1.661131
            42  |    1.65073   .0356451    46.31   0.000     1.580861      1.7206
            43  |   1.632324   .0361934    45.10   0.000      1.56138    1.703269
            44  |   1.690895   .0367807    45.97   0.000       1.6188    1.762991
            45  |   1.768981   .0369654    47.86   0.000     1.696523    1.841438
            46  |   1.783309   .0373747    47.71   0.000      1.71005    1.856569
            47  |   1.817745   .0372913    48.74   0.000     1.744649    1.890842
            48  |   1.857113   .0376311    49.35   0.000     1.783351    1.930875
            49  |   1.852918   .0385681    48.04   0.000     1.777319    1.928517
            50  |   1.879136   .0381723    49.23   0.000     1.804313    1.953959
                |
        age_cat |
             2  |   .6269734   .0190483    32.91   0.000      .589636    .6643109
             3  |    .696399   .0198109    35.15   0.000     .6575667    .7352312
             4  |   .7056508   .0208367    33.87   0.000      .664808    .7464937
             5  |   .6815243    .022954    29.69   0.000     .6365311    .7265175
             6  |   .6620416   .0260389    25.43   0.000     .6110017    .7130815
                |
          _cons |   7.145242   .0274213   260.57   0.000     7.091493    7.198992
----------------+----------------------------------------------------------------
        sigma_u |  1.1862269
        sigma_e |  .62443625
            rho |  .78302242   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.0327                                         min =          1
     between = 0.1954                                         avg =       52.1
     overall = 0.1013                                         max =      4,150

                                                F(59,13202)       =      35.50
corr(u_i, Xb)  = 0.2429                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0192078   .0104893     1.83   0.067    -.0013527    .0397684
during_domestic |  -.0135859   .0027478    -4.94   0.000    -.0189719   -.0081999
 after_domestic |  -.0243643   .0034898    -6.98   0.000    -.0312048   -.0175238
   during_expat |  -.0025181    .004132    -0.61   0.542    -.0106173    .0055812
    after_expat |  -.0124947   .0042525    -2.94   0.003    -.0208302   -.0041592
                |
       ind_year |
             2  |  -.0136238   .0067958    -2.00   0.045    -.0269445   -.0003031
             3  |  -.0276477   .0076669    -3.61   0.000    -.0426759   -.0126195
             4  |  -.0391668   .0082525    -4.75   0.000     -.055343   -.0229907
             5  |  -.0406988   .0085625    -4.75   0.000    -.0574824   -.0239151
             6  |  -.0507702   .0088644    -5.73   0.000    -.0681457   -.0333947
             7  |  -.0485619   .0090146    -5.39   0.000    -.0662319    -.030892
             8  |  -.0664089   .0092114    -7.21   0.000    -.0844646   -.0483532
             9  |  -.0628806   .0094569    -6.65   0.000    -.0814174   -.0443438
            10  |  -.0612091   .0097037    -6.31   0.000    -.0802297   -.0421884
            11  |  -.0683226   .0100911    -6.77   0.000    -.0881027   -.0485425
            12  |  -.0693607   .0101893    -6.81   0.000    -.0893332   -.0493881
            13  |  -.0620986   .0103885    -5.98   0.000    -.0824615   -.0417357
            14  |  -.0478492   .0106939    -4.47   0.000    -.0688108   -.0268876
            15  |  -.0386324   .0108993    -3.54   0.000    -.0599966   -.0172681
            16  |  -.0145701   .0112195    -1.30   0.194     -.036562    .0074218
            17  |   .0033712   .0114185     0.30   0.768    -.0190107    .0257531
            18  |   .0113215    .011745     0.96   0.335    -.0117004    .0343433
            19  |   .0122615   .0117763     1.04   0.298    -.0108217    .0353448
            20  |   .0262927   .0120663     2.18   0.029      .002641    .0499444
            21  |   .0280264   .0122264     2.29   0.022     .0040609     .051992
            22  |     .03713   .0124246     2.99   0.003      .012776    .0614839
            23  |   .0249065   .0125286     1.99   0.047     .0003487    .0494643
            24  |  -.0403711   .0126495    -3.19   0.001     -.065166   -.0155762
            25  |  -.0664326   .0127781    -5.20   0.000    -.0914795   -.0413858
            26  |   .0877551   .0162673     5.39   0.000     .0558689    .1196413
            27  |   .0635065   .0153241     4.14   0.000     .0334691    .0935439
            28  |    .072866   .0145703     5.00   0.000     .0443061     .101426
            29  |   .0732776   .0142249     5.15   0.000     .0453947    .1011605
            30  |     .08245   .0140732     5.86   0.000     .0548645    .1100355
            31  |   .0679454   .0138853     4.89   0.000     .0407281    .0951626
            32  |   .0644396    .013802     4.67   0.000     .0373857    .0914934
            33  |   .0579574   .0137133     4.23   0.000     .0310774    .0848374
            34  |   .0554399   .0137184     4.04   0.000     .0285498      .08233
            35  |   .0583392    .013711     4.25   0.000     .0314637    .0852147
            36  |   .0532972   .0138743     3.84   0.000     .0261016    .0804927
            37  |   .0567357   .0139011     4.08   0.000     .0294875     .083984
            38  |   .0633138   .0139722     4.53   0.000     .0359263    .0907013
            39  |   .0632856   .0141157     4.48   0.000     .0356168    .0909544
            40  |   .0630283   .0142109     4.44   0.000     .0351729    .0908837
            41  |   .0776661   .0143871     5.40   0.000     .0494654    .1058668
            42  |   .0802553   .0145772     5.51   0.000     .0516818    .1088288
            43  |   .0892037   .0148681     6.00   0.000     .0600602    .1183473
            44  |   .0981864   .0150491     6.52   0.000      .068688    .1276848
            45  |   .1090096   .0150494     7.24   0.000     .0795105    .1385086
            46  |   .1152375   .0152726     7.55   0.000      .085301    .1451739
            47  |   .1210996   .0154906     7.82   0.000     .0907358    .1514633
            48  |   .1127759    .015644     7.21   0.000     .0821114    .1434404
            49  |  -.0625948   .0163302    -3.83   0.000    -.0946043   -.0305853
            50  |  -.1001195     .01646    -6.08   0.000    -.1323835   -.0678555
                |
        age_cat |
             2  |   .0576683   .0054371    10.61   0.000     .0470108    .0683258
             3  |   .0850463   .0058798    14.46   0.000     .0735211    .0965715
             4  |   .1214072   .0062613    19.39   0.000     .1091343    .1336802
             5  |   .1527782   .0073727    20.72   0.000     .1383266    .1672299
             6  |   .1738009   .0087847    19.78   0.000     .1565815    .1910202
                |
          _cons |   .2874109   .0098189    29.27   0.000     .2681646    .3066573
----------------+----------------------------------------------------------------
        sigma_u |  .38534859
        sigma_e |  .28813809
            rho |  .64139339   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .03267338031541

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    688,154
Group variable: id                              Number of groups  =     13,203

R-sq:                                           Obs per group:
     within  = 0.0327                                         min =          1
     between = 0.1954                                         avg =       52.1
     overall = 0.1013                                         max =      4,150

                                                F(59,13202)       =      35.50
corr(u_i, Xb)  = 0.2429                         Prob > F          =     0.0000

                                   (Std. Err. adjusted for 13,203 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0192078   .0104893     1.83   0.067    -.0013527    .0397684
during_domestic |  -.0135859   .0027478    -4.94   0.000    -.0189719   -.0081999
 after_domestic |  -.0243643   .0034898    -6.98   0.000    -.0312048   -.0175238
   during_expat |  -.0025181    .004132    -0.61   0.542    -.0106173    .0055812
    after_expat |  -.0124947   .0042525    -2.94   0.003    -.0208302   -.0041592
                |
       ind_year |
             2  |  -.0136238   .0067958    -2.00   0.045    -.0269445   -.0003031
             3  |  -.0276477   .0076669    -3.61   0.000    -.0426759   -.0126195
             4  |  -.0391668   .0082525    -4.75   0.000     -.055343   -.0229907
             5  |  -.0406988   .0085625    -4.75   0.000    -.0574824   -.0239151
             6  |  -.0507702   .0088644    -5.73   0.000    -.0681457   -.0333947
             7  |  -.0485619   .0090146    -5.39   0.000    -.0662319    -.030892
             8  |  -.0664089   .0092114    -7.21   0.000    -.0844646   -.0483532
             9  |  -.0628806   .0094569    -6.65   0.000    -.0814174   -.0443438
            10  |  -.0612091   .0097037    -6.31   0.000    -.0802297   -.0421884
            11  |  -.0683226   .0100911    -6.77   0.000    -.0881027   -.0485425
            12  |  -.0693607   .0101893    -6.81   0.000    -.0893332   -.0493881
            13  |  -.0620986   .0103885    -5.98   0.000    -.0824615   -.0417357
            14  |  -.0478492   .0106939    -4.47   0.000    -.0688108   -.0268876
            15  |  -.0386324   .0108993    -3.54   0.000    -.0599966   -.0172681
            16  |  -.0145701   .0112195    -1.30   0.194     -.036562    .0074218
            17  |   .0033712   .0114185     0.30   0.768    -.0190107    .0257531
            18  |   .0113215    .011745     0.96   0.335    -.0117004    .0343433
            19  |   .0122615   .0117763     1.04   0.298    -.0108217    .0353448
            20  |   .0262927   .0120663     2.18   0.029      .002641    .0499444
            21  |   .0280264   .0122264     2.29   0.022     .0040609     .051992
            22  |     .03713   .0124246     2.99   0.003      .012776    .0614839
            23  |   .0249065   .0125286     1.99   0.047     .0003487    .0494643
            24  |  -.0403711   .0126495    -3.19   0.001     -.065166   -.0155762
            25  |  -.0664326   .0127781    -5.20   0.000    -.0914795   -.0413858
            26  |   .0877551   .0162673     5.39   0.000     .0558689    .1196413
            27  |   .0635065   .0153241     4.14   0.000     .0334691    .0935439
            28  |    .072866   .0145703     5.00   0.000     .0443061     .101426
            29  |   .0732776   .0142249     5.15   0.000     .0453947    .1011605
            30  |     .08245   .0140732     5.86   0.000     .0548645    .1100355
            31  |   .0679454   .0138853     4.89   0.000     .0407281    .0951626
            32  |   .0644396    .013802     4.67   0.000     .0373857    .0914934
            33  |   .0579574   .0137133     4.23   0.000     .0310774    .0848374
            34  |   .0554399   .0137184     4.04   0.000     .0285498      .08233
            35  |   .0583392    .013711     4.25   0.000     .0314637    .0852147
            36  |   .0532972   .0138743     3.84   0.000     .0261016    .0804927
            37  |   .0567357   .0139011     4.08   0.000     .0294875     .083984
            38  |   .0633138   .0139722     4.53   0.000     .0359263    .0907013
            39  |   .0632856   .0141157     4.48   0.000     .0356168    .0909544
            40  |   .0630283   .0142109     4.44   0.000     .0351729    .0908837
            41  |   .0776661   .0143871     5.40   0.000     .0494654    .1058668
            42  |   .0802553   .0145772     5.51   0.000     .0516818    .1088288
            43  |   .0892037   .0148681     6.00   0.000     .0600602    .1183473
            44  |   .0981864   .0150491     6.52   0.000      .068688    .1276848
            45  |   .1090096   .0150494     7.24   0.000     .0795105    .1385086
            46  |   .1152375   .0152726     7.55   0.000      .085301    .1451739
            47  |   .1210996   .0154906     7.82   0.000     .0907358    .1514633
            48  |   .1127759    .015644     7.21   0.000     .0821114    .1434404
            49  |  -.0625948   .0163302    -3.83   0.000    -.0946043   -.0305853
            50  |  -.1001195     .01646    -6.08   0.000    -.1323835   -.0678555
                |
        age_cat |
             2  |   .0576683   .0054371    10.61   0.000     .0470108    .0683258
             3  |   .0850463   .0058798    14.46   0.000     .0735211    .0965715
             4  |   .1214072   .0062613    19.39   0.000     .1091343    .1336802
             5  |   .1527782   .0073727    20.72   0.000     .1383266    .1672299
             6  |   .1738009   .0087847    19.78   0.000     .1565815    .1910202
                |
          _cons |   .2874109   .0098189    29.27   0.000     .2681646    .3066573
----------------+----------------------------------------------------------------
        sigma_u |  .38534859
        sigma_e |  .28813809
            rho |  .64139339   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    574,978
Group variable: id                              Number of groups  =     12,444

R-sq:                                           Obs per group:
     within  = 0.0333                                         min =          1
     between = 0.0027                                         avg =       46.2
     overall = 0.0236                                         max =      3,652

                                                F(56,12443)       =      95.75
corr(u_i, Xb)  = -0.1175                        Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,444 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0043132   .0203005     0.21   0.832    -.0354789    .0441054
during_domestic |  -.0101811   .0056604    -1.80   0.072    -.0212763    .0009141
 after_domestic |  -.0128692   .0060661    -2.12   0.034    -.0247597   -.0009787
   during_expat |  -.0221309   .0086065    -2.57   0.010     -.039001   -.0052609
    after_expat |  -.0062155   .0072561    -0.86   0.392    -.0204387    .0080077
                |
       ind_year |
             3  |  -.0510085    .024892    -2.05   0.040    -.0998006   -.0022164
             4  |  -.0192709   .0246049    -0.78   0.434    -.0675004    .0289586
             5  |  -.0057595   .0248723    -0.23   0.817    -.0545131    .0429942
             6  |  -.0138805    .024762    -0.56   0.575    -.0624178    .0346568
             7  |   .0851308    .024656     3.45   0.001     .0368013    .1334604
             8  |  -.0217781   .0249509    -0.87   0.383    -.0706857    .0271296
             9  |  -.0011883   .0250887    -0.05   0.962     -.050366    .0479894
            10  |  -.0402434   .0246197    -1.63   0.102    -.0885017    .0080149
            11  |   .0185749    .025088     0.74   0.459    -.0306015    .0677513
            12  |   .0005397   .0252636     0.02   0.983    -.0489809    .0500603
            13  |  -.1019776   .0254204    -4.01   0.000    -.1518055   -.0521496
            14  |  -.1894724   .0252101    -7.52   0.000    -.2388882   -.1400566
            15  |  -.0828789   .0253479    -3.27   0.001    -.1325647   -.0331931
            16  |  -.0777193    .026062    -2.98   0.003    -.1288049   -.0266337
            17  |  -.1033944   .0262924    -3.93   0.000    -.1549316   -.0518571
            18  |  -.0666176   .0260133    -2.56   0.010    -.1176076   -.0156276
            19  |   -.122142   .0261666    -4.67   0.000    -.1734325   -.0708515
            20  |  -.0461243     .02618    -1.76   0.078    -.0974411    .0051925
            21  |  -.1778351   .0263896    -6.74   0.000    -.2295628   -.1261074
            22  |   .1364474   .0269381     5.07   0.000     .0836446    .1892501
            23  |  -.1587929    .027444    -5.79   0.000    -.2125874   -.1049984
            24  |  -.5037552   .0289337   -17.41   0.000    -.5604697   -.4470406
            25  |  -.1285055   .0345554    -3.72   0.000    -.1962394   -.0607716
            27  |  -.0337212   .0361998    -0.93   0.352    -.1046784     .037236
            28  |  -.2673526   .0338339    -7.90   0.000    -.3336723   -.2010329
            29  |  -.0950603   .0323214    -2.94   0.003    -.1584153   -.0317052
            30  |  -.2146602   .0318649    -6.74   0.000    -.2771202   -.1522001
            31  |  -.0780189   .0315105    -2.48   0.013    -.1397845   -.0162534
            32  |  -.1869413   .0314305    -5.95   0.000      -.24855   -.1253326
            33  |   -.057192   .0309675    -1.85   0.065    -.1178932    .0035091
            34  |  -.1822951   .0307613    -5.93   0.000     -.242592   -.1219982
            35  |  -.1225768   .0309146    -3.97   0.000    -.1831742   -.0619795
            36  |  -.1292931    .031046    -4.16   0.000     -.190148   -.0684382
            37  |  -.1958485   .0312522    -6.27   0.000    -.2571076   -.1345895
            38  |  -.1360578   .0312666    -4.35   0.000    -.1973453   -.0747704
            39  |  -.2360985   .0312827    -7.55   0.000    -.2974173   -.1747796
            40  |  -.1876415   .0314013    -5.98   0.000    -.2491928   -.1260902
            41  |  -.2249863   .0321747    -6.99   0.000    -.2880537   -.1619189
            42  |  -.1739839   .0324223    -5.37   0.000    -.2375366   -.1104312
            43  |  -.0877246    .032017    -2.74   0.006     -.150483   -.0249663
            44  |  -.1423935   .0324732    -4.38   0.000    -.2060459   -.0787411
            45  |  -.3638199   .0322231   -11.29   0.000    -.4269822   -.3006576
            46  |  -.2170042   .0324228    -6.69   0.000     -.280558   -.1534504
            47  |  -.0223986    .033585    -0.67   0.505    -.0882305    .0434333
            48  |  -.3421225   .0332912   -10.28   0.000    -.4073784   -.2768666
            49  |   -.814696   .0332558   -24.50   0.000    -.8798826   -.7495095
            50  |   -.255323   .0419616    -6.08   0.000    -.3375743   -.1730717
                |
        age_cat |
             3  |  -.1260417   .0190147    -6.63   0.000    -.1633135   -.0887699
             4  |  -.2958784   .0175164   -16.89   0.000    -.3302132   -.2615435
             5  |  -.3867083   .0182548   -21.18   0.000    -.4224906    -.350926
             6  |  -.4442051   .0194744   -22.81   0.000    -.4823779   -.4060323
                |
          _cons |   .3760048   .0265217    14.18   0.000     .3240182    .4279914
----------------+----------------------------------------------------------------
        sigma_u |  .40645404
        sigma_e |  .84205171
            rho |  .18896627   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0332512697785416

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    574,978
Group variable: id                              Number of groups  =     12,444

R-sq:                                           Obs per group:
     within  = 0.0333                                         min =          1
     between = 0.0027                                         avg =       46.2
     overall = 0.0236                                         max =      3,652

                                                F(56,12443)       =      95.75
corr(u_i, Xb)  = -0.1175                        Prob > F          =     0.0000

                                   (Std. Err. adjusted for 12,444 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0043132   .0203005     0.21   0.832    -.0354789    .0441054
during_domestic |  -.0101811   .0056604    -1.80   0.072    -.0212763    .0009141
 after_domestic |  -.0128692   .0060661    -2.12   0.034    -.0247597   -.0009787
   during_expat |  -.0221309   .0086065    -2.57   0.010     -.039001   -.0052609
    after_expat |  -.0062155   .0072561    -0.86   0.392    -.0204387    .0080077
                |
       ind_year |
             3  |  -.0510085    .024892    -2.05   0.040    -.0998006   -.0022164
             4  |  -.0192709   .0246049    -0.78   0.434    -.0675004    .0289586
             5  |  -.0057595   .0248723    -0.23   0.817    -.0545131    .0429942
             6  |  -.0138805    .024762    -0.56   0.575    -.0624178    .0346568
             7  |   .0851308    .024656     3.45   0.001     .0368013    .1334604
             8  |  -.0217781   .0249509    -0.87   0.383    -.0706857    .0271296
             9  |  -.0011883   .0250887    -0.05   0.962     -.050366    .0479894
            10  |  -.0402434   .0246197    -1.63   0.102    -.0885017    .0080149
            11  |   .0185749    .025088     0.74   0.459    -.0306015    .0677513
            12  |   .0005397   .0252636     0.02   0.983    -.0489809    .0500603
            13  |  -.1019776   .0254204    -4.01   0.000    -.1518055   -.0521496
            14  |  -.1894724   .0252101    -7.52   0.000    -.2388882   -.1400566
            15  |  -.0828789   .0253479    -3.27   0.001    -.1325647   -.0331931
            16  |  -.0777193    .026062    -2.98   0.003    -.1288049   -.0266337
            17  |  -.1033944   .0262924    -3.93   0.000    -.1549316   -.0518571
            18  |  -.0666176   .0260133    -2.56   0.010    -.1176076   -.0156276
            19  |   -.122142   .0261666    -4.67   0.000    -.1734325   -.0708515
            20  |  -.0461243     .02618    -1.76   0.078    -.0974411    .0051925
            21  |  -.1778351   .0263896    -6.74   0.000    -.2295628   -.1261074
            22  |   .1364474   .0269381     5.07   0.000     .0836446    .1892501
            23  |  -.1587929    .027444    -5.79   0.000    -.2125874   -.1049984
            24  |  -.5037552   .0289337   -17.41   0.000    -.5604697   -.4470406
            25  |  -.1285055   .0345554    -3.72   0.000    -.1962394   -.0607716
            27  |  -.0337212   .0361998    -0.93   0.352    -.1046784     .037236
            28  |  -.2673526   .0338339    -7.90   0.000    -.3336723   -.2010329
            29  |  -.0950603   .0323214    -2.94   0.003    -.1584153   -.0317052
            30  |  -.2146602   .0318649    -6.74   0.000    -.2771202   -.1522001
            31  |  -.0780189   .0315105    -2.48   0.013    -.1397845   -.0162534
            32  |  -.1869413   .0314305    -5.95   0.000      -.24855   -.1253326
            33  |   -.057192   .0309675    -1.85   0.065    -.1178932    .0035091
            34  |  -.1822951   .0307613    -5.93   0.000     -.242592   -.1219982
            35  |  -.1225768   .0309146    -3.97   0.000    -.1831742   -.0619795
            36  |  -.1292931    .031046    -4.16   0.000     -.190148   -.0684382
            37  |  -.1958485   .0312522    -6.27   0.000    -.2571076   -.1345895
            38  |  -.1360578   .0312666    -4.35   0.000    -.1973453   -.0747704
            39  |  -.2360985   .0312827    -7.55   0.000    -.2974173   -.1747796
            40  |  -.1876415   .0314013    -5.98   0.000    -.2491928   -.1260902
            41  |  -.2249863   .0321747    -6.99   0.000    -.2880537   -.1619189
            42  |  -.1739839   .0324223    -5.37   0.000    -.2375366   -.1104312
            43  |  -.0877246    .032017    -2.74   0.006     -.150483   -.0249663
            44  |  -.1423935   .0324732    -4.38   0.000    -.2060459   -.0787411
            45  |  -.3638199   .0322231   -11.29   0.000    -.4269822   -.3006576
            46  |  -.2170042   .0324228    -6.69   0.000     -.280558   -.1534504
            47  |  -.0223986    .033585    -0.67   0.505    -.0882305    .0434333
            48  |  -.3421225   .0332912   -10.28   0.000    -.4073784   -.2768666
            49  |   -.814696   .0332558   -24.50   0.000    -.8798826   -.7495095
            50  |   -.255323   .0419616    -6.08   0.000    -.3375743   -.1730717
                |
        age_cat |
             3  |  -.1260417   .0190147    -6.63   0.000    -.1633135   -.0887699
             4  |  -.2958784   .0175164   -16.89   0.000    -.3302132   -.2615435
             5  |  -.3867083   .0182548   -21.18   0.000    -.4224906    -.350926
             6  |  -.4442051   .0194744   -22.81   0.000    -.4823779   -.4060323
                |
          _cons |   .3760048   .0265217    14.18   0.000     .3240182    .4279914
----------------+----------------------------------------------------------------
        sigma_u |  .40645404
        sigma_e |  .84205171
            rho |  .18896627   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.0844                                         min =          1
     between = 0.0199                                         avg =       44.4
     overall = 0.0405                                         max =      1,475

                                                F(34,4896)        =      36.96
corr(u_i, Xb)  = 0.0319                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0086864   .0473435    -0.18   0.854     -.101501    .0841282
during_domestic |  -.1241873   .0131497    -9.44   0.000    -.1499666    -.098408
 after_domestic |  -.2080704   .0192794   -10.79   0.000    -.2458667   -.1702741
   during_expat |   -.023295   .0177712    -1.31   0.190    -.0581344    .0115444
    after_expat |  -.0208469   .0207731    -1.00   0.316    -.0615714    .0198777
                |
       ind_year |
            27  |  -.1493607   .0205025    -7.29   0.000    -.1895548   -.1091666
            28  |  -.2255694    .025863    -8.72   0.000    -.2762725   -.1748663
            29  |  -.2920007   .0293924    -9.93   0.000     -.349623   -.2343784
            30  |  -.3233308   .0323808    -9.99   0.000    -.3868118   -.2598498
            31  |  -.3619595   .0356808   -10.14   0.000    -.4319098   -.2920092
            32  |  -.3773987   .0385128    -9.80   0.000    -.4529011   -.3018964
            33  |  -.4231957   .0413857   -10.23   0.000    -.5043303   -.3420611
            34  |  -.4466587   .0441315   -10.12   0.000    -.5331762   -.3601412
            35  |  -.4834238   .0464744   -10.40   0.000    -.5745346   -.3923131
            36  |  -.5390542   .0482159   -11.18   0.000    -.6335789   -.4445294
            37  |   -.558411   .0496543   -11.25   0.000    -.6557556   -.4610663
            38  |  -.6027494   .0514958   -11.70   0.000    -.7037042   -.5017946
            39  |  -.6259763   .0530104   -11.81   0.000    -.7299004   -.5220522
            40  |  -.6304135   .0546195   -11.54   0.000    -.7374922   -.5233347
            41  |  -.6127337   .0555943   -11.02   0.000    -.7217235   -.5037439
            42  |  -.6179055    .056791   -10.88   0.000    -.7292414   -.5065696
            43  |  -.7399316   .0583453   -12.68   0.000    -.8543146   -.6255486
            44  |  -.7468885   .0600795   -12.43   0.000    -.8646713   -.6291057
            45  |  -.7093817    .060768   -11.67   0.000    -.8285144   -.5902491
            46  |  -.7052019   .0617168   -11.43   0.000    -.8261944   -.5842093
            47  |  -.6867161   .0624555   -11.00   0.000    -.8091568   -.5642753
            48  |  -.6652893    .063056   -10.55   0.000    -.7889073   -.5416712
            49  |  -.6143288   .0640882    -9.59   0.000    -.7399705   -.4886871
            50  |  -.5730881   .0638363    -8.98   0.000    -.6982359   -.4479403
                |
        age_cat |
             2  |   .3175251   .0282131    11.25   0.000     .2622147    .3728355
             3  |   .6168168   .0313587    19.67   0.000     .5553397    .6782938
             4  |   .9064645   .0366689    24.72   0.000      .834577    .9783521
             5  |   1.159821   .0441344    26.28   0.000     1.073297    1.246344
             6  |   1.351567   .0521851    25.90   0.000     1.249261    1.453874
                |
          _cons |   3.641299   .0410047    88.80   0.000     3.560912    3.721687
----------------+----------------------------------------------------------------
        sigma_u |  1.1030178
        sigma_e |  .65595633
            rho |  .73873845   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0843744806764767

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.0844                                         min =          1
     between = 0.0199                                         avg =       44.4
     overall = 0.0405                                         max =      1,475

                                                F(34,4896)        =      36.96
corr(u_i, Xb)  = 0.0319                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0086864   .0473435    -0.18   0.854     -.101501    .0841282
during_domestic |  -.1241873   .0131497    -9.44   0.000    -.1499666    -.098408
 after_domestic |  -.2080704   .0192794   -10.79   0.000    -.2458667   -.1702741
   during_expat |   -.023295   .0177712    -1.31   0.190    -.0581344    .0115444
    after_expat |  -.0208469   .0207731    -1.00   0.316    -.0615714    .0198777
                |
       ind_year |
            27  |  -.1493607   .0205025    -7.29   0.000    -.1895548   -.1091666
            28  |  -.2255694    .025863    -8.72   0.000    -.2762725   -.1748663
            29  |  -.2920007   .0293924    -9.93   0.000     -.349623   -.2343784
            30  |  -.3233308   .0323808    -9.99   0.000    -.3868118   -.2598498
            31  |  -.3619595   .0356808   -10.14   0.000    -.4319098   -.2920092
            32  |  -.3773987   .0385128    -9.80   0.000    -.4529011   -.3018964
            33  |  -.4231957   .0413857   -10.23   0.000    -.5043303   -.3420611
            34  |  -.4466587   .0441315   -10.12   0.000    -.5331762   -.3601412
            35  |  -.4834238   .0464744   -10.40   0.000    -.5745346   -.3923131
            36  |  -.5390542   .0482159   -11.18   0.000    -.6335789   -.4445294
            37  |   -.558411   .0496543   -11.25   0.000    -.6557556   -.4610663
            38  |  -.6027494   .0514958   -11.70   0.000    -.7037042   -.5017946
            39  |  -.6259763   .0530104   -11.81   0.000    -.7299004   -.5220522
            40  |  -.6304135   .0546195   -11.54   0.000    -.7374922   -.5233347
            41  |  -.6127337   .0555943   -11.02   0.000    -.7217235   -.5037439
            42  |  -.6179055    .056791   -10.88   0.000    -.7292414   -.5065696
            43  |  -.7399316   .0583453   -12.68   0.000    -.8543146   -.6255486
            44  |  -.7468885   .0600795   -12.43   0.000    -.8646713   -.6291057
            45  |  -.7093817    .060768   -11.67   0.000    -.8285144   -.5902491
            46  |  -.7052019   .0617168   -11.43   0.000    -.8261944   -.5842093
            47  |  -.6867161   .0624555   -11.00   0.000    -.8091568   -.5642753
            48  |  -.6652893    .063056   -10.55   0.000    -.7889073   -.5416712
            49  |  -.6143288   .0640882    -9.59   0.000    -.7399705   -.4886871
            50  |  -.5730881   .0638363    -8.98   0.000    -.6982359   -.4479403
                |
        age_cat |
             2  |   .3175251   .0282131    11.25   0.000     .2622147    .3728355
             3  |   .6168168   .0313587    19.67   0.000     .5553397    .6782938
             4  |   .9064645   .0366689    24.72   0.000      .834577    .9783521
             5  |   1.159821   .0441344    26.28   0.000     1.073297    1.246344
             6  |   1.351567   .0521851    25.90   0.000     1.249261    1.453874
                |
          _cons |   3.641299   .0410047    88.80   0.000     3.560912    3.721687
----------------+----------------------------------------------------------------
        sigma_u |  1.1030178
        sigma_e |  .65595633
            rho |  .73873845   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    204,053
Group variable: id                              Number of groups  =      4,769

R-sq:                                           Obs per group:
     within  = 0.1824                                         min =          1
     between = 0.0830                                         avg =       42.8
     overall = 0.0688                                         max =      1,416

                                                F(34,4768)        =      62.01
corr(u_i, Xb)  = 0.0690                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,769 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0654462   .0743611     0.88   0.379    -.0803359    .2112283
during_domestic |  -.1168707   .0204389    -5.72   0.000    -.1569403    -.076801
 after_domestic |  -.1902221   .0260652    -7.30   0.000    -.2413219   -.1391224
   during_expat |  -.0881882   .0259454    -3.40   0.001    -.1390531   -.0373232
    after_expat |  -.1562671   .0283215    -5.52   0.000    -.2117903    -.100744
                |
       ind_year |
            27  |  -.0541031   .0362756    -1.49   0.136    -.1252199    .0170138
            28  |   .0881339   .0432425     2.04   0.042     .0033587    .1729091
            29  |   .1160425    .048771     2.38   0.017     .0204288    .2116563
            30  |   .1775552   .0536688     3.31   0.001     .0723396    .2827708
            31  |   .2685557   .0582341     4.61   0.000     .1543899    .3827215
            32  |   .4574069   .0622884     7.34   0.000     .3352929     .579521
            33  |   .5228439   .0665291     7.86   0.000     .3924161    .6532716
            34  |   .5859202    .070245     8.34   0.000     .4482076    .7236328
            35  |   .6308481   .0734514     8.59   0.000     .4868495    .7748466
            36  |   .6773713   .0767599     8.82   0.000     .5268864    .8278561
            37  |   .7255829   .0790668     9.18   0.000     .5705754    .8805904
            38  |   .7425389   .0812819     9.14   0.000     .5831889     .901889
            39  |   .7543651   .0828088     9.11   0.000     .5920215    .9167086
            40  |   .7598694    .084847     8.96   0.000       .59353    .9262088
            41  |   .8234259   .0866683     9.50   0.000      .653516    .9933358
            42  |   .8728523   .0882991     9.89   0.000     .6997453    1.045959
            43  |   .8136278   .0901532     9.02   0.000     .6368859    .9903697
            44  |   .7921901   .0921282     8.60   0.000     .6115763    .9728039
            45  |   .8706406   .0929688     9.36   0.000     .6883789    1.052902
            46  |    .873682   .0939613     9.30   0.000     .6894744     1.05789
            47  |     .95992   .0951934    10.08   0.000      .773297    1.146543
            48  |   1.033559   .0961372    10.75   0.000     .8450861    1.222032
            49  |   .9600884   .0992806     9.67   0.000     .7654527    1.154724
            50  |   1.078038   .1014289    10.63   0.000     .8791907    1.276886
                |
        age_cat |
             2  |   .4411497   .0481435     9.16   0.000     .3467662    .5355331
             3  |   .7881811   .0533416    14.78   0.000      .683607    .8927553
             4  |   1.130577   .0597151    18.93   0.000     1.013507    1.247646
             5  |   1.363128   .0701527    19.43   0.000     1.225597     1.50066
             6  |   1.537272   .0819367    18.76   0.000     1.376639    1.697906
                |
          _cons |   8.841499   .0689671   128.20   0.000     8.706292    8.976707
----------------+----------------------------------------------------------------
        sigma_u |  2.0344116
        sigma_e |  .97219516
            rho |  .81409038   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .182378758609569

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    204,053
Group variable: id                              Number of groups  =      4,769

R-sq:                                           Obs per group:
     within  = 0.1824                                         min =          1
     between = 0.0830                                         avg =       42.8
     overall = 0.0688                                         max =      1,416

                                                F(34,4768)        =      62.01
corr(u_i, Xb)  = 0.0690                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,769 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0654462   .0743611     0.88   0.379    -.0803359    .2112283
during_domestic |  -.1168707   .0204389    -5.72   0.000    -.1569403    -.076801
 after_domestic |  -.1902221   .0260652    -7.30   0.000    -.2413219   -.1391224
   during_expat |  -.0881882   .0259454    -3.40   0.001    -.1390531   -.0373232
    after_expat |  -.1562671   .0283215    -5.52   0.000    -.2117903    -.100744
                |
       ind_year |
            27  |  -.0541031   .0362756    -1.49   0.136    -.1252199    .0170138
            28  |   .0881339   .0432425     2.04   0.042     .0033587    .1729091
            29  |   .1160425    .048771     2.38   0.017     .0204288    .2116563
            30  |   .1775552   .0536688     3.31   0.001     .0723396    .2827708
            31  |   .2685557   .0582341     4.61   0.000     .1543899    .3827215
            32  |   .4574069   .0622884     7.34   0.000     .3352929     .579521
            33  |   .5228439   .0665291     7.86   0.000     .3924161    .6532716
            34  |   .5859202    .070245     8.34   0.000     .4482076    .7236328
            35  |   .6308481   .0734514     8.59   0.000     .4868495    .7748466
            36  |   .6773713   .0767599     8.82   0.000     .5268864    .8278561
            37  |   .7255829   .0790668     9.18   0.000     .5705754    .8805904
            38  |   .7425389   .0812819     9.14   0.000     .5831889     .901889
            39  |   .7543651   .0828088     9.11   0.000     .5920215    .9167086
            40  |   .7598694    .084847     8.96   0.000       .59353    .9262088
            41  |   .8234259   .0866683     9.50   0.000      .653516    .9933358
            42  |   .8728523   .0882991     9.89   0.000     .6997453    1.045959
            43  |   .8136278   .0901532     9.02   0.000     .6368859    .9903697
            44  |   .7921901   .0921282     8.60   0.000     .6115763    .9728039
            45  |   .8706406   .0929688     9.36   0.000     .6883789    1.052902
            46  |    .873682   .0939613     9.30   0.000     .6894744     1.05789
            47  |     .95992   .0951934    10.08   0.000      .773297    1.146543
            48  |   1.033559   .0961372    10.75   0.000     .8450861    1.222032
            49  |   .9600884   .0992806     9.67   0.000     .7654527    1.154724
            50  |   1.078038   .1014289    10.63   0.000     .8791907    1.276886
                |
        age_cat |
             2  |   .4411497   .0481435     9.16   0.000     .3467662    .5355331
             3  |   .7881811   .0533416    14.78   0.000      .683607    .8927553
             4  |   1.130577   .0597151    18.93   0.000     1.013507    1.247646
             5  |   1.363128   .0701527    19.43   0.000     1.225597     1.50066
             6  |   1.537272   .0819367    18.76   0.000     1.376639    1.697906
                |
          _cons |   8.841499   .0689671   128.20   0.000     8.706292    8.976707
----------------+----------------------------------------------------------------
        sigma_u |  2.0344116
        sigma_e |  .97219516
            rho |  .81409038   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.3677                                         min =          1
     between = 0.1480                                         avg =       44.4
     overall = 0.1462                                         max =      1,475

                                                F(34,4896)        =     169.38
corr(u_i, Xb)  = 0.0651                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0583916   .0561839     1.04   0.299    -.0517541    .1685373
during_domestic |  -.1842443   .0152599   -12.07   0.000    -.2141606   -.1543279
 after_domestic |  -.2214967   .0208919   -10.60   0.000    -.2624541   -.1805392
   during_expat |   .0426651   .0201789     2.11   0.035     .0031054    .0822247
    after_expat |   .0723316    .023813     3.04   0.002     .0256474    .1190158
                |
       ind_year |
            27  |   -.009474   .0288595    -0.33   0.743    -.0660516    .0471037
            28  |   .1326332   .0332048     3.99   0.000      .067537    .1977295
            29  |   .3057808   .0372708     8.20   0.000     .2327132    .3788483
            30  |   .4455498   .0403777    11.03   0.000     .3663914    .5247082
            31  |   .5706738   .0437581    13.04   0.000     .4848883    .6564592
            32  |   .7011487   .0468416    14.97   0.000     .6093181    .7929793
            33  |   .7389003   .0501535    14.73   0.000     .6405768    .8372238
            34  |   .8585712   .0528592    16.24   0.000     .7549436    .9621989
            35  |   .9031272   .0557886    16.19   0.000     .7937564    1.012498
            36  |   .8971086   .0579554    15.48   0.000       .78349    1.010727
            37  |    .947579   .0596326    15.89   0.000     .8306723    1.064486
            38  |   .9746234   .0619952    15.72   0.000      .853085    1.096162
            39  |   1.012107   .0636155    15.91   0.000     .8873925    1.136822
            40  |   1.112312   .0659599    16.86   0.000     .9830007    1.241623
            41  |   1.191017   .0663767    17.94   0.000     1.060889    1.321145
            42  |   1.238704   .0681279    18.18   0.000     1.105143    1.372265
            43  |   1.090038   .0692367    15.74   0.000     .9543029    1.225773
            44  |    1.13963   .0715197    15.93   0.000     .9994193    1.279841
            45  |   1.262141   .0725318    17.40   0.000     1.119946    1.404336
            46  |   1.275703   .0740016    17.24   0.000     1.130626    1.420779
            47  |   1.335389    .074951    17.82   0.000     1.188452    1.482327
            48  |   1.401175   .0765923    18.29   0.000     1.251019     1.55133
            49  |   1.444119   .0777406    18.58   0.000     1.291713    1.596526
            50  |   1.519173   .0772354    19.67   0.000     1.367757    1.670589
                |
        age_cat |
             2  |   .9543586   .0421913    22.62   0.000     .8716447    1.037072
             3  |   1.356666   .0441236    30.75   0.000     1.270164    1.443168
             4  |   1.688354   .0483479    34.92   0.000     1.593571    1.783138
             5  |   1.957369   .0554225    35.32   0.000     1.848716    2.066022
             6  |    2.17532   .0643483    33.81   0.000     2.049168    2.301472
                |
          _cons |   10.34521   .0535941   193.03   0.000     10.24014    10.45028
----------------+----------------------------------------------------------------
        sigma_u |  1.5988083
        sigma_e |  .79353758
            rho |  .80234663   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3676699302498884

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.3677                                         min =          1
     between = 0.1480                                         avg =       44.4
     overall = 0.1462                                         max =      1,475

                                                F(34,4896)        =     169.38
corr(u_i, Xb)  = 0.0651                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0583916   .0561839     1.04   0.299    -.0517541    .1685373
during_domestic |  -.1842443   .0152599   -12.07   0.000    -.2141606   -.1543279
 after_domestic |  -.2214967   .0208919   -10.60   0.000    -.2624541   -.1805392
   during_expat |   .0426651   .0201789     2.11   0.035     .0031054    .0822247
    after_expat |   .0723316    .023813     3.04   0.002     .0256474    .1190158
                |
       ind_year |
            27  |   -.009474   .0288595    -0.33   0.743    -.0660516    .0471037
            28  |   .1326332   .0332048     3.99   0.000      .067537    .1977295
            29  |   .3057808   .0372708     8.20   0.000     .2327132    .3788483
            30  |   .4455498   .0403777    11.03   0.000     .3663914    .5247082
            31  |   .5706738   .0437581    13.04   0.000     .4848883    .6564592
            32  |   .7011487   .0468416    14.97   0.000     .6093181    .7929793
            33  |   .7389003   .0501535    14.73   0.000     .6405768    .8372238
            34  |   .8585712   .0528592    16.24   0.000     .7549436    .9621989
            35  |   .9031272   .0557886    16.19   0.000     .7937564    1.012498
            36  |   .8971086   .0579554    15.48   0.000       .78349    1.010727
            37  |    .947579   .0596326    15.89   0.000     .8306723    1.064486
            38  |   .9746234   .0619952    15.72   0.000      .853085    1.096162
            39  |   1.012107   .0636155    15.91   0.000     .8873925    1.136822
            40  |   1.112312   .0659599    16.86   0.000     .9830007    1.241623
            41  |   1.191017   .0663767    17.94   0.000     1.060889    1.321145
            42  |   1.238704   .0681279    18.18   0.000     1.105143    1.372265
            43  |   1.090038   .0692367    15.74   0.000     .9543029    1.225773
            44  |    1.13963   .0715197    15.93   0.000     .9994193    1.279841
            45  |   1.262141   .0725318    17.40   0.000     1.119946    1.404336
            46  |   1.275703   .0740016    17.24   0.000     1.130626    1.420779
            47  |   1.335389    .074951    17.82   0.000     1.188452    1.482327
            48  |   1.401175   .0765923    18.29   0.000     1.251019     1.55133
            49  |   1.444119   .0777406    18.58   0.000     1.291713    1.596526
            50  |   1.519173   .0772354    19.67   0.000     1.367757    1.670589
                |
        age_cat |
             2  |   .9543586   .0421913    22.62   0.000     .8716447    1.037072
             3  |   1.356666   .0441236    30.75   0.000     1.270164    1.443168
             4  |   1.688354   .0483479    34.92   0.000     1.593571    1.783138
             5  |   1.957369   .0554225    35.32   0.000     1.848716    2.066022
             6  |    2.17532   .0643483    33.81   0.000     2.049168    2.301472
                |
          _cons |   10.34521   .0535941   193.03   0.000     10.24014    10.45028
----------------+----------------------------------------------------------------
        sigma_u |  1.5988083
        sigma_e |  .79353758
            rho |  .80234663   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    204,053
Group variable: id                              Number of groups  =      4,769

R-sq:                                           Obs per group:
     within  = 0.1679                                         min =          1
     between = 0.1049                                         avg =       42.8
     overall = 0.1001                                         max =      1,416

                                                F(34,4768)        =      57.64
corr(u_i, Xb)  = 0.0671                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,769 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0471998   .0601617     0.78   0.433    -.0707449    .1651444
during_domestic |  -.0021221    .016905    -0.13   0.900    -.0352636    .0310195
 after_domestic |    .007907   .0205511     0.38   0.700    -.0323826    .0481965
   during_expat |  -.0715231   .0215811    -3.31   0.001     -.113832   -.0292142
    after_expat |  -.1469471   .0213216    -6.89   0.000    -.1887473   -.1051468
                |
       ind_year |
            27  |   .1016942   .0314368     3.23   0.001     .0400637    .1633248
            28  |   .3281424   .0365352     8.98   0.000     .2565166    .3997682
            29  |   .4307361   .0406189    10.60   0.000     .3511043    .5103679
            30  |    .518431   .0437429    11.85   0.000     .4326747    .6041872
            31  |   .6436571   .0469864    13.70   0.000     .5515422    .7357721
            32  |   .8538445   .0499231    17.10   0.000     .7559722    .9517167
            33  |   .9642363   .0529612    18.21   0.000     .8604078    1.068065
            34  |   1.051074   .0557279    18.86   0.000     .9418212    1.160326
            35  |   1.128263    .058097    19.42   0.000     1.014366     1.24216
            36  |   1.228896    .060205    20.41   0.000     1.110866    1.346926
            37  |   1.298814   .0621518    20.90   0.000     1.176968     1.42066
            38  |   1.349318   .0635262    21.24   0.000     1.224777    1.473859
            39  |   1.382769   .0646732    21.38   0.000     1.255979    1.509558
            40  |   1.392732   .0658362    21.15   0.000     1.263663    1.521801
            41  |   1.433294   .0667597    21.47   0.000     1.302414    1.564174
            42  |    1.48529   .0682307    21.77   0.000     1.351527    1.619054
            43  |    1.54844   .0700164    22.12   0.000     1.411176    1.685705
            44  |   1.527184   .0712021    21.45   0.000     1.387595    1.666773
            45  |   1.564746   .0717677    21.80   0.000     1.424048    1.705444
            46  |   1.564362   .0723081    21.63   0.000     1.422605    1.706119
            47  |   1.632184   .0730968    22.33   0.000     1.488881    1.775488
            48  |   1.668212   .0736538    22.65   0.000     1.523816    1.812607
            49  |   1.417553   .0767861    18.46   0.000     1.267016    1.568089
            50  |   1.499674   .0786946    19.06   0.000     1.345396    1.653951
                |
        age_cat |
             2  |   .1531934   .0454419     3.37   0.001     .0641064    .2422805
             3  |   .2040186   .0498183     4.10   0.000     .1063517    .3016855
             4  |   .2674412   .0533382     5.01   0.000     .1628737    .3720086
             5  |   .2521757   .0605794     4.16   0.000     .1334121    .3709394
             6  |   .2477507   .0689096     3.60   0.000      .112656    .3828453
                |
          _cons |    5.10808   .0595807    85.73   0.000     4.991274    5.224886
----------------+----------------------------------------------------------------
        sigma_u |  1.5979677
        sigma_e |  .83024746
            rho |  .78743421   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .167945287884396

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    204,053
Group variable: id                              Number of groups  =      4,769

R-sq:                                           Obs per group:
     within  = 0.1679                                         min =          1
     between = 0.1049                                         avg =       42.8
     overall = 0.1001                                         max =      1,416

                                                F(34,4768)        =      57.64
corr(u_i, Xb)  = 0.0671                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,769 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0471998   .0601617     0.78   0.433    -.0707449    .1651444
during_domestic |  -.0021221    .016905    -0.13   0.900    -.0352636    .0310195
 after_domestic |    .007907   .0205511     0.38   0.700    -.0323826    .0481965
   during_expat |  -.0715231   .0215811    -3.31   0.001     -.113832   -.0292142
    after_expat |  -.1469471   .0213216    -6.89   0.000    -.1887473   -.1051468
                |
       ind_year |
            27  |   .1016942   .0314368     3.23   0.001     .0400637    .1633248
            28  |   .3281424   .0365352     8.98   0.000     .2565166    .3997682
            29  |   .4307361   .0406189    10.60   0.000     .3511043    .5103679
            30  |    .518431   .0437429    11.85   0.000     .4326747    .6041872
            31  |   .6436571   .0469864    13.70   0.000     .5515422    .7357721
            32  |   .8538445   .0499231    17.10   0.000     .7559722    .9517167
            33  |   .9642363   .0529612    18.21   0.000     .8604078    1.068065
            34  |   1.051074   .0557279    18.86   0.000     .9418212    1.160326
            35  |   1.128263    .058097    19.42   0.000     1.014366     1.24216
            36  |   1.228896    .060205    20.41   0.000     1.110866    1.346926
            37  |   1.298814   .0621518    20.90   0.000     1.176968     1.42066
            38  |   1.349318   .0635262    21.24   0.000     1.224777    1.473859
            39  |   1.382769   .0646732    21.38   0.000     1.255979    1.509558
            40  |   1.392732   .0658362    21.15   0.000     1.263663    1.521801
            41  |   1.433294   .0667597    21.47   0.000     1.302414    1.564174
            42  |    1.48529   .0682307    21.77   0.000     1.351527    1.619054
            43  |    1.54844   .0700164    22.12   0.000     1.411176    1.685705
            44  |   1.527184   .0712021    21.45   0.000     1.387595    1.666773
            45  |   1.564746   .0717677    21.80   0.000     1.424048    1.705444
            46  |   1.564362   .0723081    21.63   0.000     1.422605    1.706119
            47  |   1.632184   .0730968    22.33   0.000     1.488881    1.775488
            48  |   1.668212   .0736538    22.65   0.000     1.523816    1.812607
            49  |   1.417553   .0767861    18.46   0.000     1.267016    1.568089
            50  |   1.499674   .0786946    19.06   0.000     1.345396    1.653951
                |
        age_cat |
             2  |   .1531934   .0454419     3.37   0.001     .0641064    .2422805
             3  |   .2040186   .0498183     4.10   0.000     .1063517    .3016855
             4  |   .2674412   .0533382     5.01   0.000     .1628737    .3720086
             5  |   .2521757   .0605794     4.16   0.000     .1334121    .3709394
             6  |   .2477507   .0689096     3.60   0.000      .112656    .3828453
                |
          _cons |    5.10808   .0595807    85.73   0.000     4.991274    5.224886
----------------+----------------------------------------------------------------
        sigma_u |  1.5979677
        sigma_e |  .83024746
            rho |  .78743421   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.4807                                         min =          1
     between = 0.2487                                         avg =       44.4
     overall = 0.2829                                         max =      1,475

                                                F(34,4896)        =     299.02
corr(u_i, Xb)  = 0.0576                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .067078   .0284481     2.36   0.018      .011307     .122849
during_domestic |   -.060057   .0089538    -6.71   0.000    -.0776104   -.0425036
 after_domestic |  -.0134262   .0116129    -1.16   0.248    -.0361927    .0093403
   during_expat |     .06596   .0119265     5.53   0.000     .0425788    .0893413
    after_expat |   .0931785   .0139006     6.70   0.000     .0659271    .1204298
                |
       ind_year |
            27  |   .1398867   .0206714     6.77   0.000     .0993615     .180412
            28  |   .3582026   .0221874    16.14   0.000     .3147054    .4016999
            29  |   .5977815   .0250649    23.85   0.000      .548643      .64692
            30  |   .7688806   .0256012    30.03   0.000     .7186908    .8190704
            31  |   .9326333    .026912    34.65   0.000     .8798737    .9853928
            32  |   1.078547   .0282845    38.13   0.000     1.023097    1.133998
            33  |   1.162096   .0291771    39.83   0.000     1.104896    1.219296
            34  |    1.30523   .0303878    42.95   0.000     1.245656    1.364804
            35  |   1.386551   .0317079    43.73   0.000     1.324389    1.448713
            36  |   1.436163    .032507    44.18   0.000     1.372434    1.499891
            37  |    1.50599   .0332712    45.26   0.000     1.440764    1.571216
            38  |   1.577373   .0348512    45.26   0.000     1.509049    1.645697
            39  |   1.638084   .0357353    45.84   0.000     1.568027    1.708141
            40  |   1.742725   .0371831    46.87   0.000      1.66983    1.815621
            41  |    1.80375   .0372557    48.42   0.000     1.730712    1.876788
            42  |    1.85661   .0382352    48.56   0.000     1.781652    1.931568
            43  |   1.829969   .0386406    47.36   0.000     1.754217    1.905722
            44  |   1.886518    .039989    47.18   0.000     1.808122    1.964915
            45  |   1.971523   .0405264    48.65   0.000     1.892073    2.050973
            46  |   1.980905   .0408518    48.49   0.000     1.900817    2.060992
            47  |   2.022105   .0413567    48.89   0.000     1.941027    2.103183
            48  |   2.066464   .0415461    49.74   0.000     1.985015    2.147913
            49  |   2.058448   .0427577    48.14   0.000     1.974624    2.142273
            50  |   2.092261   .0424349    49.31   0.000      2.00907    2.175453
                |
        age_cat |
             2  |   .6368334   .0333024    19.12   0.000     .5715458    .7021211
             3  |   .7398489   .0344055    21.50   0.000     .6723988    .8072991
             4  |   .7818899   .0361365    21.64   0.000     .7110462    .8527336
             5  |   .7975479   .0390319    20.43   0.000     .7210279     .874068
             6  |   .8237525   .0426746    19.30   0.000     .7400912    .9074138
                |
          _cons |   6.703914   .0366642   182.85   0.000     6.632035    6.775792
----------------+----------------------------------------------------------------
        sigma_u |  1.0673808
        sigma_e |  .52884151
            rho |  .80290469   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .4807273042874279

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.4807                                         min =          1
     between = 0.2487                                         avg =       44.4
     overall = 0.2829                                         max =      1,475

                                                F(34,4896)        =     299.02
corr(u_i, Xb)  = 0.0576                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .067078   .0284481     2.36   0.018      .011307     .122849
during_domestic |   -.060057   .0089538    -6.71   0.000    -.0776104   -.0425036
 after_domestic |  -.0134262   .0116129    -1.16   0.248    -.0361927    .0093403
   during_expat |     .06596   .0119265     5.53   0.000     .0425788    .0893413
    after_expat |   .0931785   .0139006     6.70   0.000     .0659271    .1204298
                |
       ind_year |
            27  |   .1398867   .0206714     6.77   0.000     .0993615     .180412
            28  |   .3582026   .0221874    16.14   0.000     .3147054    .4016999
            29  |   .5977815   .0250649    23.85   0.000      .548643      .64692
            30  |   .7688806   .0256012    30.03   0.000     .7186908    .8190704
            31  |   .9326333    .026912    34.65   0.000     .8798737    .9853928
            32  |   1.078547   .0282845    38.13   0.000     1.023097    1.133998
            33  |   1.162096   .0291771    39.83   0.000     1.104896    1.219296
            34  |    1.30523   .0303878    42.95   0.000     1.245656    1.364804
            35  |   1.386551   .0317079    43.73   0.000     1.324389    1.448713
            36  |   1.436163    .032507    44.18   0.000     1.372434    1.499891
            37  |    1.50599   .0332712    45.26   0.000     1.440764    1.571216
            38  |   1.577373   .0348512    45.26   0.000     1.509049    1.645697
            39  |   1.638084   .0357353    45.84   0.000     1.568027    1.708141
            40  |   1.742725   .0371831    46.87   0.000      1.66983    1.815621
            41  |    1.80375   .0372557    48.42   0.000     1.730712    1.876788
            42  |    1.85661   .0382352    48.56   0.000     1.781652    1.931568
            43  |   1.829969   .0386406    47.36   0.000     1.754217    1.905722
            44  |   1.886518    .039989    47.18   0.000     1.808122    1.964915
            45  |   1.971523   .0405264    48.65   0.000     1.892073    2.050973
            46  |   1.980905   .0408518    48.49   0.000     1.900817    2.060992
            47  |   2.022105   .0413567    48.89   0.000     1.941027    2.103183
            48  |   2.066464   .0415461    49.74   0.000     1.985015    2.147913
            49  |   2.058448   .0427577    48.14   0.000     1.974624    2.142273
            50  |   2.092261   .0424349    49.31   0.000      2.00907    2.175453
                |
        age_cat |
             2  |   .6368334   .0333024    19.12   0.000     .5715458    .7021211
             3  |   .7398489   .0344055    21.50   0.000     .6723988    .8072991
             4  |   .7818899   .0361365    21.64   0.000     .7110462    .8527336
             5  |   .7975479   .0390319    20.43   0.000     .7210279     .874068
             6  |   .8237525   .0426746    19.30   0.000     .7400912    .9074138
                |
          _cons |   6.703914   .0366642   182.85   0.000     6.632035    6.775792
----------------+----------------------------------------------------------------
        sigma_u |  1.0673808
        sigma_e |  .52884151
            rho |  .80290469   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.0412                                         min =          1
     between = 0.0855                                         avg =       44.4
     overall = 0.0391                                         max =      1,475

                                                F(34,4896)        =      27.37
corr(u_i, Xb)  = 0.1070                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0292462   .0174761     1.67   0.094    -.0050149    .0635072
during_domestic |  -.0203629   .0052855    -3.85   0.000    -.0307248   -.0100009
 after_domestic |  -.0311576   .0063058    -4.94   0.000    -.0435199   -.0187954
   during_expat |  -.0182949   .0052023    -3.52   0.000    -.0284936   -.0080961
    after_expat |   -.035166    .005524    -6.37   0.000    -.0459955   -.0243364
                |
       ind_year |
            27  |  -.0228861   .0097825    -2.34   0.019    -.0420642   -.0037079
            28  |  -.0120905   .0106879    -1.13   0.258    -.0330436    .0088627
            29  |  -.0134362   .0118638    -1.13   0.257    -.0366945    .0098221
            30  |  -.0002001   .0129671    -0.02   0.988    -.0256215    .0252214
            31  |  -.0150133   .0134186    -1.12   0.263    -.0413197    .0112931
            32  |  -.0175668   .0141463    -1.24   0.214    -.0452999    .0101663
            33  |  -.0240373    .014878    -1.62   0.106    -.0532049    .0051304
            34  |  -.0274535   .0155306    -1.77   0.077    -.0579004    .0029934
            35  |  -.0227143   .0162396    -1.40   0.162    -.0545512    .0091227
            36  |  -.0299837    .016651    -1.80   0.072    -.0626271    .0026598
            37  |  -.0250265   .0170874    -1.46   0.143    -.0585255    .0084725
            38  |  -.0194834   .0175177    -1.11   0.266    -.0538259    .0148591
            39  |  -.0172464   .0179208    -0.96   0.336    -.0523793    .0178864
            40  |  -.0192629   .0183273    -1.05   0.293    -.0551927    .0166668
            41  |  -.0063445   .0187707    -0.34   0.735    -.0431436    .0304545
            42  |  -.0039434   .0188992    -0.21   0.835    -.0409943    .0331074
            43  |   .0064066   .0194126     0.33   0.741    -.0316509    .0444641
            44  |   .0105053   .0197327     0.53   0.594    -.0281796    .0491901
            45  |   .0228534   .0196619     1.16   0.245    -.0156927    .0613995
            46  |   .0276449   .0201826     1.37   0.171    -.0119221     .067212
            47  |   .0348458   .0204973     1.70   0.089    -.0053381    .0750298
            48  |   .0242708   .0207509     1.17   0.242    -.0164104    .0649519
            49  |   -.163503   .0217656    -7.51   0.000    -.2061733   -.1208327
            50  |  -.2040335   .0218473    -9.34   0.000     -.246864   -.1612029
                |
        age_cat |
             2  |    .076036   .0108187     7.03   0.000     .0548266    .0972455
             3  |   .1012642    .011491     8.81   0.000     .0787368    .1237916
             4  |   .1372429   .0122072    11.24   0.000     .1133114    .1611744
             5  |   .1694196   .0143522    11.80   0.000     .1412828    .1975563
             6  |   .1993042   .0168837    11.80   0.000     .1662045    .2324039
                |
          _cons |   .5505405   .0150797    36.51   0.000     .5209775    .5801035
----------------+----------------------------------------------------------------
        sigma_u |  .37943447
        sigma_e |    .282071
            rho |  .64406377   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0412347912736541

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    217,554
Group variable: id                              Number of groups  =      4,897

R-sq:                                           Obs per group:
     within  = 0.0412                                         min =          1
     between = 0.0855                                         avg =       44.4
     overall = 0.0391                                         max =      1,475

                                                F(34,4896)        =      27.37
corr(u_i, Xb)  = 0.1070                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,897 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0292462   .0174761     1.67   0.094    -.0050149    .0635072
during_domestic |  -.0203629   .0052855    -3.85   0.000    -.0307248   -.0100009
 after_domestic |  -.0311576   .0063058    -4.94   0.000    -.0435199   -.0187954
   during_expat |  -.0182949   .0052023    -3.52   0.000    -.0284936   -.0080961
    after_expat |   -.035166    .005524    -6.37   0.000    -.0459955   -.0243364
                |
       ind_year |
            27  |  -.0228861   .0097825    -2.34   0.019    -.0420642   -.0037079
            28  |  -.0120905   .0106879    -1.13   0.258    -.0330436    .0088627
            29  |  -.0134362   .0118638    -1.13   0.257    -.0366945    .0098221
            30  |  -.0002001   .0129671    -0.02   0.988    -.0256215    .0252214
            31  |  -.0150133   .0134186    -1.12   0.263    -.0413197    .0112931
            32  |  -.0175668   .0141463    -1.24   0.214    -.0452999    .0101663
            33  |  -.0240373    .014878    -1.62   0.106    -.0532049    .0051304
            34  |  -.0274535   .0155306    -1.77   0.077    -.0579004    .0029934
            35  |  -.0227143   .0162396    -1.40   0.162    -.0545512    .0091227
            36  |  -.0299837    .016651    -1.80   0.072    -.0626271    .0026598
            37  |  -.0250265   .0170874    -1.46   0.143    -.0585255    .0084725
            38  |  -.0194834   .0175177    -1.11   0.266    -.0538259    .0148591
            39  |  -.0172464   .0179208    -0.96   0.336    -.0523793    .0178864
            40  |  -.0192629   .0183273    -1.05   0.293    -.0551927    .0166668
            41  |  -.0063445   .0187707    -0.34   0.735    -.0431436    .0304545
            42  |  -.0039434   .0188992    -0.21   0.835    -.0409943    .0331074
            43  |   .0064066   .0194126     0.33   0.741    -.0316509    .0444641
            44  |   .0105053   .0197327     0.53   0.594    -.0281796    .0491901
            45  |   .0228534   .0196619     1.16   0.245    -.0156927    .0613995
            46  |   .0276449   .0201826     1.37   0.171    -.0119221     .067212
            47  |   .0348458   .0204973     1.70   0.089    -.0053381    .0750298
            48  |   .0242708   .0207509     1.17   0.242    -.0164104    .0649519
            49  |   -.163503   .0217656    -7.51   0.000    -.2061733   -.1208327
            50  |  -.2040335   .0218473    -9.34   0.000     -.246864   -.1612029
                |
        age_cat |
             2  |    .076036   .0108187     7.03   0.000     .0548266    .0972455
             3  |   .1012642    .011491     8.81   0.000     .0787368    .1237916
             4  |   .1372429   .0122072    11.24   0.000     .1133114    .1611744
             5  |   .1694196   .0143522    11.80   0.000     .1412828    .1975563
             6  |   .1993042   .0168837    11.80   0.000     .1662045    .2324039
                |
          _cons |   .5505405   .0150797    36.51   0.000     .5209775    .5801035
----------------+----------------------------------------------------------------
        sigma_u |  .37943447
        sigma_e |    .282071
            rho |  .64406377   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    185,951
Group variable: id                              Number of groups  =      4,624

R-sq:                                           Obs per group:
     within  = 0.0400                                         min =          1
     between = 0.0028                                         avg =       40.2
     overall = 0.0299                                         max =      1,357

                                                F(32,4623)        =      83.97
corr(u_i, Xb)  = -0.0736                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,624 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0623977   .0372217     1.68   0.094    -.0105746    .1353699
during_domestic |  -.0211488   .0100291    -2.11   0.035    -.0408106   -.0014871
 after_domestic |   .0019408   .0110135     0.18   0.860     -.019651    .0235326
   during_expat |   .0084165   .0126721     0.66   0.507    -.0164269      .03326
    after_expat |   .0094433    .011217     0.84   0.400    -.0125473    .0314339
                |
       ind_year |
            28  |  -.2254331   .0348699    -6.46   0.000    -.2937948   -.1570714
            29  |  -.0503256    .033288    -1.51   0.131     -.115586    .0149348
            30  |  -.1896767   .0333402    -5.69   0.000    -.2550394    -.124314
            31  |  -.0292395   .0345744    -0.85   0.398    -.0970219    .0385429
            32  |   -.141582   .0338977    -4.18   0.000    -.2080377   -.0751263
            33  |  -.0218535   .0351154    -0.62   0.534    -.0906965    .0469894
            34  |  -.1511676   .0346993    -4.36   0.000    -.2191948   -.0831404
            35  |  -.1053571   .0357274    -2.95   0.003    -.1753998   -.0353143
            36  |  -.0910847   .0360085    -2.53   0.011    -.1616785   -.0204909
            37  |  -.1647296   .0357153    -4.61   0.000    -.2347486   -.0947106
            38  |  -.1201598   .0370259    -3.25   0.001    -.1927482   -.0475713
            39  |  -.2018939   .0373976    -5.40   0.000    -.2752111   -.1285767
            40  |  -.1515904   .0372611    -4.07   0.000    -.2246398   -.0785409
            41  |  -.1824737   .0383041    -4.76   0.000     -.257568   -.1073795
            42  |  -.1704962   .0392238    -4.35   0.000    -.2473936   -.0935989
            43  |  -.0778331   .0385468    -2.02   0.044    -.1534032    -.002263
            44  |  -.1531696   .0379315    -4.04   0.000    -.2275334   -.0788058
            45  |  -.3315439   .0389561    -8.51   0.000    -.4079165   -.2551714
            46  |  -.1897842   .0396691    -4.78   0.000    -.2675546   -.1120138
            47  |  -.0230048   .0402622    -0.57   0.568    -.1019378    .0559283
            48  |  -.3167838   .0411528    -7.70   0.000     -.397463   -.2361046
            49  |  -.8362181   .0396912   -21.07   0.000    -.9140319   -.7584044
            50  |  -.1738027    .049632    -3.50   0.000    -.2711052   -.0765003
                |
        age_cat |
             3  |  -.1597177   .0321371    -4.97   0.000    -.2227217   -.0967137
             4  |  -.3303145   .0292211   -11.30   0.000    -.3876018   -.2730272
             5  |  -.4378423   .0314473   -13.92   0.000     -.499494   -.3761906
             6  |  -.4677036   .0343414   -13.62   0.000     -.535029   -.4003781
                |
          _cons |   .3984527   .0386813    10.30   0.000     .3226189    .4742864
----------------+----------------------------------------------------------------
        sigma_u |  .41944436
        sigma_e |  .82654427
            rho |  .20478609   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0400208031200167

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    185,951
Group variable: id                              Number of groups  =      4,624

R-sq:                                           Obs per group:
     within  = 0.0400                                         min =          1
     between = 0.0028                                         avg =       40.2
     overall = 0.0299                                         max =      1,357

                                                F(32,4623)        =      83.97
corr(u_i, Xb)  = -0.0736                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,624 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0623977   .0372217     1.68   0.094    -.0105746    .1353699
during_domestic |  -.0211488   .0100291    -2.11   0.035    -.0408106   -.0014871
 after_domestic |   .0019408   .0110135     0.18   0.860     -.019651    .0235326
   during_expat |   .0084165   .0126721     0.66   0.507    -.0164269      .03326
    after_expat |   .0094433    .011217     0.84   0.400    -.0125473    .0314339
                |
       ind_year |
            28  |  -.2254331   .0348699    -6.46   0.000    -.2937948   -.1570714
            29  |  -.0503256    .033288    -1.51   0.131     -.115586    .0149348
            30  |  -.1896767   .0333402    -5.69   0.000    -.2550394    -.124314
            31  |  -.0292395   .0345744    -0.85   0.398    -.0970219    .0385429
            32  |   -.141582   .0338977    -4.18   0.000    -.2080377   -.0751263
            33  |  -.0218535   .0351154    -0.62   0.534    -.0906965    .0469894
            34  |  -.1511676   .0346993    -4.36   0.000    -.2191948   -.0831404
            35  |  -.1053571   .0357274    -2.95   0.003    -.1753998   -.0353143
            36  |  -.0910847   .0360085    -2.53   0.011    -.1616785   -.0204909
            37  |  -.1647296   .0357153    -4.61   0.000    -.2347486   -.0947106
            38  |  -.1201598   .0370259    -3.25   0.001    -.1927482   -.0475713
            39  |  -.2018939   .0373976    -5.40   0.000    -.2752111   -.1285767
            40  |  -.1515904   .0372611    -4.07   0.000    -.2246398   -.0785409
            41  |  -.1824737   .0383041    -4.76   0.000     -.257568   -.1073795
            42  |  -.1704962   .0392238    -4.35   0.000    -.2473936   -.0935989
            43  |  -.0778331   .0385468    -2.02   0.044    -.1534032    -.002263
            44  |  -.1531696   .0379315    -4.04   0.000    -.2275334   -.0788058
            45  |  -.3315439   .0389561    -8.51   0.000    -.4079165   -.2551714
            46  |  -.1897842   .0396691    -4.78   0.000    -.2675546   -.1120138
            47  |  -.0230048   .0402622    -0.57   0.568    -.1019378    .0559283
            48  |  -.3167838   .0411528    -7.70   0.000     -.397463   -.2361046
            49  |  -.8362181   .0396912   -21.07   0.000    -.9140319   -.7584044
            50  |  -.1738027    .049632    -3.50   0.000    -.2711052   -.0765003
                |
        age_cat |
             3  |  -.1597177   .0321371    -4.97   0.000    -.2227217   -.0967137
             4  |  -.3303145   .0292211   -11.30   0.000    -.3876018   -.2730272
             5  |  -.4378423   .0314473   -13.92   0.000     -.499494   -.3761906
             6  |  -.4677036   .0343414   -13.62   0.000     -.535029   -.4003781
                |
          _cons |   .3984527   .0386813    10.30   0.000     .3226189    .4742864
----------------+----------------------------------------------------------------
        sigma_u |  .41944436
        sigma_e |  .82654427
            rho |  .20478609   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.1419                                         min =          1
     between = 0.0872                                         avg =       75.8
     overall = 0.0944                                         max =      4,150

                                                F(59,4628)        =      38.32
corr(u_i, Xb)  = 0.0046                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0217369    .034904    -0.62   0.533    -.0901655    .0466916
during_domestic |   -.088705   .0139818    -6.34   0.000     -.116116    -.061294
 after_domestic |  -.2049089   .0175329   -11.69   0.000    -.2392817   -.1705361
   during_expat |   -.040323    .013128    -3.07   0.002    -.0660602   -.0145859
    after_expat |  -.0662805   .0140305    -4.72   0.000     -.093787    -.038774
                |
       ind_year |
             2  |  -.0521705   .0363458    -1.44   0.151    -.1234256    .0190847
             3  |  -.0685863   .0437894    -1.57   0.117    -.1544344    .0172617
             4  |   -.080954   .0488161    -1.66   0.097    -.1766568    .0147488
             5  |   -.145634   .0545147    -2.67   0.008    -.2525087   -.0387593
             6  |  -.1712016   .0576434    -2.97   0.003    -.2842102    -.058193
             7  |  -.1804213   .0604838    -2.98   0.003    -.2989984   -.0618442
             8  |  -.1772213   .0640575    -2.77   0.006    -.3028044   -.0516381
             9  |  -.1844382   .0671955    -2.74   0.006    -.3161734   -.0527029
            10  |  -.1895425   .0696686    -2.72   0.007    -.3261261   -.0529589
            11  |  -.2413721   .0724038    -3.33   0.001    -.3833181   -.0994261
            12  |  -.2465377    .074257    -3.32   0.001    -.3921168   -.1009585
            13  |  -.2548471   .0759219    -3.36   0.001    -.4036902    -.106004
            14  |  -.2134609   .0771037    -2.77   0.006    -.3646208    -.062301
            15  |   -.171363   .0786279    -2.18   0.029    -.3255112   -.0172148
            16  |  -.1266181    .079905    -1.58   0.113    -.2832701    .0300338
            17  |  -.1086619   .0814242    -1.33   0.182    -.2682922    .0509685
            18  |  -.1625098   .0824421    -1.97   0.049    -.3241355    -.000884
            19  |  -.1694634   .0832396    -2.04   0.042    -.3326527   -.0062741
            20  |  -.1864745   .0841855    -2.22   0.027    -.3515181   -.0214308
            21  |  -.2499703   .0854383    -2.93   0.003    -.4174702   -.0824705
            22  |  -.2732772   .0868806    -3.15   0.002    -.4436046   -.1029498
            23  |  -.2924788   .0888797    -3.29   0.001    -.4667255   -.1182322
            24  |  -.2698988   .0898086    -3.01   0.003    -.4459665   -.0938311
            25  |  -.2460913   .0910006    -2.70   0.007    -.4244959   -.0676868
            26  |   1.132005   .1021693    11.08   0.000     .9317048    1.332306
            27  |    .943991   .1004403     9.40   0.000       .74708    1.140902
            28  |   .8613739   .0986854     8.73   0.000     .6679036    1.054844
            29  |    .782656    .097529     8.02   0.000     .5914526    .9738594
            30  |   .7577507   .0962418     7.87   0.000     .5690709    .9464305
            31  |   .7417416   .0971457     7.64   0.000     .5512897    .9321935
            32  |    .709771   .0971045     7.31   0.000     .5193999    .9001421
            33  |   .6651456    .097349     6.83   0.000     .4742951     .855996
            34  |   .6610406   .0980736     6.74   0.000     .4687696    .8533117
            35  |   .6206738   .0986274     6.29   0.000     .4273171    .8140304
            36  |   .5508877   .0993694     5.54   0.000     .3560762    .7456991
            37  |   .5178738   .0997291     5.19   0.000     .3223572    .7133904
            38  |   .4793026   .1008468     4.75   0.000     .2815947    .6770105
            39  |   .4782687   .1018029     4.70   0.000     .2786866    .6778509
            40  |   .4663256   .1024258     4.55   0.000     .2655222    .6671291
            41  |   .4944117   .1030454     4.80   0.000     .2923937    .6964298
            42  |   .5009879   .1047375     4.78   0.000     .2956524    .7063234
            43  |   .3663929    .105921     3.46   0.001     .1587372    .5740486
            44  |   .3506613   .1071727     3.27   0.001     .1405517    .5607709
            45  |   .3968404   .1079655     3.68   0.000     .1851765    .6085043
            46  |   .4131099   .1087577     3.80   0.000     .1998931    .6263268
            47  |   .4386773   .1091724     4.02   0.000     .2246474    .6527071
            48  |   .4480191   .1100024     4.07   0.000     .2323619    .6636763
            49  |   .5103162   .1105842     4.61   0.000     .2935184     .727114
            50  |   .5625749    .110366     5.10   0.000     .3462048    .7789449
                |
        age_cat |
             2  |   .4373229   .0289736    15.09   0.000     .3805208    .4941251
             3  |   .7935615   .0321684    24.67   0.000     .7304962    .8566268
             4  |   1.154176   .0372433    30.99   0.000     1.081162    1.227191
             5  |   1.458458   .0457153    31.90   0.000     1.368834    1.548082
             6  |   1.664388   .0553345    30.08   0.000     1.555906     1.77287
                |
          _cons |   2.682736   .0729961    36.75   0.000     2.539629    2.825844
----------------+----------------------------------------------------------------
        sigma_u |   1.054164
        sigma_e |  .76646988
            rho |  .65416905   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1418526684500082

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.1419                                         min =          1
     between = 0.0872                                         avg =       75.8
     overall = 0.0944                                         max =      4,150

                                                F(59,4628)        =      38.32
corr(u_i, Xb)  = 0.0046                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |  -.0217369    .034904    -0.62   0.533    -.0901655    .0466916
during_domestic |   -.088705   .0139818    -6.34   0.000     -.116116    -.061294
 after_domestic |  -.2049089   .0175329   -11.69   0.000    -.2392817   -.1705361
   during_expat |   -.040323    .013128    -3.07   0.002    -.0660602   -.0145859
    after_expat |  -.0662805   .0140305    -4.72   0.000     -.093787    -.038774
                |
       ind_year |
             2  |  -.0521705   .0363458    -1.44   0.151    -.1234256    .0190847
             3  |  -.0685863   .0437894    -1.57   0.117    -.1544344    .0172617
             4  |   -.080954   .0488161    -1.66   0.097    -.1766568    .0147488
             5  |   -.145634   .0545147    -2.67   0.008    -.2525087   -.0387593
             6  |  -.1712016   .0576434    -2.97   0.003    -.2842102    -.058193
             7  |  -.1804213   .0604838    -2.98   0.003    -.2989984   -.0618442
             8  |  -.1772213   .0640575    -2.77   0.006    -.3028044   -.0516381
             9  |  -.1844382   .0671955    -2.74   0.006    -.3161734   -.0527029
            10  |  -.1895425   .0696686    -2.72   0.007    -.3261261   -.0529589
            11  |  -.2413721   .0724038    -3.33   0.001    -.3833181   -.0994261
            12  |  -.2465377    .074257    -3.32   0.001    -.3921168   -.1009585
            13  |  -.2548471   .0759219    -3.36   0.001    -.4036902    -.106004
            14  |  -.2134609   .0771037    -2.77   0.006    -.3646208    -.062301
            15  |   -.171363   .0786279    -2.18   0.029    -.3255112   -.0172148
            16  |  -.1266181    .079905    -1.58   0.113    -.2832701    .0300338
            17  |  -.1086619   .0814242    -1.33   0.182    -.2682922    .0509685
            18  |  -.1625098   .0824421    -1.97   0.049    -.3241355    -.000884
            19  |  -.1694634   .0832396    -2.04   0.042    -.3326527   -.0062741
            20  |  -.1864745   .0841855    -2.22   0.027    -.3515181   -.0214308
            21  |  -.2499703   .0854383    -2.93   0.003    -.4174702   -.0824705
            22  |  -.2732772   .0868806    -3.15   0.002    -.4436046   -.1029498
            23  |  -.2924788   .0888797    -3.29   0.001    -.4667255   -.1182322
            24  |  -.2698988   .0898086    -3.01   0.003    -.4459665   -.0938311
            25  |  -.2460913   .0910006    -2.70   0.007    -.4244959   -.0676868
            26  |   1.132005   .1021693    11.08   0.000     .9317048    1.332306
            27  |    .943991   .1004403     9.40   0.000       .74708    1.140902
            28  |   .8613739   .0986854     8.73   0.000     .6679036    1.054844
            29  |    .782656    .097529     8.02   0.000     .5914526    .9738594
            30  |   .7577507   .0962418     7.87   0.000     .5690709    .9464305
            31  |   .7417416   .0971457     7.64   0.000     .5512897    .9321935
            32  |    .709771   .0971045     7.31   0.000     .5193999    .9001421
            33  |   .6651456    .097349     6.83   0.000     .4742951     .855996
            34  |   .6610406   .0980736     6.74   0.000     .4687696    .8533117
            35  |   .6206738   .0986274     6.29   0.000     .4273171    .8140304
            36  |   .5508877   .0993694     5.54   0.000     .3560762    .7456991
            37  |   .5178738   .0997291     5.19   0.000     .3223572    .7133904
            38  |   .4793026   .1008468     4.75   0.000     .2815947    .6770105
            39  |   .4782687   .1018029     4.70   0.000     .2786866    .6778509
            40  |   .4663256   .1024258     4.55   0.000     .2655222    .6671291
            41  |   .4944117   .1030454     4.80   0.000     .2923937    .6964298
            42  |   .5009879   .1047375     4.78   0.000     .2956524    .7063234
            43  |   .3663929    .105921     3.46   0.001     .1587372    .5740486
            44  |   .3506613   .1071727     3.27   0.001     .1405517    .5607709
            45  |   .3968404   .1079655     3.68   0.000     .1851765    .6085043
            46  |   .4131099   .1087577     3.80   0.000     .1998931    .6263268
            47  |   .4386773   .1091724     4.02   0.000     .2246474    .6527071
            48  |   .4480191   .1100024     4.07   0.000     .2323619    .6636763
            49  |   .5103162   .1105842     4.61   0.000     .2935184     .727114
            50  |   .5625749    .110366     5.10   0.000     .3462048    .7789449
                |
        age_cat |
             2  |   .4373229   .0289736    15.09   0.000     .3805208    .4941251
             3  |   .7935615   .0321684    24.67   0.000     .7304962    .8566268
             4  |   1.154176   .0372433    30.99   0.000     1.081162    1.227191
             5  |   1.458458   .0457153    31.90   0.000     1.368834    1.548082
             6  |   1.664388   .0553345    30.08   0.000     1.555906     1.77287
                |
          _cons |   2.682736   .0729961    36.75   0.000     2.539629    2.825844
----------------+----------------------------------------------------------------
        sigma_u |   1.054164
        sigma_e |  .76646988
            rho |  .65416905   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    325,013
Group variable: id                              Number of groups  =      4,546

R-sq:                                           Obs per group:
     within  = 0.2002                                         min =          1
     between = 0.1288                                         avg =       71.5
     overall = 0.1045                                         max =      3,984

                                                F(59,4545)        =      53.33
corr(u_i, Xb)  = 0.0642                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,546 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0536404   .0504152     1.06   0.287    -.0451979    .1524786
during_domestic |  -.0885664   .0193042    -4.59   0.000    -.1264121   -.0507208
 after_domestic |  -.1837198    .022504    -8.16   0.000    -.2278384   -.1396011
   during_expat |  -.0741784   .0186403    -3.98   0.000    -.1107224   -.0376343
    after_expat |  -.1487632   .0186083    -7.99   0.000    -.1852445   -.1122818
                |
       ind_year |
             2  |   .1463792   .0568624     2.57   0.010     .0349013    .2578572
             3  |   .6660143   .0683031     9.75   0.000      .532107    .7999215
             4  |   .7975626   .0748978    10.65   0.000     .6507266    .9443986
             5  |   .9728177   .0803684    12.10   0.000     .8152565    1.130379
             6  |   1.129452   .0850649    13.28   0.000     .9626835    1.296221
             7  |   1.335057   .0894773    14.92   0.000     1.159638    1.510476
             8  |   1.505657   .0936482    16.08   0.000     1.322061    1.689253
             9  |   1.630058   .0972156    16.77   0.000     1.439468    1.820648
            10  |   1.712054   .0998627    17.14   0.000     1.516275    1.907834
            11  |   1.754001   .1022939    17.15   0.000     1.553455    1.954547
            12  |   1.764126   .1053926    16.74   0.000     1.557505    1.970746
            13  |   1.803421   .1066609    16.91   0.000     1.594314    2.012528
            14  |   1.850236   .1076421    17.19   0.000     1.639205    2.061266
            15  |   1.835643   .1094804    16.77   0.000     1.621008    2.050278
            16  |   1.861705   .1114482    16.70   0.000     1.643212    2.080198
            17  |   1.882892   .1125057    16.74   0.000     1.662326    2.103458
            18  |   1.818094   .1153514    15.76   0.000     1.591949    2.044239
            19  |   1.740668   .1166723    14.92   0.000     1.511933    1.969402
            20  |   1.686538   .1192612    14.14   0.000     1.452728    1.920348
            21  |   1.655375   .1205366    13.73   0.000     1.419065    1.891686
            22  |   1.615014   .1242309    13.00   0.000     1.371461    1.858567
            23  |    1.62893   .1260817    12.92   0.000     1.381749    1.876112
            24  |   .9952516   .1371389     7.26   0.000     .7263926    1.264111
            25  |   1.087998   .1471548     7.39   0.000     .7995033    1.376493
            26  |   1.477931   .1391415    10.62   0.000     1.205146    1.750716
            27  |    1.44327   .1332738    10.83   0.000     1.181988    1.704551
            28  |   1.571183   .1282808    12.25   0.000      1.31969    1.822675
            29  |   1.643093   .1280028    12.84   0.000     1.392145    1.894041
            30  |   1.749746   .1277425    13.70   0.000     1.499309    2.000184
            31  |   1.852701   .1286675    14.40   0.000     1.600451    2.104952
            32  |   2.030137    .129093    15.73   0.000     1.777052    2.283222
            33  |   2.161845   .1295701    16.68   0.000     1.907825    2.415865
            34  |   2.265054   .1304751    17.36   0.000      2.00926    2.520849
            35  |   2.331826   .1322036    17.64   0.000     2.072643     2.59101
            36  |   2.316967   .1343195    17.25   0.000     2.053636    2.580299
            37  |   2.346072   .1338993    17.52   0.000     2.083565     2.60858
            38  |   2.367161   .1364424    17.35   0.000     2.099668    2.634655
            39  |   2.422204   .1376929    17.59   0.000     2.152259    2.692149
            40  |   2.443842   .1385561    17.64   0.000     2.172205    2.715479
            41  |   2.472944   .1401037    17.65   0.000     2.198273    2.747616
            42  |   2.537697   .1412717    17.96   0.000     2.260736    2.814658
            43  |   2.496994   .1417629    17.61   0.000      2.21907    2.774919
            44  |   2.435853   .1432509    17.00   0.000     2.155011    2.716694
            45  |   2.547395   .1430707    17.81   0.000     2.266907    2.827883
            46  |   2.548357   .1445207    17.63   0.000     2.265026    2.831687
            47  |   2.623399   .1457159    18.00   0.000     2.337725    2.909073
            48  |   2.701979   .1462546    18.47   0.000     2.415249    2.988709
            49  |   2.596579   .1481941    17.52   0.000     2.306046    2.887111
            50  |    2.67652   .1523267    17.57   0.000     2.377885    2.975154
                |
        age_cat |
             2  |   .4599438   .0468389     9.82   0.000     .3681167    .5517709
             3  |   .7948187   .0504709    15.75   0.000     .6958712    .8937663
             4  |   1.084958   .0561949    19.31   0.000     .9747891    1.195128
             5  |   1.287434   .0670608    19.20   0.000     1.155962    1.418905
             6  |   1.380727   .0795528    17.36   0.000     1.224765     1.53669
                |
          _cons |    8.06709   .1046823    77.06   0.000     7.861862    8.272318
----------------+----------------------------------------------------------------
        sigma_u |  1.9500005
        sigma_e |   1.077729
            rho |  .76601544   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2001746264274185

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    325,013
Group variable: id                              Number of groups  =      4,546

R-sq:                                           Obs per group:
     within  = 0.2002                                         min =          1
     between = 0.1288                                         avg =       71.5
     overall = 0.1045                                         max =      3,984

                                                F(59,4545)        =      53.33
corr(u_i, Xb)  = 0.0642                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,546 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0536404   .0504152     1.06   0.287    -.0451979    .1524786
during_domestic |  -.0885664   .0193042    -4.59   0.000    -.1264121   -.0507208
 after_domestic |  -.1837198    .022504    -8.16   0.000    -.2278384   -.1396011
   during_expat |  -.0741784   .0186403    -3.98   0.000    -.1107224   -.0376343
    after_expat |  -.1487632   .0186083    -7.99   0.000    -.1852445   -.1122818
                |
       ind_year |
             2  |   .1463792   .0568624     2.57   0.010     .0349013    .2578572
             3  |   .6660143   .0683031     9.75   0.000      .532107    .7999215
             4  |   .7975626   .0748978    10.65   0.000     .6507266    .9443986
             5  |   .9728177   .0803684    12.10   0.000     .8152565    1.130379
             6  |   1.129452   .0850649    13.28   0.000     .9626835    1.296221
             7  |   1.335057   .0894773    14.92   0.000     1.159638    1.510476
             8  |   1.505657   .0936482    16.08   0.000     1.322061    1.689253
             9  |   1.630058   .0972156    16.77   0.000     1.439468    1.820648
            10  |   1.712054   .0998627    17.14   0.000     1.516275    1.907834
            11  |   1.754001   .1022939    17.15   0.000     1.553455    1.954547
            12  |   1.764126   .1053926    16.74   0.000     1.557505    1.970746
            13  |   1.803421   .1066609    16.91   0.000     1.594314    2.012528
            14  |   1.850236   .1076421    17.19   0.000     1.639205    2.061266
            15  |   1.835643   .1094804    16.77   0.000     1.621008    2.050278
            16  |   1.861705   .1114482    16.70   0.000     1.643212    2.080198
            17  |   1.882892   .1125057    16.74   0.000     1.662326    2.103458
            18  |   1.818094   .1153514    15.76   0.000     1.591949    2.044239
            19  |   1.740668   .1166723    14.92   0.000     1.511933    1.969402
            20  |   1.686538   .1192612    14.14   0.000     1.452728    1.920348
            21  |   1.655375   .1205366    13.73   0.000     1.419065    1.891686
            22  |   1.615014   .1242309    13.00   0.000     1.371461    1.858567
            23  |    1.62893   .1260817    12.92   0.000     1.381749    1.876112
            24  |   .9952516   .1371389     7.26   0.000     .7263926    1.264111
            25  |   1.087998   .1471548     7.39   0.000     .7995033    1.376493
            26  |   1.477931   .1391415    10.62   0.000     1.205146    1.750716
            27  |    1.44327   .1332738    10.83   0.000     1.181988    1.704551
            28  |   1.571183   .1282808    12.25   0.000      1.31969    1.822675
            29  |   1.643093   .1280028    12.84   0.000     1.392145    1.894041
            30  |   1.749746   .1277425    13.70   0.000     1.499309    2.000184
            31  |   1.852701   .1286675    14.40   0.000     1.600451    2.104952
            32  |   2.030137    .129093    15.73   0.000     1.777052    2.283222
            33  |   2.161845   .1295701    16.68   0.000     1.907825    2.415865
            34  |   2.265054   .1304751    17.36   0.000      2.00926    2.520849
            35  |   2.331826   .1322036    17.64   0.000     2.072643     2.59101
            36  |   2.316967   .1343195    17.25   0.000     2.053636    2.580299
            37  |   2.346072   .1338993    17.52   0.000     2.083565     2.60858
            38  |   2.367161   .1364424    17.35   0.000     2.099668    2.634655
            39  |   2.422204   .1376929    17.59   0.000     2.152259    2.692149
            40  |   2.443842   .1385561    17.64   0.000     2.172205    2.715479
            41  |   2.472944   .1401037    17.65   0.000     2.198273    2.747616
            42  |   2.537697   .1412717    17.96   0.000     2.260736    2.814658
            43  |   2.496994   .1417629    17.61   0.000      2.21907    2.774919
            44  |   2.435853   .1432509    17.00   0.000     2.155011    2.716694
            45  |   2.547395   .1430707    17.81   0.000     2.266907    2.827883
            46  |   2.548357   .1445207    17.63   0.000     2.265026    2.831687
            47  |   2.623399   .1457159    18.00   0.000     2.337725    2.909073
            48  |   2.701979   .1462546    18.47   0.000     2.415249    2.988709
            49  |   2.596579   .1481941    17.52   0.000     2.306046    2.887111
            50  |    2.67652   .1523267    17.57   0.000     2.377885    2.975154
                |
        age_cat |
             2  |   .4599438   .0468389     9.82   0.000     .3681167    .5517709
             3  |   .7948187   .0504709    15.75   0.000     .6958712    .8937663
             4  |   1.084958   .0561949    19.31   0.000     .9747891    1.195128
             5  |   1.287434   .0670608    19.20   0.000     1.155962    1.418905
             6  |   1.380727   .0795528    17.36   0.000     1.224765     1.53669
                |
          _cons |    8.06709   .1046823    77.06   0.000     7.861862    8.272318
----------------+----------------------------------------------------------------
        sigma_u |  1.9500005
        sigma_e |   1.077729
            rho |  .76601544   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.3846                                         min =          1
     between = 0.1070                                         avg =       75.8
     overall = 0.1405                                         max =      4,150

                                                F(59,4628)        =     128.92
corr(u_i, Xb)  = 0.0009                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .065228   .0373337     1.75   0.081    -.0079639    .1384198
during_domestic |  -.1162672    .016053    -7.24   0.000    -.1477387   -.0847957
 after_domestic |  -.2072967   .0188591   -10.99   0.000    -.2442694   -.1703239
   during_expat |  -.0236813    .014795    -1.60   0.110    -.0526865     .005324
    after_expat |  -.0415963   .0156803    -2.65   0.008    -.0723372   -.0108554
                |
       ind_year |
             2  |    .073335    .044214     1.66   0.097    -.0133456    .1600156
             3  |   .2302628   .0504652     4.56   0.000     .1313269    .3291987
             4  |   .4035348   .0557537     7.24   0.000      .294231    .5128386
             5  |    .570955    .060442     9.45   0.000     .4524599    .6894501
             6  |   .7107624   .0644932    11.02   0.000     .5843249    .8371999
             7  |    .852241   .0671382    12.69   0.000     .7206182    .9838638
             8  |   .9352308   .0712881    13.12   0.000     .7954722    1.074989
             9  |   1.051923   .0732429    14.36   0.000     .9083322    1.195514
            10  |   1.142024   .0750461    15.22   0.000     .9948975     1.28915
            11  |   1.166176   .0776372    15.02   0.000      1.01397    1.318381
            12  |   1.229555   .0795726    15.45   0.000     1.073554    1.385555
            13  |   1.276094   .0815462    15.65   0.000     1.116225    1.435964
            14  |   1.367315   .0824141    16.59   0.000     1.205744    1.528886
            15  |   1.441562   .0841019    17.14   0.000     1.276682    1.606441
            16  |   1.483301   .0861865    17.21   0.000     1.314335    1.652268
            17  |   1.527901   .0873529    17.49   0.000     1.356647    1.699154
            18  |   1.404424   .0895858    15.68   0.000     1.228793    1.580054
            19  |   1.431454   .0908622    15.75   0.000     1.253321    1.609587
            20  |   1.454252   .0913603    15.92   0.000     1.275143    1.633362
            21  |   1.375849   .0929693    14.80   0.000     1.193585    1.558113
            22  |   1.407449    .095384    14.76   0.000     1.220451    1.594447
            23  |   1.453029    .097822    14.85   0.000     1.261251    1.644807
            24  |   1.492619   .0981685    15.20   0.000     1.300162    1.685076
            25  |   1.499081   .1002975    14.95   0.000      1.30245    1.695712
            26  |   .5633144   .1104841     5.10   0.000     .3467129    .7799159
            27  |   .5136479   .1056139     4.86   0.000     .3065944    .7207014
            28  |   .6851968   .1030996     6.65   0.000     .4830725    .8873211
            29  |   .8943474   .1002356     8.92   0.000     .6978378    1.090857
            30  |   1.044576   .0990791    10.54   0.000     .8503341    1.238819
            31  |   1.221988   .0996275    12.27   0.000      1.02667    1.417305
            32  |   1.364146   .0998791    13.66   0.000     1.168335    1.559956
            33  |   1.436394   .1010519    14.21   0.000     1.238284    1.634503
            34  |   1.592404   .1019456    15.62   0.000     1.392542    1.792266
            35  |    1.63679   .1026515    15.95   0.000     1.435544    1.838036
            36  |   1.628428   .1039002    15.67   0.000     1.424734    1.832122
            37  |   1.697742   .1040951    16.31   0.000     1.493666    1.901818
            38  |   1.716914   .1061009    16.18   0.000     1.508906    1.924923
            39  |   1.809838   .1069977    16.91   0.000     1.600071    2.019604
            40  |   1.929619   .1084525    17.79   0.000        1.717    2.142238
            41  |   1.999847   .1087924    18.38   0.000     1.786562    2.213132
            42  |   2.056129   .1102908    18.64   0.000     1.839906    2.272351
            43  |   1.899294    .111438    17.04   0.000     1.680822    2.117765
            44  |   1.972155   .1132272    17.42   0.000     1.750175    2.194134
            45  |   2.094415   .1142904    18.33   0.000     1.870352    2.318479
            46  |   2.126698   .1156428    18.39   0.000     1.899983    2.353413
            47  |   2.205386   .1155897    19.08   0.000     1.978775    2.431996
            48  |   2.246989   .1180872    19.03   0.000     2.015481    2.478496
            49  |   2.308797   .1176181    19.63   0.000      2.07821    2.539385
            50  |   2.388621   .1176186    20.31   0.000     2.158033     2.61921
                |
        age_cat |
             2  |   1.160602   .0454235    25.55   0.000      1.07155    1.249654
             3  |   1.664951   .0468035    35.57   0.000     1.573194    1.756708
             4  |   2.071828   .0507086    40.86   0.000     1.972415    2.171241
             5  |   2.373908    .058203    40.79   0.000     2.259803    2.488014
             6  |   2.563737   .0676758    37.88   0.000      2.43106    2.696414
                |
          _cons |   10.15583   .0831191   122.18   0.000     9.992876    10.31878
----------------+----------------------------------------------------------------
        sigma_u |   1.600162
        sigma_e |  .92343544
            rho |  .75016988   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3845535652757618

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.3846                                         min =          1
     between = 0.1070                                         avg =       75.8
     overall = 0.1405                                         max =      4,150

                                                F(59,4628)        =     128.92
corr(u_i, Xb)  = 0.0009                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |    .065228   .0373337     1.75   0.081    -.0079639    .1384198
during_domestic |  -.1162672    .016053    -7.24   0.000    -.1477387   -.0847957
 after_domestic |  -.2072967   .0188591   -10.99   0.000    -.2442694   -.1703239
   during_expat |  -.0236813    .014795    -1.60   0.110    -.0526865     .005324
    after_expat |  -.0415963   .0156803    -2.65   0.008    -.0723372   -.0108554
                |
       ind_year |
             2  |    .073335    .044214     1.66   0.097    -.0133456    .1600156
             3  |   .2302628   .0504652     4.56   0.000     .1313269    .3291987
             4  |   .4035348   .0557537     7.24   0.000      .294231    .5128386
             5  |    .570955    .060442     9.45   0.000     .4524599    .6894501
             6  |   .7107624   .0644932    11.02   0.000     .5843249    .8371999
             7  |    .852241   .0671382    12.69   0.000     .7206182    .9838638
             8  |   .9352308   .0712881    13.12   0.000     .7954722    1.074989
             9  |   1.051923   .0732429    14.36   0.000     .9083322    1.195514
            10  |   1.142024   .0750461    15.22   0.000     .9948975     1.28915
            11  |   1.166176   .0776372    15.02   0.000      1.01397    1.318381
            12  |   1.229555   .0795726    15.45   0.000     1.073554    1.385555
            13  |   1.276094   .0815462    15.65   0.000     1.116225    1.435964
            14  |   1.367315   .0824141    16.59   0.000     1.205744    1.528886
            15  |   1.441562   .0841019    17.14   0.000     1.276682    1.606441
            16  |   1.483301   .0861865    17.21   0.000     1.314335    1.652268
            17  |   1.527901   .0873529    17.49   0.000     1.356647    1.699154
            18  |   1.404424   .0895858    15.68   0.000     1.228793    1.580054
            19  |   1.431454   .0908622    15.75   0.000     1.253321    1.609587
            20  |   1.454252   .0913603    15.92   0.000     1.275143    1.633362
            21  |   1.375849   .0929693    14.80   0.000     1.193585    1.558113
            22  |   1.407449    .095384    14.76   0.000     1.220451    1.594447
            23  |   1.453029    .097822    14.85   0.000     1.261251    1.644807
            24  |   1.492619   .0981685    15.20   0.000     1.300162    1.685076
            25  |   1.499081   .1002975    14.95   0.000      1.30245    1.695712
            26  |   .5633144   .1104841     5.10   0.000     .3467129    .7799159
            27  |   .5136479   .1056139     4.86   0.000     .3065944    .7207014
            28  |   .6851968   .1030996     6.65   0.000     .4830725    .8873211
            29  |   .8943474   .1002356     8.92   0.000     .6978378    1.090857
            30  |   1.044576   .0990791    10.54   0.000     .8503341    1.238819
            31  |   1.221988   .0996275    12.27   0.000      1.02667    1.417305
            32  |   1.364146   .0998791    13.66   0.000     1.168335    1.559956
            33  |   1.436394   .1010519    14.21   0.000     1.238284    1.634503
            34  |   1.592404   .1019456    15.62   0.000     1.392542    1.792266
            35  |    1.63679   .1026515    15.95   0.000     1.435544    1.838036
            36  |   1.628428   .1039002    15.67   0.000     1.424734    1.832122
            37  |   1.697742   .1040951    16.31   0.000     1.493666    1.901818
            38  |   1.716914   .1061009    16.18   0.000     1.508906    1.924923
            39  |   1.809838   .1069977    16.91   0.000     1.600071    2.019604
            40  |   1.929619   .1084525    17.79   0.000        1.717    2.142238
            41  |   1.999847   .1087924    18.38   0.000     1.786562    2.213132
            42  |   2.056129   .1102908    18.64   0.000     1.839906    2.272351
            43  |   1.899294    .111438    17.04   0.000     1.680822    2.117765
            44  |   1.972155   .1132272    17.42   0.000     1.750175    2.194134
            45  |   2.094415   .1142904    18.33   0.000     1.870352    2.318479
            46  |   2.126698   .1156428    18.39   0.000     1.899983    2.353413
            47  |   2.205386   .1155897    19.08   0.000     1.978775    2.431996
            48  |   2.246989   .1180872    19.03   0.000     2.015481    2.478496
            49  |   2.308797   .1176181    19.63   0.000      2.07821    2.539385
            50  |   2.388621   .1176186    20.31   0.000     2.158033     2.61921
                |
        age_cat |
             2  |   1.160602   .0454235    25.55   0.000      1.07155    1.249654
             3  |   1.664951   .0468035    35.57   0.000     1.573194    1.756708
             4  |   2.071828   .0507086    40.86   0.000     1.972415    2.171241
             5  |   2.373908    .058203    40.79   0.000     2.259803    2.488014
             6  |   2.563737   .0676758    37.88   0.000      2.43106    2.696414
                |
          _cons |   10.15583   .0831191   122.18   0.000     9.992876    10.31878
----------------+----------------------------------------------------------------
        sigma_u |   1.600162
        sigma_e |  .92343544
            rho |  .75016988   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    325,013
Group variable: id                              Number of groups  =      4,546

R-sq:                                           Obs per group:
     within  = 0.1421                                         min =          1
     between = 0.0359                                         avg =       71.5
     overall = 0.0757                                         max =      3,984

                                                F(59,4545)        =      37.63
corr(u_i, Xb)  = 0.0096                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,546 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0894374   .0414681     2.16   0.031     .0081398     .170735
during_domestic |  -.0009204   .0153899    -0.06   0.952    -.0310921    .0292513
 after_domestic |   .0095647    .016904     0.57   0.572    -.0235753    .0427046
   during_expat |  -.0383156   .0152083    -2.52   0.012    -.0681312   -.0085001
    after_expat |  -.0928803   .0146125    -6.36   0.000     -.121528   -.0642326
                |
       ind_year |
             2  |   .1915977   .0492498     3.89   0.000     .0950442    .2881513
             3  |   .7358611   .0586337    12.55   0.000     .6209105    .8508117
             4  |   .8764402    .063026    13.91   0.000     .7528786    1.000002
             5  |   1.098419   .0664841    16.52   0.000     .9680775     1.22876
             6  |   1.277688   .0695117    18.38   0.000     1.141411    1.413965
             7  |   1.493864   .0727923    20.52   0.000     1.351156    1.636572
             8  |   1.657602   .0753039    22.01   0.000     1.509969    1.805234
             9  |   1.782765   .0772299    23.08   0.000     1.631357    1.934173
            10  |   1.873738   .0790475    23.70   0.000     1.718767     2.02871
            11  |   1.962924   .0807298    24.31   0.000     1.804654    2.121194
            12  |   1.972577   .0824992    23.91   0.000     1.810839    2.134316
            13  |   2.023847   .0846805    23.90   0.000     1.857832    2.189862
            14  |    2.01767   .0848639    23.78   0.000     1.851295    2.184044
            15  |    1.95933   .0862979    22.70   0.000     1.790144    2.128515
            16  |   1.929754   .0881285    21.90   0.000     1.756979    2.102529
            17  |   1.932825   .0891764    21.67   0.000     1.757996    2.107654
            18  |   1.922068   .0910933    21.10   0.000     1.743481    2.100656
            19  |    1.86497   .0918317    20.31   0.000     1.684935    2.045004
            20  |   1.821052   .0937353    19.43   0.000     1.637285    2.004818
            21  |   1.823423   .0956413    19.07   0.000      1.63592    2.010926
            22  |    1.81395   .0979968    18.51   0.000     1.621828    2.006071
            23  |   1.813249    .099996    18.13   0.000     1.617208    2.009289
            24  |   1.029897   .1124161     9.16   0.000      .809507    1.250287
            25  |   1.080512   .1235438     8.75   0.000     .8383056    1.322718
            26  |   .4051071   .1034536     3.92   0.000     .2022878    .6079263
            27  |   .5702083   .0971095     5.87   0.000     .3798265    .7605901
            28  |   .7754536   .0939863     8.25   0.000     .5911948    .9597125
            29  |   .9291682    .094868     9.79   0.000     .7431807    1.115156
            30  |   1.060254   .0948299    11.18   0.000     .8743413    1.246167
            31  |    1.18509   .0953155    12.43   0.000     .9982252    1.371955
            32  |    1.39334   .0952112    14.63   0.000      1.20668        1.58
            33  |    1.56328   .0963815    16.22   0.000     1.374325    1.752234
            34  |   1.676374   .0971763    17.25   0.000     1.485861    1.866887
            35  |    1.77451   .0983475    18.04   0.000     1.581702    1.967319
            36  |   1.830805   .0996592    18.37   0.000     1.635424    2.026185
            37  |   1.892613   .1000677    18.91   0.000     1.696431    2.088794
            38  |   1.938909   .1017985    19.05   0.000     1.739334    2.138483
            39  |   1.989768   .1027576    19.36   0.000     1.788313    2.191223
            40  |   2.030153   .1032412    19.66   0.000      1.82775    2.232556
            41  |   2.016031   .1037166    19.44   0.000     1.812696    2.219366
            42  |   2.069032   .1040845    19.88   0.000     1.864976    2.273089
            43  |   2.157391   .1052916    20.49   0.000     1.950968    2.363814
            44  |   2.105337   .1060493    19.85   0.000     1.897429    2.313245
            45  |   2.167751   .1060375    20.44   0.000     1.959866    2.375636
            46  |   2.160844   .1063536    20.32   0.000      1.95234    2.369349
            47  |   2.198822   .1078316    20.39   0.000      1.98742    2.410225
            48  |   2.251663   .1079539    20.86   0.000     2.040021    2.463305
            49  |   2.024346   .1092295    18.53   0.000     1.810203    2.238489
            50  |   2.087679   .1125031    18.56   0.000     1.867118     2.30824
                |
        age_cat |
             2  |   .0524204   .0428307     1.22   0.221    -.0315485    .1363894
             3  |   .0322574   .0453251     0.71   0.477    -.0566018    .1211166
             4  |  -.0192652   .0485803    -0.40   0.692    -.1145061    .0759758
             5  |  -.1142728   .0562173    -2.03   0.042    -.2244861   -.0040596
             6  |  -.2157051   .0656447    -3.29   0.001    -.3444006   -.0870096
                |
          _cons |   5.286071    .083624    63.21   0.000     5.122127    5.450014
----------------+----------------------------------------------------------------
        sigma_u |  1.6249001
        sigma_e |  .90891804
            rho |  .76167658   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1420965136224303

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    325,013
Group variable: id                              Number of groups  =      4,546

R-sq:                                           Obs per group:
     within  = 0.1421                                         min =          1
     between = 0.0359                                         avg =       71.5
     overall = 0.0757                                         max =      3,984

                                                F(59,4545)        =      37.63
corr(u_i, Xb)  = 0.0096                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,546 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0894374   .0414681     2.16   0.031     .0081398     .170735
during_domestic |  -.0009204   .0153899    -0.06   0.952    -.0310921    .0292513
 after_domestic |   .0095647    .016904     0.57   0.572    -.0235753    .0427046
   during_expat |  -.0383156   .0152083    -2.52   0.012    -.0681312   -.0085001
    after_expat |  -.0928803   .0146125    -6.36   0.000     -.121528   -.0642326
                |
       ind_year |
             2  |   .1915977   .0492498     3.89   0.000     .0950442    .2881513
             3  |   .7358611   .0586337    12.55   0.000     .6209105    .8508117
             4  |   .8764402    .063026    13.91   0.000     .7528786    1.000002
             5  |   1.098419   .0664841    16.52   0.000     .9680775     1.22876
             6  |   1.277688   .0695117    18.38   0.000     1.141411    1.413965
             7  |   1.493864   .0727923    20.52   0.000     1.351156    1.636572
             8  |   1.657602   .0753039    22.01   0.000     1.509969    1.805234
             9  |   1.782765   .0772299    23.08   0.000     1.631357    1.934173
            10  |   1.873738   .0790475    23.70   0.000     1.718767     2.02871
            11  |   1.962924   .0807298    24.31   0.000     1.804654    2.121194
            12  |   1.972577   .0824992    23.91   0.000     1.810839    2.134316
            13  |   2.023847   .0846805    23.90   0.000     1.857832    2.189862
            14  |    2.01767   .0848639    23.78   0.000     1.851295    2.184044
            15  |    1.95933   .0862979    22.70   0.000     1.790144    2.128515
            16  |   1.929754   .0881285    21.90   0.000     1.756979    2.102529
            17  |   1.932825   .0891764    21.67   0.000     1.757996    2.107654
            18  |   1.922068   .0910933    21.10   0.000     1.743481    2.100656
            19  |    1.86497   .0918317    20.31   0.000     1.684935    2.045004
            20  |   1.821052   .0937353    19.43   0.000     1.637285    2.004818
            21  |   1.823423   .0956413    19.07   0.000      1.63592    2.010926
            22  |    1.81395   .0979968    18.51   0.000     1.621828    2.006071
            23  |   1.813249    .099996    18.13   0.000     1.617208    2.009289
            24  |   1.029897   .1124161     9.16   0.000      .809507    1.250287
            25  |   1.080512   .1235438     8.75   0.000     .8383056    1.322718
            26  |   .4051071   .1034536     3.92   0.000     .2022878    .6079263
            27  |   .5702083   .0971095     5.87   0.000     .3798265    .7605901
            28  |   .7754536   .0939863     8.25   0.000     .5911948    .9597125
            29  |   .9291682    .094868     9.79   0.000     .7431807    1.115156
            30  |   1.060254   .0948299    11.18   0.000     .8743413    1.246167
            31  |    1.18509   .0953155    12.43   0.000     .9982252    1.371955
            32  |    1.39334   .0952112    14.63   0.000      1.20668        1.58
            33  |    1.56328   .0963815    16.22   0.000     1.374325    1.752234
            34  |   1.676374   .0971763    17.25   0.000     1.485861    1.866887
            35  |    1.77451   .0983475    18.04   0.000     1.581702    1.967319
            36  |   1.830805   .0996592    18.37   0.000     1.635424    2.026185
            37  |   1.892613   .1000677    18.91   0.000     1.696431    2.088794
            38  |   1.938909   .1017985    19.05   0.000     1.739334    2.138483
            39  |   1.989768   .1027576    19.36   0.000     1.788313    2.191223
            40  |   2.030153   .1032412    19.66   0.000      1.82775    2.232556
            41  |   2.016031   .1037166    19.44   0.000     1.812696    2.219366
            42  |   2.069032   .1040845    19.88   0.000     1.864976    2.273089
            43  |   2.157391   .1052916    20.49   0.000     1.950968    2.363814
            44  |   2.105337   .1060493    19.85   0.000     1.897429    2.313245
            45  |   2.167751   .1060375    20.44   0.000     1.959866    2.375636
            46  |   2.160844   .1063536    20.32   0.000      1.95234    2.369349
            47  |   2.198822   .1078316    20.39   0.000      1.98742    2.410225
            48  |   2.251663   .1079539    20.86   0.000     2.040021    2.463305
            49  |   2.024346   .1092295    18.53   0.000     1.810203    2.238489
            50  |   2.087679   .1125031    18.56   0.000     1.867118     2.30824
                |
        age_cat |
             2  |   .0524204   .0428307     1.22   0.221    -.0315485    .1363894
             3  |   .0322574   .0453251     0.71   0.477    -.0566018    .1211166
             4  |  -.0192652   .0485803    -0.40   0.692    -.1145061    .0759758
             5  |  -.1142728   .0562173    -2.03   0.042    -.2244861   -.0040596
             6  |  -.2157051   .0656447    -3.29   0.001    -.3444006   -.0870096
                |
          _cons |   5.286071    .083624    63.21   0.000     5.122127    5.450014
----------------+----------------------------------------------------------------
        sigma_u |  1.6249001
        sigma_e |  .90891804
            rho |  .76167658   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.3989                                         min =          1
     between = 0.1926                                         avg =       75.8
     overall = 0.2230                                         max =      4,150

                                                F(59,4628)        =     142.76
corr(u_i, Xb)  = 0.0457                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0869649   .0235866     3.69   0.000     .0407239    .1332059
during_domestic |  -.0275622   .0098947    -2.79   0.005    -.0469607   -.0081638
 after_domestic |  -.0023878   .0113244    -0.21   0.833    -.0245891    .0198136
   during_expat |   .0166418   .0093026     1.79   0.074    -.0015957    .0348792
    after_expat |   .0246842   .0098964     2.49   0.013     .0052825    .0440859
                |
       ind_year |
             2  |   .1255055   .0342707     3.66   0.000     .0583185    .1926925
             3  |   .2988491    .037792     7.91   0.000     .2247588    .3729394
             4  |   .4844888   .0405483    11.95   0.000     .4049947    .5639829
             5  |    .716589    .041315    17.34   0.000      .635592    .7975861
             6  |    .881964   .0441055    20.00   0.000     .7954962    .9684318
             7  |   1.032662   .0460443    22.43   0.000     .9423936    1.122931
             8  |   1.112452   .0478753    23.24   0.000     1.018594     1.20631
             9  |   1.236361   .0494338    25.01   0.000     1.139447    1.333275
            10  |   1.331566   .0507468    26.24   0.000     1.232078    1.431054
            11  |   1.407548   .0518563    27.14   0.000     1.305885    1.509211
            12  |   1.476092   .0529624    27.87   0.000     1.372261    1.579924
            13  |   1.530941    .054336    28.18   0.000     1.424417    1.637466
            14  |   1.580776   .0544877    29.01   0.000     1.473954    1.687597
            15  |   1.612925   .0550353    29.31   0.000     1.505029     1.72082
            16  |   1.609919   .0565517    28.47   0.000     1.499051    1.720788
            17  |   1.636563   .0575848    28.42   0.000     1.523669    1.749456
            18  |   1.566933   .0582982    26.88   0.000     1.452641    1.681226
            19  |   1.600917   .0593446    26.98   0.000     1.484574    1.717261
            20  |   1.640727    .060016    27.34   0.000     1.523067    1.758387
            21  |   1.625819    .060812    26.74   0.000     1.506599     1.74504
            22  |   1.680726   .0621953    27.02   0.000     1.558794    1.802659
            23  |   1.745508     .06345    27.51   0.000     1.621116      1.8699
            24  |   1.762517   .0640975    27.50   0.000     1.636856    1.888179
            25  |   1.745172   .0651861    26.77   0.000     1.617377    1.872968
            26  |  -.5686909   .0662818    -8.58   0.000    -.6986348    -.438747
            27  |  -.4303431   .0647852    -6.64   0.000    -.5573529   -.3033332
            28  |  -.1761771   .0630356    -2.79   0.005     -.299757   -.0525972
            29  |   .1116914   .0627594     1.78   0.075     -.011347    .2347298
            30  |   .2868257   .0616991     4.65   0.000      .165866    .4077854
            31  |   .4802463   .0617262     7.78   0.000     .3592335    .6012591
            32  |   .6543748   .0625589    10.46   0.000     .5317295      .77702
            33  |    .771248   .0623774    12.36   0.000     .6489587    .8935374
            34  |   .9313636   .0632342    14.73   0.000     .8073943    1.055333
            35  |   1.016116   .0633896    16.03   0.000     .8918421     1.14039
            36  |    1.07754   .0638343    16.88   0.000     .9523943    1.202686
            37  |   1.179868   .0645088    18.29   0.000       1.0534    1.306336
            38  |   1.237612    .065383    18.93   0.000      1.10943    1.365794
            39  |   1.331569   .0654654    20.34   0.000     1.203226    1.459912
            40  |   1.463293   .0660779    22.14   0.000     1.333749    1.592838
            41  |   1.505435   .0667336    22.56   0.000     1.374606    1.636265
            42  |   1.555141   .0668279    23.27   0.000     1.424126    1.686155
            43  |   1.532901   .0675351    22.70   0.000       1.4005    1.665302
            44  |   1.621494    .068274    23.75   0.000     1.487644    1.755343
            45  |   1.697575   .0684926    24.78   0.000     1.563297    1.831853
            46  |   1.713588    .068667    24.96   0.000     1.578968    1.848208
            47  |   1.766708    .068299    25.87   0.000      1.63281    1.900607
            48  |   1.798969   .0691917    26.00   0.000     1.663321    1.934618
            49  |   1.798481   .0698194    25.76   0.000     1.661602     1.93536
            50  |   1.826046   .0696052    26.23   0.000     1.689587    1.962506
                |
        age_cat |
             2  |   .7232791   .0363094    19.92   0.000     .6520954    .7944628
             3  |   .8713893   .0370147    23.54   0.000     .7988228    .9439558
             4  |   .9176515   .0386712    23.73   0.000     .8418375    .9934655
             5  |     .91545   .0425279    21.53   0.000     .8320751    .9988249
             6  |   .8993484   .0479563    18.75   0.000     .8053311    .9933656
                |
          _cons |   7.473093   .0588262   127.04   0.000     7.357765     7.58842
----------------+----------------------------------------------------------------
        sigma_u |  1.1668615
        sigma_e |  .64016715
            rho |  .76864703   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3989311686734484

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.3989                                         min =          1
     between = 0.1926                                         avg =       75.8
     overall = 0.2230                                         max =      4,150

                                                F(59,4628)        =     142.76
corr(u_i, Xb)  = 0.0457                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
           lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0869649   .0235866     3.69   0.000     .0407239    .1332059
during_domestic |  -.0275622   .0098947    -2.79   0.005    -.0469607   -.0081638
 after_domestic |  -.0023878   .0113244    -0.21   0.833    -.0245891    .0198136
   during_expat |   .0166418   .0093026     1.79   0.074    -.0015957    .0348792
    after_expat |   .0246842   .0098964     2.49   0.013     .0052825    .0440859
                |
       ind_year |
             2  |   .1255055   .0342707     3.66   0.000     .0583185    .1926925
             3  |   .2988491    .037792     7.91   0.000     .2247588    .3729394
             4  |   .4844888   .0405483    11.95   0.000     .4049947    .5639829
             5  |    .716589    .041315    17.34   0.000      .635592    .7975861
             6  |    .881964   .0441055    20.00   0.000     .7954962    .9684318
             7  |   1.032662   .0460443    22.43   0.000     .9423936    1.122931
             8  |   1.112452   .0478753    23.24   0.000     1.018594     1.20631
             9  |   1.236361   .0494338    25.01   0.000     1.139447    1.333275
            10  |   1.331566   .0507468    26.24   0.000     1.232078    1.431054
            11  |   1.407548   .0518563    27.14   0.000     1.305885    1.509211
            12  |   1.476092   .0529624    27.87   0.000     1.372261    1.579924
            13  |   1.530941    .054336    28.18   0.000     1.424417    1.637466
            14  |   1.580776   .0544877    29.01   0.000     1.473954    1.687597
            15  |   1.612925   .0550353    29.31   0.000     1.505029     1.72082
            16  |   1.609919   .0565517    28.47   0.000     1.499051    1.720788
            17  |   1.636563   .0575848    28.42   0.000     1.523669    1.749456
            18  |   1.566933   .0582982    26.88   0.000     1.452641    1.681226
            19  |   1.600917   .0593446    26.98   0.000     1.484574    1.717261
            20  |   1.640727    .060016    27.34   0.000     1.523067    1.758387
            21  |   1.625819    .060812    26.74   0.000     1.506599     1.74504
            22  |   1.680726   .0621953    27.02   0.000     1.558794    1.802659
            23  |   1.745508     .06345    27.51   0.000     1.621116      1.8699
            24  |   1.762517   .0640975    27.50   0.000     1.636856    1.888179
            25  |   1.745172   .0651861    26.77   0.000     1.617377    1.872968
            26  |  -.5686909   .0662818    -8.58   0.000    -.6986348    -.438747
            27  |  -.4303431   .0647852    -6.64   0.000    -.5573529   -.3033332
            28  |  -.1761771   .0630356    -2.79   0.005     -.299757   -.0525972
            29  |   .1116914   .0627594     1.78   0.075     -.011347    .2347298
            30  |   .2868257   .0616991     4.65   0.000      .165866    .4077854
            31  |   .4802463   .0617262     7.78   0.000     .3592335    .6012591
            32  |   .6543748   .0625589    10.46   0.000     .5317295      .77702
            33  |    .771248   .0623774    12.36   0.000     .6489587    .8935374
            34  |   .9313636   .0632342    14.73   0.000     .8073943    1.055333
            35  |   1.016116   .0633896    16.03   0.000     .8918421     1.14039
            36  |    1.07754   .0638343    16.88   0.000     .9523943    1.202686
            37  |   1.179868   .0645088    18.29   0.000       1.0534    1.306336
            38  |   1.237612    .065383    18.93   0.000      1.10943    1.365794
            39  |   1.331569   .0654654    20.34   0.000     1.203226    1.459912
            40  |   1.463293   .0660779    22.14   0.000     1.333749    1.592838
            41  |   1.505435   .0667336    22.56   0.000     1.374606    1.636265
            42  |   1.555141   .0668279    23.27   0.000     1.424126    1.686155
            43  |   1.532901   .0675351    22.70   0.000       1.4005    1.665302
            44  |   1.621494    .068274    23.75   0.000     1.487644    1.755343
            45  |   1.697575   .0684926    24.78   0.000     1.563297    1.831853
            46  |   1.713588    .068667    24.96   0.000     1.578968    1.848208
            47  |   1.766708    .068299    25.87   0.000      1.63281    1.900607
            48  |   1.798969   .0691917    26.00   0.000     1.663321    1.934618
            49  |   1.798481   .0698194    25.76   0.000     1.661602     1.93536
            50  |   1.826046   .0696052    26.23   0.000     1.689587    1.962506
                |
        age_cat |
             2  |   .7232791   .0363094    19.92   0.000     .6520954    .7944628
             3  |   .8713893   .0370147    23.54   0.000     .7988228    .9439558
             4  |   .9176515   .0386712    23.73   0.000     .8418375    .9934655
             5  |     .91545   .0425279    21.53   0.000     .8320751    .9988249
             6  |   .8993484   .0479563    18.75   0.000     .8053311    .9933656
                |
          _cons |   7.473093   .0588262   127.04   0.000     7.357765     7.58842
----------------+----------------------------------------------------------------
        sigma_u |  1.1668615
        sigma_e |  .64016715
            rho |  .76864703   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.0340                                         min =          1
     between = 0.1964                                         avg =       75.8
     overall = 0.0828                                         max =      4,150

                                                F(59,4628)        =      13.76
corr(u_i, Xb)  = 0.1820                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0277377   .0107098     2.59   0.010     .0067414     .048734
during_domestic |  -.0139267   .0043276    -3.22   0.001    -.0224108   -.0054425
 after_domestic |  -.0222059   .0050424    -4.40   0.000    -.0320915   -.0123203
   during_expat |   -.004819   .0040971    -1.18   0.240    -.0128513    .0032134
    after_expat |  -.0142862   .0039593    -3.61   0.000    -.0220483    -.006524
                |
       ind_year |
             2  |   .0054004   .0158016     0.34   0.733    -.0255783     .036379
             3  |  -.0282923   .0173691    -1.63   0.103    -.0623439    .0057594
             4  |  -.0445858   .0183952    -2.42   0.015    -.0806492   -.0085225
             5  |  -.0280013   .0187077    -1.50   0.135    -.0646774    .0086748
             6  |  -.0452741   .0194339    -2.33   0.020    -.0833737   -.0071745
             7  |  -.0320351   .0195781    -1.64   0.102    -.0704175    .0063473
             8  |  -.0443626   .0202551    -2.19   0.029    -.0840723   -.0046529
             9  |  -.0492691   .0207888    -2.37   0.018    -.0900251   -.0085131
            10  |  -.0390332   .0209745    -1.86   0.063    -.0801532    .0020869
            11  |  -.0490582   .0218082    -2.25   0.025    -.0918128   -.0063037
            12  |  -.0431473   .0219393    -1.97   0.049    -.0861588   -.0001358
            13  |  -.0297657   .0221251    -1.35   0.179    -.0731415    .0136101
            14  |  -.0042644   .0222946    -0.19   0.848    -.0479724    .0394435
            15  |   .0099997   .0225476     0.44   0.657    -.0342043    .0542037
            16  |   .0227134   .0229924     0.99   0.323    -.0223627    .0677895
            17  |   .0320341   .0233726     1.37   0.171    -.0137874    .0778556
            18  |   .0387035   .0236992     1.63   0.103    -.0077582    .0851653
            19  |   .0382912   .0238144     1.61   0.108    -.0083964    .0849787
            20  |   .0620339   .0241398     2.57   0.010     .0147084    .1093594
            21  |   .0701818   .0241527     2.91   0.004     .0228309    .1175326
            22  |   .0825917   .0247503     3.34   0.001     .0340693     .131114
            23  |    .069121   .0248226     2.78   0.005     .0204568    .1177852
            24  |   .0231269   .0250999     0.92   0.357    -.0260809    .0723347
            25  |  -.0049107   .0254634    -0.19   0.847    -.0548312    .0450098
            26  |   .1309381   .0266743     4.91   0.000     .0786439    .1832324
            27  |   .1056034   .0256032     4.12   0.000     .0554089    .1557978
            28  |    .119581   .0248829     4.81   0.000     .0707986    .1683633
            29  |   .1155251   .0246158     4.69   0.000     .0672665    .1637838
            30  |   .1197221   .0244009     4.91   0.000     .0718848    .1675594
            31  |   .1162317   .0243903     4.77   0.000     .0684151    .1640484
            32  |   .1009715   .0247535     4.08   0.000     .0524428    .1495003
            33  |   .1058938   .0243492     4.35   0.000     .0581577    .1536298
            34  |   .0930973   .0245397     3.79   0.000     .0449879    .1412068
            35  |   .0925417    .024686     3.75   0.000     .0441454     .140938
            36  |   .0862969    .024925     3.46   0.001      .037432    .1351618
            37  |   .0925276   .0249828     3.70   0.000     .0435494    .1415059
            38  |   .1048754   .0251871     4.16   0.000     .0554967    .1542541
            39  |   .1125874    .025243     4.46   0.000     .0630992    .1620757
            40  |   .0993251   .0254218     3.91   0.000     .0494863    .1491639
            41  |   .1104493   .0257119     4.30   0.000     .0600418    .1608568
            42  |   .1141151   .0260048     4.39   0.000     .0631333    .1650969
            43  |   .1190413   .0265343     4.49   0.000     .0670214    .1710612
            44  |    .114646   .0267274     4.29   0.000     .0622475    .1670444
            45  |   .1200964   .0266607     4.50   0.000     .0678287     .172364
            46  |   .1306336   .0270316     4.83   0.000     .0776387    .1836284
            47  |   .1296717   .0273409     4.74   0.000     .0760706    .1832729
            48  |   .1222408   .0275115     4.44   0.000     .0683051    .1761766
            49  |   .0056274   .0284597     0.20   0.843    -.0501673    .0614221
            50  |  -.0215635   .0287233    -0.75   0.453    -.0778749    .0347479
                |
        age_cat |
             2  |   .0767953   .0105042     7.31   0.000     .0562021    .0973886
             3  |   .1122001   .0111181    10.09   0.000     .0904034    .1339968
             4  |   .1591459   .0118422    13.44   0.000     .1359296    .1823623
             5  |   .1797873   .0135418    13.28   0.000      .153239    .2063356
             6  |   .1911836    .015861    12.05   0.000     .1600884    .2222787
                |
          _cons |   .4597216   .0216464    21.24   0.000     .4172843    .5021589
----------------+----------------------------------------------------------------
        sigma_u |  .35914389
        sigma_e |  .28644955
            rho |  .61119101   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0340286586284992

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.0340                                         min =          1
     between = 0.1964                                         avg =       75.8
     overall = 0.0828                                         max =      4,150

                                                F(59,4628)        =      13.76
corr(u_i, Xb)  = 0.1820                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,629 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
       exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0277377   .0107098     2.59   0.010     .0067414     .048734
during_domestic |  -.0139267   .0043276    -3.22   0.001    -.0224108   -.0054425
 after_domestic |  -.0222059   .0050424    -4.40   0.000    -.0320915   -.0123203
   during_expat |   -.004819   .0040971    -1.18   0.240    -.0128513    .0032134
    after_expat |  -.0142862   .0039593    -3.61   0.000    -.0220483    -.006524
                |
       ind_year |
             2  |   .0054004   .0158016     0.34   0.733    -.0255783     .036379
             3  |  -.0282923   .0173691    -1.63   0.103    -.0623439    .0057594
             4  |  -.0445858   .0183952    -2.42   0.015    -.0806492   -.0085225
             5  |  -.0280013   .0187077    -1.50   0.135    -.0646774    .0086748
             6  |  -.0452741   .0194339    -2.33   0.020    -.0833737   -.0071745
             7  |  -.0320351   .0195781    -1.64   0.102    -.0704175    .0063473
             8  |  -.0443626   .0202551    -2.19   0.029    -.0840723   -.0046529
             9  |  -.0492691   .0207888    -2.37   0.018    -.0900251   -.0085131
            10  |  -.0390332   .0209745    -1.86   0.063    -.0801532    .0020869
            11  |  -.0490582   .0218082    -2.25   0.025    -.0918128   -.0063037
            12  |  -.0431473   .0219393    -1.97   0.049    -.0861588   -.0001358
            13  |  -.0297657   .0221251    -1.35   0.179    -.0731415    .0136101
            14  |  -.0042644   .0222946    -0.19   0.848    -.0479724    .0394435
            15  |   .0099997   .0225476     0.44   0.657    -.0342043    .0542037
            16  |   .0227134   .0229924     0.99   0.323    -.0223627    .0677895
            17  |   .0320341   .0233726     1.37   0.171    -.0137874    .0778556
            18  |   .0387035   .0236992     1.63   0.103    -.0077582    .0851653
            19  |   .0382912   .0238144     1.61   0.108    -.0083964    .0849787
            20  |   .0620339   .0241398     2.57   0.010     .0147084    .1093594
            21  |   .0701818   .0241527     2.91   0.004     .0228309    .1175326
            22  |   .0825917   .0247503     3.34   0.001     .0340693     .131114
            23  |    .069121   .0248226     2.78   0.005     .0204568    .1177852
            24  |   .0231269   .0250999     0.92   0.357    -.0260809    .0723347
            25  |  -.0049107   .0254634    -0.19   0.847    -.0548312    .0450098
            26  |   .1309381   .0266743     4.91   0.000     .0786439    .1832324
            27  |   .1056034   .0256032     4.12   0.000     .0554089    .1557978
            28  |    .119581   .0248829     4.81   0.000     .0707986    .1683633
            29  |   .1155251   .0246158     4.69   0.000     .0672665    .1637838
            30  |   .1197221   .0244009     4.91   0.000     .0718848    .1675594
            31  |   .1162317   .0243903     4.77   0.000     .0684151    .1640484
            32  |   .1009715   .0247535     4.08   0.000     .0524428    .1495003
            33  |   .1058938   .0243492     4.35   0.000     .0581577    .1536298
            34  |   .0930973   .0245397     3.79   0.000     .0449879    .1412068
            35  |   .0925417    .024686     3.75   0.000     .0441454     .140938
            36  |   .0862969    .024925     3.46   0.001      .037432    .1351618
            37  |   .0925276   .0249828     3.70   0.000     .0435494    .1415059
            38  |   .1048754   .0251871     4.16   0.000     .0554967    .1542541
            39  |   .1125874    .025243     4.46   0.000     .0630992    .1620757
            40  |   .0993251   .0254218     3.91   0.000     .0494863    .1491639
            41  |   .1104493   .0257119     4.30   0.000     .0600418    .1608568
            42  |   .1141151   .0260048     4.39   0.000     .0631333    .1650969
            43  |   .1190413   .0265343     4.49   0.000     .0670214    .1710612
            44  |    .114646   .0267274     4.29   0.000     .0622475    .1670444
            45  |   .1200964   .0266607     4.50   0.000     .0678287     .172364
            46  |   .1306336   .0270316     4.83   0.000     .0776387    .1836284
            47  |   .1296717   .0273409     4.74   0.000     .0760706    .1832729
            48  |   .1222408   .0275115     4.44   0.000     .0683051    .1761766
            49  |   .0056274   .0284597     0.20   0.843    -.0501673    .0614221
            50  |  -.0215635   .0287233    -0.75   0.453    -.0778749    .0347479
                |
        age_cat |
             2  |   .0767953   .0105042     7.31   0.000     .0562021    .0973886
             3  |   .1122001   .0111181    10.09   0.000     .0904034    .1339968
             4  |   .1591459   .0118422    13.44   0.000     .1359296    .1823623
             5  |   .1797873   .0135418    13.28   0.000      .153239    .2063356
             6  |   .1911836    .015861    12.05   0.000     .1600884    .2222787
                |
          _cons |   .4597216   .0216464    21.24   0.000     .4172843    .5021589
----------------+----------------------------------------------------------------
        sigma_u |  .35914389
        sigma_e |  .28644955
            rho |  .61119101   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs     =    293,327
Group variable: id                              Number of groups  =      4,449

R-sq:                                           Obs per group:
     within  = 0.0404                                         min =          1
     between = 0.0037                                         avg =       65.9
     overall = 0.0315                                         max =      3,652

                                                F(56,4448)        =      46.71
corr(u_i, Xb)  = -0.1052                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,449 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0099494   .0205713     0.48   0.629    -.0303805    .0502793
during_domestic |  -.0219797    .008706    -2.52   0.012    -.0390477   -.0049117
 after_domestic |  -.0291293   .0084864    -3.43   0.001    -.0457667   -.0124918
   during_expat |  -.0294198   .0087558    -3.36   0.001    -.0465856    -.012254
    after_expat |  -.0177696   .0072398    -2.45   0.014    -.0319631    -.003576
                |
       ind_year |
             3  |  -.1143228     .04837    -2.36   0.018     -.209152   -.0194935
             4  |  -.0025944    .046545    -0.06   0.956    -.0938457    .0886569
             5  |  -.0482586   .0473633    -1.02   0.308    -.1411143    .0445972
             6  |  -.1201101    .048498    -2.48   0.013    -.2151903   -.0250298
             7  |   .0015526   .0477794     0.03   0.974    -.0921187     .095224
             8  |  -.1043946   .0486487    -2.15   0.032    -.1997701    -.009019
             9  |  -.1019054   .0500882    -2.03   0.042    -.2001032   -.0037076
            10  |  -.1305613   .0484769    -2.69   0.007    -.2256002   -.0355224
            11  |  -.1492515   .0499857    -2.99   0.003    -.2472484   -.0512545
            12  |   -.151822   .0506981    -2.99   0.003    -.2512156   -.0524284
            13  |  -.1969113   .0504434    -3.90   0.000    -.2958054   -.0980172
            14  |  -.2968148   .0496567    -5.98   0.000    -.3941666   -.1994631
            15  |   -.170653   .0506936    -3.37   0.001    -.2700378   -.0712682
            16  |   -.173586    .050493    -3.44   0.001    -.2725773   -.0745946
            17  |  -.2228256   .0523002    -4.26   0.000    -.3253599   -.1202913
            18  |   -.223426   .0506332    -4.41   0.000    -.3226922   -.1241599
            19  |  -.2277339   .0517797    -4.40   0.000    -.3292479     -.12622
            20  |  -.1453605    .051292    -2.83   0.005    -.2459184   -.0448025
            21  |  -.2666874   .0512693    -5.20   0.000    -.3672007   -.1661742
            22  |  -.0001233   .0523761    -0.00   0.998    -.1028066    .1025599
            23  |  -.3497886    .053373    -6.55   0.000    -.4544261    -.245151
            24  |  -.5288156   .0551027    -9.60   0.000    -.6368443   -.4207868
            25  |  -.3156975   .0637751    -4.95   0.000    -.4407285   -.1906665
            27  |  -.0813336   .0620394    -1.31   0.190    -.2029616    .0402944
            28  |  -.4017339    .057939    -6.93   0.000    -.5153231   -.2881447
            29  |  -.1683784   .0567989    -2.96   0.003    -.2797325   -.0570243
            30  |  -.2756565   .0563548    -4.89   0.000      -.38614   -.1651729
            31  |  -.1911107   .0561019    -3.41   0.001    -.3010984   -.0811231
            32  |  -.3013837   .0561735    -5.37   0.000    -.4115117   -.1912558
            33  |  -.1572974   .0557502    -2.82   0.005    -.2665955   -.0479994
            34  |  -.2752166   .0558123    -4.93   0.000    -.3846364   -.1657969
            35  |  -.2590232   .0560418    -4.62   0.000     -.368893   -.1491534
            36  |  -.3139134   .0562287    -5.58   0.000    -.4241496   -.2036772
            37  |  -.3177322   .0572977    -5.55   0.000    -.4300642   -.2054001
            38  |  -.2832481   .0575116    -4.93   0.000    -.3959995   -.1704967
            39  |  -.3715679   .0569668    -6.52   0.000    -.4832511   -.2598847
            40  |  -.2587236   .0573536    -4.51   0.000    -.3711652   -.1462819
            41  |  -.3170667   .0586096    -5.41   0.000    -.4319707   -.2021626
            42  |  -.3159167   .0587416    -5.38   0.000    -.4310795    -.200754
            43  |  -.1857101   .0585377    -3.17   0.002    -.3004731   -.0709471
            44  |  -.2114758   .0583235    -3.63   0.000    -.3258189   -.0971327
            45  |  -.3983566   .0589594    -6.76   0.000    -.5139464   -.2827669
            46  |  -.2513012   .0583002    -4.31   0.000    -.3655985   -.1370039
            47  |  -.0536028   .0606812    -0.88   0.377    -.1725682    .0653626
            48  |  -.4272903   .0593376    -7.20   0.000    -.5436216   -.3109591
            49  |   -.915066    .058353   -15.68   0.000    -1.029467    -.800665
            50  |  -.3374032   .0671536    -5.02   0.000    -.4690577   -.2057488
                |
        age_cat |
             3  |  -.1440739   .0314526    -4.58   0.000    -.2057366   -.0824113
             4  |  -.3545236   .0289536   -12.24   0.000     -.411287   -.2977602
             5  |  -.4311291   .0304241   -14.17   0.000    -.4907754   -.3714828
             6  |  -.4624232   .0333471   -13.87   0.000    -.5278001   -.3970462
                |
          _cons |      .5197   .0516628    10.06   0.000     .4184153    .6209847
----------------+----------------------------------------------------------------
        sigma_u |  .37772304
        sigma_e |  .83412644
            rho |  .17016653   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0404014170951421

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    293,327
Group variable: id                              Number of groups  =      4,449

R-sq:                                           Obs per group:
     within  = 0.0404                                         min =          1
     between = 0.0037                                         avg =       65.9
     overall = 0.0315                                         max =      3,652

                                                F(56,4448)        =      46.71
corr(u_i, Xb)  = -0.1052                        Prob > F          =     0.0000

                                    (Std. Err. adjusted for 4,449 clusters in id)
---------------------------------------------------------------------------------
                |               Robust
            inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------+----------------------------------------------------------------
        foreign |   .0099494   .0205713     0.48   0.629    -.0303805    .0502793
during_domestic |  -.0219797    .008706    -2.52   0.012    -.0390477   -.0049117
 after_domestic |  -.0291293   .0084864    -3.43   0.001    -.0457667   -.0124918
   during_expat |  -.0294198   .0087558    -3.36   0.001    -.0465856    -.012254
    after_expat |  -.0177696   .0072398    -2.45   0.014    -.0319631    -.003576
                |
       ind_year |
             3  |  -.1143228     .04837    -2.36   0.018     -.209152   -.0194935
             4  |  -.0025944    .046545    -0.06   0.956    -.0938457    .0886569
             5  |  -.0482586   .0473633    -1.02   0.308    -.1411143    .0445972
             6  |  -.1201101    .048498    -2.48   0.013    -.2151903   -.0250298
             7  |   .0015526   .0477794     0.03   0.974    -.0921187     .095224
             8  |  -.1043946   .0486487    -2.15   0.032    -.1997701    -.009019
             9  |  -.1019054   .0500882    -2.03   0.042    -.2001032   -.0037076
            10  |  -.1305613   .0484769    -2.69   0.007    -.2256002   -.0355224
            11  |  -.1492515   .0499857    -2.99   0.003    -.2472484   -.0512545
            12  |   -.151822   .0506981    -2.99   0.003    -.2512156   -.0524284
            13  |  -.1969113   .0504434    -3.90   0.000    -.2958054   -.0980172
            14  |  -.2968148   .0496567    -5.98   0.000    -.3941666   -.1994631
            15  |   -.170653   .0506936    -3.37   0.001    -.2700378   -.0712682
            16  |   -.173586    .050493    -3.44   0.001    -.2725773   -.0745946
            17  |  -.2228256   .0523002    -4.26   0.000    -.3253599   -.1202913
            18  |   -.223426   .0506332    -4.41   0.000    -.3226922   -.1241599
            19  |  -.2277339   .0517797    -4.40   0.000    -.3292479     -.12622
            20  |  -.1453605    .051292    -2.83   0.005    -.2459184   -.0448025
            21  |  -.2666874   .0512693    -5.20   0.000    -.3672007   -.1661742
            22  |  -.0001233   .0523761    -0.00   0.998    -.1028066    .1025599
            23  |  -.3497886    .053373    -6.55   0.000    -.4544261    -.245151
            24  |  -.5288156   .0551027    -9.60   0.000    -.6368443   -.4207868
            25  |  -.3156975   .0637751    -4.95   0.000    -.4407285   -.1906665
            27  |  -.0813336   .0620394    -1.31   0.190    -.2029616    .0402944
            28  |  -.4017339    .057939    -6.93   0.000    -.5153231   -.2881447
            29  |  -.1683784   .0567989    -2.96   0.003    -.2797325   -.0570243
            30  |  -.2756565   .0563548    -4.89   0.000      -.38614   -.1651729
            31  |  -.1911107   .0561019    -3.41   0.001    -.3010984   -.0811231
            32  |  -.3013837   .0561735    -5.37   0.000    -.4115117   -.1912558
            33  |  -.1572974   .0557502    -2.82   0.005    -.2665955   -.0479994
            34  |  -.2752166   .0558123    -4.93   0.000    -.3846364   -.1657969
            35  |  -.2590232   .0560418    -4.62   0.000     -.368893   -.1491534
            36  |  -.3139134   .0562287    -5.58   0.000    -.4241496   -.2036772
            37  |  -.3177322   .0572977    -5.55   0.000    -.4300642   -.2054001
            38  |  -.2832481   .0575116    -4.93   0.000    -.3959995   -.1704967
            39  |  -.3715679   .0569668    -6.52   0.000    -.4832511   -.2598847
            40  |  -.2587236   .0573536    -4.51   0.000    -.3711652   -.1462819
            41  |  -.3170667   .0586096    -5.41   0.000    -.4319707   -.2021626
            42  |  -.3159167   .0587416    -5.38   0.000    -.4310795    -.200754
            43  |  -.1857101   .0585377    -3.17   0.002    -.3004731   -.0709471
            44  |  -.2114758   .0583235    -3.63   0.000    -.3258189   -.0971327
            45  |  -.3983566   .0589594    -6.76   0.000    -.5139464   -.2827669
            46  |  -.2513012   .0583002    -4.31   0.000    -.3655985   -.1370039
            47  |  -.0536028   .0606812    -0.88   0.377    -.1725682    .0653626
            48  |  -.4272903   .0593376    -7.20   0.000    -.5436216   -.3109591
            49  |   -.915066    .058353   -15.68   0.000    -1.029467    -.800665
            50  |  -.3374032   .0671536    -5.02   0.000    -.4690577   -.2057488
                |
        age_cat |
             3  |  -.1440739   .0314526    -4.58   0.000    -.2057366   -.0824113
             4  |  -.3545236   .0289536   -12.24   0.000     -.411287   -.2977602
             5  |  -.4311291   .0304241   -14.17   0.000    -.4907754   -.3714828
             6  |  -.4624232   .0333471   -13.87   0.000    -.5278001   -.3970462
                |
          _cons |      .5197   .0516628    10.06   0.000     .4184153    .6209847
----------------+----------------------------------------------------------------
        sigma_u |  .37772304
        sigma_e |  .83412644
            rho |  .17016653   (fraction of variance due to u_i)
---------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. *Szelekci az akviczis mintban
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. areg f1.expat lnL lnQ lnK exporter if ever_foreign==1&greenfield!=1, a(industry_year) cluster
> (frame_id)

Linear regression, absorbing indicators         Number of obs     =    107,455
                                                F(   4,   1352)   =       4.68
                                                Prob > F          =     0.0009
                                                R-squared         =     0.0762
                                                Adj R-squared     =     0.0617
                                                Root MSE          =     0.4528

                           (Std. Err. adjusted for 1,353 clusters in frame_id)
------------------------------------------------------------------------------
             |               Robust
     F.expat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         lnL |  -.0238634   .0109652    -2.18   0.030    -.0453739   -.0023528
         lnQ |   .0230453   .0092428     2.49   0.013     .0049134    .0411771
         lnK |   .0023352   .0071066     0.33   0.743    -.0116059    .0162762
    exporter |   .0435343   .0187465     2.32   0.020      .006759    .0803095
       _cons |   .0464254   .0821814     0.56   0.572    -.1147916    .2076423
-------------+----------------------------------------------------------------
industry_y~r |   absorbed                                    (1653 categories)

. do regram output/regression/selection 1 1

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

-----------------------------------------------------------------------------------------------
active results
-----------------------------------------------------------------------------------------------

Linear regression, absorbing indicators         Number of obs     =    107,455
                                                F(   4,   1352)   =       4.68
                                                Prob > F          =     0.0009
                                                R-squared         =     0.0762
                                                Adj R-squared     =     0.0617
                                                Root MSE          =     0.4528

                           (Std. Err. adjusted for 1,353 clusters in frame_id)
------------------------------------------------------------------------------
             |               Robust
     F.expat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         lnL |  -.0238634   .0109652    -2.18   0.030    -.0453739   -.0023528
         lnQ |   .0230453   .0092428     2.49   0.013     .0049134    .0411771
         lnK |   .0023352   .0071066     0.33   0.743    -.0116059    .0162762
    exporter |   .0435343   .0187465     2.32   0.020      .006759    .0803095
       _cons |   .0464254   .0821814     0.56   0.572    -.1147916    .2076423
-------------+----------------------------------------------------------------
industry_y~r |   absorbed                                    (1653 categories)

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),col
> numb(`coefs',"`X'")]), "`fmt'") _newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. keep if ever_foreign==1
(337,379 observations deleted)

. *Dinamika
. scalar Tbefore = 4

. scalar Tafter = 5

. 
. local N = Tbefore+Tafter+1

. 
. do event_study

. local T1 = Tbefore 

. local T2 = Tafter

. 
. foreach X in expat domestic {
  2.         gen byte `X'_p_0 = tenure==0 & (`X'==1)
  3.         forval t=1/`T1' {
  4.                 gen byte `X'_m_`t' = tenure== -`t' & (`X'==1)
  5.         }
  6.         forval t=1/`T2' {
  7.                 gen byte `X'_p_`t' = tenure== `t' & (`X'==1)
  8.         }
  9.         replace `X'_p_`T2' = tenure>= `T2' & (`X'==1)
 10. }
(40,366 real changes made)
(35,804 real changes made)

. local X foreign

. gen byte `X'_p_0 = tenure_`X'==0

. forval t=1/`T1' {
  2.         gen byte `X'_m_`t' = tenure_`X'== -`t'
  3. }

. forval t=1/`T2' {
  2.         gen byte `X'_p_`t' = tenure_`X'== `t'
  3. }

. replace `X'_p_`T2' = tenure_`X'>= `T2' 
(194,535 real changes made)

. sort frame_id year

. 
. * illustrate window overlap and recoding
. l manager_id expat year tenure* if frame_id=="ft10072219"

        +--------------------------------------------------------------------------+
        |      manager_id   expat   year   tenure~n   tenure   tenure~c   tenure~t |
        |--------------------------------------------------------------------------|
  4450. |         PP45376       0   1992        -19      -21        -21          0 |
  4451. | PP177715_998327       0   1992        -19      -20        -20          0 |
  4452. |         PP18562       0   1992        -19      -21        -21          0 |
  4453. |         PP45376       0   1993        -18      -20        -20          0 |
  4454. | PP177715_998327       0   1993        -18      -19        -19          0 |
        |--------------------------------------------------------------------------|
  4455. |         PP18562       0   1993        -18      -20        -20          0 |
  4456. | PP177715_998327       0   1994        -17      -18        -18          0 |
  4457. |         PP18562       0   1994        -17      -19        -19          0 |
  4458. |         PP45376       0   1994        -17      -19        -19          0 |
  4459. | PP177715_998327       0   1995        -16      -17        -17          0 |
        |--------------------------------------------------------------------------|
  4460. |         PP18562       0   1995        -16      -18        -18          0 |
  4461. |         PP45376       0   1995        -16      -18        -18          0 |
  4462. |         PP18562       0   1996        -15      -17        -17          0 |
  4463. | PP177715_998327       0   1996        -15      -16        -16          0 |
  4464. |         PP45376       0   1996        -15      -17        -17          0 |
        |--------------------------------------------------------------------------|
  4465. |         PP45376       0   1997        -14      -16        -16          0 |
  4466. | PP177715_998327       0   1997        -14      -15        -15          0 |
  4467. |         PP18562       0   1997        -14      -16        -16          0 |
  4468. |         PP45376       0   1998        -13      -15        -15          0 |
  4469. | PP177715_998327       0   1998        -13      -14        -14          0 |
        |--------------------------------------------------------------------------|
  4470. |         PP18562       0   1998        -13      -15        -15          0 |
  4471. |         PP18562       0   1999        -12      -14        -14          0 |
  4472. |         PP45376       0   1999        -12      -14        -14          0 |
  4473. | PP177715_998327       0   1999        -12      -13        -13          0 |
  4474. | PP177715_998327       0   2000        -11      -12        -12          0 |
        |--------------------------------------------------------------------------|
  4475. |         PP45376       0   2000        -11      -13        -13          0 |
  4476. |         PP18562       0   2000        -11      -13        -13          0 |
  4477. |         PP45376       0   2001        -10      -12        -12          0 |
  4478. |         PP18562       0   2001        -10      -12        -12          0 |
  4479. | PP177715_998327       0   2001        -10      -11        -11          0 |
        |--------------------------------------------------------------------------|
  4480. |         PP18562       0   2002         -9      -11        -11          0 |
  4481. | PP177715_998327       0   2002         -9      -10        -10          0 |
  4482. |         PP45376       0   2002         -9      -11        -11          0 |
  4483. | PP177715_998327       0   2003         -8       -9         -9          0 |
  4484. |         PP18562       0   2003         -8      -10        -10          0 |
        |--------------------------------------------------------------------------|
  4485. |         PP45376       0   2003         -8      -10        -10          0 |
  4486. | PP177715_998327       0   2004         -7       -8         -8          0 |
  4487. |         PP18562       0   2004         -7       -9         -9          0 |
  4488. |         PP45376       0   2004         -7       -9         -9          0 |
  4489. |         PP18562       0   2005         -6       -8         -8          0 |
        |--------------------------------------------------------------------------|
  4490. |         PP45376       0   2005         -6       -8         -8          0 |
  4491. | PP177715_998327       0   2005         -6       -7         -7          0 |
  4492. |         PP18562       0   2006         -5       -7         -7          0 |
  4493. | PP177715_998327       0   2006         -5       -6         -6          0 |
  4494. |         PP45376       0   2006         -5       -7         -7          0 |
        |--------------------------------------------------------------------------|
  4495. |         PP45376       0   2007         -4       -6         -6          0 |
  4496. | PP177715_998327       0   2007         -4       -5         -5          0 |
  4497. |         PP18562       0   2007         -4       -6         -6          0 |
  4498. |         PP45376       0   2008         -3       -5         -5          0 |
  4499. |         PP18562       0   2008         -3       -5         -5          0 |
        |--------------------------------------------------------------------------|
  4500. | PP177715_998327       0   2008         -3       -4         -4          0 |
  4501. | PP177715_998327       0   2009         -2       -3         -3          0 |
  4502. |         PP45376       0   2009         -2       -4         -4          0 |
  4503. |         PP18562       0   2009         -2       -4         -4          0 |
  4504. | PP177715_998327       0   2010         -1       -2         -2          0 |
        |--------------------------------------------------------------------------|
  4505. |         PP18562       0   2010         -1       -3         -3          0 |
  4506. |         PP45376       0   2010         -1       -3         -3          0 |
  4507. |         PP45376       0   2011          0       -2         -2          0 |
  4508. | PP177715_998327       0   2011          0       -1         -1          0 |
  4509. |         PP18562       0   2011          0       -2         -2          0 |
        |--------------------------------------------------------------------------|
  4510. |         PP45376       0   2012          1       -1         -1          0 |
  4511. | PP177715_998327       0   2012          1        0          0          0 |
  4512. |         PP18562       0   2012          1       -1         -1          0 |
  4513. | PP177715_998327       0   2013          2        1          1          0 |
  4514. |         PP18562       0   2013          2        0          0          0 |
        |--------------------------------------------------------------------------|
  4515. |         PP45376       0   2013          2        0          0          0 |
  4516. |         PP18562       0   2014          3        1          1          0 |
  4517. |         PP45376       0   2014          3        1          1          0 |
  4518. | PP177715_998327       0   2014          3        2          2          0 |
  4519. | PP177715_998327       0   2015          4        3          3          0 |
        |--------------------------------------------------------------------------|
  4520. |         PP18562       0   2015          4        2          2          0 |
  4521. |         PP45376       0   2015          4        2          2          0 |
  4522. |         PP18562       0   2016          5        3          3          0 |
  4523. |         PP45376       0   2016          5        3          3          0 |
  4524. | PP177715_998327       0   2016          5        4          4          0 |
        +--------------------------------------------------------------------------+

. 
end of do-file

. 
. local Tbefore = Tbefore

. local Tafter = Tafter

. 
. foreach Y of var `scale' `intensity' {
  2.         * with firm FE, controls are years more than Tbefore before any event happens
.         xtreg `Y' *_m_? *_p_? i.ind_year i.age_cat if expat!=. & ever_foreign==1 [aw=inverse_
> weight], i(id) fe vce(cluster id)
  3.         preserve
  4.         clear
  5.         set obs `N'
  6.         gen t = _n-1-`Tbefore'
  7.         label var t "Time since event (year)"
  8. 
.         foreach X in foreign expat domestic {
  9.                 gen `X'_beta=.
 10.                 gen `X'_lower=.
 11.                 gen `X'_upper=.
 12.                 forval t=-`Tbefore'/`Tafter' {
 13.                         local tag "`t'"
 14.                         if (`t'<0) {
 15.                                 local tag = -`t'
 16.                                 local tag  _m_`tag'
 17.                         }
 18.                         else {
 19.                                 local tag  _p_`t'
 20.                         }
 21.                         replace `X'_beta = _b[`X'`tag'] if t==`t'
 22.                         replace `X'_lower = `X'_beta-1.69*_se[`X'`tag'] if t==`t'
 23.                         replace `X'_upper = `X'_beta+1.69*_se[`X'`tag'] if t==`t'
 24.                 }
 25.                 label var `X'_beta "`Y'"
 26.                 label var `X'_upper "90% CI"
 27.                 label var `X'_lower "90% CI"
 28. 
.         }
 29.         label var foreign_beta "Foreign owner"
 30.         label var expat_beta "New expat manager"
 31.         label var domestic_beta "New domestic manager"
 32.         * omit last event year from graph, which is winsorized
.         tw (line expat_beta domestic_beta t if t>=-Tbefore & t<Tafter, sort), scheme(538w) ti
> tle(`Y') aspect(0.67)
 33.         graph export output/figure/`Y'_event_study.png, replace width(800)
 34.         
.         restore
 35. 
. }
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.1537                                         min =          1
     between = 0.0799                                         avg =       75.8
     overall = 0.0954                                         max =      4,150

                                                F(84,4628)        =      38.92
corr(u_i, Xb)  = -0.0054                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 4,629 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0551897   .0155237     3.56   0.000     .0247559    .0856235
   expat_m_2 |   .0635112    .014733     4.31   0.000     .0346275    .0923948
   expat_m_3 |   .0575425   .0144272     3.99   0.000     .0292583    .0858267
   expat_m_4 |   .0521305    .013626     3.83   0.000     .0254171     .078844
domestic_m_1 |  -.0019205    .016513    -0.12   0.907    -.0342939    .0304529
domestic_m_2 |   .0284091   .0163062     1.74   0.082    -.0035588    .0603769
domestic_m_3 |   .0510061    .014797     3.45   0.001     .0219968    .0800153
domestic_m_4 |   .0805686   .0138178     5.83   0.000      .053479    .1076581
 foreign_m_1 |  -.3142705   .0586775    -5.36   0.000    -.4293064   -.1992346
 foreign_m_2 |  -.2804189   .0558716    -5.02   0.000    -.3899537    -.170884
 foreign_m_3 |  -.2452238    .052172    -4.70   0.000    -.3475059   -.1429417
 foreign_m_4 |  -.2267483   .0483744    -4.69   0.000    -.3215853   -.1319114
   expat_p_0 |   .0115745   .0165748     0.70   0.485    -.0209199    .0440689
   expat_p_1 |  -.0233463   .0174688    -1.34   0.181    -.0575935    .0109009
   expat_p_2 |  -.0241226   .0177034    -1.36   0.173    -.0588297    .0105845
   expat_p_3 |  -.0215697   .0178532    -1.21   0.227    -.0565706    .0134311
   expat_p_4 |  -.0391991   .0178578    -2.20   0.028    -.0742089   -.0041893
   expat_p_5 |  -.0569874   .0150321    -3.79   0.000    -.0864575   -.0275172
domestic_p_0 |  -.0438568   .0170265    -2.58   0.010    -.0772368   -.0104768
domestic_p_1 |  -.0641898   .0180741    -3.55   0.000    -.0996236   -.0287561
domestic_p_2 |  -.0795668   .0186756    -4.26   0.000    -.1161799   -.0429538
domestic_p_3 |  -.0942854   .0199459    -4.73   0.000    -.1333888   -.0551819
domestic_p_4 |  -.1163343   .0206632    -5.63   0.000    -.1568441   -.0758246
domestic_p_5 |  -.1356638   .0182617    -7.43   0.000    -.1714653   -.0998622
 foreign_p_0 |  -.6382479   .0628582   -10.15   0.000    -.7614799   -.5150159
 foreign_p_1 |  -.4396846   .0666161    -6.60   0.000    -.5702839   -.3090852
 foreign_p_2 |   -.463064   .0703548    -6.58   0.000     -.600993   -.3251351
 foreign_p_3 |  -.4543855   .0740346    -6.14   0.000    -.5995287   -.3092423
 foreign_p_4 |  -.4093242   .0762228    -5.37   0.000    -.5587572   -.2598912
 foreign_p_5 |  -.4649156   .0823989    -5.64   0.000    -.6264566   -.3033745
             |
    ind_year |
          2  |  -.1010265   .0362803    -2.78   0.005    -.1721531   -.0298998
          3  |  -.1085276   .0436108    -2.49   0.013    -.1940256   -.0230296
          4  |  -.1158549    .048231    -2.40   0.016    -.2104107   -.0212991
          5  |  -.1831879   .0542927    -3.37   0.001    -.2896275   -.0767484
          6  |  -.1895136    .057136    -3.32   0.001    -.3015274   -.0774997
          7  |  -.1866506   .0597025    -3.13   0.002    -.3036959   -.0696053
          8  |  -.1757934   .0633698    -2.77   0.006    -.3000284   -.0515584
          9  |   -.182834   .0663778    -2.75   0.006    -.3129661   -.0527019
         10  |  -.1826865   .0686669    -2.66   0.008    -.3173064   -.0480665
         11  |  -.2299589    .071423    -3.22   0.001    -.3699821   -.0899358
         12  |  -.2300629   .0733561    -3.14   0.002    -.3738759   -.0862499
         13  |  -.2305374   .0750235    -3.07   0.002    -.3776193   -.0834555
         14  |  -.1788712   .0764442    -2.34   0.019    -.3287383   -.0290042
         15  |  -.1297476   .0778619    -1.67   0.096    -.2823941    .0228988
         16  |  -.0769542   .0790619    -0.97   0.330    -.2319533    .0780448
         17  |  -.0509089    .080548    -0.63   0.527    -.2088214    .1070036
         18  |  -.1033908   .0817282    -1.27   0.206     -.263617    .0568354
         19  |  -.1069447   .0826306    -1.29   0.196    -.2689401    .0550506
         20  |  -.1233477   .0834853    -1.48   0.140    -.2870186    .0403232
         21  |  -.1857119   .0847035    -2.19   0.028    -.3517711   -.0196528
         22  |  -.2009515   .0860304    -2.34   0.020     -.369612   -.0322909
         23  |  -.2117354   .0880403    -2.40   0.016    -.3843363   -.0391345
         24  |  -.1940693   .0889901    -2.18   0.029    -.3685323   -.0196064
         25  |  -.1722605   .0904648    -1.90   0.057    -.3496145    .0050936
         26  |   1.162029   .1002027    11.60   0.000     .9655839    1.358474
         27  |   .9367435   .0991331     9.45   0.000     .7423955    1.131092
         28  |   .8548863   .0976333     8.76   0.000     .6634784    1.046294
         29  |   .7894697   .0964758     8.18   0.000     .6003311    .9786083
         30  |   .7541069   .0950762     7.93   0.000     .5677122    .9405016
         31  |   .7596353   .0956804     7.94   0.000     .5720562    .9472145
         32  |   .7313571   .0956111     7.65   0.000     .5439137    .9188005
         33  |   .6910142   .0956856     7.22   0.000     .5034248    .8786036
         34  |   .6863733   .0965058     7.11   0.000      .497176    .8755706
         35  |    .649187   .0970009     6.69   0.000      .459019    .8393551
         36  |   .5785419   .0978539     5.91   0.000     .3867015    .7703822
         37  |   .5488408   .0981237     5.59   0.000     .3564714    .7412101
         38  |   .5166474   .0992692     5.20   0.000     .3220325    .7112622
         39  |   .5163054   .1000689     5.16   0.000     .3201227    .7124882
         40  |   .5059692   .1004562     5.04   0.000     .3090271    .7029113
         41  |   .5395041   .1010175     5.34   0.000     .3414616    .7375465
         42  |   .5456616   .1027312     5.31   0.000     .3442596    .7470637
         43  |   .4116912   .1037979     3.97   0.000     .2081978    .6151846
         44  |   .3967123   .1051324     3.77   0.000     .1906026     .602822
         45  |    .441523   .1058954     4.17   0.000     .2339175    .6491284
         46  |     .45629    .106528     4.28   0.000     .2474443    .6651356
         47  |   .4878476   .1070113     4.56   0.000     .2780544    .6976408
         48  |   .5011918   .1078254     4.65   0.000     .2898027     .712581
         49  |   .5651862   .1084303     5.21   0.000     .3526111    .7777614
         50  |   .6186802   .1080805     5.72   0.000     .4067909    .8305696
             |
     age_cat |
          2  |   .3920795   .0308284    12.72   0.000     .3316412    .4525177
          3  |   .7047617   .0372722    18.91   0.000     .6316905    .7778329
          4  |   1.048258   .0456858    22.94   0.000     .9586923    1.137824
          5  |   1.360487   .0572481    23.76   0.000     1.248253     1.47272
          6  |   1.569376   .0659799    23.79   0.000     1.440024    1.698728
             |
       _cons |    3.12978   .0812773    38.51   0.000     2.970438    3.289122
-------------+----------------------------------------------------------------
     sigma_u |  1.0605766
     sigma_e |  .76121034
         rho |    .660005   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    325,013
Group variable: id                              Number of groups  =      4,546

R-sq:                                           Obs per group:
     within  = 0.2017                                         min =          1
     between = 0.1301                                         avg =       71.5
     overall = 0.1045                                         max =      3,984

                                                F(84,4545)        =      40.66
corr(u_i, Xb)  = 0.0642                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 4,546 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnK |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0428866   .0228533     1.88   0.061    -.0019169    .0876901
   expat_m_2 |   .0493272   .0229553     2.15   0.032     .0043237    .0943307
   expat_m_3 |   .0676668   .0219587     3.08   0.002     .0246171    .1107166
   expat_m_4 |   .0884359   .0203749     4.34   0.000     .0484912    .1283806
domestic_m_1 |   .0132697    .022888     0.58   0.562     -.031602    .0581414
domestic_m_2 |   .0284375    .022325     1.27   0.203    -.0153304    .0722054
domestic_m_3 |   .0513162   .0207978     2.47   0.014     .0105424      .09209
domestic_m_4 |   .0897684   .0196821     4.56   0.000     .0511819     .128355
 foreign_m_1 |   .0554847   .0743423     0.75   0.456    -.0902624    .2012318
 foreign_m_2 |   .0268186   .0696635     0.38   0.700    -.1097557    .1633928
 foreign_m_3 |   .0121455   .0673053     0.18   0.857    -.1198057    .1440966
 foreign_m_4 |   .0449905   .0606309     0.74   0.458    -.0738756    .1638565
   expat_p_0 |  -.0107129   .0236116    -0.45   0.650    -.0570032    .0355773
   expat_p_1 |  -.0505136   .0246511    -2.05   0.041    -.0988418   -.0021854
   expat_p_2 |  -.0584893   .0247556    -2.36   0.018    -.1070223   -.0099564
   expat_p_3 |  -.0621908   .0245371    -2.53   0.011    -.1102954   -.0140863
   expat_p_4 |   -.103205   .0259455    -3.98   0.000    -.1540707   -.0523392
   expat_p_5 |  -.1349035     .02014    -6.70   0.000    -.1743877   -.0954192
domestic_p_0 |  -.0380633   .0239636    -1.59   0.112    -.0850437     .008917
domestic_p_1 |  -.0831981   .0251276    -3.31   0.001    -.1324605   -.0339357
domestic_p_2 |   -.104888   .0265665    -3.95   0.000    -.1569712   -.0528047
domestic_p_3 |   -.130836   .0287411    -4.55   0.000    -.1871826   -.0744894
domestic_p_4 |  -.1391579   .0303943    -4.58   0.000    -.1987454   -.0795704
domestic_p_5 |  -.1564213   .0241548    -6.48   0.000    -.2037765   -.1090661
 foreign_p_0 |  -.0628936   .0788424    -0.80   0.425     -.217463    .0916758
 foreign_p_1 |    .122246   .0819666     1.49   0.136    -.0384482    .2829403
 foreign_p_2 |   .1188459   .0862855     1.38   0.168    -.0503156    .2880074
 foreign_p_3 |   .1428421   .0906646     1.58   0.115    -.0349045    .3205887
 foreign_p_4 |   .1741963   .0938652     1.86   0.064    -.0098252    .3582178
 foreign_p_5 |   .0816109   .1022686     0.80   0.425    -.1188852     .282107
             |
    ind_year |
          2  |   .0821855    .058494     1.41   0.160    -.0324912    .1968622
          3  |   .5905943   .0698425     8.46   0.000     .4536691    .7275195
          4  |   .7062725   .0762071     9.27   0.000     .5568695    .8556755
          5  |   .8649262   .0818787    10.56   0.000     .7044041    1.025448
          6  |   1.036012    .086499    11.98   0.000     .8664324    1.205593
          7  |   1.244506    .091134    13.66   0.000     1.065839    1.423173
          8  |   1.412744    .095421    14.81   0.000     1.225673    1.599816
          9  |   1.530449   .0990893    15.45   0.000     1.336186    1.724712
         10  |    1.60937   .1017388    15.82   0.000     1.409913    1.808828
         11  |   1.649161   .1045642    15.77   0.000     1.444164    1.854157
         12  |   1.657125   .1077465    15.38   0.000      1.44589     1.86836
         13  |   1.694207   .1095801    15.46   0.000     1.479377    1.909038
         14  |    1.74149   .1107768    15.72   0.000     1.524314    1.958666
         15  |   1.726679   .1128961    15.29   0.000     1.505348     1.94801
         16  |   1.752037   .1152199    15.21   0.000      1.52615    1.977924
         17  |   1.769488   .1164184    15.20   0.000     1.541252    1.997725
         18  |   1.700727   .1193634    14.25   0.000     1.466716    1.934737
         19  |   1.620002   .1211082    13.38   0.000     1.382571    1.857433
         20  |   1.564665   .1242177    12.60   0.000     1.321138    1.808192
         21  |   1.533804   .1258937    12.18   0.000     1.286991    1.780617
         22  |   1.498526   .1294507    11.58   0.000      1.24474    1.752313
         23  |   1.517312   .1316734    11.52   0.000     1.259169    1.775456
         24  |   .8746472   .1431635     6.11   0.000     .5939772    1.155317
         25  |    .966268   .1526355     6.33   0.000     .6670283    1.265508
         26  |   1.469204   .1391294    10.56   0.000     1.196442    1.741965
         27  |    1.37432   .1343688    10.23   0.000     1.110892    1.637748
         28  |   1.484498    .129671    11.45   0.000      1.23028    1.738716
         29  |   1.545964   .1292624    11.96   0.000     1.292547    1.799381
         30  |   1.630411   .1291447    12.62   0.000     1.377224    1.883597
         31  |   1.751451   .1301082    13.46   0.000     1.496375    2.006526
         32  |    1.93051     .13053    14.79   0.000     1.674608    2.186412
         33  |   2.060861   .1311779    15.71   0.000     1.803688    2.318033
         34  |   2.161377   .1321352    16.36   0.000     1.902328    2.420426
         35  |   2.225977   .1340706    16.60   0.000     1.963133     2.48882
         36  |   2.209665   .1364519    16.19   0.000     1.942153    2.477177
         37  |   2.238717   .1359596    16.47   0.000      1.97217    2.505264
         38  |   2.257574   .1384607    16.30   0.000     1.986124    2.529024
         39  |   2.309936   .1398393    16.52   0.000     2.035783    2.584089
         40  |   2.331127   .1408979    16.54   0.000     2.054898    2.607355
         41  |   2.360797   .1424359    16.57   0.000     2.081553    2.640041
         42  |   2.421624   .1435738    16.87   0.000     2.140149    2.703098
         43  |   2.379873   .1442677    16.50   0.000     2.097038    2.662708
         44  |   2.318223   .1460265    15.88   0.000      2.03194    2.604506
         45  |   2.427717   .1459203    16.64   0.000     2.141643    2.713792
         46  |   2.428401   .1473206    16.48   0.000     2.139581    2.717221
         47  |   2.508982   .1486193    16.88   0.000     2.217615    2.800348
         48  |   2.589655   .1491898    17.36   0.000     2.297171     2.88214
         49  |   2.480472   .1509803    16.43   0.000     2.184478    2.776467
         50  |   2.563031   .1547585    16.56   0.000      2.25963    2.866433
             |
     age_cat |
          2  |   .4006903   .0493815     8.11   0.000     .3038786    .4975019
          3  |   .6815085   .0568723    11.98   0.000     .5700112    .7930058
          4  |   .9452742   .0664193    14.23   0.000     .8150601    1.075488
          5  |   1.175296   .0800124    14.69   0.000     1.018433    1.332159
          6  |   1.277915   .0912967    14.00   0.000     1.098929    1.456901
             |
       _cons |   8.227934   .1160854    70.88   0.000      8.00035    8.455517
-------------+----------------------------------------------------------------
     sigma_u |  1.9496957
     sigma_e |  1.0767732
         rho |  .76627737   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnK_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.3915                                         min =          1
     between = 0.1035                                         avg =       75.8
     overall = 0.1376                                         max =      4,150

                                                F(84,4628)        =      99.12
corr(u_i, Xb)  = -0.0081                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 4,629 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnQ |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0665969   .0186484     3.57   0.000     .0300372    .1031565
   expat_m_2 |   .0536255   .0186774     2.87   0.004     .0170088    .0902422
   expat_m_3 |   .0545041   .0181194     3.01   0.003     .0189815    .0900267
   expat_m_4 |   .0405092   .0180018     2.25   0.024      .005217    .0758014
domestic_m_1 |  -.0361752   .0200636    -1.80   0.071    -.0755095    .0031591
domestic_m_2 |    .019534   .0190749     1.02   0.306     -.017862    .0569299
domestic_m_3 |   .0551232   .0174592     3.16   0.002     .0208948    .0893516
domestic_m_4 |   .0865051   .0162564     5.32   0.000     .0546348    .1183754
 foreign_m_1 |  -.2467852   .0626521    -3.94   0.000    -.3696131   -.1239573
 foreign_m_2 |  -.2537148   .0604446    -4.20   0.000    -.3722149   -.1352146
 foreign_m_3 |  -.2306587    .058059    -3.97   0.000    -.3444821   -.1168353
 foreign_m_4 |  -.1900609   .0516388    -3.68   0.000    -.2912976   -.0888242
   expat_p_0 |      .0196   .0186865     1.05   0.294    -.0170345    .0562346
   expat_p_1 |  -.0078959   .0204647    -0.39   0.700    -.0480164    .0322246
   expat_p_2 |  -.0210823   .0203419    -1.04   0.300    -.0609622    .0187976
   expat_p_3 |  -.0169011   .0213716    -0.79   0.429    -.0587996    .0249975
   expat_p_4 |  -.0361857   .0214456    -1.69   0.092    -.0782292    .0058578
   expat_p_5 |  -.0365397   .0170806    -2.14   0.032    -.0700258   -.0030537
domestic_p_0 |  -.0837688   .0200058    -4.19   0.000    -.1229897   -.0445479
domestic_p_1 |  -.0959159    .021385    -4.49   0.000    -.1378406   -.0539911
domestic_p_2 |  -.1124246   .0230053    -4.89   0.000    -.1575259   -.0673233
domestic_p_3 |  -.1162503   .0236901    -4.91   0.000    -.1626943   -.0698064
domestic_p_4 |  -.1545286   .0255347    -6.05   0.000    -.2045887   -.1044685
domestic_p_5 |  -.1702759   .0202196    -8.42   0.000     -.209916   -.1306358
 foreign_p_0 |  -.6188668   .0670799    -9.23   0.000    -.7503754   -.4873582
 foreign_p_1 |  -.2451467   .0696934    -3.52   0.000    -.3817789   -.1085144
 foreign_p_2 |  -.2525688   .0744406    -3.39   0.001    -.3985078   -.1066298
 foreign_p_3 |  -.2412782   .0784789    -3.07   0.002    -.3951342   -.0874221
 foreign_p_4 |  -.1965129   .0811569    -2.42   0.015    -.3556192   -.0374067
 foreign_p_5 |  -.2224547   .0893075    -2.49   0.013      -.39754   -.0473695
             |
    ind_year |
          2  |  -.0352172    .044899    -0.78   0.433    -.1232406    .0528063
          3  |   .1132043   .0512761     2.21   0.027     .0126787    .2137299
          4  |   .2879165   .0565723     5.09   0.000     .1770079    .3988252
          5  |   .4549559   .0618016     7.36   0.000     .3337953    .5761165
          6  |   .6039029   .0656727     9.20   0.000     .4751531    .7326527
          7  |   .7531271    .068357    11.02   0.000     .6191147    .8871395
          8  |   .8400082   .0729664    11.51   0.000     .6969592    .9830572
          9  |   .9506206   .0750479    12.67   0.000      .803491     1.09775
         10  |   1.042565   .0769098    13.56   0.000     .8917852    1.193345
         11  |   1.067492   .0798538    13.37   0.000     .9109407    1.224044
         12  |   1.133137   .0819005    13.84   0.000     .9725732    1.293701
         13  |   1.186129   .0843555    14.06   0.000     1.020752    1.351506
         14  |   1.286837   .0855521    15.04   0.000     1.119114     1.45456
         15  |   1.366794   .0873199    15.65   0.000     1.195606    1.537983
         16  |   1.414836   .0894592    15.82   0.000     1.239453    1.590219
         17  |   1.465183   .0906085    16.17   0.000     1.287547    1.642819
         18  |   1.336425   .0932481    14.33   0.000     1.153614    1.519236
         19  |   1.362181   .0946989    14.38   0.000     1.176526    1.547836
         20  |   1.383145   .0949253    14.57   0.000     1.197046    1.569244
         21  |     1.3043   .0964216    13.53   0.000     1.115268    1.493333
         22  |   1.338606   .0984792    13.59   0.000      1.14554    1.531672
         23  |   1.392526    .100698    13.83   0.000      1.19511    1.589942
         24  |    1.40448   .1010157    13.90   0.000     1.206441    1.602519
         25  |   1.410077   .1031056    13.68   0.000     1.207941    1.612214
         26  |   .5911973   .1092455     5.41   0.000      .377024    .8053706
         27  |   .4444342   .1050781     4.23   0.000     .2384312    .6504373
         28  |   .5953971   .1031663     5.77   0.000      .393142    .7976523
         29  |   .8139918   .1003861     8.11   0.000     .6171871    1.010796
         30  |   .9516496   .0991281     9.60   0.000     .7573112    1.145988
         31  |   1.139951   .0994682    11.46   0.000      .944946    1.334956
         32  |   1.279042   .0999543    12.80   0.000     1.083084       1.475
         33  |   1.351379   .1008991    13.39   0.000     1.153569    1.549189
         34  |   1.504725   .1019497    14.76   0.000     1.304855    1.704595
         35  |    1.54948   .1028347    15.07   0.000     1.347875    1.751085
         36  |   1.536624   .1042509    14.74   0.000     1.332243    1.741006
         37  |   1.607456   .1043386    15.41   0.000     1.402903     1.81201
         38  |   1.633593   .1068922    15.28   0.000     1.424033    1.843153
         39  |   1.724028   .1076795    16.01   0.000     1.512925    1.935132
         40  |   1.844309   .1086127    16.98   0.000     1.631377    2.057242
         41  |   1.920775     .10895    17.63   0.000     1.707181    2.134369
         42  |   1.975382   .1105783    17.86   0.000     1.758596    2.192168
         43  |   1.816538   .1115876    16.28   0.000     1.597773    2.035303
         44  |   1.888498   .1133598    16.66   0.000     1.666259    2.110738
         45  |   2.008523   .1145628    17.53   0.000     1.783926    2.233121
         46  |   2.037032   .1155619    17.63   0.000     1.810476    2.263588
         47  |   2.120784   .1156344    18.34   0.000     1.894086    2.347483
         48  |   2.164028    .117656    18.39   0.000     1.933366    2.394689
         49  |   2.213195   .1176897    18.81   0.000     1.982467    2.443923
         50  |   2.294553   .1172505    19.57   0.000     2.064686     2.52442
             |
     age_cat |
          2  |   1.058706   .0467522    22.65   0.000      .967049    1.150362
          3  |   1.463413   .0510143    28.69   0.000     1.363401    1.563426
          4  |   1.827943   .0580841    31.47   0.000     1.714071    1.941815
          5  |    2.11723   .0688312    30.76   0.000     1.982288    2.252172
          6  |   2.307561   .0776524    29.72   0.000     2.155326    2.459797
             |
       _cons |   10.75491   .0914747   117.57   0.000     10.57557    10.93424
-------------+----------------------------------------------------------------
     sigma_u |  1.6029961
     sigma_e |  .91825884
         rho |  .75293006   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnQ_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    325,013
Group variable: id                              Number of groups  =      4,546

R-sq:                                           Obs per group:
     within  = 0.1513                                         min =          1
     between = 0.0342                                         avg =       71.5
     overall = 0.0829                                         max =      3,984

                                                F(84,4545)        =      28.03
corr(u_i, Xb)  = 0.0092                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 4,546 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0015165   .0194713     0.08   0.938    -.0366566    .0396897
   expat_m_2 |  -.0007813   .0198266    -0.04   0.969    -.0396511    .0380885
   expat_m_3 |   .0186649   .0188131     0.99   0.321    -.0182179    .0555476
   expat_m_4 |   .0389129   .0173722     2.24   0.025      .004855    .0729708
domestic_m_1 |   .0253639   .0192358     1.32   0.187    -.0123475    .0630754
domestic_m_2 |   .0075102   .0191958     0.39   0.696    -.0301228    .0451432
domestic_m_3 |    .007781   .0176564     0.44   0.659    -.0268342    .0423962
domestic_m_4 |   .0233207   .0169138     1.38   0.168    -.0098385      .05648
 foreign_m_1 |   .3510553   .0597987     5.87   0.000     .2338208    .4682898
 foreign_m_2 |   .2875466   .0540231     5.32   0.000     .1816351    .3934581
 foreign_m_3 |   .2510537   .0517709     4.85   0.000     .1495577    .3525498
 foreign_m_4 |   .2539917   .0466062     5.45   0.000     .1626209    .3453625
   expat_p_0 |  -.0163068   .0200306    -0.81   0.416    -.0555764    .0229628
   expat_p_1 |  -.0225727     .02035    -1.11   0.267    -.0624687    .0173232
   expat_p_2 |  -.0345204   .0204467    -1.69   0.091    -.0746059    .0055652
   expat_p_3 |  -.0513265   .0204276    -2.51   0.012    -.0913746   -.0112784
   expat_p_4 |  -.0661718    .021635    -3.06   0.002     -.108587   -.0237566
   expat_p_5 |  -.0802678   .0154857    -5.18   0.000    -.1106273   -.0499082
domestic_p_0 |   .0029723   .0200755     0.15   0.882    -.0363853      .04233
domestic_p_1 |  -.0101051   .0210284    -0.48   0.631    -.0513311    .0311208
domestic_p_2 |  -.0195073   .0215715    -0.90   0.366    -.0617979    .0227834
domestic_p_3 |  -.0302604   .0234932    -1.29   0.198    -.0763185    .0157976
domestic_p_4 |  -.0231062   .0252293    -0.92   0.360     -.072568    .0263555
domestic_p_5 |  -.0247498   .0179677    -1.38   0.168    -.0599751    .0104756
 foreign_p_0 |   .5788651   .0627536     9.22   0.000     .4558374    .7018927
 foreign_p_1 |    .581932   .0648757     8.97   0.000     .4547441      .70912
 foreign_p_2 |   .5838569   .0685322     8.52   0.000     .4495003    .7182134
 foreign_p_3 |    .584408    .072236     8.09   0.000     .4427903    .7260257
 foreign_p_4 |    .565225   .0748192     7.55   0.000      .418543     .711907
 foreign_p_5 |   .5230208   .0817292     6.40   0.000     .3627918    .6832498
             |
    ind_year |
          2  |   .1712034   .0502561     3.41   0.001      .072677    .2697297
          3  |   .6964067   .0597029    11.66   0.000       .57936    .8134534
          4  |   .8215196   .0642212    12.79   0.000     .6956148    .9474243
          5  |   1.031617   .0677255    15.23   0.000     .8988421    1.164392
          6  |   1.207683   .0708697    17.04   0.000     1.068745    1.346622
          7  |    1.41459   .0743112    19.04   0.000     1.268904    1.560276
          8  |   1.568298   .0769755    20.37   0.000     1.417389    1.719207
          9  |   1.685368   .0789781    21.34   0.000     1.530533    1.840204
         10  |   1.768815   .0808877    21.87   0.000     1.610236    1.927394
         11  |   1.851914   .0828277    22.36   0.000     1.689531    2.014296
         12  |   1.853546   .0849693    21.81   0.000     1.686965    2.020127
         13  |   1.896323   .0871956    21.75   0.000     1.725377    2.067268
         14  |   1.880092   .0877169    21.43   0.000     1.708125     2.05206
         15  |   1.812263   .0889766    20.37   0.000     1.637826    1.986701
         16  |   1.774796   .0905769    19.59   0.000     1.597221     1.95237
         17  |   1.765624    .091767    19.24   0.000     1.585716    1.945532
         18  |    1.74496   .0938792    18.59   0.000     1.560911    1.929009
         19  |   1.687161   .0948339    17.79   0.000     1.501241    1.873082
         20  |   1.642743   .0972592    16.89   0.000     1.452068    1.833418
         21  |   1.644891   .0993146    16.56   0.000     1.450186    1.839596
         22  |      1.632   .1018414    16.02   0.000     1.432342    1.831659
         23  |   1.629586   .1040819    15.66   0.000     1.425535    1.833637
         24  |   .8398513   .1169182     7.18   0.000     .6106347    1.069068
         25  |   .8858634   .1269003     6.98   0.000     .6370771     1.13465
         26  |   .3720413   .1027744     3.62   0.000     .1705536    .5735291
         27  |   .5027636   .0970548     5.18   0.000      .312489    .6930381
         28  |   .6933387   .0939838     7.38   0.000     .5090849    .8775925
         29  |   .8265727   .0948108     8.72   0.000     .6406974    1.012448
         30  |   .9473169   .0952212     9.95   0.000     .7606371    1.133997
         31  |   1.070605   .0960311    11.15   0.000     .8823371    1.258872
         32  |   1.276281   .0962635    13.26   0.000     1.087558    1.465004
         33  |   1.442047   .0977372    14.75   0.000     1.250434    1.633659
         34  |   1.552581   .0986669    15.74   0.000     1.359146    1.746017
         35  |   1.645736   .1001014    16.44   0.000     1.449488    1.841983
         36  |   1.701594    .101675    16.74   0.000     1.502262    1.900927
         37  |   1.759671   .1021542    17.23   0.000     1.559399    1.959943
         38  |   1.798387   .1038648    17.31   0.000     1.594762    2.002013
         39  |   1.845892   .1050588    17.57   0.000     1.639926    2.051858
         40  |   1.882846   .1056153    17.83   0.000     1.675789    2.089903
         41  |   1.866079   .1061879    17.57   0.000     1.657899    2.074259
         42  |   1.913631   .1066155    17.95   0.000     1.704613    2.122649
         43  |   2.000722   .1080119    18.52   0.000     1.788967    2.212478
         44  |   1.947422   .1089897    17.87   0.000     1.733749    2.161095
         45  |   2.009784   .1090725    18.43   0.000     1.795949     2.22362
         46  |   2.003335   .1094224    18.31   0.000     1.788814    2.217856
         47  |   2.041119   .1109052    18.40   0.000     1.823691    2.258548
         48  |    2.09261   .1112103    18.82   0.000     1.874584    2.310636
         49  |   1.859998    .112349    16.56   0.000     1.639739    2.080257
         50  |   1.923695   .1155263    16.65   0.000     1.697207    2.150183
             |
     age_cat |
          2  |   .0348536    .044898     0.78   0.438    -.0531684    .1228756
          3  |   .0025695   .0503421     0.05   0.959    -.0961256    .1012646
          4  |  -.0460276   .0561369    -0.82   0.412    -.1560832     .064028
          5  |  -.1123261   .0650109    -1.73   0.084     -.239779    .0151268
          6  |  -.2068409    .072784    -2.84   0.005    -.3495329    -.064149
             |
       _cons |   5.003921   .0902136    55.47   0.000     4.827058    5.180783
-------------+----------------------------------------------------------------
     sigma_u |   1.626378
     sigma_e |  .90404089
         rho |  .76395244   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnKL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.4012                                         min =          1
     between = 0.1966                                         avg =       75.8
     overall = 0.2285                                         max =      4,150

                                                F(84,4628)        =     102.60
corr(u_i, Xb)  = 0.0509                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 4,629 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0114072    .012652     0.90   0.367    -.0133967     .036211
   expat_m_2 |  -.0098857   .0126997    -0.78   0.436    -.0347832    .0150118
   expat_m_3 |  -.0030384   .0127884    -0.24   0.812    -.0281098     .022033
   expat_m_4 |  -.0116213   .0127517    -0.91   0.362    -.0366208    .0133782
domestic_m_1 |  -.0342547   .0136593    -2.51   0.012    -.0610335    -.007476
domestic_m_2 |  -.0088751   .0130918    -0.68   0.498    -.0345413    .0167911
domestic_m_3 |   .0041171   .0121005     0.34   0.734    -.0196056    .0278398
domestic_m_4 |   .0059365    .012123     0.49   0.624    -.0178304    .0297034
 foreign_m_1 |   .0674852   .0404329     1.67   0.095    -.0117825     .146753
 foreign_m_2 |   .0267041   .0385983     0.69   0.489     -.048967    .1023752
 foreign_m_3 |   .0145651   .0381932     0.38   0.703    -.0603117    .0894419
 foreign_m_4 |   .0366875   .0343505     1.07   0.286    -.0306559    .1040308
   expat_p_0 |   .0080255   .0125483     0.64   0.522    -.0165751    .0326261
   expat_p_1 |   .0154503   .0128886     1.20   0.231    -.0098174    .0407181
   expat_p_2 |   .0030403   .0131341     0.23   0.817    -.0227089    .0287894
   expat_p_3 |   .0046687   .0135575     0.34   0.731    -.0219104    .0312478
   expat_p_4 |   .0030134   .0142937     0.21   0.833     -.025009    .0310358
   expat_p_5 |   .0204476   .0105272     1.94   0.052    -.0001908     .041086
domestic_p_0 |   -.039912   .0131366    -3.04   0.002    -.0656659   -.0141581
domestic_p_1 |   -.031726   .0136259    -2.33   0.020    -.0584392   -.0050129
domestic_p_2 |  -.0328578   .0150671    -2.18   0.029    -.0623965    -.003319
domestic_p_3 |   -.021965   .0153707    -1.43   0.153    -.0520989    .0081689
domestic_p_4 |  -.0381943   .0171954    -2.22   0.026    -.0719055    -.004483
domestic_p_5 |  -.0346121   .0121104    -2.86   0.004    -.0583542     -.01087
 foreign_p_0 |   .0193811   .0417064     0.46   0.642    -.0623833    .1011455
 foreign_p_1 |   .1945379   .0428038     4.54   0.000      .110622    .2784539
 foreign_p_2 |   .2104952   .0456154     4.61   0.000     .1210673    .2999232
 foreign_p_3 |   .2131073    .047998     4.44   0.000     .1190084    .3072063
 foreign_p_4 |   .2128113   .0499461     4.26   0.000      .114893    .3107295
 foreign_p_5 |   .2424608   .0546354     4.44   0.000     .1353494    .3495723
             |
    ind_year |
          2  |   .0658093   .0360871     1.82   0.068    -.0049387    .1365573
          3  |   .2217319   .0395015     5.61   0.000     .1442902    .2991736
          4  |   .4037714   .0422873     9.55   0.000     .3208682    .4866747
          5  |   .6381439   .0433335    14.73   0.000     .5531896    .7230982
          6  |   .7934164   .0459364    17.27   0.000     .7033591    .8834738
          7  |   .9397777   .0477972    19.66   0.000     .8460724    1.033483
          8  |   1.015802   .0498746    20.37   0.000     .9180235     1.11358
          9  |   1.133455   .0513563    22.07   0.000     1.032772    1.234137
         10  |   1.225252   .0527515    23.23   0.000     1.121834     1.32867
         11  |   1.297451   .0539604    24.04   0.000     1.191663    1.403239
         12  |     1.3632   .0550954    24.74   0.000     1.255187    1.471214
         13  |   1.416666   .0567245    24.97   0.000     1.305459    1.527873
         14  |   1.465709    .057018    25.71   0.000     1.353926    1.577491
         15  |   1.496542   .0572505    26.14   0.000     1.384303     1.60878
         16  |    1.49179   .0586337    25.44   0.000      1.37684     1.60674
         17  |   1.516092   .0595599    25.45   0.000     1.399326    1.632857
         18  |   1.439816    .060675    23.73   0.000     1.320864    1.558767
         19  |   1.469126   .0617709    23.78   0.000     1.348026    1.590226
         20  |   1.506492    .062348    24.16   0.000     1.384261    1.628724
         21  |   1.490012   .0631401    23.60   0.000     1.366228    1.613797
         22  |   1.539557   .0644333    23.89   0.000     1.413237    1.665877
         23  |   1.604261    .065433    24.52   0.000     1.475981    1.732541
         24  |   1.598549   .0664836    24.04   0.000      1.46821    1.728889
         25  |   1.582338   .0675882    23.41   0.000     1.449833    1.714843
         26  |  -.5708316   .0664274    -8.59   0.000    -.7010609   -.4406022
         27  |  -.4923093   .0657907    -7.48   0.000    -.6212905   -.3633281
         28  |  -.2594891   .0643845    -4.03   0.000    -.3857134   -.1332649
         29  |   .0245221   .0641615     0.38   0.702     -.101265    .1503092
         30  |   .1975427    .063275     3.12   0.002     .0734936    .3215918
         31  |   .3803157   .0631598     6.02   0.000     .2564923    .5041392
         32  |   .5476851    .064189     8.53   0.000     .4218441     .673526
         33  |   .6603649   .0640357    10.31   0.000     .5348244    .7859054
         34  |   .8183517   .0649152    12.61   0.000     .6910869    .9456166
         35  |    .900293   .0651607    13.82   0.000     .7725469    1.028039
         36  |   .9580824   .0657283    14.58   0.000     .8292235    1.086941
         37  |   1.058615   .0665958    15.90   0.000     .9280558    1.189175
         38  |   1.116946   .0675345    16.54   0.000     .9845458    1.249345
         39  |   1.207723   .0675341    17.88   0.000     1.075324    1.340122
         40  |    1.33834   .0681731    19.63   0.000     1.204688    1.471992
         41  |   1.381271   .0686772    20.11   0.000     1.246631    1.515911
         42  |   1.429721   .0689343    20.74   0.000     1.294577    1.564865
         43  |   1.404847   .0696045    20.18   0.000     1.268389    1.541305
         44  |   1.491786   .0704755    21.17   0.000      1.35362    1.629952
         45  |      1.567   .0708721    22.11   0.000     1.428057    1.705943
         46  |   1.580742   .0709216    22.29   0.000     1.441702    1.719782
         47  |   1.632937   .0705551    23.14   0.000     1.494615    1.771258
         48  |   1.662836   .0712731    23.33   0.000     1.523106    1.802565
         49  |   1.648009   .0717531    22.97   0.000     1.507339    1.788679
         50  |   1.675873   .0714161    23.47   0.000     1.535863    1.815883
             |
     age_cat |
          2  |   .6666261   .0372908    17.88   0.000     .5935183    .7397338
          3  |   .7586516   .0392571    19.33   0.000     .6816889    .8356142
          4  |   .7796847   .0424384    18.37   0.000     .6964851    .8628843
          5  |   .7567434   .0477692    15.84   0.000      .663093    .8503938
          6  |   .7381853   .0530086    13.93   0.000     .6342631    .8421075
             |
       _cons |   7.625126   .0639797   119.18   0.000     7.499695    7.750557
-------------+----------------------------------------------------------------
     sigma_u |  1.1653056
     sigma_e |  .63897903
         rho |  .76883313   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnQL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    350,775
Group variable: id                              Number of groups  =      4,629

R-sq:                                           Obs per group:
     within  = 0.0348                                         min =          1
     between = 0.2015                                         avg =       75.8
     overall = 0.0863                                         max =      4,150

                                                F(84,4628)        =      10.32
corr(u_i, Xb)  = 0.1877                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 4,629 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   .0035272   .0057957     0.61   0.543    -.0078352    .0148896
   expat_m_2 |    .005561   .0059793     0.93   0.352    -.0061613    .0172833
   expat_m_3 |   .0096587   .0057375     1.68   0.092    -.0015895     .020907
   expat_m_4 |   .0061383    .005684     1.08   0.280     -.005005    .0172816
domestic_m_1 |  -.0026566   .0061197    -0.43   0.664    -.0146541     .009341
domestic_m_2 |   .0066657   .0057014     1.17   0.242    -.0045118    .0178432
domestic_m_3 |   .0106599   .0055193     1.93   0.053    -.0001606    .0214804
domestic_m_4 |   .0112672   .0054749     2.06   0.040     .0005337    .0220006
 foreign_m_1 |  -.0070207   .0167185    -0.42   0.675     -.039797    .0257555
 foreign_m_2 |  -.0110963   .0161023    -0.69   0.491    -.0426644    .0204719
 foreign_m_3 |   .0002732   .0156375     0.02   0.986    -.0303836    .0309301
 foreign_m_4 |  -.0125158   .0150992    -0.83   0.407    -.0421175    .0170859
   expat_p_0 |   .0000695   .0057563     0.01   0.990    -.0112157    .0113546
   expat_p_1 |  -.0038195   .0059455    -0.64   0.521    -.0154755    .0078365
   expat_p_2 |  -.0035218   .0060231    -0.58   0.559    -.0153299    .0082863
   expat_p_3 |  -.0040882      .0061    -0.67   0.503     -.016047    .0078707
   expat_p_4 |  -.0083236   .0063411    -1.31   0.189    -.0207553     .004108
   expat_p_5 |  -.0138867   .0042737    -3.25   0.001    -.0222652   -.0055083
domestic_p_0 |  -.0049637   .0060957    -0.81   0.416    -.0169141    .0069867
domestic_p_1 |  -.0093259   .0063475    -1.47   0.142    -.0217702    .0031183
domestic_p_2 |  -.0131503   .0065778    -2.00   0.046    -.0260458   -.0002547
domestic_p_3 |  -.0256187   .0070732    -3.62   0.000    -.0394855   -.0117519
domestic_p_4 |  -.0231053   .0070889    -3.26   0.001     -.037003   -.0092076
domestic_p_5 |  -.0262569   .0053925    -4.87   0.000    -.0368288    -.015685
 foreign_p_0 |   .0168481   .0167278     1.01   0.314    -.0159464    .0496426
 foreign_p_1 |   .0436068    .017889     2.44   0.015     .0085358    .0786777
 foreign_p_2 |   .0341505   .0192766     1.77   0.077    -.0036409    .0719418
 foreign_p_3 |   .0306603   .0203844     1.50   0.133    -.0093029    .0706235
 foreign_p_4 |   .0416391   .0210699     1.98   0.048     .0003319    .0829462
 foreign_p_5 |   .0394906   .0229903     1.72   0.086    -.0055813    .0845626
             |
    ind_year |
          2  |  -.0070478   .0160539    -0.44   0.661    -.0385211    .0244255
          3  |  -.0399278   .0176409    -2.26   0.024    -.0745123   -.0053432
          4  |  -.0549239   .0187241    -2.93   0.003    -.0916322   -.0182156
          5  |  -.0411272   .0191006    -2.15   0.031    -.0785734    -.003681
          6  |  -.0588389   .0197663    -2.98   0.003    -.0975902   -.0200876
          7  |  -.0468868   .0199445    -2.35   0.019    -.0859876   -.0077861
          8  |   -.060029    .020779    -2.89   0.004    -.1007658   -.0192922
          9  |  -.0661662   .0212668    -3.11   0.002    -.1078592   -.0244731
         10  |  -.0568171   .0215143    -2.64   0.008    -.0989954   -.0146389
         11  |  -.0673215   .0223693    -3.01   0.003     -.111176   -.0234669
         12  |  -.0616197   .0226226    -2.72   0.006    -.1059708   -.0172686
         13  |  -.0484001   .0229343    -2.11   0.035    -.0933623   -.0034379
         14  |  -.0235538   .0231523    -1.02   0.309    -.0689434    .0218358
         15  |  -.0096843   .0234413    -0.41   0.680    -.0556405    .0362719
         16  |   .0028902   .0239463     0.12   0.904    -.0440561    .0498364
         17  |   .0113248    .024465     0.46   0.643    -.0366382    .0592879
         18  |   .0171052   .0248935     0.69   0.492    -.0316979    .0659083
         19  |   .0163466   .0250412     0.65   0.514     -.032746    .0654392
         20  |   .0396493   .0255468     1.55   0.121    -.0104345    .0897331
         21  |   .0473871   .0255133     1.86   0.063    -.0026312    .0974054
         22  |   .0594241   .0262589     2.26   0.024     .0079441    .1109041
         23  |   .0463802   .0263082     1.76   0.078    -.0051965    .0979569
         24  |  -.0051557   .0268243    -0.19   0.848    -.0577441    .0474327
         25  |  -.0325142   .0272132    -1.19   0.232    -.0858651    .0208366
         26  |   .1311045   .0267796     4.90   0.000     .0786038    .1836052
         27  |   .0932268   .0259691     3.59   0.000     .0423149    .1441387
         28  |   .1070085    .025415     4.21   0.000     .0571829    .1568341
         29  |   .1044196   .0252449     4.14   0.000     .0549276    .1539115
         30  |   .1046091   .0250569     4.17   0.000     .0554855    .1537327
         31  |   .0998862   .0251509     3.97   0.000     .0505784     .149194
         32  |   .0836125     .02557     3.27   0.001     .0334831     .133742
         33  |   .0880954   .0252043     3.50   0.000      .038683    .1375078
         34  |   .0745775   .0254541     2.93   0.003     .0246752    .1244797
         35  |   .0731033   .0255916     2.86   0.004     .0229315    .1232751
         36  |   .0664141   .0258534     2.57   0.010     .0157291     .117099
         37  |   .0729163   .0258692     2.82   0.005     .0222004    .1236322
         38  |   .0849623   .0261501     3.25   0.001     .0336956     .136229
         39  |   .0918325   .0262049     3.50   0.000     .0404584    .1432065
         40  |   .0783249   .0264005     2.97   0.003     .0265673    .1300826
         41  |   .0897525   .0266931     3.36   0.001     .0374214    .1420836
         42  |    .092684   .0269915     3.43   0.001     .0397677    .1456003
         43  |   .0974218   .0274514     3.55   0.000     .0436039    .1512396
         44  |   .0929255    .027663     3.36   0.001     .0386929    .1471581
         45  |   .0981156   .0276507     3.55   0.000     .0439069    .1523242
         46  |   .1083783   .0280065     3.87   0.000     .0534722    .1632845
         47  |   .1077729   .0283681     3.80   0.000     .0521579    .1633878
         48  |   .1003993   .0286064     3.51   0.000     .0443171    .1564815
         49  |  -.0199878   .0295723    -0.68   0.499    -.0779635     .037988
         50  |  -.0466128   .0298549    -1.56   0.119    -.1051425     .011917
             |
     age_cat |
          2  |   .0674802    .011048     6.11   0.000     .0458209    .0891394
          3  |   .0961442   .0125476     7.66   0.000      .071545    .1207434
          4  |   .1428673    .014273    10.01   0.000     .1148853    .1708492
          5  |   .1613796   .0168352     9.59   0.000     .1283745    .1943847
          6  |   .1731735   .0189827     9.12   0.000     .1359584    .2103886
             |
       _cons |   .4858638   .0232101    20.93   0.000     .4403609    .5313667
-------------+----------------------------------------------------------------
     sigma_u |  .35889374
     sigma_e |  .28633818
         rho |  .61104468   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/exporter_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs     =    293,327
Group variable: id                              Number of groups  =      4,449

R-sq:                                           Obs per group:
     within  = 0.0417                                         min =          1
     between = 0.0044                                         avg =       65.9
     overall = 0.0317                                         max =      3,652

                                                F(81,4448)        =      33.32
corr(u_i, Xb)  = -0.1218                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 4,449 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         inv |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   expat_m_1 |   -.039263   .0154351    -2.54   0.011    -.0695234   -.0090026
   expat_m_2 |   -.013616   .0158559    -0.86   0.391    -.0447015    .0174695
   expat_m_3 |   -.038011   .0161271    -2.36   0.018    -.0696281   -.0063938
   expat_m_4 |  -.0288987    .017195    -1.68   0.093    -.0626094     .004812
domestic_m_1 |  -.0248927   .0154836    -1.61   0.108    -.0552482    .0054628
domestic_m_2 |  -.0181723   .0158046    -1.15   0.250    -.0491571    .0128125
domestic_m_3 |  -.0094843   .0160549    -0.59   0.555    -.0409598    .0219912
domestic_m_4 |   .0230283   .0170135     1.35   0.176    -.0103266    .0563832
 foreign_m_1 |  -.0398996   .0363646    -1.10   0.273    -.1111922    .0313931
 foreign_m_2 |  -.0580974   .0367765    -1.58   0.114    -.1301977    .0140028
 foreign_m_3 |    -.09214    .038231    -2.41   0.016    -.1670918   -.0171881
 foreign_m_4 |  -.0435088   .0401812    -1.08   0.279    -.1222838    .0352663
   expat_p_0 |  -.0458379    .015558    -2.95   0.003    -.0763394   -.0153364
   expat_p_1 |  -.0341788   .0154936    -2.21   0.027     -.064554   -.0038035
   expat_p_2 |  -.0508516   .0160715    -3.16   0.002    -.0823597   -.0193434
   expat_p_3 |  -.0284011   .0162041    -1.75   0.080    -.0601692     .003367
   expat_p_4 |  -.0316949   .0171212    -1.85   0.064     -.065261    .0018712
   expat_p_5 |  -.0248472   .0078448    -3.17   0.002     -.040227   -.0094675
domestic_p_0 |  -.0272131   .0153056    -1.78   0.075    -.0572197    .0027935
domestic_p_1 |  -.0410963   .0151717    -2.71   0.007    -.0708404   -.0113522
domestic_p_2 |  -.0376396   .0161485    -2.33   0.020    -.0692987   -.0059805
domestic_p_3 |   -.055943   .0166974    -3.35   0.001    -.0886782   -.0232077
domestic_p_4 |  -.0251937   .0174996    -1.44   0.150    -.0595017    .0091143
domestic_p_5 |  -.0303442   .0089727    -3.38   0.001    -.0479351   -.0127533
 foreign_p_0 |  -.0133065   .0350123    -0.38   0.704     -.081948    .0553349
 foreign_p_1 |   .0480072   .0301619     1.59   0.112    -.0111251    .1071396
 foreign_p_2 |  -.0170421   .0311897    -0.55   0.585    -.0781894    .0441053
 foreign_p_3 |  -.0513313   .0329193    -1.56   0.119    -.1158695    .0132069
 foreign_p_4 |  -.0918545   .0333578    -2.75   0.006    -.1572523   -.0264567
 foreign_p_5 |  -.1174562   .0361025    -3.25   0.001    -.1882351   -.0466774
             |
    ind_year |
          3  |  -.0934464   .0491521    -1.90   0.057     -.189809    .0029162
          4  |   .0310163   .0474237     0.65   0.513    -.0619577    .1239904
          5  |   -.003632    .048367    -0.08   0.940    -.0984554    .0911915
          6  |  -.0676207   .0493667    -1.37   0.171     -.164404    .0291626
          7  |   .0586432   .0486846     1.20   0.228    -.0368028    .1540892
          8  |  -.0482464   .0492962    -0.98   0.328    -.1448915    .0483986
          9  |  -.0443121    .050915    -0.87   0.384    -.1441309    .0555067
         10  |  -.0688594   .0496822    -1.39   0.166    -.1662612    .0285424
         11  |    -.08364     .05094    -1.64   0.101    -.1835078    .0162278
         12  |  -.0812499   .0517143    -1.57   0.116    -.1826357    .0201359
         13  |  -.1218975   .0519821    -2.34   0.019    -.2238082   -.0199867
         14  |  -.2195057   .0513119    -4.28   0.000    -.3201026   -.1189089
         15  |  -.0938819   .0522489    -1.80   0.072    -.1963156    .0085519
         16  |  -.0974314   .0519641    -1.87   0.061    -.1993069     .004444
         17  |  -.1463155   .0537275    -2.72   0.006    -.2516481   -.0409829
         18  |  -.1444349   .0523967    -2.76   0.006    -.2471586   -.0417112
         19  |   -.143762   .0538875    -2.67   0.008    -.2494083   -.0381157
         20  |  -.0568638   .0533233    -1.07   0.286    -.1614039    .0476764
         21  |  -.1750738    .053469    -3.27   0.001    -.2798997    -.070248
         22  |   .0939803   .0545331     1.72   0.085    -.0129318    .2008924
         23  |  -.2559416     .05569    -4.60   0.000    -.3651218   -.1467615
         24  |  -.4373617   .0573403    -7.63   0.000    -.5497773   -.3249461
         25  |  -.2225304   .0659014    -3.38   0.001      -.35173   -.0933309
         27  |  -.0807659   .0619703    -1.30   0.193    -.2022585    .0407268
         28  |  -.3840846   .0584135    -6.58   0.000    -.4986041    -.269565
         29  |  -.1381964    .057659    -2.40   0.017    -.2512367   -.0251561
         30  |  -.2343256   .0571779    -4.10   0.000    -.3464228   -.1222285
         31  |  -.1372873   .0568792    -2.41   0.016    -.2487988   -.0257758
         32  |  -.2446115    .056878    -4.30   0.000    -.3561206   -.1331024
         33  |  -.0983301   .0567049    -1.73   0.083    -.2094999    .0128397
         34  |  -.2122183   .0568369    -3.73   0.000    -.3236469   -.1007898
         35  |  -.1928802   .0571862    -3.37   0.001    -.3049936   -.0807667
         36  |  -.2434458   .0575508    -4.23   0.000    -.3562739   -.1306177
         37  |    -.24431   .0585359    -4.17   0.000    -.3590694   -.1295505
         38  |  -.2072724   .0588004    -3.53   0.000    -.3225504   -.0919943
         39  |  -.2940187   .0585192    -5.02   0.000    -.4087455   -.1792919
         40  |  -.1786638   .0589491    -3.03   0.002    -.2942335   -.0630942
         41  |  -.2356453    .060209    -3.91   0.000    -.3536848   -.1176058
         42  |  -.2348279   .0602344    -3.90   0.000    -.3529174   -.1167385
         43  |  -.1035309   .0601686    -1.72   0.085    -.2214913    .0144296
         44  |  -.1274628    .059948    -2.13   0.034    -.2449907   -.0099348
         45  |  -.3121514   .0604501    -5.16   0.000    -.4306636   -.1936391
         46  |  -.1632202   .0601088    -2.72   0.007    -.2810633    -.045377
         47  |   .0358783    .062496     0.57   0.566    -.0866449    .1584016
         48  |  -.3373163   .0611937    -5.51   0.000    -.4572864   -.2173462
         49  |  -.8263976   .0601243   -13.74   0.000    -.9442712   -.7085239
         50  |  -.2493542   .0687103    -3.63   0.000    -.3840605   -.1146479
             |
     age_cat |
          3  |  -.1245602    .032223    -3.87   0.000    -.1877334   -.0613871
          4  |   -.287299   .0319314    -9.00   0.000    -.3499005   -.2246975
          5  |  -.3285048   .0343324    -9.57   0.000    -.3958134   -.2611962
          6  |  -.3583896   .0371928    -9.64   0.000     -.431306   -.2854732
             |
       _cons |   .4568578   .0545963     8.37   0.000     .3498219    .5638938
-------------+----------------------------------------------------------------
     sigma_u |  .37777788
     sigma_e |  .83359923
         rho |   .1703862   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 10
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(10 missing values generated)
(10 missing values generated)
(10 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/inv_event_study.png written in PNG format)

. 
. 
. 
. log close
      name:  <unnamed>
       log:  /Users/koren/Tresors/Data3/projects/expat-analysis/output/estimate.log
  log type:  text
 closed on:  20 Nov 2018, 20:31:45
-----------------------------------------------------------------------------------------------
