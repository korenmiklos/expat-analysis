--------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/koren/Google Drive/Research/expat/research_design/talk/output/estimate.log
  log type:  text
 opened on:   4 Dec 2018, 11:44:35

. 
. use temp/analysis_sample

. 
. *Dinamika
. scalar Tbefore = 4

. scalar Tduring = 6

. scalar Tafter = 4

. 
. gen byte analysis_window = (tenure>=-Tbefore-1)&(year-first_exit_year<=Tafter)

. 
. local sample_baseline (analysis_window==1)

. local sample_manufacturing `sample_baseline' & (manufacturing==1)

. local sample_acquisitions `sample_baseline' & (greenfield==0)

. 
. local samples baseline manufacturing acquisitions

. 
. local outcomes lnL lnKL lnQL exporter

. label var lnL "Employment (log)"

. label var lnKL "Capital per worker (log)"

. label var lnQL "Revenue per worker (log)"

. label var exporter "Firm is an exporter (dummy)"

. 
. egen person_tag = tag(frame_id manager_id)

. egen N = sum(person_tag), by(frame_id)

. gen inverse_weight = 1/N

. 
. * verify founders are not in analysis sample
. foreach X of var during* after* {
  2.         replace `X'=0 if founder==1
  3. }
(0 real changes made)
(139,901 real changes made)
(59,458 real changes made)
(78,741 real changes made)
(85,727 real changes made)
(47,481 real changes made)
(81,093 real changes made)
(99,409 real changes made)
(101,766 real changes made)
(20,850 real changes made)
(10,784 real changes made)
(14,053 real changes made)
(13,716 real changes made)
(15,712 real changes made)
(10,108 real changes made)
(14,331 real changes made)
(17,801 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(72,120 real changes made)
(35,598 real changes made)
(39,408 real changes made)
(38,930 real changes made)
(30,391 real changes made)
(39,171 real changes made)
(53,641 real changes made)
(33,720 real changes made)
(33,386 real changes made)
(19,323 real changes made)
(22,948 real changes made)
(20,178 real changes made)
(24,910 real changes made)
(15,823 real changes made)
(28,081 real changes made)
(15,326 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

. 
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. local i = 1

. foreach X of var `outcomes' {
  2.         foreach sample in `samples' {
  3.                 * simple, descriptive regressions first, including founders, but not before/after years
.                 reg `X' foreign expat i.ind_year i.age_cat if `sample_`sample'' & year>=enter_year & year<=first_exit_year [aw
> =inverse_weight], vce(cluster id)
  4.                 do regram output/regression/`sample'_OLS `i' `X'
  5. 
.                 xtreg `X' foreign expat i.ind_year i.age_cat if `sample_`sample'' & year>=enter_year & year<=first_exit_year [
> aw=inverse_weight], i(id) fe vce(cluster id)
  6.                 local r2_w = `e(r2_w)'
  7.                 do regram output/regression/`sample'_FE `i' `X' R2_within "`r2_w'"
  8. 
.                 xtreg `X' foreign during after during_expat after_expat i.ind_year i.age_cat if `sample_`sample'' [aw=inverse_
> weight], i(firm_person ) fe vce(cluster id)
  9.                 local r2_w = `e(r2_w)'
 10.                 do regram output/regression/`sample' `i' `X' R2_within "`r2_w'"
 11. 
.                 local fname = e(depvar)
 12.                 local title : variable label `fname'
 13. 
.                 slopegraph, ///
>                         from(0 0 1 _b[during] 0 0 1 _b[during]+_b[during_expat]) ///
>                         to(1 _b[during] 2 _b[after] 1 _b[during]+_b[during_expat] 2 _b[after]+_b[after_expat]) ///
>                         style(p1 p1 p2 p2) ///
>                         label("Local-during" "Local-after" "Expat-during" "Expat-after" ) ///
>                         width_test(during after==during during_expat after_expat==during_expat) ///
>                         star_test(1==1 1==1 during_expat after_expat) ///
>                         connect(stepstair) ///
>                         format(scheme(538w) xlabel(none) xtitle("") ytitle("") title(`title') legend(off) aspect(0.67))
 14. 
.                 graph export output/figure/`sample'_`fname'_slope.png, width(800) replace
 15.         }
 16.         xtreg `X' foreign during_?? after_?? i.ind_year i.age_cat if `sample_acquisitions' [aw=inverse_weight], i(firm_pers
> on ) fe vce(cluster id)
 17.         local r2_w = `e(r2_w)'
 18.         do regram output/regression/acquisitions_change `i' `X' R2_within "`r2_w'"
 19.         do tree_graph
 20. 
.         local i = `i' + 1
 21. }
(sum of wgt is 121,707.306675576)

Linear regression                               Number of obs     =    322,194
                                                F(75, 20301)      =      43.24
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0716
                                                Root MSE          =     1.0268

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .399071   .0204388    19.53   0.000     .3590093    .4391327
       expat |  -.0004882   .0240615    -0.02   0.984    -.0476506    .0466742
             |
    ind_year |
          2  |  -.0659258   .0254581    -2.59   0.010    -.1158258   -.0160258
          3  |  -.1569987   .0298461    -5.26   0.000    -.2154996   -.0984979
          4  |  -.2319142   .0316152    -7.34   0.000    -.2938825   -.1699459
          5  |  -.2509664   .0325061    -7.72   0.000     -.314681   -.1872517
          6  |   -.303306   .0328846    -9.22   0.000    -.3677625   -.2388495
          7  |  -.3080732   .0335083    -9.19   0.000    -.3737522   -.2423941
          8  |  -.2730187    .033681    -8.11   0.000    -.3390363   -.2070011
          9  |  -.2491326     .03355    -7.43   0.000    -.3148933   -.1833719
         10  |  -.2499886   .0337546    -7.41   0.000    -.3161504   -.1838268
         11  |  -.2517763    .033938    -7.42   0.000    -.3182975   -.1852551
         12  |  -.2357252   .0338546    -6.96   0.000     -.302083   -.1693674
         13  |   -.189313   .0336613    -5.62   0.000     -.255292    -.123334
         14  |  -.1763824   .0336437    -5.24   0.000    -.2423267    -.110438
         15  |  -.1453207   .0335588    -4.33   0.000    -.2110988   -.0795427
         16  |  -.1286088    .033544    -3.83   0.000    -.1943578   -.0628598
         17  |  -.0945683   .0337488    -2.80   0.005    -.1607185    -.028418
         18  |   -.134116   .0337979    -3.97   0.000    -.2003626   -.0678694
         19  |  -.1326375   .0338828    -3.91   0.000    -.1990506   -.0662245
         20  |  -.1194191    .033912    -3.52   0.000    -.1858893   -.0529488
         21  |    -.11973   .0340944    -3.51   0.000    -.1865579   -.0529021
         22  |  -.1186044   .0342327    -3.46   0.001    -.1857032   -.0515055
         23  |  -.0965401   .0341781    -2.82   0.005     -.163532   -.0295482
         24  |   -.029878   .0346651    -0.86   0.389    -.0978243    .0380684
         25  |    .039722    .034607     1.15   0.251    -.0281105    .1075545
         26  |   .3630134    .048815     7.44   0.000      .267332    .4586948
         27  |   .2238381   .0431935     5.18   0.000     .1391753    .3085009
         28  |   .1709508   .0409348     4.18   0.000     .0907153    .2511863
         29  |   .1086906   .0397831     2.73   0.006     .0307124    .1866687
         30  |    .078516   .0386115     2.03   0.042     .0028343    .1541977
         31  |   .0906748   .0377916     2.40   0.016     .0166002    .1647494
         32  |   .0795714   .0369726     2.15   0.031      .007102    .1520407
         33  |    .069021   .0362615     1.90   0.057    -.0020545    .1400965
         34  |   .0566726   .0360049     1.57   0.115    -.0138999    .1272451
         35  |   .0609057   .0356002     1.71   0.087    -.0088736    .1306851
         36  |   .0225715   .0356396     0.63   0.527     -.047285     .092428
         37  |   .0305586   .0356068     0.86   0.391    -.0392336    .1003508
         38  |   .0390557   .0357625     1.09   0.275    -.0310418    .1091532
         39  |   .0318036   .0356238     0.89   0.372    -.0380219    .1016291
         40  |   .0400984   .0359615     1.12   0.265     -.030389    .1105858
         41  |   .0765955   .0356396     2.15   0.032      .006739     .146452
         42  |   .0795792   .0359642     2.21   0.027     .0090864    .1500721
         43  |  -.0068545   .0364552    -0.19   0.851    -.0783096    .0646006
         44  |   .0166938   .0366438     0.46   0.649    -.0551309    .0885186
         45  |   .0549482    .036765     1.49   0.135    -.0171141    .1270105
         46  |    .097067   .0366646     2.65   0.008     .0252015    .1689325
         47  |   .1256949   .0372998     3.37   0.001     .0525842    .1988056
         48  |   .1534244   .0374073     4.10   0.000      .080103    .2267457
         49  |   .2344898   .0380806     6.16   0.000     .1598487    .3091308
         50  |   .2754341   .0384781     7.16   0.000     .2000139    .3508543
             |
     age_cat |
          1  |   .2485305   .0186096    13.35   0.000     .2120541    .2850069
          2  |   .4015391   .0195065    20.58   0.000     .3633048    .4397734
          3  |   .4903006   .0200284    24.48   0.000     .4510433    .5295579
          4  |   .5743722   .0205094    28.01   0.000     .5341721    .6145724
          5  |   .6380909   .0210599    30.30   0.000     .5968118      .67937
          6  |   .6850714   .0213623    32.07   0.000     .6431995    .7269433
          7  |    .720652   .0217131    33.19   0.000     .6780926    .7632115
          8  |   .7393612   .0220586    33.52   0.000     .6961246    .7825978
          9  |   .7426294   .0223812    33.18   0.000     .6987604    .7864984
         10  |   .7416009     .02264    32.76   0.000     .6972246    .7859771
         11  |   .7432785   .0230076    32.31   0.000     .6981818    .7883752
         12  |   .7479069   .0232345    32.19   0.000     .7023654    .7934484
         13  |   .7410897   .0234882    31.55   0.000     .6950509    .7871284
         14  |   .7172241   .0240331    29.84   0.000     .6701172     .764331
         15  |   .7029804   .0245518    28.63   0.000     .6548569    .7511039
         16  |   .6746921   .0252387    26.73   0.000     .6252223    .7241619
         17  |   .6464068   .0261358    24.73   0.000     .5951786     .697635
         18  |   .6289077   .0268509    23.42   0.000     .5762779    .6815376
         19  |   .6057464   .0279503    21.67   0.000     .5509615    .6605313
         20  |   .5384763   .0297313    18.11   0.000     .4802005     .596752
         25  |   .4330699   .0437128     9.91   0.000     .3473892    .5187505
         30  |   .5390327   .0775938     6.95   0.000     .3869426    .6911229
         40  |   .7396529   .0702605    10.53   0.000     .6019366    .8773693
         50  |    .321211    .093348     3.44   0.001     .1382414    .5041805
             |
       _cons |   3.027279   .0339184    89.25   0.000     2.960796    3.093762
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    322,194
                                                F(75, 20301)      =      43.24
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0716
                                                Root MSE          =     1.0268

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .399071   .0204388    19.53   0.000     .3590093    .4391327
       expat |  -.0004882   .0240615    -0.02   0.984    -.0476506    .0466742
             |
    ind_year |
          2  |  -.0659258   .0254581    -2.59   0.010    -.1158258   -.0160258
          3  |  -.1569987   .0298461    -5.26   0.000    -.2154996   -.0984979
          4  |  -.2319142   .0316152    -7.34   0.000    -.2938825   -.1699459
          5  |  -.2509664   .0325061    -7.72   0.000     -.314681   -.1872517
          6  |   -.303306   .0328846    -9.22   0.000    -.3677625   -.2388495
          7  |  -.3080732   .0335083    -9.19   0.000    -.3737522   -.2423941
          8  |  -.2730187    .033681    -8.11   0.000    -.3390363   -.2070011
          9  |  -.2491326     .03355    -7.43   0.000    -.3148933   -.1833719
         10  |  -.2499886   .0337546    -7.41   0.000    -.3161504   -.1838268
         11  |  -.2517763    .033938    -7.42   0.000    -.3182975   -.1852551
         12  |  -.2357252   .0338546    -6.96   0.000     -.302083   -.1693674
         13  |   -.189313   .0336613    -5.62   0.000     -.255292    -.123334
         14  |  -.1763824   .0336437    -5.24   0.000    -.2423267    -.110438
         15  |  -.1453207   .0335588    -4.33   0.000    -.2110988   -.0795427
         16  |  -.1286088    .033544    -3.83   0.000    -.1943578   -.0628598
         17  |  -.0945683   .0337488    -2.80   0.005    -.1607185    -.028418
         18  |   -.134116   .0337979    -3.97   0.000    -.2003626   -.0678694
         19  |  -.1326375   .0338828    -3.91   0.000    -.1990506   -.0662245
         20  |  -.1194191    .033912    -3.52   0.000    -.1858893   -.0529488
         21  |    -.11973   .0340944    -3.51   0.000    -.1865579   -.0529021
         22  |  -.1186044   .0342327    -3.46   0.001    -.1857032   -.0515055
         23  |  -.0965401   .0341781    -2.82   0.005     -.163532   -.0295482
         24  |   -.029878   .0346651    -0.86   0.389    -.0978243    .0380684
         25  |    .039722    .034607     1.15   0.251    -.0281105    .1075545
         26  |   .3630134    .048815     7.44   0.000      .267332    .4586948
         27  |   .2238381   .0431935     5.18   0.000     .1391753    .3085009
         28  |   .1709508   .0409348     4.18   0.000     .0907153    .2511863
         29  |   .1086906   .0397831     2.73   0.006     .0307124    .1866687
         30  |    .078516   .0386115     2.03   0.042     .0028343    .1541977
         31  |   .0906748   .0377916     2.40   0.016     .0166002    .1647494
         32  |   .0795714   .0369726     2.15   0.031      .007102    .1520407
         33  |    .069021   .0362615     1.90   0.057    -.0020545    .1400965
         34  |   .0566726   .0360049     1.57   0.115    -.0138999    .1272451
         35  |   .0609057   .0356002     1.71   0.087    -.0088736    .1306851
         36  |   .0225715   .0356396     0.63   0.527     -.047285     .092428
         37  |   .0305586   .0356068     0.86   0.391    -.0392336    .1003508
         38  |   .0390557   .0357625     1.09   0.275    -.0310418    .1091532
         39  |   .0318036   .0356238     0.89   0.372    -.0380219    .1016291
         40  |   .0400984   .0359615     1.12   0.265     -.030389    .1105858
         41  |   .0765955   .0356396     2.15   0.032      .006739     .146452
         42  |   .0795792   .0359642     2.21   0.027     .0090864    .1500721
         43  |  -.0068545   .0364552    -0.19   0.851    -.0783096    .0646006
         44  |   .0166938   .0366438     0.46   0.649    -.0551309    .0885186
         45  |   .0549482    .036765     1.49   0.135    -.0171141    .1270105
         46  |    .097067   .0366646     2.65   0.008     .0252015    .1689325
         47  |   .1256949   .0372998     3.37   0.001     .0525842    .1988056
         48  |   .1534244   .0374073     4.10   0.000      .080103    .2267457
         49  |   .2344898   .0380806     6.16   0.000     .1598487    .3091308
         50  |   .2754341   .0384781     7.16   0.000     .2000139    .3508543
             |
     age_cat |
          1  |   .2485305   .0186096    13.35   0.000     .2120541    .2850069
          2  |   .4015391   .0195065    20.58   0.000     .3633048    .4397734
          3  |   .4903006   .0200284    24.48   0.000     .4510433    .5295579
          4  |   .5743722   .0205094    28.01   0.000     .5341721    .6145724
          5  |   .6380909   .0210599    30.30   0.000     .5968118      .67937
          6  |   .6850714   .0213623    32.07   0.000     .6431995    .7269433
          7  |    .720652   .0217131    33.19   0.000     .6780926    .7632115
          8  |   .7393612   .0220586    33.52   0.000     .6961246    .7825978
          9  |   .7426294   .0223812    33.18   0.000     .6987604    .7864984
         10  |   .7416009     .02264    32.76   0.000     .6972246    .7859771
         11  |   .7432785   .0230076    32.31   0.000     .6981818    .7883752
         12  |   .7479069   .0232345    32.19   0.000     .7023654    .7934484
         13  |   .7410897   .0234882    31.55   0.000     .6950509    .7871284
         14  |   .7172241   .0240331    29.84   0.000     .6701172     .764331
         15  |   .7029804   .0245518    28.63   0.000     .6548569    .7511039
         16  |   .6746921   .0252387    26.73   0.000     .6252223    .7241619
         17  |   .6464068   .0261358    24.73   0.000     .5951786     .697635
         18  |   .6289077   .0268509    23.42   0.000     .5762779    .6815376
         19  |   .6057464   .0279503    21.67   0.000     .5509615    .6605313
         20  |   .5384763   .0297313    18.11   0.000     .4802005     .596752
         25  |   .4330699   .0437128     9.91   0.000     .3473892    .5187505
         30  |   .5390327   .0775938     6.95   0.000     .3869426    .6911229
         40  |   .7396529   .0702605    10.53   0.000     .6019366    .8773693
         50  |    .321211    .093348     3.44   0.001     .1382414    .5041805
             |
       _cons |   3.027279   .0339184    89.25   0.000     2.960796    3.093762
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    322,194
Group variable: id                              Number of groups  =     20,302

R-sq:                                           Obs per group:
     within  = 0.1215                                         min =          1
     between = 0.0103                                         avg =       15.9
     overall = 0.0291                                         max =        161

                                                F(75,20301)       =      62.87
corr(u_i, Xb)  = -0.3788                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0014691   .0316185     0.05   0.963    -.0605057    .0634438
       expat |  -.0381531    .012457    -3.06   0.002    -.0625698   -.0137364
             |
    ind_year |
          2  |  -.0916143   .0221274    -4.14   0.000    -.1349858   -.0482428
          3  |  -.2136223   .0288286    -7.41   0.000    -.2701287    -.157116
          4  |  -.3486069   .0330331   -10.55   0.000    -.4133545   -.2838593
          5  |  -.4239371   .0374791   -11.31   0.000    -.4973991   -.3504751
          6  |  -.5102299   .0411841   -12.39   0.000    -.5909541   -.4295057
          7  |  -.5624604   .0451147   -12.47   0.000    -.6508889    -.474032
          8  |  -.6003619   .0486747   -12.33   0.000    -.6957684   -.5049555
          9  |   -.645592   .0523866   -12.32   0.000     -.748274   -.5429099
         10  |  -.7136723   .0562664   -12.68   0.000    -.8239589   -.6033857
         11  |  -.7857086   .0598383   -13.13   0.000    -.9029966   -.6684206
         12  |  -.8321198   .0636153   -13.08   0.000    -.9568109   -.7074288
         13  |  -.8722128   .0674745   -12.93   0.000    -1.004468   -.7399574
         14  |  -.9215957   .0713484   -12.92   0.000    -1.061444    -.781747
         15  |  -.9584049   .0751289   -12.76   0.000    -1.105664   -.8111461
         16  |  -1.009936   .0789726   -12.79   0.000    -1.164729   -.8551431
         17  |  -1.056034   .0830694   -12.71   0.000    -1.218857   -.8932113
         18  |  -1.165548   .0869633   -13.40   0.000    -1.336003   -.9950933
         19  |  -1.242276     .09066   -13.70   0.000    -1.419977   -1.064575
         20  |  -1.303789   .0942369   -13.84   0.000      -1.4885   -1.119077
         21  |  -1.378529   .0977214   -14.11   0.000    -1.570071   -1.186987
         22  |  -1.435441   .1009333   -14.22   0.000    -1.633278   -1.237603
         23  |  -1.478796   .1042986   -14.18   0.000     -1.68323   -1.274363
         24  |  -1.527961   .1080916   -14.14   0.000    -1.739829   -1.316092
         25  |  -1.568241    .112012   -14.00   0.000    -1.787794   -1.348689
         26  |   .5373497   .0636926     8.44   0.000      .412507    .6621924
         27  |   .4043262     .06059     6.67   0.000      .285565    .5230874
         28  |   .2869214   .0587393     4.88   0.000     .1717876    .4020553
         29  |   .1802179   .0583787     3.09   0.002     .0657909    .2946449
         30  |   .0958229    .057911     1.65   0.098    -.0176874    .2093332
         31  |   .0324913   .0589998     0.55   0.582    -.0831531    .1481357
         32  |  -.0329843   .0597579    -0.55   0.581    -.1501147     .084146
         33  |  -.1155109   .0614905    -1.88   0.060    -.2360373    .0050154
         34  |  -.1800019   .0636559    -2.83   0.005    -.3047725   -.0552313
         35  |  -.2457123   .0660791    -3.72   0.000    -.3752326   -.1161919
         36  |  -.3516093   .0687458    -5.11   0.000    -.4863567    -.216862
         37  |   -.421609    .071231    -5.92   0.000    -.5612275   -.2819905
         38  |  -.5113958   .0743365    -6.88   0.000    -.6571013   -.3656902
         39  |  -.5837685   .0777492    -7.51   0.000    -.7361633   -.4313737
         40  |  -.6261135   .0815682    -7.68   0.000    -.7859938   -.4662331
         41  |  -.6592132   .0848633    -7.77   0.000    -.8255521   -.4928743
         42  |  -.7194654   .0884389    -8.14   0.000    -.8928128    -.546118
         43  |  -.8755938   .0923015    -9.49   0.000    -1.056512   -.6946753
         44  |  -.9311579   .0964576    -9.65   0.000    -1.120223   -.7420932
         45  |  -.9501737   .1002081    -9.48   0.000     -1.14659   -.7537578
         46  |  -.9860174   .1036021    -9.52   0.000    -1.189086   -.7829489
         47  |  -1.017526   .1067844    -9.53   0.000    -1.226832   -.8082202
         48  |  -1.044911    .110197    -9.48   0.000    -1.260906    -.828916
         49  |  -1.072243   .1136199    -9.44   0.000    -1.294947   -.8495391
         50  |  -1.114429   .1167619    -9.54   0.000    -1.343291   -.8855658
             |
     age_cat |
          1  |   .4473027   .0166559    26.86   0.000     .4146558    .4799497
          2  |   .7593154   .0198219    38.31   0.000     .7204628    .7981679
          3  |   .9824999   .0232235    42.31   0.000       .93698     1.02802
          4  |   1.168181   .0268025    43.58   0.000     1.115646    1.220716
          5  |    1.32203   .0307352    43.01   0.000     1.261787    1.382273
          6  |   1.453298   .0347167    41.86   0.000      1.38525    1.521345
          7  |   1.562571   .0388451    40.23   0.000     1.486432    1.638711
          8  |   1.665521   .0430324    38.70   0.000     1.581174    1.749868
          9  |   1.749076   .0472281    37.03   0.000     1.656505    1.841647
         10  |    1.82257   .0514353    35.43   0.000     1.721752    1.923387
         11  |   1.897985   .0556883    34.08   0.000     1.788831    2.007139
         12  |   1.975069   .0599192    32.96   0.000     1.857622    2.092515
         13  |    2.04233   .0641555    31.83   0.000      1.91658     2.16808
         14  |   2.095148   .0685553    30.56   0.000     1.960775    2.229522
         15  |   2.148246   .0729419    29.45   0.000     2.005274    2.291218
         16  |    2.18855    .077326    28.30   0.000     2.036985    2.340116
         17  |   2.231663    .081846    27.27   0.000     2.071239    2.392088
         18  |   2.289088   .0862301    26.55   0.000     2.120071    2.458106
         19  |    2.33378   .0907436    25.72   0.000     2.155915    2.511645
         20  |   2.421725   .0992906    24.39   0.000     2.227107    2.616343
         25  |   2.560187   .1133294    22.59   0.000     2.338052    2.782322
         30  |   2.264616    .157164    14.41   0.000     1.956562     2.57267
         40  |   2.104592   .1777479    11.84   0.000     1.756192    2.452992
         50  |   1.955578   .1866382    10.48   0.000     1.589752    2.321404
             |
       _cons |   2.884848    .041661    69.25   0.000     2.803189    2.966507
-------------+----------------------------------------------------------------
     sigma_u |  1.1264795
     sigma_e |  .66862166
         rho |  .73948014   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1215153321273051

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    322,194
Group variable: id                              Number of groups  =     20,302

R-sq:                                           Obs per group:
     within  = 0.1215                                         min =          1
     between = 0.0103                                         avg =       15.9
     overall = 0.0291                                         max =        161

                                                F(75,20301)       =      62.87
corr(u_i, Xb)  = -0.3788                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0014691   .0316185     0.05   0.963    -.0605057    .0634438
       expat |  -.0381531    .012457    -3.06   0.002    -.0625698   -.0137364
             |
    ind_year |
          2  |  -.0916143   .0221274    -4.14   0.000    -.1349858   -.0482428
          3  |  -.2136223   .0288286    -7.41   0.000    -.2701287    -.157116
          4  |  -.3486069   .0330331   -10.55   0.000    -.4133545   -.2838593
          5  |  -.4239371   .0374791   -11.31   0.000    -.4973991   -.3504751
          6  |  -.5102299   .0411841   -12.39   0.000    -.5909541   -.4295057
          7  |  -.5624604   .0451147   -12.47   0.000    -.6508889    -.474032
          8  |  -.6003619   .0486747   -12.33   0.000    -.6957684   -.5049555
          9  |   -.645592   .0523866   -12.32   0.000     -.748274   -.5429099
         10  |  -.7136723   .0562664   -12.68   0.000    -.8239589   -.6033857
         11  |  -.7857086   .0598383   -13.13   0.000    -.9029966   -.6684206
         12  |  -.8321198   .0636153   -13.08   0.000    -.9568109   -.7074288
         13  |  -.8722128   .0674745   -12.93   0.000    -1.004468   -.7399574
         14  |  -.9215957   .0713484   -12.92   0.000    -1.061444    -.781747
         15  |  -.9584049   .0751289   -12.76   0.000    -1.105664   -.8111461
         16  |  -1.009936   .0789726   -12.79   0.000    -1.164729   -.8551431
         17  |  -1.056034   .0830694   -12.71   0.000    -1.218857   -.8932113
         18  |  -1.165548   .0869633   -13.40   0.000    -1.336003   -.9950933
         19  |  -1.242276     .09066   -13.70   0.000    -1.419977   -1.064575
         20  |  -1.303789   .0942369   -13.84   0.000      -1.4885   -1.119077
         21  |  -1.378529   .0977214   -14.11   0.000    -1.570071   -1.186987
         22  |  -1.435441   .1009333   -14.22   0.000    -1.633278   -1.237603
         23  |  -1.478796   .1042986   -14.18   0.000     -1.68323   -1.274363
         24  |  -1.527961   .1080916   -14.14   0.000    -1.739829   -1.316092
         25  |  -1.568241    .112012   -14.00   0.000    -1.787794   -1.348689
         26  |   .5373497   .0636926     8.44   0.000      .412507    .6621924
         27  |   .4043262     .06059     6.67   0.000      .285565    .5230874
         28  |   .2869214   .0587393     4.88   0.000     .1717876    .4020553
         29  |   .1802179   .0583787     3.09   0.002     .0657909    .2946449
         30  |   .0958229    .057911     1.65   0.098    -.0176874    .2093332
         31  |   .0324913   .0589998     0.55   0.582    -.0831531    .1481357
         32  |  -.0329843   .0597579    -0.55   0.581    -.1501147     .084146
         33  |  -.1155109   .0614905    -1.88   0.060    -.2360373    .0050154
         34  |  -.1800019   .0636559    -2.83   0.005    -.3047725   -.0552313
         35  |  -.2457123   .0660791    -3.72   0.000    -.3752326   -.1161919
         36  |  -.3516093   .0687458    -5.11   0.000    -.4863567    -.216862
         37  |   -.421609    .071231    -5.92   0.000    -.5612275   -.2819905
         38  |  -.5113958   .0743365    -6.88   0.000    -.6571013   -.3656902
         39  |  -.5837685   .0777492    -7.51   0.000    -.7361633   -.4313737
         40  |  -.6261135   .0815682    -7.68   0.000    -.7859938   -.4662331
         41  |  -.6592132   .0848633    -7.77   0.000    -.8255521   -.4928743
         42  |  -.7194654   .0884389    -8.14   0.000    -.8928128    -.546118
         43  |  -.8755938   .0923015    -9.49   0.000    -1.056512   -.6946753
         44  |  -.9311579   .0964576    -9.65   0.000    -1.120223   -.7420932
         45  |  -.9501737   .1002081    -9.48   0.000     -1.14659   -.7537578
         46  |  -.9860174   .1036021    -9.52   0.000    -1.189086   -.7829489
         47  |  -1.017526   .1067844    -9.53   0.000    -1.226832   -.8082202
         48  |  -1.044911    .110197    -9.48   0.000    -1.260906    -.828916
         49  |  -1.072243   .1136199    -9.44   0.000    -1.294947   -.8495391
         50  |  -1.114429   .1167619    -9.54   0.000    -1.343291   -.8855658
             |
     age_cat |
          1  |   .4473027   .0166559    26.86   0.000     .4146558    .4799497
          2  |   .7593154   .0198219    38.31   0.000     .7204628    .7981679
          3  |   .9824999   .0232235    42.31   0.000       .93698     1.02802
          4  |   1.168181   .0268025    43.58   0.000     1.115646    1.220716
          5  |    1.32203   .0307352    43.01   0.000     1.261787    1.382273
          6  |   1.453298   .0347167    41.86   0.000      1.38525    1.521345
          7  |   1.562571   .0388451    40.23   0.000     1.486432    1.638711
          8  |   1.665521   .0430324    38.70   0.000     1.581174    1.749868
          9  |   1.749076   .0472281    37.03   0.000     1.656505    1.841647
         10  |    1.82257   .0514353    35.43   0.000     1.721752    1.923387
         11  |   1.897985   .0556883    34.08   0.000     1.788831    2.007139
         12  |   1.975069   .0599192    32.96   0.000     1.857622    2.092515
         13  |    2.04233   .0641555    31.83   0.000      1.91658     2.16808
         14  |   2.095148   .0685553    30.56   0.000     1.960775    2.229522
         15  |   2.148246   .0729419    29.45   0.000     2.005274    2.291218
         16  |    2.18855    .077326    28.30   0.000     2.036985    2.340116
         17  |   2.231663    .081846    27.27   0.000     2.071239    2.392088
         18  |   2.289088   .0862301    26.55   0.000     2.120071    2.458106
         19  |    2.33378   .0907436    25.72   0.000     2.155915    2.511645
         20  |   2.421725   .0992906    24.39   0.000     2.227107    2.616343
         25  |   2.560187   .1133294    22.59   0.000     2.338052    2.782322
         30  |   2.264616    .157164    14.41   0.000     1.956562     2.57267
         40  |   2.104592   .1777479    11.84   0.000     1.756192    2.452992
         50  |   1.955578   .1866382    10.48   0.000     1.589752    2.321404
             |
       _cons |   2.884848    .041661    69.25   0.000     2.803189    2.966507
-------------+----------------------------------------------------------------
     sigma_u |  1.1264795
     sigma_e |  .66862166
         rho |  .73948014   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    533201
Group variable: firm_person                     Number of groups   =     61260

R-sq:  within  = 0.1193                         Obs per group: min =         1
       between = 0.0279                                        avg =       8.7
       overall = 0.0430                                        max =        25

                                                F(78,20301)        =     66.72
corr(u_i, Xb)  = -0.2880                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .027141    .029357     0.92   0.355     -.030401    .0846831
      during |  -.0221016   .0096894    -2.28   0.023    -.0410935   -.0031097
       after |  -.1594148   .0176662    -9.02   0.000    -.1940419   -.1247876
during_expat |    .059998   .0183078     3.28   0.001     .0241133    .0958828
 after_expat |   .1603873   .0272804     5.88   0.000     .1069156     .213859
             |
    ind_year |
          2  |  -.0820946   .0206551    -3.97   0.000    -.1225803   -.0416088
          3  |  -.1995208   .0274787    -7.26   0.000    -.2533813   -.1456603
          4  |  -.3198616   .0319938   -10.00   0.000     -.382572   -.2571512
          5  |  -.3897079   .0368708   -10.57   0.000    -.4619776   -.3174381
          6  |  -.4656624   .0409146   -11.38   0.000    -.5458583   -.3854665
          7  |  -.5149222   .0450638   -11.43   0.000    -.6032508   -.4265935
          8  |  -.5377082   .0488803   -11.00   0.000    -.6335176   -.4418988
          9  |  -.5836119    .052807   -11.05   0.000    -.6871179   -.4801059
         10  |  -.6423672   .0567533   -11.32   0.000    -.7536083   -.5311262
         11  |  -.7105455   .0604814   -11.75   0.000     -.829094    -.591997
         12  |   -.753988   .0644916   -11.69   0.000    -.8803968   -.6275792
         13  |  -.7967473   .0685295   -11.63   0.000    -.9310707   -.6624238
         14  |  -.8413491   .0725303   -11.60   0.000    -.9835144   -.6991837
         15  |  -.8741918   .0764418   -11.44   0.000    -1.024024   -.7243597
         16  |  -.9239718   .0802392   -11.52   0.000    -1.081247   -.7666964
         17  |  -.9628025   .0842201   -11.43   0.000    -1.127881   -.7977243
         18  |  -1.063266   .0880742   -12.07   0.000    -1.235898   -.8906331
         19  |  -1.133755   .0917943   -12.35   0.000    -1.313679   -.9538306
         20  |  -1.193094   .0952706   -12.52   0.000    -1.379832   -1.006356
         21  |  -1.260676   .0986918   -12.77   0.000     -1.45412   -1.067232
         22  |  -1.318954   .1018357   -12.95   0.000     -1.51856   -1.119348
         23  |   -1.35397   .1051062   -12.88   0.000    -1.559987   -1.147953
         24  |  -1.398575    .108795   -12.86   0.000    -1.611822   -1.185328
         25  |  -1.428591   .1125974   -12.69   0.000    -1.649291   -1.207891
         26  |   .6146388   .0609051    10.09   0.000     .4952599    .7340177
         27  |   .4728254   .0581279     8.13   0.000       .35889    .5867609
         28  |   .3576308   .0564658     6.33   0.000     .2469533    .4683084
         29  |   .2425554   .0559956     4.33   0.000     .1327995    .3523113
         30  |    .169715   .0556679     3.05   0.002     .0606015    .2788286
         31  |   .1112932   .0571737     1.95   0.052    -.0007719    .2233582
         32  |   .0424988   .0582065     0.73   0.465    -.0715906    .1565882
         33  |  -.0313551   .0601428    -0.52   0.602    -.1492399    .0865297
         34  |  -.0845542   .0624929    -1.35   0.176    -.2070454    .0379369
         35  |  -.1484543   .0652404    -2.28   0.023    -.2763307   -.0205778
         36  |  -.2454494   .0680543    -3.61   0.000    -.3788412   -.1120575
         37  |  -.3139067    .070926    -4.43   0.000    -.4529275   -.1748859
         38  |  -.4006611   .0742118    -5.40   0.000    -.5461223      -.2552
         39  |  -.4694757   .0777714    -6.04   0.000     -.621914   -.3170374
         40  |  -.5001093    .081566    -6.13   0.000    -.6599853   -.3402333
         41  |  -.5321067   .0849236    -6.27   0.000    -.6985638   -.3656495
         42  |  -.5899879   .0885808    -6.66   0.000    -.7636134   -.4163624
         43  |  -.7390082   .0923584    -8.00   0.000     -.920038   -.5579783
         44  |  -.7932911   .0965336    -8.22   0.000    -.9825047   -.6040776
         45  |  -.8067686   .1000797    -8.06   0.000    -1.002933   -.6106043
         46  |  -.8397347   .1035001    -8.11   0.000    -1.042603   -.6368661
         47  |  -.8728503   .1067093    -8.18   0.000    -1.082009   -.6636915
         48  |  -.9005146   .1100402    -8.18   0.000    -1.116202    -.684827
         49  |  -.9225742   .1134826    -8.13   0.000    -1.145009   -.7001391
         50  |  -.9587352   .1165827    -8.22   0.000    -1.187247   -.7302237
             |
     age_cat |
          1  |   .4423117    .016006    27.63   0.000     .4109387    .4736847
          2  |   .7643619     .01918    39.85   0.000     .7267675    .8019563
          3  |   .9926512   .0226029    43.92   0.000     .9483478    1.036955
          4  |   1.178924   .0263134    44.80   0.000     1.127348    1.230501
          5  |   1.333202   .0302888    44.02   0.000     1.273834     1.39257
          6  |   1.459367   .0343166    42.53   0.000     1.392103     1.52663
          7  |   1.562255   .0384442    40.64   0.000     1.486902    1.637609
          8  |   1.660889     .04267    38.92   0.000     1.577253    1.744526
          9  |   1.741025   .0468392    37.17   0.000     1.649216    1.832833
         10  |   1.808117   .0510526    35.42   0.000      1.70805    1.908184
         11  |   1.879455    .055273    34.00   0.000     1.771116    1.987795
         12  |   1.946575     .05945    32.74   0.000     1.830048    2.063102
         13  |   2.014903   .0636156    31.67   0.000     1.890211    2.139594
         14  |    2.06168   .0678834    30.37   0.000     1.928623    2.194737
         15  |   2.108142   .0722089    29.20   0.000     1.966607    2.249678
         16  |   2.146987   .0764773    28.07   0.000     1.997085    2.296888
         17  |   2.183422   .0808697    27.00   0.000     2.024911    2.341933
         18  |   2.235784    .084986    26.31   0.000     2.069205    2.402363
         19  |   2.278294   .0893732    25.49   0.000     2.103115    2.453473
         20  |   2.354327   .0973487    24.18   0.000     2.163515    2.545138
         25  |   2.464309   .1099755    22.41   0.000     2.248748     2.67987
         30  |    2.21972   .1472778    15.07   0.000     1.931044    2.508397
         40  |   2.130338   .1644117    12.96   0.000     1.808078    2.452599
         50  |   2.078091   .1640432    12.67   0.000     1.756554    2.399629
             |
       _cons |   2.848787   .0419068    67.98   0.000     2.766646    2.930928
-------------+----------------------------------------------------------------
     sigma_u |  1.1896626
     sigma_e |  .66537504
         rho |  .76172286   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1193366934388506

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    533,201
Group variable: firm_person                     Number of groups  =     61,260

R-sq:                                           Obs per group:
     within  = 0.1193                                         min =          1
     between = 0.0279                                         avg =        8.7
     overall = 0.0430                                         max =         25

                                                F(78,20301)       =      66.72
corr(u_i, Xb)  = -0.2880                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .027141    .029357     0.92   0.355     -.030401    .0846831
      during |  -.0221016   .0096894    -2.28   0.023    -.0410935   -.0031097
       after |  -.1594148   .0176662    -9.02   0.000    -.1940419   -.1247876
during_expat |    .059998   .0183078     3.28   0.001     .0241133    .0958828
 after_expat |   .1603873   .0272804     5.88   0.000     .1069156     .213859
             |
    ind_year |
          2  |  -.0820946   .0206551    -3.97   0.000    -.1225803   -.0416088
          3  |  -.1995208   .0274787    -7.26   0.000    -.2533813   -.1456603
          4  |  -.3198616   .0319938   -10.00   0.000     -.382572   -.2571512
          5  |  -.3897079   .0368708   -10.57   0.000    -.4619776   -.3174381
          6  |  -.4656624   .0409146   -11.38   0.000    -.5458583   -.3854665
          7  |  -.5149222   .0450638   -11.43   0.000    -.6032508   -.4265935
          8  |  -.5377082   .0488803   -11.00   0.000    -.6335176   -.4418988
          9  |  -.5836119    .052807   -11.05   0.000    -.6871179   -.4801059
         10  |  -.6423672   .0567533   -11.32   0.000    -.7536083   -.5311262
         11  |  -.7105455   .0604814   -11.75   0.000     -.829094    -.591997
         12  |   -.753988   .0644916   -11.69   0.000    -.8803968   -.6275792
         13  |  -.7967473   .0685295   -11.63   0.000    -.9310707   -.6624238
         14  |  -.8413491   .0725303   -11.60   0.000    -.9835144   -.6991837
         15  |  -.8741918   .0764418   -11.44   0.000    -1.024024   -.7243597
         16  |  -.9239718   .0802392   -11.52   0.000    -1.081247   -.7666964
         17  |  -.9628025   .0842201   -11.43   0.000    -1.127881   -.7977243
         18  |  -1.063266   .0880742   -12.07   0.000    -1.235898   -.8906331
         19  |  -1.133755   .0917943   -12.35   0.000    -1.313679   -.9538306
         20  |  -1.193094   .0952706   -12.52   0.000    -1.379832   -1.006356
         21  |  -1.260676   .0986918   -12.77   0.000     -1.45412   -1.067232
         22  |  -1.318954   .1018357   -12.95   0.000     -1.51856   -1.119348
         23  |   -1.35397   .1051062   -12.88   0.000    -1.559987   -1.147953
         24  |  -1.398575    .108795   -12.86   0.000    -1.611822   -1.185328
         25  |  -1.428591   .1125974   -12.69   0.000    -1.649291   -1.207891
         26  |   .6146388   .0609051    10.09   0.000     .4952599    .7340177
         27  |   .4728254   .0581279     8.13   0.000       .35889    .5867609
         28  |   .3576308   .0564658     6.33   0.000     .2469533    .4683084
         29  |   .2425554   .0559956     4.33   0.000     .1327995    .3523113
         30  |    .169715   .0556679     3.05   0.002     .0606015    .2788286
         31  |   .1112932   .0571737     1.95   0.052    -.0007719    .2233582
         32  |   .0424988   .0582065     0.73   0.465    -.0715906    .1565882
         33  |  -.0313551   .0601428    -0.52   0.602    -.1492399    .0865297
         34  |  -.0845542   .0624929    -1.35   0.176    -.2070454    .0379369
         35  |  -.1484543   .0652404    -2.28   0.023    -.2763307   -.0205778
         36  |  -.2454494   .0680543    -3.61   0.000    -.3788412   -.1120575
         37  |  -.3139067    .070926    -4.43   0.000    -.4529275   -.1748859
         38  |  -.4006611   .0742118    -5.40   0.000    -.5461223      -.2552
         39  |  -.4694757   .0777714    -6.04   0.000     -.621914   -.3170374
         40  |  -.5001093    .081566    -6.13   0.000    -.6599853   -.3402333
         41  |  -.5321067   .0849236    -6.27   0.000    -.6985638   -.3656495
         42  |  -.5899879   .0885808    -6.66   0.000    -.7636134   -.4163624
         43  |  -.7390082   .0923584    -8.00   0.000     -.920038   -.5579783
         44  |  -.7932911   .0965336    -8.22   0.000    -.9825047   -.6040776
         45  |  -.8067686   .1000797    -8.06   0.000    -1.002933   -.6106043
         46  |  -.8397347   .1035001    -8.11   0.000    -1.042603   -.6368661
         47  |  -.8728503   .1067093    -8.18   0.000    -1.082009   -.6636915
         48  |  -.9005146   .1100402    -8.18   0.000    -1.116202    -.684827
         49  |  -.9225742   .1134826    -8.13   0.000    -1.145009   -.7001391
         50  |  -.9587352   .1165827    -8.22   0.000    -1.187247   -.7302237
             |
     age_cat |
          1  |   .4423117    .016006    27.63   0.000     .4109387    .4736847
          2  |   .7643619     .01918    39.85   0.000     .7267675    .8019563
          3  |   .9926512   .0226029    43.92   0.000     .9483478    1.036955
          4  |   1.178924   .0263134    44.80   0.000     1.127348    1.230501
          5  |   1.333202   .0302888    44.02   0.000     1.273834     1.39257
          6  |   1.459367   .0343166    42.53   0.000     1.392103     1.52663
          7  |   1.562255   .0384442    40.64   0.000     1.486902    1.637609
          8  |   1.660889     .04267    38.92   0.000     1.577253    1.744526
          9  |   1.741025   .0468392    37.17   0.000     1.649216    1.832833
         10  |   1.808117   .0510526    35.42   0.000      1.70805    1.908184
         11  |   1.879455    .055273    34.00   0.000     1.771116    1.987795
         12  |   1.946575     .05945    32.74   0.000     1.830048    2.063102
         13  |   2.014903   .0636156    31.67   0.000     1.890211    2.139594
         14  |    2.06168   .0678834    30.37   0.000     1.928623    2.194737
         15  |   2.108142   .0722089    29.20   0.000     1.966607    2.249678
         16  |   2.146987   .0764773    28.07   0.000     1.997085    2.296888
         17  |   2.183422   .0808697    27.00   0.000     2.024911    2.341933
         18  |   2.235784    .084986    26.31   0.000     2.069205    2.402363
         19  |   2.278294   .0893732    25.49   0.000     2.103115    2.453473
         20  |   2.354327   .0973487    24.18   0.000     2.163515    2.545138
         25  |   2.464309   .1099755    22.41   0.000     2.248748     2.67987
         30  |    2.21972   .1472778    15.07   0.000     1.931044    2.508397
         40  |   2.130338   .1644117    12.96   0.000     1.808078    2.452599
         50  |   2.078091   .1640432    12.67   0.000     1.756554    2.399629
             |
       _cons |   2.848787   .0419068    67.98   0.000     2.766646    2.930928
-------------+----------------------------------------------------------------
     sigma_u |  1.1896626
     sigma_e |  .66537504
         rho |  .76172286   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 20301) =    5.20
            Prob > F =    0.0226

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 20301) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 20301) =  125.73
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 20301) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 20301) =   10.74
            Prob > F =    0.0011

 ( 1)  during_expat = 0

       F(  1, 20301) =   10.74
            Prob > F =    0.0011
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 20301) =   28.04
            Prob > F =    0.0000

 ( 1)  after_expat = 0

       F(  1, 20301) =   34.57
            Prob > F =    0.0000
(1 real change made)
(file output/figure/baseline_lnL_slope.png written in PNG format)
(sum of wgt is 40,785.5878564715)

Linear regression                               Number of obs     =    109,056
                                                F(50, 7121)       =      24.78
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0890
                                                Root MSE          =     1.0144

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5638911    .033259    16.95   0.000     .4986936    .6290886
       expat |   .0094922   .0360485     0.26   0.792    -.0611736    .0801579
             |
    ind_year |
         27  |  -.1455338    .034696    -4.19   0.000    -.2135482   -.0775193
         28  |  -.2015864   .0392994    -5.13   0.000    -.2786249   -.1245478
         29  |  -.2513283   .0417746    -6.02   0.000     -.333219   -.1694376
         30  |  -.2723533   .0427233    -6.37   0.000    -.3561037   -.1886028
         31  |  -.2586582    .043686    -5.92   0.000    -.3442957   -.1730208
         32  |  -.2661911   .0445018    -5.98   0.000    -.3534279   -.1789544
         33  |  -.2740711    .044809    -6.12   0.000    -.3619101    -.186232
         34  |  -.2830441   .0454782    -6.22   0.000    -.3721948   -.1938933
         35  |   -.283434   .0456805    -6.20   0.000    -.3729813   -.1938867
         36  |  -.3219005    .046058    -6.99   0.000    -.4121879   -.2316131
         37  |  -.3155062   .0465221    -6.78   0.000    -.4067032   -.2243091
         38  |   -.316882   .0468561    -6.76   0.000     -.408734   -.2250301
         39  |  -.3326399   .0469083    -7.09   0.000    -.4245942   -.2406857
         40  |  -.3291005    .047627    -6.91   0.000    -.4224635   -.2357374
         41  |  -.2974518   .0476738    -6.24   0.000    -.3909067    -.203997
         42  |  -.3061482   .0479899    -6.38   0.000    -.4002227   -.2120738
         43  |  -.4080017   .0485716    -8.40   0.000    -.5032166   -.3127868
         44  |  -.3980475   .0490504    -8.12   0.000    -.4942008   -.3018942
         45  |  -.3624084   .0492332    -7.36   0.000    -.4589201   -.2658967
         46  |  -.3239012   .0494725    -6.55   0.000    -.4208821   -.2269204
         47  |  -.3009511   .0502927    -5.98   0.000    -.3995398   -.2023625
         48  |  -.2831639   .0505763    -5.60   0.000    -.3823084   -.1840194
         49  |  -.2024742   .0515044    -3.93   0.000    -.3034382   -.1015102
         50  |  -.1630107   .0524022    -3.11   0.002    -.2657346   -.0602868
             |
     age_cat |
          1  |   .2838238    .033511     8.47   0.000     .2181324    .3495153
          2  |   .4445665   .0346782    12.82   0.000     .3765869    .5125461
          3  |   .5217919    .035584    14.66   0.000     .4520367     .591547
          4  |   .6221452   .0365712    17.01   0.000     .5504548    .6938357
          5  |   .6792426   .0376253    18.05   0.000     .6054859    .7529993
          6  |   .7248887   .0383598    18.90   0.000     .6496922    .8000853
          7  |   .7600143   .0392455    19.37   0.000     .6830815    .8369471
          8  |   .7875815   .0400421    19.67   0.000      .709087     .866076
          9  |    .805488   .0408065    19.74   0.000     .7254951    .8854809
         10  |   .8189493   .0411795    19.89   0.000     .7382252    .8996734
         11  |   .8374479    .041666    20.10   0.000     .7557702    .9191256
         12  |   .8408735   .0421465    19.95   0.000     .7582538    .9234931
         13  |   .8369079   .0428385    19.54   0.000     .7529317    .9208842
         14  |   .8241449   .0436207    18.89   0.000     .7386353    .9096544
         15  |   .8358527   .0443784    18.83   0.000      .748858    .9228475
         16  |   .8213082   .0457637    17.95   0.000     .7315977    .9110186
         17  |   .8112101   .0466337    17.40   0.000     .7197942     .902626
         18  |   .8126861   .0476573    17.05   0.000     .7192637    .9061085
         19  |   .8029522    .049657    16.17   0.000     .7056097    .9002946
         20  |   .7845711   .0523121    15.00   0.000     .6820239    .8871184
         25  |   .6915004   .0717133     9.64   0.000      .550921    .8320797
         30  |   .7905131   .1953093     4.05   0.000     .4076488    1.173377
         40  |   1.168172   .1197715     9.75   0.000     .9333842     1.40296
         50  |   .7274242   .1650819     4.41   0.000     .4038146    1.051034
             |
       _cons |   3.257062   .0491417    66.28   0.000     3.160729    3.353394
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    109,056
                                                F(50, 7121)       =      24.78
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0890
                                                Root MSE          =     1.0144

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5638911    .033259    16.95   0.000     .4986936    .6290886
       expat |   .0094922   .0360485     0.26   0.792    -.0611736    .0801579
             |
    ind_year |
         27  |  -.1455338    .034696    -4.19   0.000    -.2135482   -.0775193
         28  |  -.2015864   .0392994    -5.13   0.000    -.2786249   -.1245478
         29  |  -.2513283   .0417746    -6.02   0.000     -.333219   -.1694376
         30  |  -.2723533   .0427233    -6.37   0.000    -.3561037   -.1886028
         31  |  -.2586582    .043686    -5.92   0.000    -.3442957   -.1730208
         32  |  -.2661911   .0445018    -5.98   0.000    -.3534279   -.1789544
         33  |  -.2740711    .044809    -6.12   0.000    -.3619101    -.186232
         34  |  -.2830441   .0454782    -6.22   0.000    -.3721948   -.1938933
         35  |   -.283434   .0456805    -6.20   0.000    -.3729813   -.1938867
         36  |  -.3219005    .046058    -6.99   0.000    -.4121879   -.2316131
         37  |  -.3155062   .0465221    -6.78   0.000    -.4067032   -.2243091
         38  |   -.316882   .0468561    -6.76   0.000     -.408734   -.2250301
         39  |  -.3326399   .0469083    -7.09   0.000    -.4245942   -.2406857
         40  |  -.3291005    .047627    -6.91   0.000    -.4224635   -.2357374
         41  |  -.2974518   .0476738    -6.24   0.000    -.3909067    -.203997
         42  |  -.3061482   .0479899    -6.38   0.000    -.4002227   -.2120738
         43  |  -.4080017   .0485716    -8.40   0.000    -.5032166   -.3127868
         44  |  -.3980475   .0490504    -8.12   0.000    -.4942008   -.3018942
         45  |  -.3624084   .0492332    -7.36   0.000    -.4589201   -.2658967
         46  |  -.3239012   .0494725    -6.55   0.000    -.4208821   -.2269204
         47  |  -.3009511   .0502927    -5.98   0.000    -.3995398   -.2023625
         48  |  -.2831639   .0505763    -5.60   0.000    -.3823084   -.1840194
         49  |  -.2024742   .0515044    -3.93   0.000    -.3034382   -.1015102
         50  |  -.1630107   .0524022    -3.11   0.002    -.2657346   -.0602868
             |
     age_cat |
          1  |   .2838238    .033511     8.47   0.000     .2181324    .3495153
          2  |   .4445665   .0346782    12.82   0.000     .3765869    .5125461
          3  |   .5217919    .035584    14.66   0.000     .4520367     .591547
          4  |   .6221452   .0365712    17.01   0.000     .5504548    .6938357
          5  |   .6792426   .0376253    18.05   0.000     .6054859    .7529993
          6  |   .7248887   .0383598    18.90   0.000     .6496922    .8000853
          7  |   .7600143   .0392455    19.37   0.000     .6830815    .8369471
          8  |   .7875815   .0400421    19.67   0.000      .709087     .866076
          9  |    .805488   .0408065    19.74   0.000     .7254951    .8854809
         10  |   .8189493   .0411795    19.89   0.000     .7382252    .8996734
         11  |   .8374479    .041666    20.10   0.000     .7557702    .9191256
         12  |   .8408735   .0421465    19.95   0.000     .7582538    .9234931
         13  |   .8369079   .0428385    19.54   0.000     .7529317    .9208842
         14  |   .8241449   .0436207    18.89   0.000     .7386353    .9096544
         15  |   .8358527   .0443784    18.83   0.000      .748858    .9228475
         16  |   .8213082   .0457637    17.95   0.000     .7315977    .9110186
         17  |   .8112101   .0466337    17.40   0.000     .7197942     .902626
         18  |   .8126861   .0476573    17.05   0.000     .7192637    .9061085
         19  |   .8029522    .049657    16.17   0.000     .7056097    .9002946
         20  |   .7845711   .0523121    15.00   0.000     .6820239    .8871184
         25  |   .6915004   .0717133     9.64   0.000      .550921    .8320797
         30  |   .7905131   .1953093     4.05   0.000     .4076488    1.173377
         40  |   1.168172   .1197715     9.75   0.000     .9333842     1.40296
         50  |   .7274242   .1650819     4.41   0.000     .4038146    1.051034
             |
       _cons |   3.257062   .0491417    66.28   0.000     3.160729    3.353394
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    109,056
Group variable: id                              Number of groups  =      7,122

R-sq:                                           Obs per group:
     within  = 0.1007                                         min =          1
     between = 0.0179                                         avg =       15.3
     overall = 0.0190                                         max =        125

                                                F(50,7121)        =      28.35
corr(u_i, Xb)  = -0.2633                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0052428   .0453259    -0.12   0.908     -.094095    .0836095
       expat |  -.0329735   .0135374    -2.44   0.015    -.0595108   -.0064363
             |
    ind_year |
         27  |  -.1202451   .0248386    -4.84   0.000    -.1689361   -.0715541
         28  |  -.2135889    .034042    -6.27   0.000    -.2803214   -.1468564
         29  |  -.3010803   .0427712    -7.04   0.000    -.3849245    -.217236
         30  |  -.3575413   .0497992    -7.18   0.000    -.4551625     -.25992
         31  |  -.3993718   .0582582    -6.86   0.000    -.5135752   -.2851684
         32  |  -.4510165   .0656849    -6.87   0.000    -.5797784   -.3222545
         33  |  -.5148402   .0730454    -7.05   0.000    -.6580309   -.3716495
         34  |  -.5701643   .0810999    -7.03   0.000    -.7291442   -.4111844
         35  |  -.6306417   .0885084    -7.13   0.000    -.8041443    -.457139
         36  |  -.7187753   .0959471    -7.49   0.000    -.9068601   -.5306905
         37  |  -.7831191   .1036411    -7.56   0.000    -.9862864   -.5799518
         38  |  -.8668878   .1115042    -7.77   0.000    -1.085469   -.6483065
         39  |  -.9365929   .1192877    -7.85   0.000    -1.170432   -.7027535
         40  |   -.968942   .1277223    -7.59   0.000    -1.219316   -.7185683
         41  |  -.9856766   .1352296    -7.29   0.000    -1.250767   -.7205865
         42  |  -1.034522   .1427898    -7.25   0.000    -1.314433    -.754612
         43  |  -1.188898    .150551    -7.90   0.000    -1.484023   -.8937735
         44  |  -1.237841   .1588667    -7.79   0.000    -1.549267   -.9264152
         45  |  -1.251722   .1662374    -7.53   0.000    -1.577596   -.9258469
         46  |  -1.281125   .1735036    -7.38   0.000    -1.621244   -.9410066
         47  |  -1.309136   .1798966    -7.28   0.000    -1.661786   -.9564848
         48  |  -1.329697   .1868582    -7.12   0.000    -1.695995   -.9633992
         49  |  -1.350115   .1934036    -6.98   0.000    -1.729243   -.9709862
         50  |  -1.378444   .1996436    -6.90   0.000    -1.769804   -.9870826
             |
     age_cat |
          1  |   .4180051   .0275709    15.16   0.000     .3639581    .4720522
          2  |   .7126172   .0331373    21.51   0.000     .6476583    .7775761
          3  |   .8955457   .0398277    22.49   0.000     .8174716    .9736199
          4  |   1.057519   .0468754    22.56   0.000     .9656291    1.149409
          5  |   1.186382   .0545662    21.74   0.000     1.079416    1.293348
          6  |   1.288807   .0621059    20.75   0.000     1.167061    1.410553
          7  |   1.378843   .0698982    19.73   0.000     1.241822    1.515864
          8  |   1.473107   .0775294    19.00   0.000     1.321126    1.625087
          9  |   1.541946    .085435    18.05   0.000     1.374468    1.709424
         10  |   1.620152   .0930663    17.41   0.000     1.437714     1.80259
         11  |   1.686633   .1008315    16.73   0.000     1.488973    1.884292
         12  |   1.743894   .1086585    16.05   0.000     1.530891    1.956897
         13  |   1.802807   .1165456    15.47   0.000     1.574343    2.031271
         14  |    1.85473   .1245367    14.89   0.000     1.610601    2.098859
         15  |   1.919643   .1326924    14.47   0.000     1.659526    2.179759
         16  |   1.947895   .1410349    13.81   0.000     1.671425    2.224365
         17  |   1.991802   .1491998    13.35   0.000     1.699326    2.284278
         18  |   2.048455    .157106    13.04   0.000     1.740481     2.35643
         19  |   2.089184   .1650503    12.66   0.000     1.765636    2.412731
         20  |   2.186189   .1820177    12.01   0.000      1.82938    2.542998
         25  |   2.327839   .2073565    11.23   0.000     1.921359     2.73432
         30  |   2.087201   .2744222     7.61   0.000     1.549252     2.62515
         40  |    1.93027   .3188229     6.05   0.000     1.305283    2.555258
         50  |   1.647959   .3534271     4.66   0.000     .9551364    2.340781
             |
       _cons |   3.276441   .0496988    65.93   0.000     3.179017    3.373866
-------------+----------------------------------------------------------------
     sigma_u |  1.0893724
     sigma_e |  .58653401
         rho |  .77525973   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1007265822565661

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    109,056
Group variable: id                              Number of groups  =      7,122

R-sq:                                           Obs per group:
     within  = 0.1007                                         min =          1
     between = 0.0179                                         avg =       15.3
     overall = 0.0190                                         max =        125

                                                F(50,7121)        =      28.35
corr(u_i, Xb)  = -0.2633                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0052428   .0453259    -0.12   0.908     -.094095    .0836095
       expat |  -.0329735   .0135374    -2.44   0.015    -.0595108   -.0064363
             |
    ind_year |
         27  |  -.1202451   .0248386    -4.84   0.000    -.1689361   -.0715541
         28  |  -.2135889    .034042    -6.27   0.000    -.2803214   -.1468564
         29  |  -.3010803   .0427712    -7.04   0.000    -.3849245    -.217236
         30  |  -.3575413   .0497992    -7.18   0.000    -.4551625     -.25992
         31  |  -.3993718   .0582582    -6.86   0.000    -.5135752   -.2851684
         32  |  -.4510165   .0656849    -6.87   0.000    -.5797784   -.3222545
         33  |  -.5148402   .0730454    -7.05   0.000    -.6580309   -.3716495
         34  |  -.5701643   .0810999    -7.03   0.000    -.7291442   -.4111844
         35  |  -.6306417   .0885084    -7.13   0.000    -.8041443    -.457139
         36  |  -.7187753   .0959471    -7.49   0.000    -.9068601   -.5306905
         37  |  -.7831191   .1036411    -7.56   0.000    -.9862864   -.5799518
         38  |  -.8668878   .1115042    -7.77   0.000    -1.085469   -.6483065
         39  |  -.9365929   .1192877    -7.85   0.000    -1.170432   -.7027535
         40  |   -.968942   .1277223    -7.59   0.000    -1.219316   -.7185683
         41  |  -.9856766   .1352296    -7.29   0.000    -1.250767   -.7205865
         42  |  -1.034522   .1427898    -7.25   0.000    -1.314433    -.754612
         43  |  -1.188898    .150551    -7.90   0.000    -1.484023   -.8937735
         44  |  -1.237841   .1588667    -7.79   0.000    -1.549267   -.9264152
         45  |  -1.251722   .1662374    -7.53   0.000    -1.577596   -.9258469
         46  |  -1.281125   .1735036    -7.38   0.000    -1.621244   -.9410066
         47  |  -1.309136   .1798966    -7.28   0.000    -1.661786   -.9564848
         48  |  -1.329697   .1868582    -7.12   0.000    -1.695995   -.9633992
         49  |  -1.350115   .1934036    -6.98   0.000    -1.729243   -.9709862
         50  |  -1.378444   .1996436    -6.90   0.000    -1.769804   -.9870826
             |
     age_cat |
          1  |   .4180051   .0275709    15.16   0.000     .3639581    .4720522
          2  |   .7126172   .0331373    21.51   0.000     .6476583    .7775761
          3  |   .8955457   .0398277    22.49   0.000     .8174716    .9736199
          4  |   1.057519   .0468754    22.56   0.000     .9656291    1.149409
          5  |   1.186382   .0545662    21.74   0.000     1.079416    1.293348
          6  |   1.288807   .0621059    20.75   0.000     1.167061    1.410553
          7  |   1.378843   .0698982    19.73   0.000     1.241822    1.515864
          8  |   1.473107   .0775294    19.00   0.000     1.321126    1.625087
          9  |   1.541946    .085435    18.05   0.000     1.374468    1.709424
         10  |   1.620152   .0930663    17.41   0.000     1.437714     1.80259
         11  |   1.686633   .1008315    16.73   0.000     1.488973    1.884292
         12  |   1.743894   .1086585    16.05   0.000     1.530891    1.956897
         13  |   1.802807   .1165456    15.47   0.000     1.574343    2.031271
         14  |    1.85473   .1245367    14.89   0.000     1.610601    2.098859
         15  |   1.919643   .1326924    14.47   0.000     1.659526    2.179759
         16  |   1.947895   .1410349    13.81   0.000     1.671425    2.224365
         17  |   1.991802   .1491998    13.35   0.000     1.699326    2.284278
         18  |   2.048455    .157106    13.04   0.000     1.740481     2.35643
         19  |   2.089184   .1650503    12.66   0.000     1.765636    2.412731
         20  |   2.186189   .1820177    12.01   0.000      1.82938    2.542998
         25  |   2.327839   .2073565    11.23   0.000     1.921359     2.73432
         30  |   2.087201   .2744222     7.61   0.000     1.549252     2.62515
         40  |    1.93027   .3188229     6.05   0.000     1.305283    2.555258
         50  |   1.647959   .3534271     4.66   0.000     .9551364    2.340781
             |
       _cons |   3.276441   .0496988    65.93   0.000     3.179017    3.373866
-------------+----------------------------------------------------------------
     sigma_u |  1.0893724
     sigma_e |  .58653401
         rho |  .77525973   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    181711
Group variable: firm_person                     Number of groups   =     21971

R-sq:  within  = 0.1000                         Obs per group: min =         1
       between = 0.0239                                        avg =       8.3
       overall = 0.0243                                        max =        25

                                                F(53,7121)         =     30.04
corr(u_i, Xb)  = -0.2174                        Prob > F           =    0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0096038   .0397515     0.24   0.809    -.0683209    .0875286
      during |  -.0622549   .0151556    -4.11   0.000    -.0919645   -.0325453
       after |  -.2079218   .0277514    -7.49   0.000    -.2623228   -.1535207
during_expat |   .0544576   .0235441     2.31   0.021     .0083041    .1006111
 after_expat |   .1408285   .0381869     3.69   0.000     .0659707    .2156862
             |
    ind_year |
         27  |  -.1293622   .0228248    -5.67   0.000    -.1741056   -.0846188
         28  |  -.2232991   .0321561    -6.94   0.000    -.2863346   -.1602636
         29  |  -.3208012   .0409975    -7.82   0.000    -.4011686   -.2404339
         30  |  -.3654702   .0482922    -7.57   0.000    -.4601372   -.2708031
         31  |  -.4089538    .056992    -7.18   0.000    -.5206751   -.2972325
         32  |  -.4672938   .0647191    -7.22   0.000    -.5941625   -.3404251
         33  |  -.5288382   .0725575    -7.29   0.000    -.6710726   -.3866039
         34  |  -.5787954   .0806283    -7.18   0.000    -.7368508     -.42074
         35  |  -.6454512   .0884239    -7.30   0.000    -.8187884    -.472114
         36  |  -.7320812   .0959116    -7.63   0.000    -.9200963    -.544066
         37  |  -.7976602   .1037653    -7.69   0.000    -1.001071   -.5942494
         38  |  -.8833032   .1118476    -7.90   0.000    -1.102558   -.6640488
         39  |   -.955507   .1198551    -7.97   0.000    -1.190459   -.7205555
         40  |  -.9839137   .1281705    -7.68   0.000    -1.235166   -.7326615
         41  |  -1.005751   .1356967    -7.41   0.000    -1.271757   -.7397453
         42  |  -1.057182   .1434032    -7.37   0.000    -1.338295   -.7760696
         43  |  -1.212888   .1510876    -8.03   0.000    -1.509064    -.916711
         44  |   -1.26354   .1592572    -7.93   0.000    -1.575731   -.9513484
         45  |  -1.273231   .1663344    -7.65   0.000    -1.599296   -.9471666
         46  |  -1.301538   .1733849    -7.51   0.000    -1.641424   -.9616524
         47  |  -1.332542   .1797909    -7.41   0.000    -1.684986   -.9800987
         48  |  -1.354059   .1864483    -7.26   0.000    -1.719553   -.9885645
         49  |  -1.368978   .1931256    -7.09   0.000    -1.747562   -.9903948
         50  |  -1.393516   .1993788    -6.99   0.000    -1.784357   -1.002674
             |
     age_cat |
          1  |   .4332247   .0269565    16.07   0.000      .380382    .4860674
          2  |   .7413193   .0326473    22.71   0.000     .6773208    .8053178
          3  |   .9368726   .0391587    23.92   0.000     .8601099    1.013635
          4  |   1.095898    .046191    23.73   0.000      1.00535    1.186447
          5  |   1.221554   .0537686    22.72   0.000     1.116151    1.326956
          6  |   1.330597   .0612914    21.71   0.000     1.210448    1.450746
          7  |   1.423844   .0689464    20.65   0.000     1.288688    1.558999
          8  |   1.517097   .0766303    19.80   0.000     1.366879    1.667316
          9  |   1.591788   .0843397    18.87   0.000     1.426457    1.757118
         10  |   1.666618   .0919687    18.12   0.000     1.486332    1.846904
         11  |   1.738809   .0996333    17.45   0.000     1.543498     1.93412
         12  |   1.791471   .1073555    16.69   0.000     1.581022     2.00192
         13  |   1.855932   .1151038    16.12   0.000     1.630294    2.081569
         14  |   1.904033   .1229474    15.49   0.000      1.66302    2.145047
         15  |   1.977086    .130958    15.10   0.000     1.720369    2.233802
         16  |   2.012698   .1390133    14.48   0.000     1.740191    2.285206
         17  |   2.055154   .1470086    13.98   0.000     1.766974    2.343335
         18  |   2.103803     .15463    13.61   0.000     1.800683    2.406924
         19  |   2.148042    .162337    13.23   0.000     1.829813    2.466271
         20  |   2.239846    .177816    12.60   0.000     1.891273    2.588418
         25  |   2.360316    .201651    11.70   0.000      1.96502    2.755611
         30  |   2.199263   .2598612     8.46   0.000     1.689858    2.708668
         40  |   2.079432    .289597     7.18   0.000     1.511736    2.647128
         50  |   1.906856   .2997529     6.36   0.000     1.319251    2.494461
             |
       _cons |   3.350911   .0497669    67.33   0.000     3.253353    3.448469
-------------+----------------------------------------------------------------
     sigma_u |  1.1960545
     sigma_e |  .57908389
         rho |  .81010187   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0999884399826522

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    181,711
Group variable: firm_person                     Number of groups  =     21,971

R-sq:                                           Obs per group:
     within  = 0.1000                                         min =          1
     between = 0.0239                                         avg =        8.3
     overall = 0.0243                                         max =         25

                                                F(53,7121)        =      30.04
corr(u_i, Xb)  = -0.2174                        Prob > F          =     0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0096038   .0397515     0.24   0.809    -.0683209    .0875286
      during |  -.0622549   .0151556    -4.11   0.000    -.0919645   -.0325453
       after |  -.2079218   .0277514    -7.49   0.000    -.2623228   -.1535207
during_expat |   .0544576   .0235441     2.31   0.021     .0083041    .1006111
 after_expat |   .1408285   .0381869     3.69   0.000     .0659707    .2156862
             |
    ind_year |
         27  |  -.1293622   .0228248    -5.67   0.000    -.1741056   -.0846188
         28  |  -.2232991   .0321561    -6.94   0.000    -.2863346   -.1602636
         29  |  -.3208012   .0409975    -7.82   0.000    -.4011686   -.2404339
         30  |  -.3654702   .0482922    -7.57   0.000    -.4601372   -.2708031
         31  |  -.4089538    .056992    -7.18   0.000    -.5206751   -.2972325
         32  |  -.4672938   .0647191    -7.22   0.000    -.5941625   -.3404251
         33  |  -.5288382   .0725575    -7.29   0.000    -.6710726   -.3866039
         34  |  -.5787954   .0806283    -7.18   0.000    -.7368508     -.42074
         35  |  -.6454512   .0884239    -7.30   0.000    -.8187884    -.472114
         36  |  -.7320812   .0959116    -7.63   0.000    -.9200963    -.544066
         37  |  -.7976602   .1037653    -7.69   0.000    -1.001071   -.5942494
         38  |  -.8833032   .1118476    -7.90   0.000    -1.102558   -.6640488
         39  |   -.955507   .1198551    -7.97   0.000    -1.190459   -.7205555
         40  |  -.9839137   .1281705    -7.68   0.000    -1.235166   -.7326615
         41  |  -1.005751   .1356967    -7.41   0.000    -1.271757   -.7397453
         42  |  -1.057182   .1434032    -7.37   0.000    -1.338295   -.7760696
         43  |  -1.212888   .1510876    -8.03   0.000    -1.509064    -.916711
         44  |   -1.26354   .1592572    -7.93   0.000    -1.575731   -.9513484
         45  |  -1.273231   .1663344    -7.65   0.000    -1.599296   -.9471666
         46  |  -1.301538   .1733849    -7.51   0.000    -1.641424   -.9616524
         47  |  -1.332542   .1797909    -7.41   0.000    -1.684986   -.9800987
         48  |  -1.354059   .1864483    -7.26   0.000    -1.719553   -.9885645
         49  |  -1.368978   .1931256    -7.09   0.000    -1.747562   -.9903948
         50  |  -1.393516   .1993788    -6.99   0.000    -1.784357   -1.002674
             |
     age_cat |
          1  |   .4332247   .0269565    16.07   0.000      .380382    .4860674
          2  |   .7413193   .0326473    22.71   0.000     .6773208    .8053178
          3  |   .9368726   .0391587    23.92   0.000     .8601099    1.013635
          4  |   1.095898    .046191    23.73   0.000      1.00535    1.186447
          5  |   1.221554   .0537686    22.72   0.000     1.116151    1.326956
          6  |   1.330597   .0612914    21.71   0.000     1.210448    1.450746
          7  |   1.423844   .0689464    20.65   0.000     1.288688    1.558999
          8  |   1.517097   .0766303    19.80   0.000     1.366879    1.667316
          9  |   1.591788   .0843397    18.87   0.000     1.426457    1.757118
         10  |   1.666618   .0919687    18.12   0.000     1.486332    1.846904
         11  |   1.738809   .0996333    17.45   0.000     1.543498     1.93412
         12  |   1.791471   .1073555    16.69   0.000     1.581022     2.00192
         13  |   1.855932   .1151038    16.12   0.000     1.630294    2.081569
         14  |   1.904033   .1229474    15.49   0.000      1.66302    2.145047
         15  |   1.977086    .130958    15.10   0.000     1.720369    2.233802
         16  |   2.012698   .1390133    14.48   0.000     1.740191    2.285206
         17  |   2.055154   .1470086    13.98   0.000     1.766974    2.343335
         18  |   2.103803     .15463    13.61   0.000     1.800683    2.406924
         19  |   2.148042    .162337    13.23   0.000     1.829813    2.466271
         20  |   2.239846    .177816    12.60   0.000     1.891273    2.588418
         25  |   2.360316    .201651    11.70   0.000      1.96502    2.755611
         30  |   2.199263   .2598612     8.46   0.000     1.689858    2.708668
         40  |   2.079432    .289597     7.18   0.000     1.511736    2.647128
         50  |   1.906856   .2997529     6.36   0.000     1.319251    2.494461
             |
       _cons |   3.350911   .0497669    67.33   0.000     3.253353    3.448469
-------------+----------------------------------------------------------------
     sigma_u |  1.1960545
     sigma_e |  .57908389
         rho |  .81010187   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1,  7121) =   16.87
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  7121) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1,  7121) =   59.53
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  7121) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1,  7121) =    5.35
            Prob > F =    0.0208

 ( 1)  during_expat = 0

       F(  1,  7121) =    5.35
            Prob > F =    0.0208
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1,  7121) =    9.73
            Prob > F =    0.0018

 ( 1)  after_expat = 0

       F(  1,  7121) =   13.60
            Prob > F =    0.0002
(1 real change made)
(file output/figure/manufacturing_lnL_slope.png written in PNG format)
(sum of wgt is 101,303.286886573)

Linear regression                               Number of obs     =    238,775
                                                F(75, 16123)      =      26.70
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0483
                                                Root MSE          =     1.0026

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .4217613   .0371065    11.37   0.000     .3490284    .4944942
       expat |  -.0003071   .0559756    -0.01   0.996    -.1100255    .1094114
             |
    ind_year |
          2  |  -.0747205   .0268906    -2.78   0.005    -.1274291   -.0220119
          3  |  -.1786953   .0317845    -5.62   0.000    -.2409964   -.1163942
          4  |  -.2494844    .033511    -7.44   0.000    -.3151697    -.183799
          5  |  -.2809547    .034589    -8.12   0.000     -.348753   -.2131565
          6  |  -.3477476   .0352534    -9.86   0.000    -.4168482    -.278647
          7  |  -.3572343   .0360391    -9.91   0.000    -.4278749   -.2865938
          8  |  -.3273146    .036208    -9.04   0.000    -.3982863   -.2563429
          9  |  -.3027412   .0361134    -8.38   0.000    -.3735274    -.231955
         10  |  -.3139084   .0362585    -8.66   0.000    -.3849791   -.2428376
         11  |  -.3109768   .0364399    -8.53   0.000    -.3824032   -.2395505
         12  |  -.2926009   .0363025    -8.06   0.000    -.3637578   -.2214441
         13  |  -.2501352   .0361063    -6.93   0.000    -.3209076   -.1793629
         14  |  -.2353238   .0360528    -6.53   0.000    -.3059913   -.1646563
         15  |  -.2083142   .0359342    -5.80   0.000    -.2787492   -.1378792
         16  |  -.2001722   .0359725    -5.56   0.000    -.2706822   -.1296621
         17  |  -.1808164   .0360645    -5.01   0.000    -.2515067   -.1101261
         18  |   -.209101   .0361839    -5.78   0.000    -.2800254   -.1381765
         19  |  -.2084269   .0362093    -5.76   0.000    -.2794012   -.1374526
         20  |  -.1916493    .036262    -5.29   0.000    -.2627269   -.1205718
         21  |  -.1866793   .0365045    -5.11   0.000    -.2582322   -.1151265
         22  |  -.1816904    .036624    -4.96   0.000    -.2534774   -.1099034
         23  |  -.1638267    .036531    -4.48   0.000    -.2354316   -.0922218
         24  |  -.1079642   .0370203    -2.92   0.004    -.1805281   -.0354003
         25  |  -.0347452   .0368268    -0.94   0.345    -.1069298    .0374394
         26  |   .3319367   .0549018     6.05   0.000     .2243231    .4395503
         27  |   .1879561   .0479771     3.92   0.000     .0939157    .2819966
         28  |   .1488945   .0456084     3.26   0.001     .0594971     .238292
         29  |   .0756294   .0446264     1.69   0.090    -.0118432     .163102
         30  |   .0353376   .0431552     0.82   0.413    -.0492514    .1199267
         31  |   .0280238   .0419777     0.67   0.504    -.0542571    .1103047
         32  |   .0042989   .0405958     0.11   0.916    -.0752734    .0838712
         33  |  -.0183085   .0396855    -0.46   0.645    -.0960965    .0594795
         34  |  -.0429141   .0396043    -1.08   0.279     -.120543    .0347148
         35  |  -.0433117   .0390205    -1.11   0.267    -.1197963    .0331729
         36  |  -.0738126   .0388641    -1.90   0.058    -.1499906    .0023654
         37  |  -.0650391   .0388105    -1.68   0.094    -.1411121    .0110339
         38  |  -.0496916   .0388704    -1.28   0.201    -.1258819    .0264986
         39  |  -.0539407   .0387575    -1.39   0.164    -.1299096    .0220283
         40  |  -.0461171   .0391273    -1.18   0.239    -.1228109    .0305767
         41  |  -.0218795   .0386537    -0.57   0.571    -.0976451    .0538861
         42  |   -.024058   .0390223    -0.62   0.538     -.100546    .0524301
         43  |  -.1111576   .0398151    -2.79   0.005    -.1891996   -.0331155
         44  |  -.0828826   .0397891    -2.08   0.037    -.1608737   -.0048915
         45  |  -.0566169   .0399531    -1.42   0.156    -.1349294    .0216957
         46  |  -.0204387   .0397729    -0.51   0.607    -.0983979    .0575205
         47  |   .0096717   .0407195     0.24   0.812     -.070143    .0894864
         48  |   .0405024   .0407131     0.99   0.320    -.0392997    .1203045
         49  |   .0838664   .0417887     2.01   0.045      .001956    .1657768
         50  |   .1224811   .0421099     2.91   0.004     .0399409    .2050212
             |
     age_cat |
          1  |   .2330422   .0201981    11.54   0.000     .1934517    .2726326
          2  |   .3691306   .0212821    17.34   0.000     .3274152     .410846
          3  |   .4499289   .0219584    20.49   0.000     .4068879    .4929698
          4  |   .5272442   .0225184    23.41   0.000     .4831058    .5713827
          5  |     .59047   .0231478    25.51   0.000     .5450978    .6358422
          6  |   .6347843    .023503    27.01   0.000     .5887158    .6808528
          7  |   .6728744   .0238511    28.21   0.000     .6261236    .7196252
          8  |   .6862555   .0242434    28.31   0.000     .6387357    .7337753
          9  |   .6870397    .024608    27.92   0.000     .6388053    .7352742
         10  |   .6874946   .0248016    27.72   0.000     .6388807    .7361085
         11  |   .6940696   .0251791    27.57   0.000     .6447157    .7434235
         12  |   .6970584   .0253957    27.45   0.000     .6472801    .7468367
         13  |     .68788   .0256729    26.79   0.000     .6375583    .7382016
         14  |   .6609236    .026323    25.11   0.000     .6093275    .7125196
         15  |   .6491674   .0268117    24.21   0.000     .5966135    .7017212
         16  |   .6167819   .0275246    22.41   0.000     .5628307    .6707331
         17  |   .5913522    .028454    20.78   0.000     .5355791    .6471252
         18  |     .56874   .0292664    19.43   0.000     .5113745    .6261054
         19  |   .5459303   .0305393    17.88   0.000     .4860699    .6057907
         20  |   .4731886   .0323313    14.64   0.000     .4098156    .5365616
         25  |   .3576347   .0472282     7.57   0.000     .2650623    .4502071
         30  |   .4709818    .077806     6.05   0.000     .3184734    .6234902
         40  |    .669761   .0707853     9.46   0.000      .531014     .808508
         50  |   .2808434   .0950316     2.96   0.003     .0945708    .4671159
             |
       _cons |   3.143662   .0362023    86.84   0.000     3.072701    3.214622
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    238,775
                                                F(75, 16123)      =      26.70
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0483
                                                Root MSE          =     1.0026

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .4217613   .0371065    11.37   0.000     .3490284    .4944942
       expat |  -.0003071   .0559756    -0.01   0.996    -.1100255    .1094114
             |
    ind_year |
          2  |  -.0747205   .0268906    -2.78   0.005    -.1274291   -.0220119
          3  |  -.1786953   .0317845    -5.62   0.000    -.2409964   -.1163942
          4  |  -.2494844    .033511    -7.44   0.000    -.3151697    -.183799
          5  |  -.2809547    .034589    -8.12   0.000     -.348753   -.2131565
          6  |  -.3477476   .0352534    -9.86   0.000    -.4168482    -.278647
          7  |  -.3572343   .0360391    -9.91   0.000    -.4278749   -.2865938
          8  |  -.3273146    .036208    -9.04   0.000    -.3982863   -.2563429
          9  |  -.3027412   .0361134    -8.38   0.000    -.3735274    -.231955
         10  |  -.3139084   .0362585    -8.66   0.000    -.3849791   -.2428376
         11  |  -.3109768   .0364399    -8.53   0.000    -.3824032   -.2395505
         12  |  -.2926009   .0363025    -8.06   0.000    -.3637578   -.2214441
         13  |  -.2501352   .0361063    -6.93   0.000    -.3209076   -.1793629
         14  |  -.2353238   .0360528    -6.53   0.000    -.3059913   -.1646563
         15  |  -.2083142   .0359342    -5.80   0.000    -.2787492   -.1378792
         16  |  -.2001722   .0359725    -5.56   0.000    -.2706822   -.1296621
         17  |  -.1808164   .0360645    -5.01   0.000    -.2515067   -.1101261
         18  |   -.209101   .0361839    -5.78   0.000    -.2800254   -.1381765
         19  |  -.2084269   .0362093    -5.76   0.000    -.2794012   -.1374526
         20  |  -.1916493    .036262    -5.29   0.000    -.2627269   -.1205718
         21  |  -.1866793   .0365045    -5.11   0.000    -.2582322   -.1151265
         22  |  -.1816904    .036624    -4.96   0.000    -.2534774   -.1099034
         23  |  -.1638267    .036531    -4.48   0.000    -.2354316   -.0922218
         24  |  -.1079642   .0370203    -2.92   0.004    -.1805281   -.0354003
         25  |  -.0347452   .0368268    -0.94   0.345    -.1069298    .0374394
         26  |   .3319367   .0549018     6.05   0.000     .2243231    .4395503
         27  |   .1879561   .0479771     3.92   0.000     .0939157    .2819966
         28  |   .1488945   .0456084     3.26   0.001     .0594971     .238292
         29  |   .0756294   .0446264     1.69   0.090    -.0118432     .163102
         30  |   .0353376   .0431552     0.82   0.413    -.0492514    .1199267
         31  |   .0280238   .0419777     0.67   0.504    -.0542571    .1103047
         32  |   .0042989   .0405958     0.11   0.916    -.0752734    .0838712
         33  |  -.0183085   .0396855    -0.46   0.645    -.0960965    .0594795
         34  |  -.0429141   .0396043    -1.08   0.279     -.120543    .0347148
         35  |  -.0433117   .0390205    -1.11   0.267    -.1197963    .0331729
         36  |  -.0738126   .0388641    -1.90   0.058    -.1499906    .0023654
         37  |  -.0650391   .0388105    -1.68   0.094    -.1411121    .0110339
         38  |  -.0496916   .0388704    -1.28   0.201    -.1258819    .0264986
         39  |  -.0539407   .0387575    -1.39   0.164    -.1299096    .0220283
         40  |  -.0461171   .0391273    -1.18   0.239    -.1228109    .0305767
         41  |  -.0218795   .0386537    -0.57   0.571    -.0976451    .0538861
         42  |   -.024058   .0390223    -0.62   0.538     -.100546    .0524301
         43  |  -.1111576   .0398151    -2.79   0.005    -.1891996   -.0331155
         44  |  -.0828826   .0397891    -2.08   0.037    -.1608737   -.0048915
         45  |  -.0566169   .0399531    -1.42   0.156    -.1349294    .0216957
         46  |  -.0204387   .0397729    -0.51   0.607    -.0983979    .0575205
         47  |   .0096717   .0407195     0.24   0.812     -.070143    .0894864
         48  |   .0405024   .0407131     0.99   0.320    -.0392997    .1203045
         49  |   .0838664   .0417887     2.01   0.045      .001956    .1657768
         50  |   .1224811   .0421099     2.91   0.004     .0399409    .2050212
             |
     age_cat |
          1  |   .2330422   .0201981    11.54   0.000     .1934517    .2726326
          2  |   .3691306   .0212821    17.34   0.000     .3274152     .410846
          3  |   .4499289   .0219584    20.49   0.000     .4068879    .4929698
          4  |   .5272442   .0225184    23.41   0.000     .4831058    .5713827
          5  |     .59047   .0231478    25.51   0.000     .5450978    .6358422
          6  |   .6347843    .023503    27.01   0.000     .5887158    .6808528
          7  |   .6728744   .0238511    28.21   0.000     .6261236    .7196252
          8  |   .6862555   .0242434    28.31   0.000     .6387357    .7337753
          9  |   .6870397    .024608    27.92   0.000     .6388053    .7352742
         10  |   .6874946   .0248016    27.72   0.000     .6388807    .7361085
         11  |   .6940696   .0251791    27.57   0.000     .6447157    .7434235
         12  |   .6970584   .0253957    27.45   0.000     .6472801    .7468367
         13  |     .68788   .0256729    26.79   0.000     .6375583    .7382016
         14  |   .6609236    .026323    25.11   0.000     .6093275    .7125196
         15  |   .6491674   .0268117    24.21   0.000     .5966135    .7017212
         16  |   .6167819   .0275246    22.41   0.000     .5628307    .6707331
         17  |   .5913522    .028454    20.78   0.000     .5355791    .6471252
         18  |     .56874   .0292664    19.43   0.000     .5113745    .6261054
         19  |   .5459303   .0305393    17.88   0.000     .4860699    .6057907
         20  |   .4731886   .0323313    14.64   0.000     .4098156    .5365616
         25  |   .3576347   .0472282     7.57   0.000     .2650623    .4502071
         30  |   .4709818    .077806     6.05   0.000     .3184734    .6234902
         40  |    .669761   .0707853     9.46   0.000      .531014     .808508
         50  |   .2808434   .0950316     2.96   0.003     .0945708    .4671159
             |
       _cons |   3.143662   .0362023    86.84   0.000     3.072701    3.214622
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    238,775
Group variable: id                              Number of groups  =     16,124

R-sq:                                           Obs per group:
     within  = 0.1149                                         min =          1
     between = 0.0061                                         avg =       14.8
     overall = 0.0246                                         max =        161

                                                F(75,16123)       =      46.17
corr(u_i, Xb)  = -0.4283                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0379014   .0408265     0.93   0.353     -.042123    .1179258
       expat |   .0465588   .0313558     1.48   0.138     -.014902    .1080197
             |
    ind_year |
          2  |  -.0963561   .0238872    -4.03   0.000    -.1431776   -.0495346
          3  |  -.2379584   .0311909    -7.63   0.000    -.2990961   -.1768207
          4  |  -.3782967   .0357044   -10.60   0.000    -.4482813   -.3083122
          5  |  -.4697785   .0405355   -11.59   0.000    -.5492326   -.3903243
          6  |  -.5713275   .0447095   -12.78   0.000    -.6589631   -.4836918
          7  |  -.6295666   .0490095   -12.85   0.000    -.7256307   -.5335026
          8  |  -.6787995   .0528075   -12.85   0.000    -.7823082   -.5752909
          9  |  -.7301048   .0568114   -12.85   0.000    -.8414614   -.6187481
         10  |  -.8042938   .0609101   -13.20   0.000    -.9236842   -.6849033
         11  |  -.8751995   .0646166   -13.54   0.000    -1.001855   -.7485437
         12  |  -.9217557   .0686039   -13.44   0.000    -1.056227   -.7872844
         13  |   -.965482   .0726587   -13.29   0.000    -1.107901   -.8230629
         14  |  -1.021068   .0767518   -13.30   0.000     -1.17151   -.8706256
         15  |  -1.061348   .0807106   -13.15   0.000     -1.21955   -.9031462
         16  |   -1.12602   .0847558   -13.29   0.000    -1.292151    -.959889
         17  |   -1.17985   .0890345   -13.25   0.000    -1.354368   -1.005333
         18  |  -1.283559   .0931144   -13.78   0.000    -1.466074   -1.101045
         19  |  -1.357967   .0969249   -14.01   0.000    -1.547951   -1.167983
         20  |  -1.419654   .1006661   -14.10   0.000    -1.616971   -1.222337
         21  |  -1.491426   .1043189   -14.30   0.000    -1.695903    -1.28695
         22  |  -1.546819   .1076652   -14.37   0.000    -1.757854   -1.335783
         23  |  -1.590831   .1111675   -14.31   0.000    -1.808731    -1.37293
         24  |  -1.646988   .1151643   -14.30   0.000    -1.872723   -1.421253
         25  |  -1.687014   .1193059   -14.14   0.000    -1.920867   -1.453161
         26  |   .4721226   .0726117     6.50   0.000     .3297956    .6144495
         27  |   .3434856   .0686538     5.00   0.000     .2089167    .4780546
         28  |   .2274975   .0663491     3.43   0.001     .0974459    .3575491
         29  |   .1069164   .0659343     1.62   0.105    -.0223221    .2361549
         30  |   .0007548   .0652395     0.01   0.991    -.1271219    .1286315
         31  |   -.074522   .0660867    -1.13   0.259    -.2040593    .0550153
         32  |  -.1546753   .0664442    -2.33   0.020    -.2849133   -.0244373
         33  |  -.2441141   .0681785    -3.58   0.000    -.3777515   -.1104768
         34  |  -.3221984    .070347    -4.58   0.000    -.4600863   -.1843105
         35  |  -.3894231   .0727891    -5.35   0.000    -.5320979   -.2467484
         36  |  -.4845762   .0753662    -6.43   0.000    -.6323024     -.33685
         37  |  -.5551119   .0777875    -7.14   0.000    -.7075842   -.4026397
         38  |  -.6370681   .0809449    -7.87   0.000    -.7957292    -.478407
         39  |  -.7106422    .084535    -8.41   0.000    -.8763402   -.5449442
         40  |  -.7556671   .0885761    -8.53   0.000    -.9292861   -.5820482
         41  |  -.7973208   .0919445    -8.67   0.000    -.9775421   -.6170994
         42  |  -.8625343   .0955119    -9.03   0.000    -1.049748   -.6753203
         43  |  -1.015078   .0995142   -10.20   0.000    -1.210137   -.8200189
         44  |  -1.065703   .1037743   -10.27   0.000    -1.269112   -.8622937
         45  |  -1.090682   .1077331   -10.12   0.000    -1.301851    -.879513
         46  |  -1.127047   .1112572   -10.13   0.000    -1.345123   -.9089706
         47  |  -1.164461    .114522   -10.17   0.000    -1.388937   -.9399849
         48  |  -1.193406   .1180917   -10.11   0.000    -1.424879   -.9619328
         49  |   -1.24051   .1217247   -10.19   0.000    -1.479104   -1.001916
         50  |  -1.291331   .1249636   -10.33   0.000    -1.536274   -1.046388
             |
     age_cat |
          1  |   .4527484   .0184091    24.59   0.000     .4166645    .4888323
          2  |   .7544642   .0219068    34.44   0.000     .7115244    .7974041
          3  |   .9777229   .0256051    38.18   0.000      .927534    1.027912
          4  |   1.166399   .0293712    39.71   0.000     1.108828    1.223969
          5  |   1.325263    .033532    39.52   0.000     1.259537     1.39099
          6  |   1.459975   .0377626    38.66   0.000     1.385956    1.533994
          7  |   1.575642   .0421443    37.39   0.000     1.493035     1.65825
          8  |   1.677597   .0465877    36.01   0.000      1.58628    1.768914
          9  |   1.761063    .050992    34.54   0.000     1.661113    1.861013
         10  |   1.835243   .0553885    33.13   0.000     1.726675     1.94381
         11  |   1.913389   .0598445    31.97   0.000     1.796087    2.030691
         12  |   1.991918   .0642872    30.98   0.000     1.865907    2.117928
         13  |   2.058113   .0687238    29.95   0.000     1.923407    2.192819
         14  |   2.110671   .0734135    28.75   0.000     1.966772     2.25457
         15  |   2.164772   .0780043    27.75   0.000     2.011875    2.317669
         16  |   2.204069   .0826406    26.67   0.000     2.042085    2.366054
         17  |    2.24725   .0873927    25.71   0.000     2.075951    2.418549
         18  |    2.30404   .0920107    25.04   0.000     2.123689    2.484391
         19  |   2.347929   .0968766    24.24   0.000      2.15804    2.537818
         20  |   2.437084   .1057916    23.04   0.000      2.22972    2.644447
         25  |   2.577372   .1207244    21.35   0.000     2.340739    2.814005
         30  |   2.313141   .1649014    14.03   0.000     1.989916    2.636366
         40  |   2.170677   .1866067    11.63   0.000     1.804907    2.536447
         50  |    2.04166   .1960752    10.41   0.000     1.657331    2.425989
             |
       _cons |   2.913082   .0444299    65.57   0.000     2.825994    3.000169
-------------+----------------------------------------------------------------
     sigma_u |   1.131933
     sigma_e |  .67119392
         rho |  .73986133   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1149240172151993

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    238,775
Group variable: id                              Number of groups  =     16,124

R-sq:                                           Obs per group:
     within  = 0.1149                                         min =          1
     between = 0.0061                                         avg =       14.8
     overall = 0.0246                                         max =        161

                                                F(75,16123)       =      46.17
corr(u_i, Xb)  = -0.4283                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0379014   .0408265     0.93   0.353     -.042123    .1179258
       expat |   .0465588   .0313558     1.48   0.138     -.014902    .1080197
             |
    ind_year |
          2  |  -.0963561   .0238872    -4.03   0.000    -.1431776   -.0495346
          3  |  -.2379584   .0311909    -7.63   0.000    -.2990961   -.1768207
          4  |  -.3782967   .0357044   -10.60   0.000    -.4482813   -.3083122
          5  |  -.4697785   .0405355   -11.59   0.000    -.5492326   -.3903243
          6  |  -.5713275   .0447095   -12.78   0.000    -.6589631   -.4836918
          7  |  -.6295666   .0490095   -12.85   0.000    -.7256307   -.5335026
          8  |  -.6787995   .0528075   -12.85   0.000    -.7823082   -.5752909
          9  |  -.7301048   .0568114   -12.85   0.000    -.8414614   -.6187481
         10  |  -.8042938   .0609101   -13.20   0.000    -.9236842   -.6849033
         11  |  -.8751995   .0646166   -13.54   0.000    -1.001855   -.7485437
         12  |  -.9217557   .0686039   -13.44   0.000    -1.056227   -.7872844
         13  |   -.965482   .0726587   -13.29   0.000    -1.107901   -.8230629
         14  |  -1.021068   .0767518   -13.30   0.000     -1.17151   -.8706256
         15  |  -1.061348   .0807106   -13.15   0.000     -1.21955   -.9031462
         16  |   -1.12602   .0847558   -13.29   0.000    -1.292151    -.959889
         17  |   -1.17985   .0890345   -13.25   0.000    -1.354368   -1.005333
         18  |  -1.283559   .0931144   -13.78   0.000    -1.466074   -1.101045
         19  |  -1.357967   .0969249   -14.01   0.000    -1.547951   -1.167983
         20  |  -1.419654   .1006661   -14.10   0.000    -1.616971   -1.222337
         21  |  -1.491426   .1043189   -14.30   0.000    -1.695903    -1.28695
         22  |  -1.546819   .1076652   -14.37   0.000    -1.757854   -1.335783
         23  |  -1.590831   .1111675   -14.31   0.000    -1.808731    -1.37293
         24  |  -1.646988   .1151643   -14.30   0.000    -1.872723   -1.421253
         25  |  -1.687014   .1193059   -14.14   0.000    -1.920867   -1.453161
         26  |   .4721226   .0726117     6.50   0.000     .3297956    .6144495
         27  |   .3434856   .0686538     5.00   0.000     .2089167    .4780546
         28  |   .2274975   .0663491     3.43   0.001     .0974459    .3575491
         29  |   .1069164   .0659343     1.62   0.105    -.0223221    .2361549
         30  |   .0007548   .0652395     0.01   0.991    -.1271219    .1286315
         31  |   -.074522   .0660867    -1.13   0.259    -.2040593    .0550153
         32  |  -.1546753   .0664442    -2.33   0.020    -.2849133   -.0244373
         33  |  -.2441141   .0681785    -3.58   0.000    -.3777515   -.1104768
         34  |  -.3221984    .070347    -4.58   0.000    -.4600863   -.1843105
         35  |  -.3894231   .0727891    -5.35   0.000    -.5320979   -.2467484
         36  |  -.4845762   .0753662    -6.43   0.000    -.6323024     -.33685
         37  |  -.5551119   .0777875    -7.14   0.000    -.7075842   -.4026397
         38  |  -.6370681   .0809449    -7.87   0.000    -.7957292    -.478407
         39  |  -.7106422    .084535    -8.41   0.000    -.8763402   -.5449442
         40  |  -.7556671   .0885761    -8.53   0.000    -.9292861   -.5820482
         41  |  -.7973208   .0919445    -8.67   0.000    -.9775421   -.6170994
         42  |  -.8625343   .0955119    -9.03   0.000    -1.049748   -.6753203
         43  |  -1.015078   .0995142   -10.20   0.000    -1.210137   -.8200189
         44  |  -1.065703   .1037743   -10.27   0.000    -1.269112   -.8622937
         45  |  -1.090682   .1077331   -10.12   0.000    -1.301851    -.879513
         46  |  -1.127047   .1112572   -10.13   0.000    -1.345123   -.9089706
         47  |  -1.164461    .114522   -10.17   0.000    -1.388937   -.9399849
         48  |  -1.193406   .1180917   -10.11   0.000    -1.424879   -.9619328
         49  |   -1.24051   .1217247   -10.19   0.000    -1.479104   -1.001916
         50  |  -1.291331   .1249636   -10.33   0.000    -1.536274   -1.046388
             |
     age_cat |
          1  |   .4527484   .0184091    24.59   0.000     .4166645    .4888323
          2  |   .7544642   .0219068    34.44   0.000     .7115244    .7974041
          3  |   .9777229   .0256051    38.18   0.000      .927534    1.027912
          4  |   1.166399   .0293712    39.71   0.000     1.108828    1.223969
          5  |   1.325263    .033532    39.52   0.000     1.259537     1.39099
          6  |   1.459975   .0377626    38.66   0.000     1.385956    1.533994
          7  |   1.575642   .0421443    37.39   0.000     1.493035     1.65825
          8  |   1.677597   .0465877    36.01   0.000      1.58628    1.768914
          9  |   1.761063    .050992    34.54   0.000     1.661113    1.861013
         10  |   1.835243   .0553885    33.13   0.000     1.726675     1.94381
         11  |   1.913389   .0598445    31.97   0.000     1.796087    2.030691
         12  |   1.991918   .0642872    30.98   0.000     1.865907    2.117928
         13  |   2.058113   .0687238    29.95   0.000     1.923407    2.192819
         14  |   2.110671   .0734135    28.75   0.000     1.966772     2.25457
         15  |   2.164772   .0780043    27.75   0.000     2.011875    2.317669
         16  |   2.204069   .0826406    26.67   0.000     2.042085    2.366054
         17  |    2.24725   .0873927    25.71   0.000     2.075951    2.418549
         18  |    2.30404   .0920107    25.04   0.000     2.123689    2.484391
         19  |   2.347929   .0968766    24.24   0.000      2.15804    2.537818
         20  |   2.437084   .1057916    23.04   0.000      2.22972    2.644447
         25  |   2.577372   .1207244    21.35   0.000     2.340739    2.814005
         30  |   2.313141   .1649014    14.03   0.000     1.989916    2.636366
         40  |   2.170677   .1866067    11.63   0.000     1.804907    2.536447
         50  |    2.04166   .1960752    10.41   0.000     1.657331    2.425989
             |
       _cons |   2.913082   .0444299    65.57   0.000     2.825994    3.000169
-------------+----------------------------------------------------------------
     sigma_u |   1.131933
     sigma_e |  .67119392
         rho |  .73986133   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.1120                         Obs per group: min =         1
       between = 0.0165                                        avg =       8.7
       overall = 0.0316                                        max =        25

                                                F(78,16123)        =     47.85
corr(u_i, Xb)  = -0.3435                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .049986     .03786     1.32   0.187    -.0242238    .1241958
      during |  -.0255498   .0109664    -2.33   0.020    -.0470452   -.0040544
       after |  -.1826759   .0202502    -9.02   0.000    -.2223686   -.1429833
during_expat |  -.0350039   .0421549    -0.83   0.406    -.1176321    .0476243
 after_expat |   .0247862   .0559481     0.44   0.658    -.0848783    .1344507
             |
    ind_year |
          2  |  -.0910394   .0226608    -4.02   0.000    -.1354571   -.0466217
          3  |  -.2327329   .0302157    -7.70   0.000    -.2919591   -.1735067
          4  |  -.3600248   .0349927   -10.29   0.000    -.4286144   -.2914353
          5  |  -.4455839   .0403055   -11.06   0.000    -.5245871   -.3665807
          6  |  -.5359341   .0450229   -11.90   0.000    -.6241839   -.4476843
          7  |  -.5906017   .0496232   -11.90   0.000    -.6878688   -.4933347
          8  |  -.6223625   .0536919   -11.59   0.000    -.7276047   -.5171204
          9  |  -.6739054   .0579804   -11.62   0.000    -.7875535   -.5602573
         10  |  -.7350883   .0622169   -11.81   0.000    -.8570403   -.6131364
         11  |  -.7989998   .0661591   -12.08   0.000     -.928679   -.6693206
         12  |  -.8406337   .0704854   -11.93   0.000    -.9787929   -.7024745
         13  |  -.8820001   .0748138   -11.79   0.000    -1.028643   -.7353567
         14  |   -.937445   .0791422   -11.85   0.000    -1.092572   -.7823175
         15  |  -.9755988   .0833208   -11.71   0.000    -1.138917   -.8122808
         16  |  -1.038694   .0873727   -11.89   0.000    -1.209954   -.8674334
         17  |  -1.083404   .0916239   -11.82   0.000    -1.262997   -.9038111
         18  |  -1.177277   .0957306   -12.30   0.000    -1.364919    -.989634
         19  |  -1.244332    .099666   -12.49   0.000    -1.439689   -1.048976
         20  |  -1.300313   .1033508   -12.58   0.000    -1.502892   -1.097734
         21  |  -1.360927   .1070082   -12.72   0.000    -1.570675   -1.151179
         22  |  -1.418869   .1103475   -12.86   0.000    -1.635162   -1.202575
         23  |  -1.453847   .1138173   -12.77   0.000    -1.676942   -1.230753
         24  |  -1.504765   .1177487   -12.78   0.000    -1.735566   -1.273965
         25  |  -1.534782   .1218459   -12.60   0.000    -1.773613    -1.29595
         26  |   .5416405   .0703951     7.69   0.000     .4036582    .6796228
         27  |   .4066396   .0666083     6.10   0.000       .27608    .5371992
         28  |   .2904996   .0645277     4.50   0.000     .1640182     .416981
         29  |   .1650612   .0638815     2.58   0.010     .0398464     .290276
         30  |    .063778   .0634657     1.00   0.315    -.0606219    .1881779
         31  |  -.0072879   .0648475    -0.11   0.911    -.1343963    .1198205
         32  |  -.0821992   .0655435    -1.25   0.210    -.2106718    .0462734
         33  |  -.1665355   .0676205    -2.46   0.014    -.2990792   -.0339919
         34  |   -.233691   .0699941    -3.34   0.001    -.3708873   -.0964947
         35  |  -.2986911    .072836    -4.10   0.000    -.4414577   -.1559245
         36  |  -.3800478   .0755837    -5.03   0.000    -.5282002   -.2318954
         37  |  -.4495314   .0785184    -5.73   0.000    -.6034362   -.2956265
         38  |  -.5306559   .0819206    -6.48   0.000    -.6912294   -.3700825
         39  |  -.6033585   .0857281    -7.04   0.000    -.7713952   -.4353219
         40  |  -.6321721   .0898084    -7.04   0.000    -.8082065   -.4561377
         41  |  -.6742528   .0932932    -7.23   0.000    -.8571178   -.4913878
         42  |  -.7363636   .0970105    -7.59   0.000    -.9265149   -.5462123
         43  |  -.8743653   .1009909    -8.66   0.000    -1.072319   -.6764119
         44  |  -.9199586   .1053807    -8.73   0.000    -1.126516   -.7134008
         45  |    -.94087   .1092267    -8.61   0.000    -1.154966   -.7267735
         46  |  -.9718509   .1128618    -8.61   0.000    -1.193073   -.7506293
         47  |  -1.006806   .1161484    -8.67   0.000     -1.23447   -.7791422
         48  |  -1.034005   .1196858    -8.64   0.000    -1.268603   -.7994079
         49  |  -1.081587    .123334    -8.77   0.000    -1.323335   -.8398384
         50  |  -1.127502   .1266409    -8.90   0.000    -1.375732   -.8792719
             |
     age_cat |
          1  |    .442282   .0178182    24.82   0.000     .4073565    .4772076
          2  |   .7488336   .0213887    35.01   0.000     .7069093    .7907579
          3  |   .9753537   .0251841    38.73   0.000     .9259901    1.024717
          4  |   1.164715   .0291804    39.91   0.000     1.107519    1.221912
          5  |   1.325959   .0334686    39.62   0.000     1.260357    1.391561
          6  |   1.453576   .0378011    38.45   0.000     1.379481     1.52767
          7  |   1.561779   .0422285    36.98   0.000     1.479007    1.644552
          8  |   1.660009   .0467857    35.48   0.000     1.568303    1.751714
          9  |   1.736805   .0512555    33.89   0.000     1.636338    1.837271
         10  |   1.805663   .0557286    32.40   0.000     1.696429    1.914897
         11  |   1.880176   .0602071    31.23   0.000     1.762163    1.998188
         12  |   1.949131   .0646728    30.14   0.000     1.822365    2.075897
         13  |   2.014563   .0691132    29.15   0.000     1.879094    2.150033
         14  |   2.061038   .0737299    27.95   0.000     1.916519    2.205557
         15  |    2.10881   .0783253    26.92   0.000     1.955284    2.262337
         16  |   2.144977   .0829122    25.87   0.000      1.98246    2.307495
         17  |   2.181228   .0875955    24.90   0.000     2.009531    2.352925
         18  |   2.235265   .0919843    24.30   0.000     2.054966    2.415565
         19  |   2.276309    .096813    23.51   0.000     2.086544    2.466073
         20  |   2.354132   .1053275    22.35   0.000     2.147679    2.560586
         25  |   2.468932   .1191582    20.72   0.000     2.235369    2.702496
         30  |   2.259927   .1554656    14.54   0.000     1.955198    2.564657
         40  |   2.180016   .1736039    12.56   0.000     1.839732    2.520299
         50  |   2.139564   .1733568    12.34   0.000     1.799765    2.479362
             |
       _cons |    2.88352   .0450307    64.03   0.000     2.795254    2.971785
-------------+----------------------------------------------------------------
     sigma_u |  1.1757041
     sigma_e |  .67294012
         rho |  .75323341   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1119747185687837

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.1120                                         min =          1
     between = 0.0165                                         avg =        8.7
     overall = 0.0316                                         max =         25

                                                F(78,16123)       =      47.85
corr(u_i, Xb)  = -0.3435                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .049986     .03786     1.32   0.187    -.0242238    .1241958
      during |  -.0255498   .0109664    -2.33   0.020    -.0470452   -.0040544
       after |  -.1826759   .0202502    -9.02   0.000    -.2223686   -.1429833
during_expat |  -.0350039   .0421549    -0.83   0.406    -.1176321    .0476243
 after_expat |   .0247862   .0559481     0.44   0.658    -.0848783    .1344507
             |
    ind_year |
          2  |  -.0910394   .0226608    -4.02   0.000    -.1354571   -.0466217
          3  |  -.2327329   .0302157    -7.70   0.000    -.2919591   -.1735067
          4  |  -.3600248   .0349927   -10.29   0.000    -.4286144   -.2914353
          5  |  -.4455839   .0403055   -11.06   0.000    -.5245871   -.3665807
          6  |  -.5359341   .0450229   -11.90   0.000    -.6241839   -.4476843
          7  |  -.5906017   .0496232   -11.90   0.000    -.6878688   -.4933347
          8  |  -.6223625   .0536919   -11.59   0.000    -.7276047   -.5171204
          9  |  -.6739054   .0579804   -11.62   0.000    -.7875535   -.5602573
         10  |  -.7350883   .0622169   -11.81   0.000    -.8570403   -.6131364
         11  |  -.7989998   .0661591   -12.08   0.000     -.928679   -.6693206
         12  |  -.8406337   .0704854   -11.93   0.000    -.9787929   -.7024745
         13  |  -.8820001   .0748138   -11.79   0.000    -1.028643   -.7353567
         14  |   -.937445   .0791422   -11.85   0.000    -1.092572   -.7823175
         15  |  -.9755988   .0833208   -11.71   0.000    -1.138917   -.8122808
         16  |  -1.038694   .0873727   -11.89   0.000    -1.209954   -.8674334
         17  |  -1.083404   .0916239   -11.82   0.000    -1.262997   -.9038111
         18  |  -1.177277   .0957306   -12.30   0.000    -1.364919    -.989634
         19  |  -1.244332    .099666   -12.49   0.000    -1.439689   -1.048976
         20  |  -1.300313   .1033508   -12.58   0.000    -1.502892   -1.097734
         21  |  -1.360927   .1070082   -12.72   0.000    -1.570675   -1.151179
         22  |  -1.418869   .1103475   -12.86   0.000    -1.635162   -1.202575
         23  |  -1.453847   .1138173   -12.77   0.000    -1.676942   -1.230753
         24  |  -1.504765   .1177487   -12.78   0.000    -1.735566   -1.273965
         25  |  -1.534782   .1218459   -12.60   0.000    -1.773613    -1.29595
         26  |   .5416405   .0703951     7.69   0.000     .4036582    .6796228
         27  |   .4066396   .0666083     6.10   0.000       .27608    .5371992
         28  |   .2904996   .0645277     4.50   0.000     .1640182     .416981
         29  |   .1650612   .0638815     2.58   0.010     .0398464     .290276
         30  |    .063778   .0634657     1.00   0.315    -.0606219    .1881779
         31  |  -.0072879   .0648475    -0.11   0.911    -.1343963    .1198205
         32  |  -.0821992   .0655435    -1.25   0.210    -.2106718    .0462734
         33  |  -.1665355   .0676205    -2.46   0.014    -.2990792   -.0339919
         34  |   -.233691   .0699941    -3.34   0.001    -.3708873   -.0964947
         35  |  -.2986911    .072836    -4.10   0.000    -.4414577   -.1559245
         36  |  -.3800478   .0755837    -5.03   0.000    -.5282002   -.2318954
         37  |  -.4495314   .0785184    -5.73   0.000    -.6034362   -.2956265
         38  |  -.5306559   .0819206    -6.48   0.000    -.6912294   -.3700825
         39  |  -.6033585   .0857281    -7.04   0.000    -.7713952   -.4353219
         40  |  -.6321721   .0898084    -7.04   0.000    -.8082065   -.4561377
         41  |  -.6742528   .0932932    -7.23   0.000    -.8571178   -.4913878
         42  |  -.7363636   .0970105    -7.59   0.000    -.9265149   -.5462123
         43  |  -.8743653   .1009909    -8.66   0.000    -1.072319   -.6764119
         44  |  -.9199586   .1053807    -8.73   0.000    -1.126516   -.7134008
         45  |    -.94087   .1092267    -8.61   0.000    -1.154966   -.7267735
         46  |  -.9718509   .1128618    -8.61   0.000    -1.193073   -.7506293
         47  |  -1.006806   .1161484    -8.67   0.000     -1.23447   -.7791422
         48  |  -1.034005   .1196858    -8.64   0.000    -1.268603   -.7994079
         49  |  -1.081587    .123334    -8.77   0.000    -1.323335   -.8398384
         50  |  -1.127502   .1266409    -8.90   0.000    -1.375732   -.8792719
             |
     age_cat |
          1  |    .442282   .0178182    24.82   0.000     .4073565    .4772076
          2  |   .7488336   .0213887    35.01   0.000     .7069093    .7907579
          3  |   .9753537   .0251841    38.73   0.000     .9259901    1.024717
          4  |   1.164715   .0291804    39.91   0.000     1.107519    1.221912
          5  |   1.325959   .0334686    39.62   0.000     1.260357    1.391561
          6  |   1.453576   .0378011    38.45   0.000     1.379481     1.52767
          7  |   1.561779   .0422285    36.98   0.000     1.479007    1.644552
          8  |   1.660009   .0467857    35.48   0.000     1.568303    1.751714
          9  |   1.736805   .0512555    33.89   0.000     1.636338    1.837271
         10  |   1.805663   .0557286    32.40   0.000     1.696429    1.914897
         11  |   1.880176   .0602071    31.23   0.000     1.762163    1.998188
         12  |   1.949131   .0646728    30.14   0.000     1.822365    2.075897
         13  |   2.014563   .0691132    29.15   0.000     1.879094    2.150033
         14  |   2.061038   .0737299    27.95   0.000     1.916519    2.205557
         15  |    2.10881   .0783253    26.92   0.000     1.955284    2.262337
         16  |   2.144977   .0829122    25.87   0.000      1.98246    2.307495
         17  |   2.181228   .0875955    24.90   0.000     2.009531    2.352925
         18  |   2.235265   .0919843    24.30   0.000     2.054966    2.415565
         19  |   2.276309    .096813    23.51   0.000     2.086544    2.466073
         20  |   2.354132   .1053275    22.35   0.000     2.147679    2.560586
         25  |   2.468932   .1191582    20.72   0.000     2.235369    2.702496
         30  |   2.259927   .1554656    14.54   0.000     1.955198    2.564657
         40  |   2.180016   .1736039    12.56   0.000     1.839732    2.520299
         50  |   2.139564   .1733568    12.34   0.000     1.799765    2.479362
             |
       _cons |    2.88352   .0450307    64.03   0.000     2.795254    2.971785
-------------+----------------------------------------------------------------
     sigma_u |  1.1757041
     sigma_e |  .67294012
         rho |  .75323341   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 16123) =    5.43
            Prob > F =    0.0198

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 16123) =  121.70
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 16123) =    0.69
            Prob > F =    0.4063

 ( 1)  during_expat = 0

       F(  1, 16123) =    0.69
            Prob > F =    0.4063
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 16123) =    2.43
            Prob > F =    0.1191

 ( 1)  after_expat = 0

       F(  1, 16123) =    0.20
            Prob > F =    0.6578
(file output/figure/acquisitions_lnL_slope.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.1113                         Obs per group: min =         1
       between = 0.0166                                        avg =       8.7
       overall = 0.0313                                        max =        25

                                                F(82,16123)        =     45.08
corr(u_i, Xb)  = -0.3569                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0491111   .0378972     1.30   0.195    -.0251715    .1233938
   during_DD |  -.0168326   .0113467    -1.48   0.138    -.0390734    .0054082
   during_DE |  -.0080526   .0574615    -0.14   0.889    -.1206836    .1045783
   during_ED |  -.0202377   .0485416    -0.42   0.677    -.1153847    .0749092
   during_EE |  -.0888957   .0537335    -1.65   0.098    -.1942194     .016428
    after_DD |   -.161591   .0212991    -7.59   0.000    -.2033397   -.1198423
    after_DE |  -.0622092    .065893    -0.94   0.345    -.1913668    .0669485
    after_ED |  -.1835546   .0653644    -2.81   0.005     -.311676   -.0554331
    after_EE |  -.1993545   .0709685    -2.81   0.005    -.3384606   -.0602484
             |
    ind_year |
          2  |  -.0934148   .0226542    -4.12   0.000    -.1378194   -.0490101
          3  |  -.2374652   .0301928    -7.86   0.000    -.2966463    -.178284
          4  |  -.3671948   .0349399   -10.51   0.000     -.435681   -.2987087
          5  |  -.4551391   .0402219   -11.32   0.000    -.5339784   -.3762997
          6  |  -.5478623    .044905   -12.20   0.000    -.6358811   -.4598436
          7  |  -.6048063   .0494634   -12.23   0.000      -.70176   -.5078525
          8  |  -.6387626   .0534906   -11.94   0.000    -.7436101   -.5339152
          9  |  -.6926038   .0577344   -12.00   0.000    -.8057697   -.5794379
         10  |  -.7561971   .0619107   -12.21   0.000    -.8775489   -.6348454
         11  |  -.8227414   .0657935   -12.50   0.000    -.9517039   -.6937789
         12  |  -.8669038   .0700583   -12.37   0.000    -1.004226   -.7295817
         13  |  -.9105698   .0743049   -12.25   0.000    -1.056216   -.7649239
         14  |  -.9687379    .078557   -12.33   0.000    -1.122718   -.8147575
         15  |   -1.01024   .0826633   -12.22   0.000    -1.172269   -.8482104
         16  |  -1.076434   .0866422   -12.42   0.000    -1.246262   -.9066056
         17  |   -1.12499   .0907948   -12.39   0.000    -1.302958   -.9470226
         18  |  -1.221972   .0948285   -12.89   0.000    -1.407846   -1.036097
         19  |  -1.292263   .0986835   -13.10   0.000    -1.485694   -1.098833
         20  |  -1.351632   .1022878   -13.21   0.000    -1.552128   -1.151137
         21  |  -1.415074   .1058526   -13.37   0.000    -1.622556   -1.207591
         22  |  -1.476122   .1091106   -13.53   0.000    -1.689991   -1.262253
         23  |  -1.513937   .1124914   -13.46   0.000    -1.734433   -1.293441
         24  |  -1.567893   .1163386   -13.48   0.000     -1.79593   -1.339857
         25  |  -1.601079   .1203389   -13.30   0.000    -1.836957   -1.365202
         26  |    .542828   .0704085     7.71   0.000     .4048195    .6808365
         27  |   .4052999   .0666282     6.08   0.000     .2747013    .5358985
         28  |   .2865612   .0645519     4.44   0.000     .1600322    .4130902
         29  |   .1586695   .0638984     2.48   0.013     .0334214    .2839176
         30  |   .0550507   .0634712     0.87   0.386      -.06936    .1794614
         31  |  -.0185214   .0648225    -0.29   0.775    -.1455808    .1085379
         32  |  -.0959422   .0654895    -1.47   0.143    -.2243088    .0324244
         33  |  -.1824776   .0675323    -2.70   0.007    -.3148484   -.0501068
         34  |  -.2521315   .0698629    -3.61   0.000    -.3890705   -.1151925
         35  |  -.3194824   .0726554    -4.40   0.000    -.4618951   -.1770698
         36  |  -.4037631   .0753501    -5.36   0.000    -.5514577   -.2560685
         37  |  -.4756712   .0782222    -6.08   0.000    -.6289954    -.322347
         38  |   -.559173   .0815419    -6.86   0.000    -.7190043   -.3993417
         39  |  -.6352258   .0852559    -7.45   0.000    -.8023368   -.4681149
         40  |  -.6673304   .0892464    -7.48   0.000    -.8422634   -.4923975
         41  |  -.7124425   .0926533    -7.69   0.000    -.8940533   -.5308318
         42  |  -.7776084   .0963211    -8.07   0.000    -.9664085   -.5888083
         43  |  -.9185113   .1002434    -9.16   0.000    -1.114999   -.7220232
         44  |  -.9666781   .1045564    -9.25   0.000     -1.17162   -.7617359
         45  |  -.9905841    .108313    -9.15   0.000     -1.20289   -.7782786
         46  |  -1.024361   .1118631    -9.16   0.000    -1.243625   -.8050969
         47  |   -1.06179   .1150839    -9.23   0.000    -1.287368   -.8362131
         48  |  -1.091954   .1185473    -9.21   0.000     -1.32432    -.859588
         49  |  -1.142593   .1221408    -9.35   0.000    -1.382002   -.9031832
         50  |  -1.191202   .1253908    -9.50   0.000    -1.436982   -.9454222
             |
     age_cat |
          1  |   .4444094   .0178078    24.96   0.000     .4095041    .4793146
          2  |   .7531058   .0213611    35.26   0.000     .7112357    .7949759
          3  |   .9816633   .0251304    39.06   0.000     .9324049    1.030922
          4  |    1.17304   .0290965    40.32   0.000     1.116008    1.230073
          5  |   1.336493   .0333463    40.08   0.000     1.271131    1.401856
          6  |    1.46629   .0376456    38.95   0.000       1.3925     1.54008
          7  |   1.576769   .0420407    37.51   0.000     1.494364    1.659173
          8  |   1.677224   .0465635    36.02   0.000     1.585954    1.768494
          9  |   1.756222   .0509983    34.44   0.000      1.65626    1.856185
         10  |   1.827217   .0554355    32.96   0.000     1.718557    1.935876
         11  |   1.904021   .0598794    31.80   0.000     1.786651    2.021391
         12  |   1.975207   .0643128    30.71   0.000     1.849147    2.101267
         13  |   2.042754    .068713    29.73   0.000     1.908069    2.177439
         14  |   2.091618   .0732955    28.54   0.000     1.947951    2.235286
         15  |   2.141695   .0778519    27.51   0.000     1.989097    2.294293
         16  |   2.179942    .082412    26.45   0.000     2.018405    2.341478
         17  |    2.21866   .0870755    25.48   0.000     2.047982    2.389337
         18  |   2.275069   .0914537    24.88   0.000      2.09581    2.454329
         19  |   2.318629   .0962433    24.09   0.000     2.129981    2.507277
         20  |   2.401337   .1046513    22.95   0.000     2.196209    2.606466
         25  |   2.523139   .1183596    21.32   0.000     2.291141    2.755136
         30  |   2.314991   .1549052    14.94   0.000     2.011359    2.618622
         40  |    2.22855   .1732713    12.86   0.000     1.888919    2.568181
         50  |   2.185337   .1737524    12.58   0.000     1.844763    2.525911
             |
       _cons |   2.890844   .0449897    64.26   0.000     2.802659    2.979029
-------------+----------------------------------------------------------------
     sigma_u |  1.1863171
     sigma_e |  .67318878
         rho |  .75642273   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1113292400943882

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.1113                                         min =          1
     between = 0.0166                                         avg =        8.7
     overall = 0.0313                                         max =         25

                                                F(82,16123)       =      45.08
corr(u_i, Xb)  = -0.3569                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0491111   .0378972     1.30   0.195    -.0251715    .1233938
   during_DD |  -.0168326   .0113467    -1.48   0.138    -.0390734    .0054082
   during_DE |  -.0080526   .0574615    -0.14   0.889    -.1206836    .1045783
   during_ED |  -.0202377   .0485416    -0.42   0.677    -.1153847    .0749092
   during_EE |  -.0888957   .0537335    -1.65   0.098    -.1942194     .016428
    after_DD |   -.161591   .0212991    -7.59   0.000    -.2033397   -.1198423
    after_DE |  -.0622092    .065893    -0.94   0.345    -.1913668    .0669485
    after_ED |  -.1835546   .0653644    -2.81   0.005     -.311676   -.0554331
    after_EE |  -.1993545   .0709685    -2.81   0.005    -.3384606   -.0602484
             |
    ind_year |
          2  |  -.0934148   .0226542    -4.12   0.000    -.1378194   -.0490101
          3  |  -.2374652   .0301928    -7.86   0.000    -.2966463    -.178284
          4  |  -.3671948   .0349399   -10.51   0.000     -.435681   -.2987087
          5  |  -.4551391   .0402219   -11.32   0.000    -.5339784   -.3762997
          6  |  -.5478623    .044905   -12.20   0.000    -.6358811   -.4598436
          7  |  -.6048063   .0494634   -12.23   0.000      -.70176   -.5078525
          8  |  -.6387626   .0534906   -11.94   0.000    -.7436101   -.5339152
          9  |  -.6926038   .0577344   -12.00   0.000    -.8057697   -.5794379
         10  |  -.7561971   .0619107   -12.21   0.000    -.8775489   -.6348454
         11  |  -.8227414   .0657935   -12.50   0.000    -.9517039   -.6937789
         12  |  -.8669038   .0700583   -12.37   0.000    -1.004226   -.7295817
         13  |  -.9105698   .0743049   -12.25   0.000    -1.056216   -.7649239
         14  |  -.9687379    .078557   -12.33   0.000    -1.122718   -.8147575
         15  |   -1.01024   .0826633   -12.22   0.000    -1.172269   -.8482104
         16  |  -1.076434   .0866422   -12.42   0.000    -1.246262   -.9066056
         17  |   -1.12499   .0907948   -12.39   0.000    -1.302958   -.9470226
         18  |  -1.221972   .0948285   -12.89   0.000    -1.407846   -1.036097
         19  |  -1.292263   .0986835   -13.10   0.000    -1.485694   -1.098833
         20  |  -1.351632   .1022878   -13.21   0.000    -1.552128   -1.151137
         21  |  -1.415074   .1058526   -13.37   0.000    -1.622556   -1.207591
         22  |  -1.476122   .1091106   -13.53   0.000    -1.689991   -1.262253
         23  |  -1.513937   .1124914   -13.46   0.000    -1.734433   -1.293441
         24  |  -1.567893   .1163386   -13.48   0.000     -1.79593   -1.339857
         25  |  -1.601079   .1203389   -13.30   0.000    -1.836957   -1.365202
         26  |    .542828   .0704085     7.71   0.000     .4048195    .6808365
         27  |   .4052999   .0666282     6.08   0.000     .2747013    .5358985
         28  |   .2865612   .0645519     4.44   0.000     .1600322    .4130902
         29  |   .1586695   .0638984     2.48   0.013     .0334214    .2839176
         30  |   .0550507   .0634712     0.87   0.386      -.06936    .1794614
         31  |  -.0185214   .0648225    -0.29   0.775    -.1455808    .1085379
         32  |  -.0959422   .0654895    -1.47   0.143    -.2243088    .0324244
         33  |  -.1824776   .0675323    -2.70   0.007    -.3148484   -.0501068
         34  |  -.2521315   .0698629    -3.61   0.000    -.3890705   -.1151925
         35  |  -.3194824   .0726554    -4.40   0.000    -.4618951   -.1770698
         36  |  -.4037631   .0753501    -5.36   0.000    -.5514577   -.2560685
         37  |  -.4756712   .0782222    -6.08   0.000    -.6289954    -.322347
         38  |   -.559173   .0815419    -6.86   0.000    -.7190043   -.3993417
         39  |  -.6352258   .0852559    -7.45   0.000    -.8023368   -.4681149
         40  |  -.6673304   .0892464    -7.48   0.000    -.8422634   -.4923975
         41  |  -.7124425   .0926533    -7.69   0.000    -.8940533   -.5308318
         42  |  -.7776084   .0963211    -8.07   0.000    -.9664085   -.5888083
         43  |  -.9185113   .1002434    -9.16   0.000    -1.114999   -.7220232
         44  |  -.9666781   .1045564    -9.25   0.000     -1.17162   -.7617359
         45  |  -.9905841    .108313    -9.15   0.000     -1.20289   -.7782786
         46  |  -1.024361   .1118631    -9.16   0.000    -1.243625   -.8050969
         47  |   -1.06179   .1150839    -9.23   0.000    -1.287368   -.8362131
         48  |  -1.091954   .1185473    -9.21   0.000     -1.32432    -.859588
         49  |  -1.142593   .1221408    -9.35   0.000    -1.382002   -.9031832
         50  |  -1.191202   .1253908    -9.50   0.000    -1.436982   -.9454222
             |
     age_cat |
          1  |   .4444094   .0178078    24.96   0.000     .4095041    .4793146
          2  |   .7531058   .0213611    35.26   0.000     .7112357    .7949759
          3  |   .9816633   .0251304    39.06   0.000     .9324049    1.030922
          4  |    1.17304   .0290965    40.32   0.000     1.116008    1.230073
          5  |   1.336493   .0333463    40.08   0.000     1.271131    1.401856
          6  |    1.46629   .0376456    38.95   0.000       1.3925     1.54008
          7  |   1.576769   .0420407    37.51   0.000     1.494364    1.659173
          8  |   1.677224   .0465635    36.02   0.000     1.585954    1.768494
          9  |   1.756222   .0509983    34.44   0.000      1.65626    1.856185
         10  |   1.827217   .0554355    32.96   0.000     1.718557    1.935876
         11  |   1.904021   .0598794    31.80   0.000     1.786651    2.021391
         12  |   1.975207   .0643128    30.71   0.000     1.849147    2.101267
         13  |   2.042754    .068713    29.73   0.000     1.908069    2.177439
         14  |   2.091618   .0732955    28.54   0.000     1.947951    2.235286
         15  |   2.141695   .0778519    27.51   0.000     1.989097    2.294293
         16  |   2.179942    .082412    26.45   0.000     2.018405    2.341478
         17  |    2.21866   .0870755    25.48   0.000     2.047982    2.389337
         18  |   2.275069   .0914537    24.88   0.000      2.09581    2.454329
         19  |   2.318629   .0962433    24.09   0.000     2.129981    2.507277
         20  |   2.401337   .1046513    22.95   0.000     2.196209    2.606466
         25  |   2.523139   .1183596    21.32   0.000     2.291141    2.755136
         30  |   2.314991   .1549052    14.94   0.000     2.011359    2.618622
         40  |    2.22855   .1732713    12.86   0.000     1.888919    2.568181
         50  |   2.185337   .1737524    12.58   0.000     1.844763    2.525911
             |
       _cons |   2.890844   .0449897    64.26   0.000     2.802659    2.979029
-------------+----------------------------------------------------------------
     sigma_u |  1.1863171
     sigma_e |  .67318878
         rho |  .75642273   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. local fname = e(depvar)

. local title : variable label `fname'

. 
. slopegraph, ///
>         from(0 0 0 0 1 _b[during_DE] 1 _b[during_DE]) ///
>         to(1 _b[during_DD] 1 _b[during_DE] 2 _b[during_ED]+_b[during_DE] 2 _b[during_EE]+_b[during_DE]) ///
>         style(p1 p2 p1 p2) ///
>         label(Local-Local Local-Expat Expat-Local Expat-Expat) ///
>         width_test(during_DD during_DE during_ED during_EE) ///
>         star_test(1==1 during_DE==during_DD 1==1 during_EE==during_ED) ///
>         connect(stepstair) ///
>         format(scheme(538w) xlabel(none) xtitle("") ytitle("") title(`title') legend(off) aspect(0.67))
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str11
(1 real change made)

 ( 1)  during_DD = 0

       F(  1, 16123) =    2.20
            Prob > F =    0.1380

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_DE = 0

       F(  1, 16123) =    0.02
            Prob > F =    0.8886

 ( 1)  - during_DD + during_DE = 0

       F(  1, 16123) =    0.02
            Prob > F =    0.8807
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_ED = 0

       F(  1, 16123) =    0.17
            Prob > F =    0.6767

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_EE = 0

       F(  1, 16123) =    2.74
            Prob > F =    0.0981

 ( 1)  - during_ED + during_EE = 0

       F(  1, 16123) =    0.95
            Prob > F =    0.3296

. 
. graph export output/figure/`fname'_tree.png, width(800) replace
(file output/figure/lnL_tree.png written in PNG format)

. 
end of do-file
(sum of wgt is 106,215.803529583)

Linear regression                               Number of obs     =    287,853
                                                F(75, 18459)      =     142.05
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1559
                                                Root MSE          =     1.6309

                                (Std. Err. adjusted for 18,460 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5371486   .0320214    16.77   0.000     .4743838    .5999135
       expat |     .11043   .0381945     2.89   0.004     .0355652    .1852947
             |
    ind_year |
          2  |   .1846181    .038484     4.80   0.000      .109186    .2600502
          3  |   .8248296   .0418884    19.69   0.000     .7427244    .9069348
          4  |   .9954373   .0447626    22.24   0.000     .9076984    1.083176
          5  |   1.137947   .0450607    25.25   0.000     1.049624     1.22627
          6  |   1.389526   .0460552    30.17   0.000     1.299254    1.479799
          7  |   1.585124   .0465639    34.04   0.000     1.493854    1.676394
          8  |   1.745947   .0470182    37.13   0.000     1.653787    1.838107
          9  |   1.869152   .0466657    40.05   0.000     1.777683    1.960621
         10  |   2.005322   .0467922    42.86   0.000     1.913605     2.09704
         11  |   2.091962    .047092    44.42   0.000     1.999658    2.184267
         12  |    2.10802   .0475792    44.31   0.000      2.01476     2.20128
         13  |   2.119738   .0478003    44.35   0.000     2.026045    2.213431
         14  |   2.086437   .0483107    43.19   0.000     1.991744    2.181131
         15  |   2.033293   .0488902    41.59   0.000     1.937464    2.129122
         16  |     2.0452   .0493636    41.43   0.000     1.948442    2.141957
         17  |   2.017109   .0499468    40.39   0.000     1.919208    2.115009
         18  |   2.005707   .0508463    39.45   0.000     1.906043     2.10537
         19  |   1.949717   .0509304    38.28   0.000     1.849889    2.049545
         20  |   1.885688   .0517535    36.44   0.000     1.784246     1.98713
         21  |   1.872729   .0529072    35.40   0.000     1.769027    1.976432
         22  |   1.860073   .0537467    34.61   0.000     1.754724    1.965422
         23  |    1.87669   .0541412    34.66   0.000     1.770569    1.982812
         24  |   2.069021   .0675916    30.61   0.000     1.936535    2.201507
         25  |   2.189211   .0778279    28.13   0.000     2.036661    2.341761
         26  |   .6441978   .0677343     9.51   0.000     .5114323    .7769633
         27  |   .7277082   .0599625    12.14   0.000     .6101762    .8452403
         28  |    .996745   .0564027    17.67   0.000     .8861906      1.1073
         29  |   1.086655   .0537428    20.22   0.000     .9813139    1.191995
         30  |   1.183588   .0530232    22.32   0.000     1.079658    1.287519
         31  |   1.293074   .0523061    24.72   0.000     1.190549    1.395598
         32  |   1.475726   .0520129    28.37   0.000     1.373776    1.577676
         33  |   1.596902   .0511445    31.22   0.000     1.496655     1.69715
         34  |   1.705363    .051316    33.23   0.000     1.604779    1.805947
         35  |   1.798394     .05197    34.60   0.000     1.696528     1.90026
         36  |   1.904338   .0523367    36.39   0.000     1.801754    2.006923
         37  |   2.004356   .0530378    37.79   0.000     1.900397    2.108315
         38  |    2.09216   .0529611    39.50   0.000     1.988352    2.195969
         39  |   2.127828   .0534921    39.78   0.000     2.022979    2.232678
         40  |   2.118755   .0547723    38.68   0.000     2.011397    2.226114
         41  |   2.144114   .0555582    38.59   0.000     2.035215    2.253013
         42  |   2.172728   .0555054    39.14   0.000     2.063932    2.281524
         43  |   2.205143   .0571223    38.60   0.000     2.093178    2.317108
         44  |   2.202319   .0573592    38.40   0.000     2.089889    2.314748
         45  |   2.189206   .0574632    38.10   0.000     2.076573     2.30184
         46  |   2.191518   .0582822    37.60   0.000     2.077279    2.305757
         47  |   2.182318   .0613309    35.58   0.000     2.062104    2.302533
         48  |    2.29484    .060735    37.78   0.000     2.175794    2.413886
         49  |   2.631437   .0683209    38.52   0.000     2.497521    2.765352
         50  |   2.763713   .0793536    34.83   0.000     2.608172    2.919253
             |
     age_cat |
          1  |   .1980937   .0376216     5.27   0.000     .1243518    .2718356
          2  |   .3492947   .0391348     8.93   0.000     .2725868    .4260026
          3  |   .4727091   .0399585    11.83   0.000     .3943867    .5510315
          4  |   .6301376   .0406203    15.51   0.000      .550518    .7097572
          5  |   .6981264    .041353    16.88   0.000     .6170707     .779182
          6  |     .74589   .0421767    17.68   0.000     .6632198    .8285603
          7  |   .7870734   .0427784    18.40   0.000     .7032237    .8709231
          8  |   .8488442   .0433974    19.56   0.000     .7637813    .9339072
          9  |    .896678   .0440055    20.38   0.000     .8104233    .9829328
         10  |    .930782   .0447077    20.82   0.000     .8431508    1.018413
         11  |   .9715977   .0455124    21.35   0.000     .8823891    1.060806
         12  |   1.021816   .0460695    22.18   0.000     .9315157    1.112117
         13  |   1.045957    .047256    22.13   0.000     .9533311    1.138584
         14  |   1.098144    .048203    22.78   0.000     1.003662    1.192626
         15  |   1.120678   .0491045    22.82   0.000     1.024428    1.216927
         16  |   1.151459   .0503465    22.87   0.000     1.052775    1.250142
         17  |   1.166743   .0518272    22.51   0.000     1.065157    1.268329
         18  |   1.203167   .0532603    22.59   0.000     1.098772    1.307562
         19  |   1.221558   .0545065    22.41   0.000     1.114721    1.328396
         20  |   1.254133   .0574189    21.84   0.000     1.141587    1.366679
         25  |   .9865166   .0812002    12.15   0.000     .8273567    1.145676
         30  |   1.112723   .0940778    11.83   0.000     .9283217    1.297124
         40  |   .9399095    .096845     9.71   0.000     .7500844    1.129735
         50  |   .8421809   .1189255     7.08   0.000     .6090758    1.075286
             |
       _cons |   3.485088   .0518495    67.22   0.000     3.383458    3.586717
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    287,853
                                                F(75, 18459)      =     142.05
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1559
                                                Root MSE          =     1.6309

                                (Std. Err. adjusted for 18,460 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5371486   .0320214    16.77   0.000     .4743838    .5999135
       expat |     .11043   .0381945     2.89   0.004     .0355652    .1852947
             |
    ind_year |
          2  |   .1846181    .038484     4.80   0.000      .109186    .2600502
          3  |   .8248296   .0418884    19.69   0.000     .7427244    .9069348
          4  |   .9954373   .0447626    22.24   0.000     .9076984    1.083176
          5  |   1.137947   .0450607    25.25   0.000     1.049624     1.22627
          6  |   1.389526   .0460552    30.17   0.000     1.299254    1.479799
          7  |   1.585124   .0465639    34.04   0.000     1.493854    1.676394
          8  |   1.745947   .0470182    37.13   0.000     1.653787    1.838107
          9  |   1.869152   .0466657    40.05   0.000     1.777683    1.960621
         10  |   2.005322   .0467922    42.86   0.000     1.913605     2.09704
         11  |   2.091962    .047092    44.42   0.000     1.999658    2.184267
         12  |    2.10802   .0475792    44.31   0.000      2.01476     2.20128
         13  |   2.119738   .0478003    44.35   0.000     2.026045    2.213431
         14  |   2.086437   .0483107    43.19   0.000     1.991744    2.181131
         15  |   2.033293   .0488902    41.59   0.000     1.937464    2.129122
         16  |     2.0452   .0493636    41.43   0.000     1.948442    2.141957
         17  |   2.017109   .0499468    40.39   0.000     1.919208    2.115009
         18  |   2.005707   .0508463    39.45   0.000     1.906043     2.10537
         19  |   1.949717   .0509304    38.28   0.000     1.849889    2.049545
         20  |   1.885688   .0517535    36.44   0.000     1.784246     1.98713
         21  |   1.872729   .0529072    35.40   0.000     1.769027    1.976432
         22  |   1.860073   .0537467    34.61   0.000     1.754724    1.965422
         23  |    1.87669   .0541412    34.66   0.000     1.770569    1.982812
         24  |   2.069021   .0675916    30.61   0.000     1.936535    2.201507
         25  |   2.189211   .0778279    28.13   0.000     2.036661    2.341761
         26  |   .6441978   .0677343     9.51   0.000     .5114323    .7769633
         27  |   .7277082   .0599625    12.14   0.000     .6101762    .8452403
         28  |    .996745   .0564027    17.67   0.000     .8861906      1.1073
         29  |   1.086655   .0537428    20.22   0.000     .9813139    1.191995
         30  |   1.183588   .0530232    22.32   0.000     1.079658    1.287519
         31  |   1.293074   .0523061    24.72   0.000     1.190549    1.395598
         32  |   1.475726   .0520129    28.37   0.000     1.373776    1.577676
         33  |   1.596902   .0511445    31.22   0.000     1.496655     1.69715
         34  |   1.705363    .051316    33.23   0.000     1.604779    1.805947
         35  |   1.798394     .05197    34.60   0.000     1.696528     1.90026
         36  |   1.904338   .0523367    36.39   0.000     1.801754    2.006923
         37  |   2.004356   .0530378    37.79   0.000     1.900397    2.108315
         38  |    2.09216   .0529611    39.50   0.000     1.988352    2.195969
         39  |   2.127828   .0534921    39.78   0.000     2.022979    2.232678
         40  |   2.118755   .0547723    38.68   0.000     2.011397    2.226114
         41  |   2.144114   .0555582    38.59   0.000     2.035215    2.253013
         42  |   2.172728   .0555054    39.14   0.000     2.063932    2.281524
         43  |   2.205143   .0571223    38.60   0.000     2.093178    2.317108
         44  |   2.202319   .0573592    38.40   0.000     2.089889    2.314748
         45  |   2.189206   .0574632    38.10   0.000     2.076573     2.30184
         46  |   2.191518   .0582822    37.60   0.000     2.077279    2.305757
         47  |   2.182318   .0613309    35.58   0.000     2.062104    2.302533
         48  |    2.29484    .060735    37.78   0.000     2.175794    2.413886
         49  |   2.631437   .0683209    38.52   0.000     2.497521    2.765352
         50  |   2.763713   .0793536    34.83   0.000     2.608172    2.919253
             |
     age_cat |
          1  |   .1980937   .0376216     5.27   0.000     .1243518    .2718356
          2  |   .3492947   .0391348     8.93   0.000     .2725868    .4260026
          3  |   .4727091   .0399585    11.83   0.000     .3943867    .5510315
          4  |   .6301376   .0406203    15.51   0.000      .550518    .7097572
          5  |   .6981264    .041353    16.88   0.000     .6170707     .779182
          6  |     .74589   .0421767    17.68   0.000     .6632198    .8285603
          7  |   .7870734   .0427784    18.40   0.000     .7032237    .8709231
          8  |   .8488442   .0433974    19.56   0.000     .7637813    .9339072
          9  |    .896678   .0440055    20.38   0.000     .8104233    .9829328
         10  |    .930782   .0447077    20.82   0.000     .8431508    1.018413
         11  |   .9715977   .0455124    21.35   0.000     .8823891    1.060806
         12  |   1.021816   .0460695    22.18   0.000     .9315157    1.112117
         13  |   1.045957    .047256    22.13   0.000     .9533311    1.138584
         14  |   1.098144    .048203    22.78   0.000     1.003662    1.192626
         15  |   1.120678   .0491045    22.82   0.000     1.024428    1.216927
         16  |   1.151459   .0503465    22.87   0.000     1.052775    1.250142
         17  |   1.166743   .0518272    22.51   0.000     1.065157    1.268329
         18  |   1.203167   .0532603    22.59   0.000     1.098772    1.307562
         19  |   1.221558   .0545065    22.41   0.000     1.114721    1.328396
         20  |   1.254133   .0574189    21.84   0.000     1.141587    1.366679
         25  |   .9865166   .0812002    12.15   0.000     .8273567    1.145676
         30  |   1.112723   .0940778    11.83   0.000     .9283217    1.297124
         40  |   .9399095    .096845     9.71   0.000     .7500844    1.129735
         50  |   .8421809   .1189255     7.08   0.000     .6090758    1.075286
             |
       _cons |   3.485088   .0518495    67.22   0.000     3.383458    3.586717
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    287,853
Group variable: id                              Number of groups  =     18,460

R-sq:                                           Obs per group:
     within  = 0.1964                                         min =          1
     between = 0.0566                                         avg =       15.6
     overall = 0.0909                                         max =        140

                                                F(75,18459)       =      91.98
corr(u_i, Xb)  = -0.0002                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,460 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .1084466   .0467737     2.32   0.020     .0167658    .2001274
       expat |   .0498424   .0135727     3.67   0.000     .0232386    .0764461
             |
    ind_year |
          2  |   .1717554   .0347536     4.94   0.000     .1036351    .2398757
          3  |   .8223763   .0418588    19.65   0.000     .7403291    .9044235
          4  |   .9800927   .0467632    20.96   0.000     .8884326    1.071753
          5  |   1.154196   .0508329    22.71   0.000     1.054559    1.253833
          6  |   1.409184   .0549237    25.66   0.000     1.301528    1.516839
          7  |   1.689313   .0595853    28.35   0.000      1.57252    1.806105
          8  |   1.895925   .0643103    29.48   0.000     1.769871    2.021979
          9  |   2.038809   .0692193    29.45   0.000     1.903133    2.174485
         10  |   2.195164   .0745415    29.45   0.000     2.049056    2.341272
         11  |   2.362444   .0794634    29.73   0.000     2.206689      2.5182
         12  |   2.425554   .0850786    28.51   0.000     2.258792    2.592316
         13  |   2.495359   .0907138    27.51   0.000     2.317551    2.673166
         14  |    2.50844   .0963355    26.04   0.000     2.319613    2.697266
         15  |   2.487947   .1022417    24.33   0.000     2.287544    2.688351
         16  |    2.52644   .1078592    23.42   0.000     2.315026    2.737854
         17  |   2.552311   .1140188    22.38   0.000     2.328824    2.775798
         18  |   2.568164   .1201011    21.38   0.000     2.332755    2.803574
         19  |    2.53085   .1259207    20.10   0.000     2.284034    2.777666
         20  |   2.536618   .1315004    19.29   0.000     2.278866    2.794371
         21  |   2.559877   .1367344    18.72   0.000     2.291865    2.827889
         22  |   2.601263   .1416843    18.36   0.000     2.323549    2.878977
         23  |   2.701781   .1469516    18.39   0.000     2.413742     2.98982
         24  |   2.133078   .1537537    13.87   0.000     1.831707     2.43445
         25  |   2.225322   .1613138    13.79   0.000     1.909132    2.541512
         26  |   .5175261   .0762663     6.79   0.000     .3680372     .667015
         27  |   .6726921   .0683043     9.85   0.000     .5388093    .8065748
         28  |   .9884529   .0642661    15.38   0.000     .8624855     1.11442
         29  |   1.124846   .0635063    17.71   0.000     1.000368    1.249324
         30  |   1.252324     .06486    19.31   0.000     1.125192    1.379455
         31  |   1.411554   .0667606    21.14   0.000     1.280697     1.54241
         32  |    1.63048   .0692965    23.53   0.000     1.494652    1.766307
         33  |   1.808469   .0727662    24.85   0.000     1.665841    1.951098
         34  |   1.931648   .0767103    25.18   0.000     1.781289    2.082008
         35  |   2.045757    .081131    25.22   0.000     1.886733    2.204781
         36  |   2.158531   .0858744    25.14   0.000     1.990209    2.326852
         37  |   2.259606   .0908977    24.86   0.000     2.081438    2.437774
         38  |   2.351918   .0957185    24.57   0.000     2.164301    2.539535
         39  |   2.378623   .1009832    23.55   0.000     2.180687    2.576559
         40  |   2.389341    .106216    22.50   0.000     2.181148    2.597534
         41  |   2.423048   .1120604    21.62   0.000     2.203399    2.642697
         42  |   2.491501   .1178221    21.15   0.000     2.260559    2.722443
         43  |   2.542284   .1239182    20.52   0.000     2.299393    2.785176
         44  |   2.541171   .1301073    19.53   0.000     2.286148    2.796193
         45  |   2.567387   .1356064    18.93   0.000     2.301586    2.833188
         46  |   2.594722   .1412094    18.37   0.000     2.317938    2.871505
         47  |   2.640614   .1456985    18.12   0.000     2.355031    2.926196
         48  |   2.720598    .150759    18.05   0.000     2.425097      3.0161
         49  |   2.489821   .1577841    15.78   0.000      2.18055    2.799093
         50  |   2.587288    .163951    15.78   0.000     2.265929    2.908647
             |
     age_cat |
          1  |   .1072072   .0292382     3.67   0.000     .0498975    .1645168
          2  |   .1324525   .0328226     4.04   0.000     .0681171    .1967878
          3  |   .1274715   .0368063     3.46   0.001     .0553278    .1996151
          4  |   .1427297   .0412383     3.46   0.001     .0618988    .2235606
          5  |   .1164983   .0462248     2.52   0.012     .0258935    .2071032
          6  |   .0931792   .0514978     1.81   0.070    -.0077613    .1941197
          7  |   .0719871   .0570049     1.26   0.207    -.0397477    .1837219
          8  |    .058551   .0627781     0.93   0.351    -.0644998    .1816018
          9  |   .0505363   .0685658     0.74   0.461    -.0838589    .1849316
         10  |   .0282446   .0745197     0.38   0.705    -.1178208    .1743101
         11  |   .0164527   .0805417     0.20   0.838    -.1414165    .1743219
         12  |   .0126511   .0865753     0.15   0.884    -.1570445    .1823467
         13  |  -.0096688   .0926846    -0.10   0.917    -.1913393    .1720016
         14  |   .0017922   .0988077     0.02   0.986      -.19188    .1954645
         15  |  -.0029235   .1050849    -0.03   0.978    -.2088996    .2030527
         16  |   .0017748   .1117055     0.02   0.987    -.2171783    .2207279
         17  |  -.0071378   .1182077    -0.06   0.952    -.2388358    .2245602
         18  |  -.0066693   .1247361    -0.05   0.957    -.2511636    .2378251
         19  |  -.0214344   .1314033    -0.16   0.870     -.278997    .2361283
         20  |  -.0623021   .1435487    -0.43   0.664    -.3436709    .2190666
         25  |  -.1382922    .168336    -0.82   0.411    -.4682463    .1916619
         30  |  -.1173302    .211192    -0.56   0.579    -.5312862    .2966257
         40  |     .02234   .2493812     0.09   0.929    -.4664703    .5111503
         50  |   .0731896   .2835164     0.26   0.796    -.4825288    .6289079
             |
       _cons |   3.989068   .0541926    73.61   0.000     3.882845    4.095291
-------------+----------------------------------------------------------------
     sigma_u |  1.7814825
     sigma_e |  .85339349
         rho |  .81335525   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1964280999008789

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    287,853
Group variable: id                              Number of groups  =     18,460

R-sq:                                           Obs per group:
     within  = 0.1964                                         min =          1
     between = 0.0566                                         avg =       15.6
     overall = 0.0909                                         max =        140

                                                F(75,18459)       =      91.98
corr(u_i, Xb)  = -0.0002                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,460 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .1084466   .0467737     2.32   0.020     .0167658    .2001274
       expat |   .0498424   .0135727     3.67   0.000     .0232386    .0764461
             |
    ind_year |
          2  |   .1717554   .0347536     4.94   0.000     .1036351    .2398757
          3  |   .8223763   .0418588    19.65   0.000     .7403291    .9044235
          4  |   .9800927   .0467632    20.96   0.000     .8884326    1.071753
          5  |   1.154196   .0508329    22.71   0.000     1.054559    1.253833
          6  |   1.409184   .0549237    25.66   0.000     1.301528    1.516839
          7  |   1.689313   .0595853    28.35   0.000      1.57252    1.806105
          8  |   1.895925   .0643103    29.48   0.000     1.769871    2.021979
          9  |   2.038809   .0692193    29.45   0.000     1.903133    2.174485
         10  |   2.195164   .0745415    29.45   0.000     2.049056    2.341272
         11  |   2.362444   .0794634    29.73   0.000     2.206689      2.5182
         12  |   2.425554   .0850786    28.51   0.000     2.258792    2.592316
         13  |   2.495359   .0907138    27.51   0.000     2.317551    2.673166
         14  |    2.50844   .0963355    26.04   0.000     2.319613    2.697266
         15  |   2.487947   .1022417    24.33   0.000     2.287544    2.688351
         16  |    2.52644   .1078592    23.42   0.000     2.315026    2.737854
         17  |   2.552311   .1140188    22.38   0.000     2.328824    2.775798
         18  |   2.568164   .1201011    21.38   0.000     2.332755    2.803574
         19  |    2.53085   .1259207    20.10   0.000     2.284034    2.777666
         20  |   2.536618   .1315004    19.29   0.000     2.278866    2.794371
         21  |   2.559877   .1367344    18.72   0.000     2.291865    2.827889
         22  |   2.601263   .1416843    18.36   0.000     2.323549    2.878977
         23  |   2.701781   .1469516    18.39   0.000     2.413742     2.98982
         24  |   2.133078   .1537537    13.87   0.000     1.831707     2.43445
         25  |   2.225322   .1613138    13.79   0.000     1.909132    2.541512
         26  |   .5175261   .0762663     6.79   0.000     .3680372     .667015
         27  |   .6726921   .0683043     9.85   0.000     .5388093    .8065748
         28  |   .9884529   .0642661    15.38   0.000     .8624855     1.11442
         29  |   1.124846   .0635063    17.71   0.000     1.000368    1.249324
         30  |   1.252324     .06486    19.31   0.000     1.125192    1.379455
         31  |   1.411554   .0667606    21.14   0.000     1.280697     1.54241
         32  |    1.63048   .0692965    23.53   0.000     1.494652    1.766307
         33  |   1.808469   .0727662    24.85   0.000     1.665841    1.951098
         34  |   1.931648   .0767103    25.18   0.000     1.781289    2.082008
         35  |   2.045757    .081131    25.22   0.000     1.886733    2.204781
         36  |   2.158531   .0858744    25.14   0.000     1.990209    2.326852
         37  |   2.259606   .0908977    24.86   0.000     2.081438    2.437774
         38  |   2.351918   .0957185    24.57   0.000     2.164301    2.539535
         39  |   2.378623   .1009832    23.55   0.000     2.180687    2.576559
         40  |   2.389341    .106216    22.50   0.000     2.181148    2.597534
         41  |   2.423048   .1120604    21.62   0.000     2.203399    2.642697
         42  |   2.491501   .1178221    21.15   0.000     2.260559    2.722443
         43  |   2.542284   .1239182    20.52   0.000     2.299393    2.785176
         44  |   2.541171   .1301073    19.53   0.000     2.286148    2.796193
         45  |   2.567387   .1356064    18.93   0.000     2.301586    2.833188
         46  |   2.594722   .1412094    18.37   0.000     2.317938    2.871505
         47  |   2.640614   .1456985    18.12   0.000     2.355031    2.926196
         48  |   2.720598    .150759    18.05   0.000     2.425097      3.0161
         49  |   2.489821   .1577841    15.78   0.000      2.18055    2.799093
         50  |   2.587288    .163951    15.78   0.000     2.265929    2.908647
             |
     age_cat |
          1  |   .1072072   .0292382     3.67   0.000     .0498975    .1645168
          2  |   .1324525   .0328226     4.04   0.000     .0681171    .1967878
          3  |   .1274715   .0368063     3.46   0.001     .0553278    .1996151
          4  |   .1427297   .0412383     3.46   0.001     .0618988    .2235606
          5  |   .1164983   .0462248     2.52   0.012     .0258935    .2071032
          6  |   .0931792   .0514978     1.81   0.070    -.0077613    .1941197
          7  |   .0719871   .0570049     1.26   0.207    -.0397477    .1837219
          8  |    .058551   .0627781     0.93   0.351    -.0644998    .1816018
          9  |   .0505363   .0685658     0.74   0.461    -.0838589    .1849316
         10  |   .0282446   .0745197     0.38   0.705    -.1178208    .1743101
         11  |   .0164527   .0805417     0.20   0.838    -.1414165    .1743219
         12  |   .0126511   .0865753     0.15   0.884    -.1570445    .1823467
         13  |  -.0096688   .0926846    -0.10   0.917    -.1913393    .1720016
         14  |   .0017922   .0988077     0.02   0.986      -.19188    .1954645
         15  |  -.0029235   .1050849    -0.03   0.978    -.2088996    .2030527
         16  |   .0017748   .1117055     0.02   0.987    -.2171783    .2207279
         17  |  -.0071378   .1182077    -0.06   0.952    -.2388358    .2245602
         18  |  -.0066693   .1247361    -0.05   0.957    -.2511636    .2378251
         19  |  -.0214344   .1314033    -0.16   0.870     -.278997    .2361283
         20  |  -.0623021   .1435487    -0.43   0.664    -.3436709    .2190666
         25  |  -.1382922    .168336    -0.82   0.411    -.4682463    .1916619
         30  |  -.1173302    .211192    -0.56   0.579    -.5312862    .2966257
         40  |     .02234   .2493812     0.09   0.929    -.4664703    .5111503
         50  |   .0731896   .2835164     0.26   0.796    -.4825288    .6289079
             |
       _cons |   3.989068   .0541926    73.61   0.000     3.882845    4.095291
-------------+----------------------------------------------------------------
     sigma_u |  1.7814825
     sigma_e |  .85339349
         rho |  .81335525   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    481405
Group variable: firm_person                     Number of groups   =     58185

R-sq:  within  = 0.1643                         Obs per group: min =         1
       between = 0.0303                                        avg =       8.3
       overall = 0.0559                                        max =        25

                                                F(78,18459)        =     89.11
corr(u_i, Xb)  = -0.0966                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 18,460 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0921936   .0422844     2.18   0.029     .0093122    .1750749
      during |  -.0186341   .0111418    -1.67   0.094    -.0404731    .0032048
       after |  -.0644141   .0202384    -3.18   0.001    -.1040833    -.024745
during_expat |  -.2171317   .0216917   -10.01   0.000    -.2596493    -.174614
 after_expat |  -.3742159    .031466   -11.89   0.000    -.4358923   -.3125396
             |
    ind_year |
          2  |   .1792638   .0320695     5.59   0.000     .1164047    .2421229
          3  |   .8329694   .0392238    21.24   0.000     .7560872    .9098517
          4  |   1.010247   .0444777    22.71   0.000     .9230664    1.097427
          5  |   1.208617   .0488477    24.74   0.000     1.112871    1.304363
          6  |   1.465557   .0535823    27.35   0.000     1.360531    1.570583
          7  |   1.754437   .0585523    29.96   0.000     1.639669    1.869205
          8  |   1.966043   .0635163    30.95   0.000     1.841545    2.090541
          9  |   2.123837   .0684561    31.02   0.000     1.989656    2.258017
         10  |   2.282244   .0740798    30.81   0.000     2.137041    2.427448
         11  |   2.452964    .079298    30.93   0.000     2.297533    2.608396
         12  |   2.523513   .0850548    29.67   0.000     2.356798    2.690228
         13  |   2.607462   .0908177    28.71   0.000     2.429451    2.785473
         14  |    2.63576   .0965536    27.30   0.000     2.446506    2.825014
         15  |   2.623786   .1024451    25.61   0.000     2.422984    2.824588
         16  |   2.681984   .1080166    24.83   0.000     2.470262    2.893707
         17  |   2.717889    .114003    23.84   0.000     2.494432    2.941345
         18  |   2.748462   .1199809    22.91   0.000     2.513288    2.983636
         19  |   2.723473   .1258969    21.63   0.000     2.476703    2.970242
         20  |   2.741968   .1314988    20.85   0.000     2.484218    2.999718
         21  |   2.779938   .1366137    20.35   0.000     2.512162    3.047713
         22  |   2.823871   .1415389    19.95   0.000     2.546442      3.1013
         23  |   2.925488   .1466702    19.95   0.000     2.638001    3.212976
         24  |   2.339306   .1532416    15.27   0.000     2.038939    2.639674
         25  |   2.422885   .1606046    15.09   0.000     2.108085    2.737685
         26  |   .4886357   .0726402     6.73   0.000     .3462543    .6310172
         27  |   .6494305   .0656415     9.89   0.000     .5207671    .7780939
         28  |   .9795491   .0618513    15.84   0.000     .8583149    1.100783
         29  |   1.142226   .0615611    18.55   0.000      1.02156    1.262891
         30  |   1.277624   .0628745    20.32   0.000     1.154384    1.400864
         31  |   1.444628   .0651296    22.18   0.000     1.316968    1.572288
         32  |   1.675011   .0679142    24.66   0.000     1.541893    1.808129
         33  |   1.865528   .0713239    26.16   0.000     1.725726    2.005329
         34  |   1.999594   .0755407    26.47   0.000     1.851527    2.147661
         35  |   2.120746   .0801571    26.46   0.000     1.963631    2.277862
         36  |    2.24271   .0851203    26.35   0.000     2.075866    2.409554
         37  |   2.361126   .0902164    26.17   0.000     2.184294    2.537959
         38  |   2.454895   .0954446    25.72   0.000     2.267815    2.641975
         39  |   2.500994   .1008512    24.80   0.000     2.303317    2.698672
         40  |   2.529302   .1061252    23.83   0.000     2.321286    2.737317
         41  |   2.567013    .111763    22.97   0.000     2.347947    2.786078
         42  |   2.661252   .1175785    22.63   0.000     2.430787    2.891717
         43  |   2.727548   .1236241    22.06   0.000     2.485234    2.969863
         44  |   2.735588   .1297978    21.08   0.000     2.481173    2.990004
         45  |   2.781306   .1351268    20.58   0.000     2.516445    3.046167
         46  |   2.813568   .1405834    20.01   0.000     2.538012    3.089124
         47  |   2.872495   .1451038    19.80   0.000     2.588078    3.156912
         48  |   2.956686   .1501076    19.70   0.000     2.662462    3.250911
         49  |   2.730672   .1568322    17.41   0.000     2.423266    3.038078
         50  |   2.834061   .1625204    17.44   0.000     2.515506    3.152616
             |
     age_cat |
          1  |   .0917037   .0271283     3.38   0.001     .0385298    .1448777
          2  |    .102333   .0308395     3.32   0.001     .0418847    .1627814
          3  |   .0838524   .0349176     2.40   0.016     .0154106    .1522941
          4  |   .0853035   .0395268     2.16   0.031     .0078273    .1627797
          5  |   .0482564   .0446146     1.08   0.279    -.0391924    .1357052
          6  |    .013685   .0500301     0.27   0.784    -.0843786    .1117486
          7  |  -.0163064   .0556166    -0.29   0.769      -.12532    .0927072
          8  |  -.0393977   .0614398    -0.64   0.521    -.1598255    .0810301
          9  |  -.0578305   .0672589    -0.86   0.390    -.1896642    .0740032
         10  |  -.0859125   .0731527    -1.17   0.240    -.2292985    .0574735
         11  |  -.1040742   .0791818    -1.31   0.189    -.2592779    .0511295
         12  |  -.1186244   .0851664    -1.39   0.164    -.2855583    .0483096
         13  |  -.1517181   .0912549    -1.66   0.096    -.3305862      .02715
         14  |  -.1539639   .0973682    -1.58   0.114    -.3448146    .0368868
         15  |  -.1657897   .1035092    -1.60   0.109    -.3686772    .0370979
         16  |  -.1779511   .1099226    -1.62   0.105    -.3934095    .0375073
         17  |  -.1993589   .1162548    -1.71   0.086     -.427229    .0285111
         18  |  -.2080706   .1225716    -1.70   0.090    -.4483223    .0321812
         19  |  -.2341896   .1290804    -1.81   0.070    -.4871991    .0188199
         20  |  -.2843605   .1407062    -2.02   0.043    -.5601576   -.0085633
         25  |  -.3965444   .1630168    -2.43   0.015    -.7160724   -.0770164
         30  |  -.4473346   .2011471    -2.22   0.026    -.8416016   -.0530676
         40  |  -.3043557   .2293987    -1.33   0.185    -.7539984     .145287
         50  |  -.1899226   .2553855    -0.74   0.457    -.6905017    .3106566
             |
       _cons |   4.050983   .0530132    76.41   0.000     3.947072    4.154894
-------------+----------------------------------------------------------------
     sigma_u |  1.7673868
     sigma_e |  .85797005
         rho |  .80928583   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1643415307005062

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    481,405
Group variable: firm_person                     Number of groups  =     58,185

R-sq:                                           Obs per group:
     within  = 0.1643                                         min =          1
     between = 0.0303                                         avg =        8.3
     overall = 0.0559                                         max =         25

                                                F(78,18459)       =      89.11
corr(u_i, Xb)  = -0.0966                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 18,460 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0921936   .0422844     2.18   0.029     .0093122    .1750749
      during |  -.0186341   .0111418    -1.67   0.094    -.0404731    .0032048
       after |  -.0644141   .0202384    -3.18   0.001    -.1040833    -.024745
during_expat |  -.2171317   .0216917   -10.01   0.000    -.2596493    -.174614
 after_expat |  -.3742159    .031466   -11.89   0.000    -.4358923   -.3125396
             |
    ind_year |
          2  |   .1792638   .0320695     5.59   0.000     .1164047    .2421229
          3  |   .8329694   .0392238    21.24   0.000     .7560872    .9098517
          4  |   1.010247   .0444777    22.71   0.000     .9230664    1.097427
          5  |   1.208617   .0488477    24.74   0.000     1.112871    1.304363
          6  |   1.465557   .0535823    27.35   0.000     1.360531    1.570583
          7  |   1.754437   .0585523    29.96   0.000     1.639669    1.869205
          8  |   1.966043   .0635163    30.95   0.000     1.841545    2.090541
          9  |   2.123837   .0684561    31.02   0.000     1.989656    2.258017
         10  |   2.282244   .0740798    30.81   0.000     2.137041    2.427448
         11  |   2.452964    .079298    30.93   0.000     2.297533    2.608396
         12  |   2.523513   .0850548    29.67   0.000     2.356798    2.690228
         13  |   2.607462   .0908177    28.71   0.000     2.429451    2.785473
         14  |    2.63576   .0965536    27.30   0.000     2.446506    2.825014
         15  |   2.623786   .1024451    25.61   0.000     2.422984    2.824588
         16  |   2.681984   .1080166    24.83   0.000     2.470262    2.893707
         17  |   2.717889    .114003    23.84   0.000     2.494432    2.941345
         18  |   2.748462   .1199809    22.91   0.000     2.513288    2.983636
         19  |   2.723473   .1258969    21.63   0.000     2.476703    2.970242
         20  |   2.741968   .1314988    20.85   0.000     2.484218    2.999718
         21  |   2.779938   .1366137    20.35   0.000     2.512162    3.047713
         22  |   2.823871   .1415389    19.95   0.000     2.546442      3.1013
         23  |   2.925488   .1466702    19.95   0.000     2.638001    3.212976
         24  |   2.339306   .1532416    15.27   0.000     2.038939    2.639674
         25  |   2.422885   .1606046    15.09   0.000     2.108085    2.737685
         26  |   .4886357   .0726402     6.73   0.000     .3462543    .6310172
         27  |   .6494305   .0656415     9.89   0.000     .5207671    .7780939
         28  |   .9795491   .0618513    15.84   0.000     .8583149    1.100783
         29  |   1.142226   .0615611    18.55   0.000      1.02156    1.262891
         30  |   1.277624   .0628745    20.32   0.000     1.154384    1.400864
         31  |   1.444628   .0651296    22.18   0.000     1.316968    1.572288
         32  |   1.675011   .0679142    24.66   0.000     1.541893    1.808129
         33  |   1.865528   .0713239    26.16   0.000     1.725726    2.005329
         34  |   1.999594   .0755407    26.47   0.000     1.851527    2.147661
         35  |   2.120746   .0801571    26.46   0.000     1.963631    2.277862
         36  |    2.24271   .0851203    26.35   0.000     2.075866    2.409554
         37  |   2.361126   .0902164    26.17   0.000     2.184294    2.537959
         38  |   2.454895   .0954446    25.72   0.000     2.267815    2.641975
         39  |   2.500994   .1008512    24.80   0.000     2.303317    2.698672
         40  |   2.529302   .1061252    23.83   0.000     2.321286    2.737317
         41  |   2.567013    .111763    22.97   0.000     2.347947    2.786078
         42  |   2.661252   .1175785    22.63   0.000     2.430787    2.891717
         43  |   2.727548   .1236241    22.06   0.000     2.485234    2.969863
         44  |   2.735588   .1297978    21.08   0.000     2.481173    2.990004
         45  |   2.781306   .1351268    20.58   0.000     2.516445    3.046167
         46  |   2.813568   .1405834    20.01   0.000     2.538012    3.089124
         47  |   2.872495   .1451038    19.80   0.000     2.588078    3.156912
         48  |   2.956686   .1501076    19.70   0.000     2.662462    3.250911
         49  |   2.730672   .1568322    17.41   0.000     2.423266    3.038078
         50  |   2.834061   .1625204    17.44   0.000     2.515506    3.152616
             |
     age_cat |
          1  |   .0917037   .0271283     3.38   0.001     .0385298    .1448777
          2  |    .102333   .0308395     3.32   0.001     .0418847    .1627814
          3  |   .0838524   .0349176     2.40   0.016     .0154106    .1522941
          4  |   .0853035   .0395268     2.16   0.031     .0078273    .1627797
          5  |   .0482564   .0446146     1.08   0.279    -.0391924    .1357052
          6  |    .013685   .0500301     0.27   0.784    -.0843786    .1117486
          7  |  -.0163064   .0556166    -0.29   0.769      -.12532    .0927072
          8  |  -.0393977   .0614398    -0.64   0.521    -.1598255    .0810301
          9  |  -.0578305   .0672589    -0.86   0.390    -.1896642    .0740032
         10  |  -.0859125   .0731527    -1.17   0.240    -.2292985    .0574735
         11  |  -.1040742   .0791818    -1.31   0.189    -.2592779    .0511295
         12  |  -.1186244   .0851664    -1.39   0.164    -.2855583    .0483096
         13  |  -.1517181   .0912549    -1.66   0.096    -.3305862      .02715
         14  |  -.1539639   .0973682    -1.58   0.114    -.3448146    .0368868
         15  |  -.1657897   .1035092    -1.60   0.109    -.3686772    .0370979
         16  |  -.1779511   .1099226    -1.62   0.105    -.3934095    .0375073
         17  |  -.1993589   .1162548    -1.71   0.086     -.427229    .0285111
         18  |  -.2080706   .1225716    -1.70   0.090    -.4483223    .0321812
         19  |  -.2341896   .1290804    -1.81   0.070    -.4871991    .0188199
         20  |  -.2843605   .1407062    -2.02   0.043    -.5601576   -.0085633
         25  |  -.3965444   .1630168    -2.43   0.015    -.7160724   -.0770164
         30  |  -.4473346   .2011471    -2.22   0.026    -.8416016   -.0530676
         40  |  -.3043557   .2293987    -1.33   0.185    -.7539984     .145287
         50  |  -.1899226   .2553855    -0.74   0.457    -.6905017    .3106566
             |
       _cons |   4.050983   .0530132    76.41   0.000     3.947072    4.154894
-------------+----------------------------------------------------------------
     sigma_u |  1.7673868
     sigma_e |  .85797005
         rho |  .80928583   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 18459) =    2.80
            Prob > F =    0.0945

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 18459) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 18459) =    9.94
            Prob > F =    0.0016

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 18459) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 18459) =  100.20
            Prob > F =    0.0000

 ( 1)  during_expat = 0

       F(  1, 18459) =  100.20
            Prob > F =    0.0000
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 18459) =   49.42
            Prob > F =    0.0000

 ( 1)  after_expat = 0

       F(  1, 18459) =  141.44
            Prob > F =    0.0000
(1 real change made)
(file output/figure/baseline_lnKL_slope.png written in PNG format)
(sum of wgt is 36,434.9929273352)

Linear regression                               Number of obs     =     99,603
                                                F(50, 6690)       =      65.43
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1686
                                                Root MSE          =     1.5943

                                 (Std. Err. adjusted for 6,691 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .6057084   .0517756    11.70   0.000     .5042118     .707205
       expat |   .0512551   .0576817     0.89   0.374    -.0618193    .1643295
             |
    ind_year |
         27  |   .0768282   .0548506     1.40   0.161    -.0306965    .1843529
         28  |   .3434728   .0601238     5.71   0.000     .2256111    .4613345
         29  |   .4346235   .0623557     6.97   0.000     .3123866    .5568605
         30  |   .5394127   .0641048     8.41   0.000     .4137469    .6650786
         31  |   .6580724   .0657408    10.01   0.000     .5291995    .7869454
         32  |    .859064   .0675077    12.73   0.000     .7267273    .9914007
         33  |   .9954473   .0680677    14.62   0.000      .862013    1.128882
         34  |   1.117434   .0694208    16.10   0.000      .981347    1.253521
         35  |   1.223021   .0702018    17.42   0.000     1.085403    1.360639
         36  |   1.339468   .0717064    18.68   0.000     1.198901    1.480036
         37  |   1.453602    .072793    19.97   0.000     1.310904    1.596299
         38  |   1.563502   .0735129    21.27   0.000     1.419393    1.707611
         39  |   1.617136   .0750279    21.55   0.000     1.470058    1.764215
         40  |   1.613325   .0769968    20.95   0.000     1.462387    1.764264
         41  |   1.651471   .0777612    21.24   0.000     1.499034    1.803907
         42  |   1.689123   .0790892    21.36   0.000     1.534083    1.844163
         43  |   1.730776   .0811514    21.33   0.000     1.571693    1.889858
         44  |   1.746695   .0823261    21.22   0.000      1.58531    1.908081
         45  |   1.738013   .0836371    20.78   0.000     1.574057    1.901968
         46  |   1.737992   .0851794    20.40   0.000     1.571013    1.904971
         47  |   1.743988   .0891097    19.57   0.000     1.569305    1.918672
         48  |   1.856422   .0888141    20.90   0.000     1.682318    2.030526
         49  |   2.201703   .0958555    22.97   0.000     2.013796     2.38961
         50  |    2.34255   .1063891    22.02   0.000     2.133993    2.551106
             |
     age_cat |
          1  |   .3691895   .0655709     5.63   0.000     .2406497    .4977293
          2  |   .5162344   .0677469     7.62   0.000     .3834289    .6490399
          3  |   .6070554   .0689515     8.80   0.000     .4718886    .7422223
          4  |   .7046281   .0710431     9.92   0.000     .5653609    .8438952
          5  |   .7508103   .0725494    10.35   0.000     .6085904    .8930303
          6  |   .7651646   .0738456    10.36   0.000     .6204038    .9099254
          7  |   .7950089   .0750868    10.59   0.000     .6478149    .9422029
          8  |   .8277461   .0764071    10.83   0.000      .677964    .9775283
          9  |   .8677501   .0769998    11.27   0.000      .716806    1.018694
         10  |   .8608541   .0784462    10.97   0.000     .7070745    1.014634
         11  |   .8823849   .0800308    11.03   0.000     .7254991    1.039271
         12  |   .9014132   .0813904    11.08   0.000     .7418621    1.060964
         13  |   .9315521   .0834342    11.17   0.000     .7679943     1.09511
         14  |   .9297754   .0851691    10.92   0.000     .7628168    1.096734
         15  |   .9360218   .0865548    10.81   0.000     .7663469    1.105697
         16  |   .9407727   .0888473    10.59   0.000     .7666038    1.114942
         17  |   .9372498   .0922892    10.16   0.000     .7563336    1.118166
         18  |   .9507065   .0958091     9.92   0.000       .76289    1.138523
         19  |   .9592823   .0976018     9.83   0.000     .7679516    1.150613
         20  |   .9944662   .1034652     9.61   0.000     .7916415    1.197291
         25  |   .8133456   .1300094     6.26   0.000     .5584857    1.068206
         30  |   .3821479   .1865938     2.05   0.041     .0163646    .7479312
         40  |   .1040974   .1468757     0.71   0.479    -.1838258    .3920207
         50  |  -.1206701   .1994577    -0.60   0.545    -.5116707    .2703305
             |
       _cons |   4.025711    .080592    49.95   0.000     3.867725    4.183697
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =     99,603
                                                F(50, 6690)       =      65.43
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1686
                                                Root MSE          =     1.5943

                                 (Std. Err. adjusted for 6,691 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .6057084   .0517756    11.70   0.000     .5042118     .707205
       expat |   .0512551   .0576817     0.89   0.374    -.0618193    .1643295
             |
    ind_year |
         27  |   .0768282   .0548506     1.40   0.161    -.0306965    .1843529
         28  |   .3434728   .0601238     5.71   0.000     .2256111    .4613345
         29  |   .4346235   .0623557     6.97   0.000     .3123866    .5568605
         30  |   .5394127   .0641048     8.41   0.000     .4137469    .6650786
         31  |   .6580724   .0657408    10.01   0.000     .5291995    .7869454
         32  |    .859064   .0675077    12.73   0.000     .7267273    .9914007
         33  |   .9954473   .0680677    14.62   0.000      .862013    1.128882
         34  |   1.117434   .0694208    16.10   0.000      .981347    1.253521
         35  |   1.223021   .0702018    17.42   0.000     1.085403    1.360639
         36  |   1.339468   .0717064    18.68   0.000     1.198901    1.480036
         37  |   1.453602    .072793    19.97   0.000     1.310904    1.596299
         38  |   1.563502   .0735129    21.27   0.000     1.419393    1.707611
         39  |   1.617136   .0750279    21.55   0.000     1.470058    1.764215
         40  |   1.613325   .0769968    20.95   0.000     1.462387    1.764264
         41  |   1.651471   .0777612    21.24   0.000     1.499034    1.803907
         42  |   1.689123   .0790892    21.36   0.000     1.534083    1.844163
         43  |   1.730776   .0811514    21.33   0.000     1.571693    1.889858
         44  |   1.746695   .0823261    21.22   0.000      1.58531    1.908081
         45  |   1.738013   .0836371    20.78   0.000     1.574057    1.901968
         46  |   1.737992   .0851794    20.40   0.000     1.571013    1.904971
         47  |   1.743988   .0891097    19.57   0.000     1.569305    1.918672
         48  |   1.856422   .0888141    20.90   0.000     1.682318    2.030526
         49  |   2.201703   .0958555    22.97   0.000     2.013796     2.38961
         50  |    2.34255   .1063891    22.02   0.000     2.133993    2.551106
             |
     age_cat |
          1  |   .3691895   .0655709     5.63   0.000     .2406497    .4977293
          2  |   .5162344   .0677469     7.62   0.000     .3834289    .6490399
          3  |   .6070554   .0689515     8.80   0.000     .4718886    .7422223
          4  |   .7046281   .0710431     9.92   0.000     .5653609    .8438952
          5  |   .7508103   .0725494    10.35   0.000     .6085904    .8930303
          6  |   .7651646   .0738456    10.36   0.000     .6204038    .9099254
          7  |   .7950089   .0750868    10.59   0.000     .6478149    .9422029
          8  |   .8277461   .0764071    10.83   0.000      .677964    .9775283
          9  |   .8677501   .0769998    11.27   0.000      .716806    1.018694
         10  |   .8608541   .0784462    10.97   0.000     .7070745    1.014634
         11  |   .8823849   .0800308    11.03   0.000     .7254991    1.039271
         12  |   .9014132   .0813904    11.08   0.000     .7418621    1.060964
         13  |   .9315521   .0834342    11.17   0.000     .7679943     1.09511
         14  |   .9297754   .0851691    10.92   0.000     .7628168    1.096734
         15  |   .9360218   .0865548    10.81   0.000     .7663469    1.105697
         16  |   .9407727   .0888473    10.59   0.000     .7666038    1.114942
         17  |   .9372498   .0922892    10.16   0.000     .7563336    1.118166
         18  |   .9507065   .0958091     9.92   0.000       .76289    1.138523
         19  |   .9592823   .0976018     9.83   0.000     .7679516    1.150613
         20  |   .9944662   .1034652     9.61   0.000     .7916415    1.197291
         25  |   .8133456   .1300094     6.26   0.000     .5584857    1.068206
         30  |   .3821479   .1865938     2.05   0.041     .0163646    .7479312
         40  |   .1040974   .1468757     0.71   0.479    -.1838258    .3920207
         50  |  -.1206701   .1994577    -0.60   0.545    -.5116707    .2703305
             |
       _cons |   4.025711    .080592    49.95   0.000     3.867725    4.183697
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =     99,603
Group variable: id                              Number of groups  =      6,691

R-sq:                                           Obs per group:
     within  = 0.1627                                         min =          1
     between = 0.1285                                         avg =       14.9
     overall = 0.1083                                         max =        116

                                                F(50,6690)        =      34.58
corr(u_i, Xb)  = 0.1045                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,691 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .1092389   .0807356     1.35   0.176    -.0490287    .2675065
       expat |   .0171836    .017329     0.99   0.321    -.0167868     .051154
             |
    ind_year |
         27  |   .1267355   .0461883     2.74   0.006     .0361917    .2172793
         28  |   .3921924   .0548761     7.15   0.000     .2846177    .4997671
         29  |   .4812718   .0643766     7.48   0.000     .3550731    .6074706
         30  |    .564846   .0746819     7.56   0.000     .4184457    .7112463
         31  |   .6837815   .0848716     8.06   0.000     .5174061    .8501569
         32  |   .8698254   .0957162     9.09   0.000     .6821912     1.05746
         33  |   1.011247   .1061854     9.52   0.000     .8030896    1.219404
         34  |   1.093224   .1171416     9.33   0.000     .8635886    1.322858
         35  |    1.17641   .1277057     9.21   0.000     .9260658    1.426753
         36  |   1.242751   .1391713     8.93   0.000     .9699309    1.515571
         37  |   1.301598   .1502022     8.67   0.000     1.007154    1.596043
         38  |   1.356796    .161027     8.43   0.000     1.041132     1.67246
         39  |   1.353594   .1724342     7.85   0.000     1.015568     1.69162
         40  |   1.327425   .1837004     7.23   0.000     .9673135    1.687536
         41  |    1.32791    .195361     6.80   0.000     .9449403     1.71088
         42  |   1.365047   .2074441     6.58   0.000     .9583909    1.771704
         43  |   1.380403   .2195664     6.29   0.000     .9499827    1.810823
         44  |    1.35064   .2317472     5.83   0.000     .8963421    1.804939
         45  |   1.338244   .2427945     5.51   0.000     .8622895    1.814199
         46  |   1.329801    .253731     5.24   0.000      .832407    1.827194
         47  |   1.364416   .2622384     5.20   0.000     .8503453    1.878487
         48  |   1.410376   .2724644     5.18   0.000     .8762587    1.944493
         49  |   1.142238   .2846793     4.01   0.000     .5841759      1.7003
         50  |   1.215378   .2948933     4.12   0.000     .6372927    1.793462
             |
     age_cat |
          1  |   .2006022   .0509199     3.94   0.000     .1007831    .3004213
          2  |   .2683017   .0578686     4.64   0.000     .1548608    .3817426
          3  |   .3024378   .0652661     4.63   0.000     .1744954    .4303803
          4  |   .3486639   .0744923     4.68   0.000     .2026352    .4946926
          5  |    .348509   .0841251     4.14   0.000      .183597    .5134209
          6  |   .3637007   .0943713     3.85   0.000     .1787028    .5486986
          7  |    .377897   .1051591     3.59   0.000     .1717518    .5840423
          8  |   .3940643    .115823     3.40   0.001     .1670143    .6211144
          9  |   .4317118   .1267023     3.41   0.001     .1833349    .6800887
         10  |   .4282635   .1379244     3.11   0.002     .1578878    .6986393
         11  |   .4599867   .1491743     3.08   0.002     .1675576    .7524159
         12  |   .4928938   .1606328     3.07   0.002     .1780023    .8077853
         13  |   .5137505   .1720846     2.99   0.003     .1764099    .8510911
         14  |   .5493498   .1834627     2.99   0.003     .1897044    .9089952
         15  |   .5719246   .1952282     2.93   0.003     .1892151     .954634
         16  |   .5948316   .2073624     2.87   0.004     .1883352    1.001328
         17  |   .6140647   .2196057     2.80   0.005     .1835675    1.044562
         18  |   .6483773   .2320189     2.79   0.005     .1935462    1.103208
         19  |   .6774568   .2443216     2.77   0.006     .1985086    1.156405
         20  |   .7276865   .2680373     2.71   0.007      .202248    1.253125
         25  |    .822243   .3125763     2.63   0.009     .2094939    1.434992
         30  |   .8098946   .3815683     2.12   0.034     .0618991     1.55789
         40  |   .8784589   .4780996     1.84   0.066    -.0587687    1.815687
         50  |   .8205455   .5507725     1.49   0.136    -.2591442    1.900235
             |
       _cons |   4.712906   .0779596    60.45   0.000     4.560081    4.865732
-------------+----------------------------------------------------------------
     sigma_u |   1.706908
     sigma_e |  .79904391
         rho |  .82025055   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1627205432041879

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =     99,603
Group variable: id                              Number of groups  =      6,691

R-sq:                                           Obs per group:
     within  = 0.1627                                         min =          1
     between = 0.1285                                         avg =       14.9
     overall = 0.1083                                         max =        116

                                                F(50,6690)        =      34.58
corr(u_i, Xb)  = 0.1045                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,691 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .1092389   .0807356     1.35   0.176    -.0490287    .2675065
       expat |   .0171836    .017329     0.99   0.321    -.0167868     .051154
             |
    ind_year |
         27  |   .1267355   .0461883     2.74   0.006     .0361917    .2172793
         28  |   .3921924   .0548761     7.15   0.000     .2846177    .4997671
         29  |   .4812718   .0643766     7.48   0.000     .3550731    .6074706
         30  |    .564846   .0746819     7.56   0.000     .4184457    .7112463
         31  |   .6837815   .0848716     8.06   0.000     .5174061    .8501569
         32  |   .8698254   .0957162     9.09   0.000     .6821912     1.05746
         33  |   1.011247   .1061854     9.52   0.000     .8030896    1.219404
         34  |   1.093224   .1171416     9.33   0.000     .8635886    1.322858
         35  |    1.17641   .1277057     9.21   0.000     .9260658    1.426753
         36  |   1.242751   .1391713     8.93   0.000     .9699309    1.515571
         37  |   1.301598   .1502022     8.67   0.000     1.007154    1.596043
         38  |   1.356796    .161027     8.43   0.000     1.041132     1.67246
         39  |   1.353594   .1724342     7.85   0.000     1.015568     1.69162
         40  |   1.327425   .1837004     7.23   0.000     .9673135    1.687536
         41  |    1.32791    .195361     6.80   0.000     .9449403     1.71088
         42  |   1.365047   .2074441     6.58   0.000     .9583909    1.771704
         43  |   1.380403   .2195664     6.29   0.000     .9499827    1.810823
         44  |    1.35064   .2317472     5.83   0.000     .8963421    1.804939
         45  |   1.338244   .2427945     5.51   0.000     .8622895    1.814199
         46  |   1.329801    .253731     5.24   0.000      .832407    1.827194
         47  |   1.364416   .2622384     5.20   0.000     .8503453    1.878487
         48  |   1.410376   .2724644     5.18   0.000     .8762587    1.944493
         49  |   1.142238   .2846793     4.01   0.000     .5841759      1.7003
         50  |   1.215378   .2948933     4.12   0.000     .6372927    1.793462
             |
     age_cat |
          1  |   .2006022   .0509199     3.94   0.000     .1007831    .3004213
          2  |   .2683017   .0578686     4.64   0.000     .1548608    .3817426
          3  |   .3024378   .0652661     4.63   0.000     .1744954    .4303803
          4  |   .3486639   .0744923     4.68   0.000     .2026352    .4946926
          5  |    .348509   .0841251     4.14   0.000      .183597    .5134209
          6  |   .3637007   .0943713     3.85   0.000     .1787028    .5486986
          7  |    .377897   .1051591     3.59   0.000     .1717518    .5840423
          8  |   .3940643    .115823     3.40   0.001     .1670143    .6211144
          9  |   .4317118   .1267023     3.41   0.001     .1833349    .6800887
         10  |   .4282635   .1379244     3.11   0.002     .1578878    .6986393
         11  |   .4599867   .1491743     3.08   0.002     .1675576    .7524159
         12  |   .4928938   .1606328     3.07   0.002     .1780023    .8077853
         13  |   .5137505   .1720846     2.99   0.003     .1764099    .8510911
         14  |   .5493498   .1834627     2.99   0.003     .1897044    .9089952
         15  |   .5719246   .1952282     2.93   0.003     .1892151     .954634
         16  |   .5948316   .2073624     2.87   0.004     .1883352    1.001328
         17  |   .6140647   .2196057     2.80   0.005     .1835675    1.044562
         18  |   .6483773   .2320189     2.79   0.005     .1935462    1.103208
         19  |   .6774568   .2443216     2.77   0.006     .1985086    1.156405
         20  |   .7276865   .2680373     2.71   0.007      .202248    1.253125
         25  |    .822243   .3125763     2.63   0.009     .2094939    1.434992
         30  |   .8098946   .3815683     2.12   0.034     .0618991     1.55789
         40  |   .8784589   .4780996     1.84   0.066    -.0587687    1.815687
         50  |   .8205455   .5507725     1.49   0.136    -.2591442    1.900235
             |
       _cons |   4.712906   .0779596    60.45   0.000     4.560081    4.865732
-------------+----------------------------------------------------------------
     sigma_u |   1.706908
     sigma_e |  .79904391
         rho |  .82025055   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    167951
Group variable: firm_person                     Number of groups   =     21248

R-sq:  within  = 0.1354                         Obs per group: min =         1
       between = 0.0863                                        avg =       7.9
       overall = 0.0847                                        max =        25

                                                F(53,6690)         =     32.56
corr(u_i, Xb)  = 0.0534                         Prob > F           =    0.0000

                                 (Std. Err. adjusted for 6,691 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0926871   .0753742     1.23   0.219    -.0550702    .2404445
      during |  -.0067157   .0191603    -0.35   0.726     -.044276    .0308447
       after |   -.031581   .0336686    -0.94   0.348    -.0975822    .0344203
during_expat |  -.1401964   .0296155    -4.73   0.000    -.1982521   -.0821406
 after_expat |  -.2234669   .0440806    -5.07   0.000    -.3098789   -.1370548
             |
    ind_year |
         27  |   .1232457   .0427988     2.88   0.004     .0393465     .207145
         28  |   .3976822   .0507728     7.83   0.000     .2981514     .497213
         29  |   .5060776   .0602383     8.40   0.000     .3879914    .6241637
         30  |   .5890666   .0697704     8.44   0.000     .4522944    .7258387
         31  |    .710068   .0793653     8.95   0.000     .5544867    .8656494
         32  |   .8995863   .0896237    10.04   0.000     .7238953    1.075277
         33  |   1.047224   .0993863    10.54   0.000     .8523954    1.242053
         34  |   1.135887   .1095317    10.37   0.000     .9211704    1.350604
         35  |   1.217468    .119481    10.19   0.000     .9832474    1.451689
         36  |   1.286244   .1300463     9.89   0.000     1.031312    1.541177
         37  |   1.355599   .1403158     9.66   0.000     1.080536    1.630663
         38  |   1.404506   .1504514     9.34   0.000     1.109573    1.699439
         39  |   1.412096   .1610103     8.77   0.000     1.096464    1.727727
         40  |   1.399429   .1712634     8.17   0.000     1.063698     1.73516
         41  |   1.399915    .181653     7.71   0.000     1.043817    1.756012
         42  |    1.45591   .1927153     7.55   0.000     1.078127    1.833693
         43  |   1.480279   .2037738     7.26   0.000     1.080818    1.879741
         44  |   1.450636    .214833     6.75   0.000     1.029495    1.871777
         45  |   1.451191   .2245216     6.46   0.000     1.011057    1.891325
         46  |   1.438496   .2342557     6.14   0.000     .9792797    1.897711
         47  |   1.484591   .2420335     6.13   0.000     1.010128    1.959054
         48  |   1.525988   .2511827     6.08   0.000     1.033589    2.018386
         49  |   1.253863   .2621455     4.78   0.000     .7399748    1.767752
         50  |   1.321549   .2711052     4.87   0.000     .7900963    1.853001
             |
     age_cat |
          1  |   .1762738   .0474547     3.71   0.000     .0832475       .2693
          2  |   .2385531   .0542959     4.39   0.000     .1321158    .3449903
          3  |   .2671562   .0610321     4.38   0.000     .1475139    .3867986
          4  |    .314904   .0694184     4.54   0.000     .1788217    .4509863
          5  |   .3063215   .0782839     3.91   0.000     .1528601     .459783
          6  |   .3173376   .0876841     3.62   0.000     .1454488    .4892264
          7  |   .3243513   .0975644     3.32   0.001     .1330939    .5156087
          8  |   .3424387   .1073114     3.19   0.001      .132074    .5528033
          9  |   .3691754   .1172042     3.15   0.002     .1394179    .5989329
         10  |   .3652061   .1274437     2.87   0.004     .1153758    .6150363
         11  |   .3865865   .1377299     2.81   0.005      .116592     .656581
         12  |   .4197338    .148224     2.83   0.005     .1291675    .7103001
         13  |   .4311985   .1586689     2.72   0.007      .120157    .7422401
         14  |   .4733484   .1690779     2.80   0.005     .1419019    .8047949
         15  |    .486281   .1797122     2.71   0.007     .1339878    .8385742
         16  |   .4969614   .1906292     2.61   0.009     .1232675    .8706554
         17  |   .5039414   .2016988     2.50   0.012     .1085476    .8993353
         18  |   .5381847   .2127911     2.53   0.011     .1210463    .9553231
         19  |   .5786054   .2238543     2.58   0.010     .1397796    1.017431
         20  |   .6251994   .2441344     2.56   0.010     .1466183    1.103781
         25  |   .6879196   .2815337     2.44   0.015     .1360238    1.239815
         30  |   .6978243   .3477804     2.01   0.045      .016064    1.379585
         40  |   .7447565   .4321613     1.72   0.085    -.1024173     1.59193
         50  |    .702799   .4817743     1.46   0.145    -.2416321     1.64723
             |
       _cons |    4.80655    .074993    64.09   0.000      4.65954     4.95356
-------------+----------------------------------------------------------------
     sigma_u |  1.6828132
     sigma_e |  .80159315
         rho |  .81506177   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1354026530140864

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    167,951
Group variable: firm_person                     Number of groups  =     21,248

R-sq:                                           Obs per group:
     within  = 0.1354                                         min =          1
     between = 0.0863                                         avg =        7.9
     overall = 0.0847                                         max =         25

                                                F(53,6690)        =      32.56
corr(u_i, Xb)  = 0.0534                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 6,691 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0926871   .0753742     1.23   0.219    -.0550702    .2404445
      during |  -.0067157   .0191603    -0.35   0.726     -.044276    .0308447
       after |   -.031581   .0336686    -0.94   0.348    -.0975822    .0344203
during_expat |  -.1401964   .0296155    -4.73   0.000    -.1982521   -.0821406
 after_expat |  -.2234669   .0440806    -5.07   0.000    -.3098789   -.1370548
             |
    ind_year |
         27  |   .1232457   .0427988     2.88   0.004     .0393465     .207145
         28  |   .3976822   .0507728     7.83   0.000     .2981514     .497213
         29  |   .5060776   .0602383     8.40   0.000     .3879914    .6241637
         30  |   .5890666   .0697704     8.44   0.000     .4522944    .7258387
         31  |    .710068   .0793653     8.95   0.000     .5544867    .8656494
         32  |   .8995863   .0896237    10.04   0.000     .7238953    1.075277
         33  |   1.047224   .0993863    10.54   0.000     .8523954    1.242053
         34  |   1.135887   .1095317    10.37   0.000     .9211704    1.350604
         35  |   1.217468    .119481    10.19   0.000     .9832474    1.451689
         36  |   1.286244   .1300463     9.89   0.000     1.031312    1.541177
         37  |   1.355599   .1403158     9.66   0.000     1.080536    1.630663
         38  |   1.404506   .1504514     9.34   0.000     1.109573    1.699439
         39  |   1.412096   .1610103     8.77   0.000     1.096464    1.727727
         40  |   1.399429   .1712634     8.17   0.000     1.063698     1.73516
         41  |   1.399915    .181653     7.71   0.000     1.043817    1.756012
         42  |    1.45591   .1927153     7.55   0.000     1.078127    1.833693
         43  |   1.480279   .2037738     7.26   0.000     1.080818    1.879741
         44  |   1.450636    .214833     6.75   0.000     1.029495    1.871777
         45  |   1.451191   .2245216     6.46   0.000     1.011057    1.891325
         46  |   1.438496   .2342557     6.14   0.000     .9792797    1.897711
         47  |   1.484591   .2420335     6.13   0.000     1.010128    1.959054
         48  |   1.525988   .2511827     6.08   0.000     1.033589    2.018386
         49  |   1.253863   .2621455     4.78   0.000     .7399748    1.767752
         50  |   1.321549   .2711052     4.87   0.000     .7900963    1.853001
             |
     age_cat |
          1  |   .1762738   .0474547     3.71   0.000     .0832475       .2693
          2  |   .2385531   .0542959     4.39   0.000     .1321158    .3449903
          3  |   .2671562   .0610321     4.38   0.000     .1475139    .3867986
          4  |    .314904   .0694184     4.54   0.000     .1788217    .4509863
          5  |   .3063215   .0782839     3.91   0.000     .1528601     .459783
          6  |   .3173376   .0876841     3.62   0.000     .1454488    .4892264
          7  |   .3243513   .0975644     3.32   0.001     .1330939    .5156087
          8  |   .3424387   .1073114     3.19   0.001      .132074    .5528033
          9  |   .3691754   .1172042     3.15   0.002     .1394179    .5989329
         10  |   .3652061   .1274437     2.87   0.004     .1153758    .6150363
         11  |   .3865865   .1377299     2.81   0.005      .116592     .656581
         12  |   .4197338    .148224     2.83   0.005     .1291675    .7103001
         13  |   .4311985   .1586689     2.72   0.007      .120157    .7422401
         14  |   .4733484   .1690779     2.80   0.005     .1419019    .8047949
         15  |    .486281   .1797122     2.71   0.007     .1339878    .8385742
         16  |   .4969614   .1906292     2.61   0.009     .1232675    .8706554
         17  |   .5039414   .2016988     2.50   0.012     .1085476    .8993353
         18  |   .5381847   .2127911     2.53   0.011     .1210463    .9553231
         19  |   .5786054   .2238543     2.58   0.010     .1397796    1.017431
         20  |   .6251994   .2441344     2.56   0.010     .1466183    1.103781
         25  |   .6879196   .2815337     2.44   0.015     .1360238    1.239815
         30  |   .6978243   .3477804     2.01   0.045      .016064    1.379585
         40  |   .7447565   .4321613     1.72   0.085    -.1024173     1.59193
         50  |    .702799   .4817743     1.46   0.145    -.2416321     1.64723
             |
       _cons |    4.80655    .074993    64.09   0.000      4.65954     4.95356
-------------+----------------------------------------------------------------
     sigma_u |  1.6828132
     sigma_e |  .80159315
         rho |  .81506177   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1,  6690) =    0.12
            Prob > F =    0.7260

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  6690) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1,  6690) =    1.05
            Prob > F =    0.3047

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  6690) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1,  6690) =   22.41
            Prob > F =    0.0000

 ( 1)  during_expat = 0

       F(  1,  6690) =   22.41
            Prob > F =    0.0000
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1,  6690) =    6.51
            Prob > F =    0.0107

 ( 1)  after_expat = 0

       F(  1,  6690) =   25.70
            Prob > F =    0.0000
(1 real change made)
(file output/figure/manufacturing_lnKL_slope.png written in PNG format)
(sum of wgt is 87,967.9736037776)

Linear regression                               Number of obs     =    211,868
                                                F(75, 14473)      =     128.27
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1650
                                                Root MSE          =      1.604

                                (Std. Err. adjusted for 14,474 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .4801049   .0474505    10.12   0.000     .3870959    .5731139
       expat |   .1361776   .0707174     1.93   0.054    -.0024376    .2747928
             |
    ind_year |
          2  |   .1642941   .0412783     3.98   0.000     .0833833    .2452049
          3  |   .8242584   .0444746    18.53   0.000     .7370825    .9114344
          4  |   1.008754   .0479417    21.04   0.000     .9147819    1.102726
          5  |    1.14035   .0480797    23.72   0.000     1.046107    1.234592
          6  |   1.404432   .0491179    28.59   0.000     1.308155    1.500709
          7  |   1.610712   .0496325    32.45   0.000     1.513426    1.707998
          8  |    1.77396   .0499551    35.51   0.000     1.676042    1.871878
          9  |   1.901528   .0495571    38.37   0.000      1.80439    1.998666
         10  |   2.033705   .0499068    40.75   0.000     1.935882    2.131529
         11  |   2.124503   .0502773    42.26   0.000     2.025953    2.223053
         12  |    2.15232   .0506889    42.46   0.000     2.052963    2.251677
         13  |   2.162025    .050979    42.41   0.000     2.062099     2.26195
         14  |   2.120708   .0516049    41.10   0.000     2.019556     2.22186
         15  |   2.075889   .0521804    39.78   0.000     1.973609    2.178169
         16  |    2.09929   .0526606    39.86   0.000     1.996068    2.202511
         17  |   2.071515   .0532598    38.89   0.000     1.967119    2.175911
         18  |    2.05612   .0542955    37.87   0.000     1.949693    2.162546
         19  |   2.012181   .0543012    37.06   0.000     1.905743    2.118618
         20  |   1.943782   .0551757    35.23   0.000     1.835631    2.051934
         21  |   1.938636   .0566965    34.19   0.000     1.827504    2.049768
         22  |   1.930962   .0575939    33.53   0.000     1.818071    2.043853
         23  |   1.970619   .0581007    33.92   0.000     1.856735    2.084504
         24  |   2.235519   .0736689    30.35   0.000     2.091119     2.37992
         25  |   2.356845    .085379    27.60   0.000     2.189491    2.524199
         26  |   .6026711   .0734628     8.20   0.000     .4586746    .7466677
         27  |    .712176   .0643848    11.06   0.000     .5859736    .8383784
         28  |    .987885   .0615539    16.05   0.000     .8672316    1.108539
         29  |   1.088401   .0589445    18.46   0.000     .9728626     1.20394
         30  |    1.19802    .058038    20.64   0.000     1.084258    1.311781
         31  |   1.323799   .0567173    23.34   0.000     1.212626    1.434972
         32  |   1.520457   .0561016    27.10   0.000     1.410491    1.630423
         33  |   1.610217   .0557637    28.88   0.000     1.500913    1.719521
         34  |   1.723033   .0557233    30.92   0.000     1.613808    1.832257
         35  |   1.837457    .056766    32.37   0.000     1.726188    1.948725
         36  |   1.963757   .0571967    34.33   0.000     1.851645     2.07587
         37  |   2.073955   .0578184    35.87   0.000     1.960624    2.187287
         38  |   2.141664   .0574522    37.28   0.000      2.02905    2.254278
         39  |   2.155087   .0584546    36.87   0.000     2.040509    2.269666
         40  |   2.121022   .0604677    35.08   0.000     2.002498    2.239547
         41  |    2.14873   .0613603    35.02   0.000     2.028456    2.269004
         42  |    2.17171   .0606248    35.82   0.000     2.052877    2.290542
         43  |   2.206217   .0626726    35.20   0.000     2.083371    2.329063
         44  |   2.193656   .0634666    34.56   0.000     2.069253    2.318058
         45  |   2.202445   .0632719    34.81   0.000     2.078424    2.326466
         46  |   2.190489   .0645181    33.95   0.000     2.064026    2.316953
         47  |   2.203393   .0673395    32.72   0.000     2.071399    2.335387
         48  |   2.298952   .0671871    34.22   0.000     2.167257    2.430647
         49  |   2.710722   .0799012    33.93   0.000     2.554105    2.867338
         50  |   2.850414   .0940297    30.31   0.000     2.666104    3.034725
             |
     age_cat |
          1  |   .1526107   .0407378     3.75   0.000     .0727593    .2324621
          2  |   .3271841   .0426277     7.68   0.000     .2436284    .4107398
          3  |   .4655065   .0435405    10.69   0.000     .3801615    .5508516
          4  |   .6242246   .0442962    14.09   0.000     .5373984    .7110508
          5  |   .7034176    .045084    15.60   0.000     .6150472     .791788
          6  |   .7536685   .0460097    16.38   0.000     .6634837    .8438533
          7  |   .8138217   .0466742    17.44   0.000     .7223343     .905309
          8  |     .89337   .0473122    18.88   0.000     .8006321     .986108
          9  |   .9533724   .0479837    19.87   0.000     .8593183    1.047427
         10  |    .989048   .0488259    20.26   0.000      .893343    1.084753
         11  |   1.038939   .0497342    20.89   0.000     .9414532    1.136424
         12  |   1.090092   .0503679    21.64   0.000     .9913649     1.18882
         13  |   1.123877   .0517409    21.72   0.000     1.022458    1.225296
         14  |   1.178409   .0528477    22.30   0.000     1.074821    1.281997
         15  |   1.199453   .0540135    22.21   0.000      1.09358    1.305327
         16  |   1.225181   .0553881    22.12   0.000     1.116613    1.333749
         17  |   1.236678   .0569738    21.71   0.000     1.125002    1.348354
         18  |   1.276959   .0585075    21.83   0.000     1.162277    1.391641
         19  |   1.291443   .0599495    21.54   0.000     1.173934    1.408951
         20  |   1.309171   .0633741    20.66   0.000     1.184949    1.433392
         25  |   1.004958   .0905757    11.10   0.000     .8274177    1.182498
         30  |   1.152272   .0964573    11.95   0.000     .9632034    1.341341
         40  |   .9771805   .0985207     9.92   0.000     .7840673    1.170294
         50  |   .8577505   .1210964     7.08   0.000      .620386    1.095115
             |
       _cons |   3.416225   .0553333    61.74   0.000     3.307765    3.524686
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    211,868
                                                F(75, 14473)      =     128.27
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1650
                                                Root MSE          =      1.604

                                (Std. Err. adjusted for 14,474 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .4801049   .0474505    10.12   0.000     .3870959    .5731139
       expat |   .1361776   .0707174     1.93   0.054    -.0024376    .2747928
             |
    ind_year |
          2  |   .1642941   .0412783     3.98   0.000     .0833833    .2452049
          3  |   .8242584   .0444746    18.53   0.000     .7370825    .9114344
          4  |   1.008754   .0479417    21.04   0.000     .9147819    1.102726
          5  |    1.14035   .0480797    23.72   0.000     1.046107    1.234592
          6  |   1.404432   .0491179    28.59   0.000     1.308155    1.500709
          7  |   1.610712   .0496325    32.45   0.000     1.513426    1.707998
          8  |    1.77396   .0499551    35.51   0.000     1.676042    1.871878
          9  |   1.901528   .0495571    38.37   0.000      1.80439    1.998666
         10  |   2.033705   .0499068    40.75   0.000     1.935882    2.131529
         11  |   2.124503   .0502773    42.26   0.000     2.025953    2.223053
         12  |    2.15232   .0506889    42.46   0.000     2.052963    2.251677
         13  |   2.162025    .050979    42.41   0.000     2.062099     2.26195
         14  |   2.120708   .0516049    41.10   0.000     2.019556     2.22186
         15  |   2.075889   .0521804    39.78   0.000     1.973609    2.178169
         16  |    2.09929   .0526606    39.86   0.000     1.996068    2.202511
         17  |   2.071515   .0532598    38.89   0.000     1.967119    2.175911
         18  |    2.05612   .0542955    37.87   0.000     1.949693    2.162546
         19  |   2.012181   .0543012    37.06   0.000     1.905743    2.118618
         20  |   1.943782   .0551757    35.23   0.000     1.835631    2.051934
         21  |   1.938636   .0566965    34.19   0.000     1.827504    2.049768
         22  |   1.930962   .0575939    33.53   0.000     1.818071    2.043853
         23  |   1.970619   .0581007    33.92   0.000     1.856735    2.084504
         24  |   2.235519   .0736689    30.35   0.000     2.091119     2.37992
         25  |   2.356845    .085379    27.60   0.000     2.189491    2.524199
         26  |   .6026711   .0734628     8.20   0.000     .4586746    .7466677
         27  |    .712176   .0643848    11.06   0.000     .5859736    .8383784
         28  |    .987885   .0615539    16.05   0.000     .8672316    1.108539
         29  |   1.088401   .0589445    18.46   0.000     .9728626     1.20394
         30  |    1.19802    .058038    20.64   0.000     1.084258    1.311781
         31  |   1.323799   .0567173    23.34   0.000     1.212626    1.434972
         32  |   1.520457   .0561016    27.10   0.000     1.410491    1.630423
         33  |   1.610217   .0557637    28.88   0.000     1.500913    1.719521
         34  |   1.723033   .0557233    30.92   0.000     1.613808    1.832257
         35  |   1.837457    .056766    32.37   0.000     1.726188    1.948725
         36  |   1.963757   .0571967    34.33   0.000     1.851645     2.07587
         37  |   2.073955   .0578184    35.87   0.000     1.960624    2.187287
         38  |   2.141664   .0574522    37.28   0.000      2.02905    2.254278
         39  |   2.155087   .0584546    36.87   0.000     2.040509    2.269666
         40  |   2.121022   .0604677    35.08   0.000     2.002498    2.239547
         41  |    2.14873   .0613603    35.02   0.000     2.028456    2.269004
         42  |    2.17171   .0606248    35.82   0.000     2.052877    2.290542
         43  |   2.206217   .0626726    35.20   0.000     2.083371    2.329063
         44  |   2.193656   .0634666    34.56   0.000     2.069253    2.318058
         45  |   2.202445   .0632719    34.81   0.000     2.078424    2.326466
         46  |   2.190489   .0645181    33.95   0.000     2.064026    2.316953
         47  |   2.203393   .0673395    32.72   0.000     2.071399    2.335387
         48  |   2.298952   .0671871    34.22   0.000     2.167257    2.430647
         49  |   2.710722   .0799012    33.93   0.000     2.554105    2.867338
         50  |   2.850414   .0940297    30.31   0.000     2.666104    3.034725
             |
     age_cat |
          1  |   .1526107   .0407378     3.75   0.000     .0727593    .2324621
          2  |   .3271841   .0426277     7.68   0.000     .2436284    .4107398
          3  |   .4655065   .0435405    10.69   0.000     .3801615    .5508516
          4  |   .6242246   .0442962    14.09   0.000     .5373984    .7110508
          5  |   .7034176    .045084    15.60   0.000     .6150472     .791788
          6  |   .7536685   .0460097    16.38   0.000     .6634837    .8438533
          7  |   .8138217   .0466742    17.44   0.000     .7223343     .905309
          8  |     .89337   .0473122    18.88   0.000     .8006321     .986108
          9  |   .9533724   .0479837    19.87   0.000     .8593183    1.047427
         10  |    .989048   .0488259    20.26   0.000      .893343    1.084753
         11  |   1.038939   .0497342    20.89   0.000     .9414532    1.136424
         12  |   1.090092   .0503679    21.64   0.000     .9913649     1.18882
         13  |   1.123877   .0517409    21.72   0.000     1.022458    1.225296
         14  |   1.178409   .0528477    22.30   0.000     1.074821    1.281997
         15  |   1.199453   .0540135    22.21   0.000      1.09358    1.305327
         16  |   1.225181   .0553881    22.12   0.000     1.116613    1.333749
         17  |   1.236678   .0569738    21.71   0.000     1.125002    1.348354
         18  |   1.276959   .0585075    21.83   0.000     1.162277    1.391641
         19  |   1.291443   .0599495    21.54   0.000     1.173934    1.408951
         20  |   1.309171   .0633741    20.66   0.000     1.184949    1.433392
         25  |   1.004958   .0905757    11.10   0.000     .8274177    1.182498
         30  |   1.152272   .0964573    11.95   0.000     .9632034    1.341341
         40  |   .9771805   .0985207     9.92   0.000     .7840673    1.170294
         50  |   .8577505   .1210964     7.08   0.000      .620386    1.095115
             |
       _cons |   3.416225   .0553333    61.74   0.000     3.307765    3.524686
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    211,868
Group variable: id                              Number of groups  =     14,474

R-sq:                                           Obs per group:
     within  = 0.2267                                         min =          1
     between = 0.0626                                         avg =       14.6
     overall = 0.1076                                         max =        140

                                                F(75,14473)       =      87.05
corr(u_i, Xb)  = -0.0084                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,474 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0235111   .0567309    -0.41   0.679    -.1347109    .0876887
       expat |   .0228322   .0316674     0.72   0.471    -.0392398    .0849043
             |
    ind_year |
          2  |   .1663935   .0377895     4.40   0.000     .0923213    .2404658
          3  |   .8257711   .0455146    18.14   0.000     .7365566    .9149856
          4  |   .9980015   .0507685    19.66   0.000     .8984888    1.097514
          5  |   1.161968   .0550613    21.10   0.000      1.05404    1.269895
          6  |   1.415669   .0592863    23.88   0.000      1.29946    1.531878
          7  |   1.705303   .0642458    26.54   0.000     1.579373    1.831233
          8  |    1.91826   .0691782    27.73   0.000     1.782662    2.053858
          9  |   2.059775   .0743037    27.72   0.000      1.91413     2.20542
         10  |   2.216185   .0800316    27.69   0.000     2.059313    2.373057
         11  |   2.388712   .0852628    28.02   0.000     2.221586    2.555838
         12  |   2.449838   .0912076    26.86   0.000     2.271059    2.628616
         13  |   2.523374   .0972283    25.95   0.000     2.332794    2.713954
         14  |   2.532693   .1032111    24.54   0.000     2.330386       2.735
         15  |   2.515281   .1094812    22.97   0.000     2.300684    2.729878
         16  |   2.563169   .1154145    22.21   0.000     2.336942    2.789397
         17  |   2.591436   .1220044    21.24   0.000     2.352291     2.83058
         18  |   2.599973   .1284308    20.24   0.000     2.348232    2.851713
         19  |     2.5618   .1344919    19.05   0.000     2.298179    2.825421
         20  |    2.56175   .1404275    18.24   0.000     2.286494    2.837006
         21  |   2.584688   .1459494    17.71   0.000     2.298609    2.870768
         22  |   2.630964   .1511803    17.40   0.000     2.334631    2.927296
         23  |   2.745529   .1568084    17.51   0.000     2.438164    3.052893
         24  |   2.235503   .1638547    13.64   0.000     1.914326    2.556679
         25  |   2.331467   .1721735    13.54   0.000     1.993985     2.66895
         26  |   .4851786    .086479     5.61   0.000     .3156687    .6546884
         27  |   .6280018   .0761106     8.25   0.000     .4788154    .7771883
         28  |   .9417576   .0712838    13.21   0.000     .8020323    1.081483
         29  |   1.086383   .0701647    15.48   0.000     .9488508    1.223914
         30  |   1.219038   .0713233    17.09   0.000     1.079235     1.35884
         31  |   1.377045   .0731872    18.82   0.000     1.233589    1.520501
         32  |   1.603964   .0755592    21.23   0.000     1.455858     1.75207
         33  |   1.764099   .0795572    22.17   0.000     1.608157    1.920041
         34  |   1.893483   .0834553    22.69   0.000       1.7299    2.057066
         35  |   2.023538   .0881978    22.94   0.000     1.850659    2.196417
         36  |   2.165253   .0931359    23.25   0.000     1.982695    2.347811
         37  |   2.292067   .0983808    23.30   0.000     2.099228    2.484906
         38  |   2.374898   .1034066    22.97   0.000     2.172208    2.577588
         39  |     2.4018   .1088989    22.06   0.000     2.188344    2.615256
         40  |   2.401558   .1143157    21.01   0.000     2.177485    2.625632
         41  |   2.450194   .1206377    20.31   0.000     2.213728    2.686659
         42  |    2.52409   .1266285    19.93   0.000     2.275882    2.772298
         43  |   2.563493   .1331764    19.25   0.000     2.302451    2.824536
         44  |   2.556216   .1398992    18.27   0.000     2.281995    2.830436
         45  |   2.585038   .1457323    17.74   0.000     2.299384    2.870692
         46  |   2.597735   .1517198    17.12   0.000     2.300345    2.895126
         47  |   2.643243   .1562284    16.92   0.000     2.337015     2.94947
         48  |   2.722784   .1615277    16.86   0.000     2.406169    3.039399
         49  |   2.547796   .1706089    14.93   0.000      2.21338    2.882211
         50  |   2.637827   .1784657    14.78   0.000     2.288011    2.987642
             |
     age_cat |
          1  |   .1124206   .0323202     3.48   0.001     .0490688    .1757724
          2  |   .1667529    .036341     4.59   0.000     .0955199     .237986
          3  |   .1810134   .0405771     4.46   0.000      .101477    .2605497
          4  |   .1978829   .0452563     4.37   0.000     .1091748     .286591
          5  |    .188274   .0504798     3.73   0.000     .0893272    .2872208
          6  |   .1661233   .0560589     2.96   0.003     .0562408    .2760059
          7  |   .1601826   .0618449     2.59   0.010     .0389587    .2814064
          8  |   .1571389   .0679776     2.31   0.021     .0238941    .2903838
          9  |   .1630641   .0740535     2.20   0.028     .0179097    .3082185
         10  |   .1471838   .0804271     1.83   0.067    -.0104636    .3048313
         11  |   .1373735   .0868173     1.58   0.114    -.0327995    .3075465
         12  |   .1347434   .0932365     1.45   0.148    -.0480121    .3174989
         13  |   .1189042   .0997177     1.19   0.233    -.0765553    .3143637
         14  |   .1327171   .1062391     1.25   0.212    -.0755252    .3409594
         15  |   .1288949    .112965     1.14   0.254    -.0925309    .3503207
         16  |   .1314409   .1200228     1.10   0.273    -.1038192     .366701
         17  |   .1198452   .1269553     0.94   0.345    -.1290034    .3686939
         18  |   .1322963   .1338847     0.99   0.323    -.1301349    .3947276
         19  |   .1219054   .1409693     0.86   0.387    -.1544124    .3982232
         20  |   .0808299    .153762     0.53   0.599    -.2205632    .3822231
         25  |   .0124946   .1811047     0.07   0.945    -.3424938     .367483
         30  |   .0597363   .2255867     0.26   0.791    -.3824425    .5019151
         40  |   .1968116   .2647169     0.74   0.457    -.3220675    .7156906
         50  |    .221886   .3008503     0.74   0.461    -.3678191    .8115911
             |
       _cons |   3.812189   .0573409    66.48   0.000     3.699793    3.924584
-------------+----------------------------------------------------------------
     sigma_u |  1.7391392
     sigma_e |  .84824173
         rho |  .80782822   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .226718809089658

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    211,868
Group variable: id                              Number of groups  =     14,474

R-sq:                                           Obs per group:
     within  = 0.2267                                         min =          1
     between = 0.0626                                         avg =       14.6
     overall = 0.1076                                         max =        140

                                                F(75,14473)       =      87.05
corr(u_i, Xb)  = -0.0084                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,474 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0235111   .0567309    -0.41   0.679    -.1347109    .0876887
       expat |   .0228322   .0316674     0.72   0.471    -.0392398    .0849043
             |
    ind_year |
          2  |   .1663935   .0377895     4.40   0.000     .0923213    .2404658
          3  |   .8257711   .0455146    18.14   0.000     .7365566    .9149856
          4  |   .9980015   .0507685    19.66   0.000     .8984888    1.097514
          5  |   1.161968   .0550613    21.10   0.000      1.05404    1.269895
          6  |   1.415669   .0592863    23.88   0.000      1.29946    1.531878
          7  |   1.705303   .0642458    26.54   0.000     1.579373    1.831233
          8  |    1.91826   .0691782    27.73   0.000     1.782662    2.053858
          9  |   2.059775   .0743037    27.72   0.000      1.91413     2.20542
         10  |   2.216185   .0800316    27.69   0.000     2.059313    2.373057
         11  |   2.388712   .0852628    28.02   0.000     2.221586    2.555838
         12  |   2.449838   .0912076    26.86   0.000     2.271059    2.628616
         13  |   2.523374   .0972283    25.95   0.000     2.332794    2.713954
         14  |   2.532693   .1032111    24.54   0.000     2.330386       2.735
         15  |   2.515281   .1094812    22.97   0.000     2.300684    2.729878
         16  |   2.563169   .1154145    22.21   0.000     2.336942    2.789397
         17  |   2.591436   .1220044    21.24   0.000     2.352291     2.83058
         18  |   2.599973   .1284308    20.24   0.000     2.348232    2.851713
         19  |     2.5618   .1344919    19.05   0.000     2.298179    2.825421
         20  |    2.56175   .1404275    18.24   0.000     2.286494    2.837006
         21  |   2.584688   .1459494    17.71   0.000     2.298609    2.870768
         22  |   2.630964   .1511803    17.40   0.000     2.334631    2.927296
         23  |   2.745529   .1568084    17.51   0.000     2.438164    3.052893
         24  |   2.235503   .1638547    13.64   0.000     1.914326    2.556679
         25  |   2.331467   .1721735    13.54   0.000     1.993985     2.66895
         26  |   .4851786    .086479     5.61   0.000     .3156687    .6546884
         27  |   .6280018   .0761106     8.25   0.000     .4788154    .7771883
         28  |   .9417576   .0712838    13.21   0.000     .8020323    1.081483
         29  |   1.086383   .0701647    15.48   0.000     .9488508    1.223914
         30  |   1.219038   .0713233    17.09   0.000     1.079235     1.35884
         31  |   1.377045   .0731872    18.82   0.000     1.233589    1.520501
         32  |   1.603964   .0755592    21.23   0.000     1.455858     1.75207
         33  |   1.764099   .0795572    22.17   0.000     1.608157    1.920041
         34  |   1.893483   .0834553    22.69   0.000       1.7299    2.057066
         35  |   2.023538   .0881978    22.94   0.000     1.850659    2.196417
         36  |   2.165253   .0931359    23.25   0.000     1.982695    2.347811
         37  |   2.292067   .0983808    23.30   0.000     2.099228    2.484906
         38  |   2.374898   .1034066    22.97   0.000     2.172208    2.577588
         39  |     2.4018   .1088989    22.06   0.000     2.188344    2.615256
         40  |   2.401558   .1143157    21.01   0.000     2.177485    2.625632
         41  |   2.450194   .1206377    20.31   0.000     2.213728    2.686659
         42  |    2.52409   .1266285    19.93   0.000     2.275882    2.772298
         43  |   2.563493   .1331764    19.25   0.000     2.302451    2.824536
         44  |   2.556216   .1398992    18.27   0.000     2.281995    2.830436
         45  |   2.585038   .1457323    17.74   0.000     2.299384    2.870692
         46  |   2.597735   .1517198    17.12   0.000     2.300345    2.895126
         47  |   2.643243   .1562284    16.92   0.000     2.337015     2.94947
         48  |   2.722784   .1615277    16.86   0.000     2.406169    3.039399
         49  |   2.547796   .1706089    14.93   0.000      2.21338    2.882211
         50  |   2.637827   .1784657    14.78   0.000     2.288011    2.987642
             |
     age_cat |
          1  |   .1124206   .0323202     3.48   0.001     .0490688    .1757724
          2  |   .1667529    .036341     4.59   0.000     .0955199     .237986
          3  |   .1810134   .0405771     4.46   0.000      .101477    .2605497
          4  |   .1978829   .0452563     4.37   0.000     .1091748     .286591
          5  |    .188274   .0504798     3.73   0.000     .0893272    .2872208
          6  |   .1661233   .0560589     2.96   0.003     .0562408    .2760059
          7  |   .1601826   .0618449     2.59   0.010     .0389587    .2814064
          8  |   .1571389   .0679776     2.31   0.021     .0238941    .2903838
          9  |   .1630641   .0740535     2.20   0.028     .0179097    .3082185
         10  |   .1471838   .0804271     1.83   0.067    -.0104636    .3048313
         11  |   .1373735   .0868173     1.58   0.114    -.0327995    .3075465
         12  |   .1347434   .0932365     1.45   0.148    -.0480121    .3174989
         13  |   .1189042   .0997177     1.19   0.233    -.0765553    .3143637
         14  |   .1327171   .1062391     1.25   0.212    -.0755252    .3409594
         15  |   .1288949    .112965     1.14   0.254    -.0925309    .3503207
         16  |   .1314409   .1200228     1.10   0.273    -.1038192     .366701
         17  |   .1198452   .1269553     0.94   0.345    -.1290034    .3686939
         18  |   .1322963   .1338847     0.99   0.323    -.1301349    .3947276
         19  |   .1219054   .1409693     0.86   0.387    -.1544124    .3982232
         20  |   .0808299    .153762     0.53   0.599    -.2205632    .3822231
         25  |   .0124946   .1811047     0.07   0.945    -.3424938     .367483
         30  |   .0597363   .2255867     0.26   0.791    -.3824425    .5019151
         40  |   .1968116   .2647169     0.74   0.457    -.3220675    .7156906
         50  |    .221886   .3008503     0.74   0.461    -.3678191    .8115911
             |
       _cons |   3.812189   .0573409    66.48   0.000     3.699793    3.924584
-------------+----------------------------------------------------------------
     sigma_u |  1.7391392
     sigma_e |  .84824173
         rho |  .80782822   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    329669
Group variable: firm_person                     Number of groups   =     39680

R-sq:  within  = 0.1917                         Obs per group: min =         1
       between = 0.0451                                        avg =       8.3
       overall = 0.0796                                        max =        25

                                                F(78,14473)        =     82.68
corr(u_i, Xb)  = -0.0635                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 14,474 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0025917   .0514037    -0.05   0.960    -.1033496    .0981662
      during |  -.0059088   .0125465    -0.47   0.638    -.0305014    .0186839
       after |  -.0222197   .0232524    -0.96   0.339    -.0677973     .023358
during_expat |  -.0528427   .0502919    -1.05   0.293    -.1514212    .0457358
 after_expat |  -.1725071   .0669474    -2.58   0.010    -.3037325   -.0412817
             |
    ind_year |
          2  |   .1706492   .0357633     4.77   0.000     .1005485    .2407498
          3  |   .8403525   .0434476    19.34   0.000     .7551897    .9255153
          4  |   1.029133   .0490943    20.96   0.000     .9329022    1.125364
          5  |   1.212306   .0538672    22.51   0.000     1.106719    1.317892
          6  |   1.465477   .0589107    24.88   0.000     1.350005     1.58095
          7  |   1.766592   .0642012    27.52   0.000     1.640749    1.892434
          8  |     1.9849   .0694111    28.60   0.000     1.848846    2.120955
          9  |    2.13921   .0746166    28.67   0.000     1.992952    2.285468
         10  |    2.29659    .080694    28.46   0.000      2.13842    2.454761
         11  |   2.469675   .0863427    28.60   0.000     2.300432    2.638917
         12  |   2.539554   .0925346    27.44   0.000     2.358174    2.720933
         13  |   2.622366   .0987566    26.55   0.000      2.42879    2.815941
         14  |   2.642904   .1049636    25.18   0.000     2.437162    2.848646
         15  |   2.631207   .1112984    23.64   0.000     2.413048    2.849367
         16  |   2.700602   .1172396    23.03   0.000     2.470797    2.930406
         17  |   2.734227   .1237143    22.10   0.000     2.491731    2.976722
         18  |   2.758047   .1300585    21.21   0.000     2.503116    3.012979
         19  |   2.730017   .1362875    20.03   0.000     2.462876    2.997158
         20  |   2.740418   .1423565    19.25   0.000     2.461381    3.019455
         21  |   2.776745   .1478312    18.78   0.000     2.486977    3.066513
         22  |   2.824908   .1531513    18.45   0.000     2.524711    3.125104
         23  |   2.937609   .1586693    18.51   0.000     2.626597    3.248621
         24  |   2.420602   .1655771    14.62   0.000      2.09605    2.745155
         25  |   2.501169   .1735279    14.41   0.000     2.161032    2.841306
         26  |   .4836118   .0838642     5.77   0.000     .3192273    .6479963
         27  |   .6159012   .0744358     8.27   0.000     .4699974    .7618049
         28  |   .9431988   .0696953    13.53   0.000     .8065871    1.079811
         29  |   1.116511   .0688394    16.22   0.000     .9815765    1.251445
         30  |   1.252601     .07014    17.86   0.000     1.115118    1.390085
         31  |   1.415573   .0725884    19.50   0.000      1.27329    1.557856
         32  |   1.655732    .075061    22.06   0.000     1.508603    1.802861
         33  |   1.823011   .0790299    23.07   0.000     1.668102     1.97792
         34  |   1.959486   .0832968    23.52   0.000     1.796213    2.122758
         35  |   2.091021   .0883861    23.66   0.000     1.917773    2.264269
         36  |   2.242795   .0935446    23.98   0.000     2.059436    2.426155
         37  |   2.384565   .0990344    24.08   0.000     2.190445    2.578685
         38  |    2.46326   .1045786    23.55   0.000     2.258272    2.668247
         39  |    2.50733   .1101797    22.76   0.000     2.291364    2.723296
         40  |   2.520831    .115821    21.76   0.000     2.293807    2.747855
         41  |   2.571698   .1219189    21.09   0.000     2.332721    2.810674
         42  |   2.668438   .1280957    20.83   0.000     2.417354    2.919522
         43  |   2.717978   .1345892    20.19   0.000     2.454166     2.98179
         44  |   2.723748    .141258    19.28   0.000     2.446865    3.000632
         45  |   2.769106   .1470662    18.83   0.000     2.480838    3.057375
         46  |   2.788683   .1529813    18.23   0.000      2.48882    3.088546
         47  |   2.836714   .1575798    18.00   0.000     2.527837     3.14559
         48  |   2.916313   .1629033    17.90   0.000     2.597002    3.235625
         49  |    2.72359   .1715632    15.88   0.000     2.387305    3.059876
         50  |   2.811279   .1787622    15.73   0.000     2.460883    3.161676
             |
     age_cat |
          1  |   .1083854   .0303627     3.57   0.000     .0488706    .1679002
          2  |   .1476936   .0346078     4.27   0.000     .0798579    .2155292
          3  |   .1497166   .0390135     3.84   0.000     .0732453     .226188
          4  |   .1583726    .043942     3.60   0.000     .0722407    .2445046
          5  |   .1380577   .0493644     2.80   0.005     .0412972    .2348181
          6  |   .1039282   .0551353     1.88   0.059    -.0041441    .2120005
          7  |   .0915308   .0610969     1.50   0.134    -.0282271    .2112886
          8  |   .0778075   .0673373     1.16   0.248    -.0541823    .2097973
          9  |   .0745634   .0734859     1.01   0.310    -.0694784    .2186051
         10  |   .0533624   .0798471     0.67   0.504     -.103148    .2098729
         11  |   .0364341   .0863653     0.42   0.673    -.1328529    .2057211
         12  |   .0240228    .092774     0.26   0.796    -.1578261    .2058718
         13  |   -.005286   .0993433    -0.05   0.958    -.2000115    .1894396
         14  |  -.0031988    .105913    -0.03   0.976    -.2108019    .2044043
         15  |  -.0100589   .1126004    -0.09   0.929      -.23077    .2106522
         16  |  -.0273992    .119495    -0.23   0.819    -.2616247    .2068262
         17  |   -.050837    .126272    -0.40   0.687    -.2983462    .1966722
         18  |  -.0495264   .1330663    -0.37   0.710    -.3103535    .2113007
         19  |  -.0711949   .1400521    -0.51   0.611    -.3457149    .2033251
         20  |  -.1273097    .152519    -0.83   0.404    -.4262665    .1716471
         25  |  -.2230968   .1773071    -1.26   0.208    -.5706414    .1244478
         30  |  -.2663543   .2170795    -1.23   0.220    -.6918579    .1591493
         40  |  -.1358464   .2458641    -0.55   0.581    -.6177716    .3460788
         50  |  -.0389836   .2733886    -0.14   0.887    -.5748603    .4968931
             |
       _cons |   3.813197   .0565386    67.44   0.000     3.702374     3.92402
-------------+----------------------------------------------------------------
     sigma_u |  1.7249069
     sigma_e |  .85885551
         rho |   .8013344   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1917064875682445

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    329,669
Group variable: firm_person                     Number of groups  =     39,680

R-sq:                                           Obs per group:
     within  = 0.1917                                         min =          1
     between = 0.0451                                         avg =        8.3
     overall = 0.0796                                         max =         25

                                                F(78,14473)       =      82.68
corr(u_i, Xb)  = -0.0635                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,474 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0025917   .0514037    -0.05   0.960    -.1033496    .0981662
      during |  -.0059088   .0125465    -0.47   0.638    -.0305014    .0186839
       after |  -.0222197   .0232524    -0.96   0.339    -.0677973     .023358
during_expat |  -.0528427   .0502919    -1.05   0.293    -.1514212    .0457358
 after_expat |  -.1725071   .0669474    -2.58   0.010    -.3037325   -.0412817
             |
    ind_year |
          2  |   .1706492   .0357633     4.77   0.000     .1005485    .2407498
          3  |   .8403525   .0434476    19.34   0.000     .7551897    .9255153
          4  |   1.029133   .0490943    20.96   0.000     .9329022    1.125364
          5  |   1.212306   .0538672    22.51   0.000     1.106719    1.317892
          6  |   1.465477   .0589107    24.88   0.000     1.350005     1.58095
          7  |   1.766592   .0642012    27.52   0.000     1.640749    1.892434
          8  |     1.9849   .0694111    28.60   0.000     1.848846    2.120955
          9  |    2.13921   .0746166    28.67   0.000     1.992952    2.285468
         10  |    2.29659    .080694    28.46   0.000      2.13842    2.454761
         11  |   2.469675   .0863427    28.60   0.000     2.300432    2.638917
         12  |   2.539554   .0925346    27.44   0.000     2.358174    2.720933
         13  |   2.622366   .0987566    26.55   0.000      2.42879    2.815941
         14  |   2.642904   .1049636    25.18   0.000     2.437162    2.848646
         15  |   2.631207   .1112984    23.64   0.000     2.413048    2.849367
         16  |   2.700602   .1172396    23.03   0.000     2.470797    2.930406
         17  |   2.734227   .1237143    22.10   0.000     2.491731    2.976722
         18  |   2.758047   .1300585    21.21   0.000     2.503116    3.012979
         19  |   2.730017   .1362875    20.03   0.000     2.462876    2.997158
         20  |   2.740418   .1423565    19.25   0.000     2.461381    3.019455
         21  |   2.776745   .1478312    18.78   0.000     2.486977    3.066513
         22  |   2.824908   .1531513    18.45   0.000     2.524711    3.125104
         23  |   2.937609   .1586693    18.51   0.000     2.626597    3.248621
         24  |   2.420602   .1655771    14.62   0.000      2.09605    2.745155
         25  |   2.501169   .1735279    14.41   0.000     2.161032    2.841306
         26  |   .4836118   .0838642     5.77   0.000     .3192273    .6479963
         27  |   .6159012   .0744358     8.27   0.000     .4699974    .7618049
         28  |   .9431988   .0696953    13.53   0.000     .8065871    1.079811
         29  |   1.116511   .0688394    16.22   0.000     .9815765    1.251445
         30  |   1.252601     .07014    17.86   0.000     1.115118    1.390085
         31  |   1.415573   .0725884    19.50   0.000      1.27329    1.557856
         32  |   1.655732    .075061    22.06   0.000     1.508603    1.802861
         33  |   1.823011   .0790299    23.07   0.000     1.668102     1.97792
         34  |   1.959486   .0832968    23.52   0.000     1.796213    2.122758
         35  |   2.091021   .0883861    23.66   0.000     1.917773    2.264269
         36  |   2.242795   .0935446    23.98   0.000     2.059436    2.426155
         37  |   2.384565   .0990344    24.08   0.000     2.190445    2.578685
         38  |    2.46326   .1045786    23.55   0.000     2.258272    2.668247
         39  |    2.50733   .1101797    22.76   0.000     2.291364    2.723296
         40  |   2.520831    .115821    21.76   0.000     2.293807    2.747855
         41  |   2.571698   .1219189    21.09   0.000     2.332721    2.810674
         42  |   2.668438   .1280957    20.83   0.000     2.417354    2.919522
         43  |   2.717978   .1345892    20.19   0.000     2.454166     2.98179
         44  |   2.723748    .141258    19.28   0.000     2.446865    3.000632
         45  |   2.769106   .1470662    18.83   0.000     2.480838    3.057375
         46  |   2.788683   .1529813    18.23   0.000      2.48882    3.088546
         47  |   2.836714   .1575798    18.00   0.000     2.527837     3.14559
         48  |   2.916313   .1629033    17.90   0.000     2.597002    3.235625
         49  |    2.72359   .1715632    15.88   0.000     2.387305    3.059876
         50  |   2.811279   .1787622    15.73   0.000     2.460883    3.161676
             |
     age_cat |
          1  |   .1083854   .0303627     3.57   0.000     .0488706    .1679002
          2  |   .1476936   .0346078     4.27   0.000     .0798579    .2155292
          3  |   .1497166   .0390135     3.84   0.000     .0732453     .226188
          4  |   .1583726    .043942     3.60   0.000     .0722407    .2445046
          5  |   .1380577   .0493644     2.80   0.005     .0412972    .2348181
          6  |   .1039282   .0551353     1.88   0.059    -.0041441    .2120005
          7  |   .0915308   .0610969     1.50   0.134    -.0282271    .2112886
          8  |   .0778075   .0673373     1.16   0.248    -.0541823    .2097973
          9  |   .0745634   .0734859     1.01   0.310    -.0694784    .2186051
         10  |   .0533624   .0798471     0.67   0.504     -.103148    .2098729
         11  |   .0364341   .0863653     0.42   0.673    -.1328529    .2057211
         12  |   .0240228    .092774     0.26   0.796    -.1578261    .2058718
         13  |   -.005286   .0993433    -0.05   0.958    -.2000115    .1894396
         14  |  -.0031988    .105913    -0.03   0.976    -.2108019    .2044043
         15  |  -.0100589   .1126004    -0.09   0.929      -.23077    .2106522
         16  |  -.0273992    .119495    -0.23   0.819    -.2616247    .2068262
         17  |   -.050837    .126272    -0.40   0.687    -.2983462    .1966722
         18  |  -.0495264   .1330663    -0.37   0.710    -.3103535    .2113007
         19  |  -.0711949   .1400521    -0.51   0.611    -.3457149    .2033251
         20  |  -.1273097    .152519    -0.83   0.404    -.4262665    .1716471
         25  |  -.2230968   .1773071    -1.26   0.208    -.5706414    .1244478
         30  |  -.2663543   .2170795    -1.23   0.220    -.6918579    .1591493
         40  |  -.1358464   .2458641    -0.55   0.581    -.6177716    .3460788
         50  |  -.0389836   .2733886    -0.14   0.887    -.5748603    .4968931
             |
       _cons |   3.813197   .0565386    67.44   0.000     3.702374     3.92402
-------------+----------------------------------------------------------------
     sigma_u |  1.7249069
     sigma_e |  .85885551
         rho |   .8013344   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 14473) =    0.22
            Prob > F =    0.6377

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14473) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 14473) =    0.93
            Prob > F =    0.3340

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14473) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 14473) =    1.10
            Prob > F =    0.2934

 ( 1)  during_expat = 0

       F(  1, 14473) =    1.10
            Prob > F =    0.2934
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 14473) =    6.95
            Prob > F =    0.0084

 ( 1)  after_expat = 0

       F(  1, 14473) =    6.64
            Prob > F =    0.0100
variable label was str12 now str13
(1 real change made)
(file output/figure/acquisitions_lnKL_slope.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =    329669
Group variable: firm_person                     Number of groups   =     39680

R-sq:  within  = 0.1917                         Obs per group: min =         1
       between = 0.0454                                        avg =       8.3
       overall = 0.0796                                        max =        25

                                                F(82,14473)        =     78.71
corr(u_i, Xb)  = -0.0639                        Prob > F           =    0.0000

                                (Std. Err. adjusted for 14,474 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0025137   .0513944    -0.05   0.961    -.1032533    .0982259
   during_DD |  -.0045356   .0129788    -0.35   0.727    -.0299758    .0209046
   during_DE |  -.0355951   .0666015    -0.53   0.593    -.1661426    .0949525
   during_ED |  -.1207767   .0524856    -2.30   0.021    -.2236552   -.0178981
   during_EE |  -.1178215   .0672639    -1.75   0.080    -.2496674    .0140243
    after_DD |  -.0376011   .0244999    -1.53   0.125    -.0856241    .0104219
    after_DE |   -.148452   .0826261    -1.80   0.072    -.3104097    .0135057
    after_ED |  -.1582533   .0673793    -2.35   0.019    -.2903254   -.0261812
    after_EE |  -.2389834   .0861361    -2.77   0.006    -.4078212   -.0701456
             |
    ind_year |
          2  |   .1707277   .0357533     4.78   0.000     .1006465    .2408088
          3  |   .8403593    .043422    19.35   0.000     .7552467    .9254719
          4  |   1.029159    .049045    20.98   0.000     .9330247    1.125294
          5  |   1.212277   .0537992    22.53   0.000     1.106824    1.317731
          6  |   1.465524   .0588189    24.92   0.000     1.350232    1.580817
          7  |   1.766529   .0640789    27.57   0.000     1.640926    1.892132
          8  |   1.984906   .0692651    28.66   0.000     1.849137    2.120674
          9  |   2.139174   .0744428    28.74   0.000     1.993257    2.285092
         10  |   2.296491   .0804781    28.54   0.000     2.138744    2.454239
         11  |   2.469424   .0860858    28.69   0.000     2.300685    2.638163
         12  |   2.539163   .0922355    27.53   0.000      2.35837    2.719957
         13  |   2.621883   .0984027    26.64   0.000     2.429002    2.814765
         14  |   2.642287   .1045648    25.27   0.000     2.437326    2.847247
         15  |   2.630317   .1108575    23.73   0.000     2.413022    2.847612
         16  |   2.699528   .1167508    23.12   0.000     2.470681    2.928374
         17  |   2.732943   .1231555    22.19   0.000     2.491543    2.974344
         18  |   2.756509   .1294554    21.29   0.000      2.50276    3.010258
         19  |   2.728392   .1356332    20.12   0.000     2.462533     2.99425
         20  |   2.738687   .1416462    19.33   0.000     2.461042    3.016332
         21  |   2.774976   .1470631    18.87   0.000     2.486714    3.063239
         22  |   2.822994   .1523339    18.53   0.000       2.5244    3.121588
         23  |    2.93564   .1578087    18.60   0.000     2.626314    3.244965
         24  |   2.418484   .1646623    14.69   0.000     2.095725    2.741243
         25  |   2.498833   .1725819    14.48   0.000      2.16055    2.837115
         26  |   .4825263   .0838612     5.75   0.000     .3181477    .6469049
         27  |   .6150461   .0744299     8.26   0.000      .469154    .7609382
         28  |   .9427199   .0696731    13.53   0.000     .8061518    1.079288
         29  |   1.116108   .0687948    16.22   0.000     .9812615    1.250955
         30  |   1.252386   .0700722    17.87   0.000     1.115035    1.389736
         31  |   1.415368   .0724898    19.53   0.000     1.273279    1.557458
         32  |   1.655598   .0749487    22.09   0.000     1.508689    1.802507
         33  |   1.822847   .0788988    23.10   0.000     1.668196    1.977499
         34  |   1.959305   .0831392    23.57   0.000     1.796342    2.122269
         35  |   2.090709   .0881992    23.70   0.000     1.917827     2.26359
         36  |   2.242256   .0933195    24.03   0.000     2.059338    2.425174
         37  |   2.383804   .0987742    24.13   0.000     2.190194    2.577414
         38  |   2.462369   .1042756    23.61   0.000     2.257976    2.666763
         39  |   2.506205    .109813    22.82   0.000     2.290957    2.721453
         40  |   2.519513   .1153976    21.83   0.000     2.293319    2.745707
         41  |   2.570242   .1214711    21.16   0.000     2.332144    2.808341
         42  |   2.666856   .1275778    20.90   0.000     2.416787    2.916925
         43  |   2.716291   .1340125    20.27   0.000      2.45361    2.978973
         44  |   2.721994   .1406305    19.36   0.000      2.44634    2.997648
         45  |   2.767093   .1463763    18.90   0.000     2.480177     3.05401
         46  |   2.786623   .1522389    18.30   0.000     2.488216    3.085031
         47  |   2.834556   .1567972    18.08   0.000     2.527214    3.141899
         48  |   2.914123   .1620718    17.98   0.000     2.596441    3.231804
         49  |   2.721594    .170668    15.95   0.000     2.387063    3.056125
         50  |   2.809388    .177801    15.80   0.000     2.460876    3.157901
             |
     age_cat |
          1  |   .1085146   .0303616     3.57   0.000      .049002    .1680272
          2  |   .1478722    .034602     4.27   0.000     .0800479    .2156965
          3  |   .1500604   .0389957     3.85   0.000     .0736239    .2264969
          4  |   .1588715    .043912     3.62   0.000     .0727985    .2449446
          5  |   .1387437   .0493184     2.81   0.005     .0420733    .2354141
          6  |    .104842    .055072     1.90   0.057    -.0031062    .2127902
          7  |    .092681   .0610223     1.52   0.129    -.0269306    .2122926
          8  |   .0791069   .0672469     1.18   0.239    -.0527056    .2109194
          9  |   .0760519   .0733871     1.04   0.300    -.0677963    .2199001
         10  |   .0550473   .0797381     0.69   0.490    -.1012496    .2113443
         11  |   .0383556   .0862435     0.44   0.657    -.1306928     .207404
         12  |   .0260766    .092634     0.28   0.778     -.155498    .2076512
         13  |  -.0030406    .099169    -0.03   0.976    -.1974246    .1913433
         14  |   -.000741    .105718    -0.01   0.994    -.2079618    .2064798
         15  |  -.0074344     .11238    -0.07   0.947    -.2277136    .2128448
         16  |  -.0246332   .1192615    -0.21   0.836     -.258401    .2091345
         17  |  -.0478034   .1260308    -0.38   0.704    -.2948399    .1992331
         18  |  -.0463705   .1328277    -0.35   0.727    -.3067298    .2139889
         19  |  -.0678799   .1397893    -0.49   0.627    -.3418849    .2061251
         20  |  -.1237007    .152208    -0.81   0.416    -.4220478    .1746464
         25  |  -.2186178   .1770327    -1.23   0.217    -.5656245    .1283889
         30  |  -.2618985   .2168648    -1.21   0.227    -.6869812    .1631843
         40  |  -.1322842   .2456362    -0.54   0.590    -.6137625    .3491941
         50  |  -.0359577   .2732701    -0.13   0.895     -.571602    .4996865
             |
       _cons |   3.812573   .0565358    67.44   0.000     3.701756    3.923391
-------------+----------------------------------------------------------------
     sigma_u |  1.7246483
     sigma_e |  .85884208
         rho |  .80129163   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .1917429296597315

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    329,669
Group variable: firm_person                     Number of groups  =     39,680

R-sq:                                           Obs per group:
     within  = 0.1917                                         min =          1
     between = 0.0454                                         avg =        8.3
     overall = 0.0796                                         max =         25

                                                F(82,14473)       =      78.71
corr(u_i, Xb)  = -0.0639                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 14,474 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |  -.0025137   .0513944    -0.05   0.961    -.1032533    .0982259
   during_DD |  -.0045356   .0129788    -0.35   0.727    -.0299758    .0209046
   during_DE |  -.0355951   .0666015    -0.53   0.593    -.1661426    .0949525
   during_ED |  -.1207767   .0524856    -2.30   0.021    -.2236552   -.0178981
   during_EE |  -.1178215   .0672639    -1.75   0.080    -.2496674    .0140243
    after_DD |  -.0376011   .0244999    -1.53   0.125    -.0856241    .0104219
    after_DE |   -.148452   .0826261    -1.80   0.072    -.3104097    .0135057
    after_ED |  -.1582533   .0673793    -2.35   0.019    -.2903254   -.0261812
    after_EE |  -.2389834   .0861361    -2.77   0.006    -.4078212   -.0701456
             |
    ind_year |
          2  |   .1707277   .0357533     4.78   0.000     .1006465    .2408088
          3  |   .8403593    .043422    19.35   0.000     .7552467    .9254719
          4  |   1.029159    .049045    20.98   0.000     .9330247    1.125294
          5  |   1.212277   .0537992    22.53   0.000     1.106824    1.317731
          6  |   1.465524   .0588189    24.92   0.000     1.350232    1.580817
          7  |   1.766529   .0640789    27.57   0.000     1.640926    1.892132
          8  |   1.984906   .0692651    28.66   0.000     1.849137    2.120674
          9  |   2.139174   .0744428    28.74   0.000     1.993257    2.285092
         10  |   2.296491   .0804781    28.54   0.000     2.138744    2.454239
         11  |   2.469424   .0860858    28.69   0.000     2.300685    2.638163
         12  |   2.539163   .0922355    27.53   0.000      2.35837    2.719957
         13  |   2.621883   .0984027    26.64   0.000     2.429002    2.814765
         14  |   2.642287   .1045648    25.27   0.000     2.437326    2.847247
         15  |   2.630317   .1108575    23.73   0.000     2.413022    2.847612
         16  |   2.699528   .1167508    23.12   0.000     2.470681    2.928374
         17  |   2.732943   .1231555    22.19   0.000     2.491543    2.974344
         18  |   2.756509   .1294554    21.29   0.000      2.50276    3.010258
         19  |   2.728392   .1356332    20.12   0.000     2.462533     2.99425
         20  |   2.738687   .1416462    19.33   0.000     2.461042    3.016332
         21  |   2.774976   .1470631    18.87   0.000     2.486714    3.063239
         22  |   2.822994   .1523339    18.53   0.000       2.5244    3.121588
         23  |    2.93564   .1578087    18.60   0.000     2.626314    3.244965
         24  |   2.418484   .1646623    14.69   0.000     2.095725    2.741243
         25  |   2.498833   .1725819    14.48   0.000      2.16055    2.837115
         26  |   .4825263   .0838612     5.75   0.000     .3181477    .6469049
         27  |   .6150461   .0744299     8.26   0.000      .469154    .7609382
         28  |   .9427199   .0696731    13.53   0.000     .8061518    1.079288
         29  |   1.116108   .0687948    16.22   0.000     .9812615    1.250955
         30  |   1.252386   .0700722    17.87   0.000     1.115035    1.389736
         31  |   1.415368   .0724898    19.53   0.000     1.273279    1.557458
         32  |   1.655598   .0749487    22.09   0.000     1.508689    1.802507
         33  |   1.822847   .0788988    23.10   0.000     1.668196    1.977499
         34  |   1.959305   .0831392    23.57   0.000     1.796342    2.122269
         35  |   2.090709   .0881992    23.70   0.000     1.917827     2.26359
         36  |   2.242256   .0933195    24.03   0.000     2.059338    2.425174
         37  |   2.383804   .0987742    24.13   0.000     2.190194    2.577414
         38  |   2.462369   .1042756    23.61   0.000     2.257976    2.666763
         39  |   2.506205    .109813    22.82   0.000     2.290957    2.721453
         40  |   2.519513   .1153976    21.83   0.000     2.293319    2.745707
         41  |   2.570242   .1214711    21.16   0.000     2.332144    2.808341
         42  |   2.666856   .1275778    20.90   0.000     2.416787    2.916925
         43  |   2.716291   .1340125    20.27   0.000      2.45361    2.978973
         44  |   2.721994   .1406305    19.36   0.000      2.44634    2.997648
         45  |   2.767093   .1463763    18.90   0.000     2.480177     3.05401
         46  |   2.786623   .1522389    18.30   0.000     2.488216    3.085031
         47  |   2.834556   .1567972    18.08   0.000     2.527214    3.141899
         48  |   2.914123   .1620718    17.98   0.000     2.596441    3.231804
         49  |   2.721594    .170668    15.95   0.000     2.387063    3.056125
         50  |   2.809388    .177801    15.80   0.000     2.460876    3.157901
             |
     age_cat |
          1  |   .1085146   .0303616     3.57   0.000      .049002    .1680272
          2  |   .1478722    .034602     4.27   0.000     .0800479    .2156965
          3  |   .1500604   .0389957     3.85   0.000     .0736239    .2264969
          4  |   .1588715    .043912     3.62   0.000     .0727985    .2449446
          5  |   .1387437   .0493184     2.81   0.005     .0420733    .2354141
          6  |    .104842    .055072     1.90   0.057    -.0031062    .2127902
          7  |    .092681   .0610223     1.52   0.129    -.0269306    .2122926
          8  |   .0791069   .0672469     1.18   0.239    -.0527056    .2109194
          9  |   .0760519   .0733871     1.04   0.300    -.0677963    .2199001
         10  |   .0550473   .0797381     0.69   0.490    -.1012496    .2113443
         11  |   .0383556   .0862435     0.44   0.657    -.1306928     .207404
         12  |   .0260766    .092634     0.28   0.778     -.155498    .2076512
         13  |  -.0030406    .099169    -0.03   0.976    -.1974246    .1913433
         14  |   -.000741    .105718    -0.01   0.994    -.2079618    .2064798
         15  |  -.0074344     .11238    -0.07   0.947    -.2277136    .2128448
         16  |  -.0246332   .1192615    -0.21   0.836     -.258401    .2091345
         17  |  -.0478034   .1260308    -0.38   0.704    -.2948399    .1992331
         18  |  -.0463705   .1328277    -0.35   0.727    -.3067298    .2139889
         19  |  -.0678799   .1397893    -0.49   0.627    -.3418849    .2061251
         20  |  -.1237007    .152208    -0.81   0.416    -.4220478    .1746464
         25  |  -.2186178   .1770327    -1.23   0.217    -.5656245    .1283889
         30  |  -.2618985   .2168648    -1.21   0.227    -.6869812    .1631843
         40  |  -.1322842   .2456362    -0.54   0.590    -.6137625    .3491941
         50  |  -.0359577   .2732701    -0.13   0.895     -.571602    .4996865
             |
       _cons |   3.812573   .0565358    67.44   0.000     3.701756    3.923391
-------------+----------------------------------------------------------------
     sigma_u |  1.7246483
     sigma_e |  .85884208
         rho |  .80129163   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. local fname = e(depvar)

. local title : variable label `fname'

. 
. slopegraph, ///
>         from(0 0 0 0 1 _b[during_DE] 1 _b[during_DE]) ///
>         to(1 _b[during_DD] 1 _b[during_DE] 2 _b[during_ED]+_b[during_DE] 2 _b[during_EE]+_b[during_DE]) ///
>         style(p1 p2 p1 p2) ///
>         label(Local-Local Local-Expat Expat-Local Expat-Expat) ///
>         width_test(during_DD during_DE during_ED during_EE) ///
>         star_test(1==1 during_DE==during_DD 1==1 during_EE==during_ED) ///
>         connect(stepstair) ///
>         format(scheme(538w) xlabel(none) xtitle("") ytitle("") title(`title') legend(off) aspect(0.67))
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str11
(1 real change made)

 ( 1)  during_DD = 0

       F(  1, 14473) =    0.12
            Prob > F =    0.7267

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14473) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_DE = 0

       F(  1, 14473) =    0.29
            Prob > F =    0.5930

 ( 1)  - during_DD + during_DE = 0

       F(  1, 14473) =    0.21
            Prob > F =    0.6474
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_ED = 0

       F(  1, 14473) =    5.30
            Prob > F =    0.0214

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 14473) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_EE = 0

       F(  1, 14473) =    3.07
            Prob > F =    0.0799

 ( 1)  - during_ED + during_EE = 0

       F(  1, 14473) =    0.00
            Prob > F =    0.9717

. 
. graph export output/figure/`fname'_tree.png, width(800) replace
(file output/figure/lnKL_tree.png written in PNG format)

. 
end of do-file
(sum of wgt is 121,707.306675576)

Linear regression                               Number of obs     =    322,194
                                                F(75, 20301)      =     204.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2099
                                                Root MSE          =     1.1768

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .6545509   .0235052    27.85   0.000     .6084788     .700623
       expat |  -.0877372    .027022    -3.25   0.001    -.1407026   -.0347719
             |
    ind_year |
          2  |   .1203266   .0271063     4.44   0.000      .067196    .1734572
          3  |   .3154735   .0314697    10.02   0.000     .2537903    .3771566
          4  |   .5392124   .0325332    16.57   0.000     .4754448      .60298
          5  |   .6993368   .0335889    20.82   0.000     .6334999    .7651737
          6  |   .8851514   .0342853    25.82   0.000     .8179495    .9523534
          7  |   .9673606   .0347411    27.84   0.000     .8992652    1.035456
          8  |   1.033995   .0347968    29.72   0.000     .9657904      1.1022
          9  |   1.132722   .0350658    32.30   0.000      1.06399    1.201454
         10  |   1.231786   .0353259    34.87   0.000     1.162544    1.301027
         11  |   1.232161   .0356931    34.52   0.000     1.162199    1.302122
         12  |   1.235274   .0360639    34.25   0.000     1.164585    1.305962
         13  |   1.251246   .0363448    34.43   0.000     1.180008    1.322485
         14  |   1.263799   .0367447    34.39   0.000     1.191776    1.335822
         15  |   1.294604   .0369377    35.05   0.000     1.222203    1.367005
         16  |   1.295467   .0367496    35.25   0.000     1.223435    1.367499
         17  |    1.33433   .0369411    36.12   0.000     1.261922    1.406738
         18  |   1.253342   .0373286    33.58   0.000     1.180175    1.326509
         19  |    1.26884   .0372997    34.02   0.000     1.195729     1.34195
         20  |   1.315861   .0377431    34.86   0.000     1.241881     1.38984
         21  |   1.304631   .0385533    33.84   0.000     1.229064    1.380199
         22  |   1.329342   .0389424    34.14   0.000     1.253012    1.405672
         23  |   1.365274   .0391313    34.89   0.000     1.288574    1.441975
         24  |   1.387994   .0397966    34.88   0.000      1.30999    1.465998
         25  |   1.384108   .0397965    34.78   0.000     1.306104    1.462113
         26  |  -.5686484   .0446852   -12.73   0.000     -.656235   -.4810618
         27  |  -.4519262   .0431921   -10.46   0.000    -.5365862   -.3672662
         28  |  -.2590011   .0411262    -6.30   0.000    -.3396118   -.1783903
         29  |  -.0522392   .0407888    -1.28   0.200    -.1321886    .0277102
         30  |   .0992273   .0402213     2.47   0.014     .0203903    .1780643
         31  |   .2353718    .039875     5.90   0.000     .1572135      .31353
         32  |   .3659999     .03905     9.37   0.000     .2894587    .4425411
         33  |   .4099419   .0385449    10.64   0.000     .3343907     .485493
         34  |   .5365734   .0390598    13.74   0.000     .4600132    .6131337
         35  |   .6120548   .0388127    15.77   0.000     .5359787    .6881308
         36  |   .6899873   .0388555    17.76   0.000     .6138273    .7661473
         37  |   .7385308   .0392138    18.83   0.000     .6616686     .815393
         38  |   .8062679   .0393622    20.48   0.000     .7291149    .8834209
         39  |   .8610873   .0395338    21.78   0.000     .7835977    .9385768
         40  |   .9386434   .0404247    23.22   0.000     .8594078    1.017879
         41  |   .9968601   .0401022    24.86   0.000     .9182566    1.075464
         42  |   1.072175   .0398193    26.93   0.000      .994126    1.150224
         43  |   1.052681   .0406907    25.87   0.000     .9729241    1.132438
         44  |   1.091598   .0410613    26.58   0.000     1.011115    1.172081
         45  |   1.141069   .0417778    27.31   0.000     1.059181    1.222956
         46  |   1.153294   .0421218    27.38   0.000     1.070732    1.235856
         47  |   1.174177    .042553    27.59   0.000      1.09077    1.257585
         48  |   1.240195   .0425798    29.13   0.000     1.156735    1.323655
         49  |   1.268145    .043745    28.99   0.000     1.182401    1.353889
         50  |   1.311314   .0430189    30.48   0.000     1.226994    1.395635
             |
     age_cat |
          1  |    .414129   .0223155    18.56   0.000     .3703887    .4578692
          2  |   .5571014    .022878    24.35   0.000     .5122588    .6019441
          3  |   .6370328   .0234439    27.17   0.000     .5910809    .6829848
          4  |   .6965894   .0239885    29.04   0.000       .64957    .7436089
          5  |   .7484326   .0245393    30.50   0.000     .7003336    .7965316
          6  |   .7837165   .0250166    31.33   0.000     .7346819    .8327511
          7  |   .8296013   .0253826    32.68   0.000     .7798493    .8793534
          8  |   .8537181   .0257646    33.14   0.000     .8032175    .9042187
          9  |    .899175   .0262688    34.23   0.000      .847686    .9506639
         10  |     .91661   .0266763    34.36   0.000     .8643224    .9688976
         11  |   .9570502    .027242    35.13   0.000     .9036537    1.010447
         12  |   .9787123   .0278842    35.10   0.000     .9240571    1.033367
         13  |    1.00943   .0284552    35.47   0.000     .9536555    1.065205
         14  |   1.042157   .0289319    36.02   0.000      .985448    1.098866
         15  |   1.073671   .0296133    36.26   0.000     1.015627    1.131716
         16  |   1.093969   .0302387    36.18   0.000     1.034698    1.153239
         17  |   1.098748   .0311951    35.22   0.000     1.037603    1.159893
         18  |   1.115703   .0317745    35.11   0.000     1.053423    1.177984
         19  |   1.118357   .0327948    34.10   0.000     1.054077    1.182637
         20  |   1.138225   .0349808    32.54   0.000      1.06966     1.20679
         25  |   1.077805   .0454063    23.74   0.000      .988805    1.166805
         30  |    .454075   .0644593     7.04   0.000     .3277296    .5804203
         40  |   .3817695   .0564396     6.76   0.000     .2711434    .4923957
         50  |   .6070807   .0681552     8.91   0.000      .473491    .7406703
             |
       _cons |   7.101628   .0363236   195.51   0.000     7.030431    7.172826
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    322,194
                                                F(75, 20301)      =     204.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2099
                                                Root MSE          =     1.1768

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .6545509   .0235052    27.85   0.000     .6084788     .700623
       expat |  -.0877372    .027022    -3.25   0.001    -.1407026   -.0347719
             |
    ind_year |
          2  |   .1203266   .0271063     4.44   0.000      .067196    .1734572
          3  |   .3154735   .0314697    10.02   0.000     .2537903    .3771566
          4  |   .5392124   .0325332    16.57   0.000     .4754448      .60298
          5  |   .6993368   .0335889    20.82   0.000     .6334999    .7651737
          6  |   .8851514   .0342853    25.82   0.000     .8179495    .9523534
          7  |   .9673606   .0347411    27.84   0.000     .8992652    1.035456
          8  |   1.033995   .0347968    29.72   0.000     .9657904      1.1022
          9  |   1.132722   .0350658    32.30   0.000      1.06399    1.201454
         10  |   1.231786   .0353259    34.87   0.000     1.162544    1.301027
         11  |   1.232161   .0356931    34.52   0.000     1.162199    1.302122
         12  |   1.235274   .0360639    34.25   0.000     1.164585    1.305962
         13  |   1.251246   .0363448    34.43   0.000     1.180008    1.322485
         14  |   1.263799   .0367447    34.39   0.000     1.191776    1.335822
         15  |   1.294604   .0369377    35.05   0.000     1.222203    1.367005
         16  |   1.295467   .0367496    35.25   0.000     1.223435    1.367499
         17  |    1.33433   .0369411    36.12   0.000     1.261922    1.406738
         18  |   1.253342   .0373286    33.58   0.000     1.180175    1.326509
         19  |    1.26884   .0372997    34.02   0.000     1.195729     1.34195
         20  |   1.315861   .0377431    34.86   0.000     1.241881     1.38984
         21  |   1.304631   .0385533    33.84   0.000     1.229064    1.380199
         22  |   1.329342   .0389424    34.14   0.000     1.253012    1.405672
         23  |   1.365274   .0391313    34.89   0.000     1.288574    1.441975
         24  |   1.387994   .0397966    34.88   0.000      1.30999    1.465998
         25  |   1.384108   .0397965    34.78   0.000     1.306104    1.462113
         26  |  -.5686484   .0446852   -12.73   0.000     -.656235   -.4810618
         27  |  -.4519262   .0431921   -10.46   0.000    -.5365862   -.3672662
         28  |  -.2590011   .0411262    -6.30   0.000    -.3396118   -.1783903
         29  |  -.0522392   .0407888    -1.28   0.200    -.1321886    .0277102
         30  |   .0992273   .0402213     2.47   0.014     .0203903    .1780643
         31  |   .2353718    .039875     5.90   0.000     .1572135      .31353
         32  |   .3659999     .03905     9.37   0.000     .2894587    .4425411
         33  |   .4099419   .0385449    10.64   0.000     .3343907     .485493
         34  |   .5365734   .0390598    13.74   0.000     .4600132    .6131337
         35  |   .6120548   .0388127    15.77   0.000     .5359787    .6881308
         36  |   .6899873   .0388555    17.76   0.000     .6138273    .7661473
         37  |   .7385308   .0392138    18.83   0.000     .6616686     .815393
         38  |   .8062679   .0393622    20.48   0.000     .7291149    .8834209
         39  |   .8610873   .0395338    21.78   0.000     .7835977    .9385768
         40  |   .9386434   .0404247    23.22   0.000     .8594078    1.017879
         41  |   .9968601   .0401022    24.86   0.000     .9182566    1.075464
         42  |   1.072175   .0398193    26.93   0.000      .994126    1.150224
         43  |   1.052681   .0406907    25.87   0.000     .9729241    1.132438
         44  |   1.091598   .0410613    26.58   0.000     1.011115    1.172081
         45  |   1.141069   .0417778    27.31   0.000     1.059181    1.222956
         46  |   1.153294   .0421218    27.38   0.000     1.070732    1.235856
         47  |   1.174177    .042553    27.59   0.000      1.09077    1.257585
         48  |   1.240195   .0425798    29.13   0.000     1.156735    1.323655
         49  |   1.268145    .043745    28.99   0.000     1.182401    1.353889
         50  |   1.311314   .0430189    30.48   0.000     1.226994    1.395635
             |
     age_cat |
          1  |    .414129   .0223155    18.56   0.000     .3703887    .4578692
          2  |   .5571014    .022878    24.35   0.000     .5122588    .6019441
          3  |   .6370328   .0234439    27.17   0.000     .5910809    .6829848
          4  |   .6965894   .0239885    29.04   0.000       .64957    .7436089
          5  |   .7484326   .0245393    30.50   0.000     .7003336    .7965316
          6  |   .7837165   .0250166    31.33   0.000     .7346819    .8327511
          7  |   .8296013   .0253826    32.68   0.000     .7798493    .8793534
          8  |   .8537181   .0257646    33.14   0.000     .8032175    .9042187
          9  |    .899175   .0262688    34.23   0.000      .847686    .9506639
         10  |     .91661   .0266763    34.36   0.000     .8643224    .9688976
         11  |   .9570502    .027242    35.13   0.000     .9036537    1.010447
         12  |   .9787123   .0278842    35.10   0.000     .9240571    1.033367
         13  |    1.00943   .0284552    35.47   0.000     .9536555    1.065205
         14  |   1.042157   .0289319    36.02   0.000      .985448    1.098866
         15  |   1.073671   .0296133    36.26   0.000     1.015627    1.131716
         16  |   1.093969   .0302387    36.18   0.000     1.034698    1.153239
         17  |   1.098748   .0311951    35.22   0.000     1.037603    1.159893
         18  |   1.115703   .0317745    35.11   0.000     1.053423    1.177984
         19  |   1.118357   .0327948    34.10   0.000     1.054077    1.182637
         20  |   1.138225   .0349808    32.54   0.000      1.06966     1.20679
         25  |   1.077805   .0454063    23.74   0.000      .988805    1.166805
         30  |    .454075   .0644593     7.04   0.000     .3277296    .5804203
         40  |   .3817695   .0564396     6.76   0.000     .2711434    .4923957
         50  |   .6070807   .0681552     8.91   0.000      .473491    .7406703
             |
       _cons |   7.101628   .0363236   195.51   0.000     7.030431    7.172826
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    322,194
Group variable: id                              Number of groups  =     20,302

R-sq:                                           Obs per group:
     within  = 0.2784                                         min =          1
     between = 0.1418                                         avg =       15.9
     overall = 0.1424                                         max =        161

                                                F(75,20301)       =     170.19
corr(u_i, Xb)  = 0.0310                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0707058   .0223906     3.16   0.002     .0268185    .1145932
       expat |  -.0067807   .0090888    -0.75   0.456    -.0245956    .0110341
             |
    ind_year |
          2  |   .0990163   .0191495     5.17   0.000     .0614818    .1365509
          3  |   .2809572   .0233967    12.01   0.000     .2350977    .3268167
          4  |   .4781087   .0252912    18.90   0.000     .4285358    .5276816
          5  |   .6385043   .0278571    22.92   0.000     .5839022    .6931064
          6  |   .8340976    .030244    27.58   0.000     .7748168    .8933783
          7  |   .9587065   .0327379    29.28   0.000     .8945374    1.022875
          8  |   1.035749   .0352632    29.37   0.000     .9666305    1.104868
          9  |   1.150111   .0378826    30.36   0.000     1.075858    1.224364
         10  |   1.263413   .0409942    30.82   0.000     1.183061    1.343765
         11  |   1.328395   .0438767    30.28   0.000     1.242393    1.414397
         12  |   1.357939   .0471002    28.83   0.000     1.265618    1.450259
         13  |   1.403595   .0500281    28.06   0.000     1.305536    1.501654
         14  |   1.449968   .0529245    27.40   0.000     1.346232    1.553705
         15  |   1.513184   .0563125    26.87   0.000     1.402807    1.623561
         16  |   1.550196   .0591112    26.23   0.000     1.434334    1.666059
         17  |     1.5984   .0625202    25.57   0.000     1.475855    1.720944
         18  |   1.535177   .0656783    23.37   0.000     1.406442    1.663912
         19  |   1.561115   .0688041    22.69   0.000     1.426254    1.695977
         20  |   1.622655   .0718238    22.59   0.000     1.481874    1.763435
         21  |   1.639939   .0747373    21.94   0.000     1.493448     1.78643
         22  |   1.689278   .0774593    21.81   0.000     1.537452    1.841105
         23  |    1.73641   .0802107    21.65   0.000      1.57919    1.893629
         24  |   1.762259   .0833815    21.13   0.000     1.598825    1.925694
         25  |   1.779962   .0862329    20.64   0.000     1.610939    1.948986
         26  |   -.275006   .0414048    -6.64   0.000    -.3561628   -.1938492
         27  |  -.1464316   .0399228    -3.67   0.000    -.2246835   -.0681798
         28  |   .0395851   .0380913     1.04   0.299     -.035077    .1142472
         29  |   .2664807   .0384173     6.94   0.000     .1911797    .3417817
         30  |     .43194   .0388418    11.12   0.000     .3558069     .508073
         31  |   .5904861   .0398814    14.81   0.000     .5123152    .6686569
         32  |   .7430695   .0411035    18.08   0.000     .6625034    .8236356
         33  |   .8254244   .0424573    19.44   0.000     .7422048    .9086441
         34  |   .9699506   .0445149    21.79   0.000     .8826978    1.057203
         35  |    1.06532   .0465075    22.91   0.000     .9741616    1.156479
         36  |   1.116987   .0492553    22.68   0.000     1.020442    1.213531
         37  |   1.186358    .051712    22.94   0.000     1.084998    1.287717
         38  |   1.259425   .0544672    23.12   0.000     1.152665    1.366185
         39  |   1.310521   .0571471    22.93   0.000     1.198508    1.422533
         40  |   1.409565   .0606326    23.25   0.000      1.29072     1.52841
         41  |   1.475666   .0631216    23.38   0.000     1.351942    1.599389
         42  |   1.552093   .0658064    23.59   0.000     1.423107    1.681079
         43  |   1.533667   .0689551    22.24   0.000     1.398509    1.668825
         44  |   1.590806   .0719956    22.10   0.000     1.449689    1.731923
         45  |   1.659127   .0749998    22.12   0.000     1.512121    1.806132
         46  |   1.669717   .0778528    21.45   0.000     1.517119    1.822315
         47  |    1.70375    .080328    21.21   0.000       1.5463    1.861199
         48  |   1.775051   .0827481    21.45   0.000     1.612858    1.937244
         49  |   1.783934   .0859005    20.77   0.000     1.615562    1.952306
         50  |   1.828334   .0888577    20.58   0.000     1.654166    2.002502
             |
     age_cat |
          1  |   .2848313   .0161912    17.59   0.000     .2530952    .3165675
          2  |   .3315295   .0181338    18.28   0.000     .2959858    .3670732
          3  |   .3251293   .0202177    16.08   0.000      .285501    .3647575
          4  |   .3162151   .0226108    13.99   0.000     .2718961     .360534
          5  |   .3091341   .0252463    12.24   0.000     .2596493    .3586188
          6  |   .2995122   .0280468    10.68   0.000     .2445382    .3544861
          7  |   .3041043   .0309536     9.82   0.000     .2434327    .3647759
          8  |   .2850062   .0340181     8.38   0.000      .218328    .3516845
          9  |   .2830427   .0371435     7.62   0.000     .2102385     .355847
         10  |   .2715373   .0403672     6.73   0.000     .1924143    .3506604
         11  |   .2755091   .0436156     6.32   0.000      .190019    .3609991
         12  |   .2607391   .0469702     5.55   0.000     .1686737    .3528045
         13  |   .2581201   .0502087     5.14   0.000      .159707    .3565332
         14  |   .2585819   .0535508     4.83   0.000     .1536179    .3635458
         15  |   .2618266   .0569219     4.60   0.000      .150255    .3733982
         16  |   .2590605   .0602334     4.30   0.000     .1409982    .3771228
         17  |   .2465495   .0638079     3.86   0.000     .1214808    .3716182
         18  |   .2488373   .0672076     3.70   0.000     .1171049    .3805696
         19  |   .2250159   .0709024     3.17   0.002     .0860415    .3639902
         20  |   .2005676    .078014     2.57   0.010     .0476538    .3534814
         25  |   .1508529   .0901234     1.67   0.094    -.0257962     .327502
         30  |   .1794012   .1222008     1.47   0.142    -.0601223    .4189247
         40  |   .2957997   .1411946     2.09   0.036     .0190469    .5725524
         50  |   .3003024   .1588641     1.89   0.059     -.011084    .6116889
             |
       _cons |   7.456876   .0308949   241.36   0.000      7.39632    7.517433
-------------+----------------------------------------------------------------
     sigma_u |  1.2663782
     sigma_e |  .54610807
         rho |  .84319546   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2783640334551678

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    322,194
Group variable: id                              Number of groups  =     20,302

R-sq:                                           Obs per group:
     within  = 0.2784                                         min =          1
     between = 0.1418                                         avg =       15.9
     overall = 0.1424                                         max =        161

                                                F(75,20301)       =     170.19
corr(u_i, Xb)  = 0.0310                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0707058   .0223906     3.16   0.002     .0268185    .1145932
       expat |  -.0067807   .0090888    -0.75   0.456    -.0245956    .0110341
             |
    ind_year |
          2  |   .0990163   .0191495     5.17   0.000     .0614818    .1365509
          3  |   .2809572   .0233967    12.01   0.000     .2350977    .3268167
          4  |   .4781087   .0252912    18.90   0.000     .4285358    .5276816
          5  |   .6385043   .0278571    22.92   0.000     .5839022    .6931064
          6  |   .8340976    .030244    27.58   0.000     .7748168    .8933783
          7  |   .9587065   .0327379    29.28   0.000     .8945374    1.022875
          8  |   1.035749   .0352632    29.37   0.000     .9666305    1.104868
          9  |   1.150111   .0378826    30.36   0.000     1.075858    1.224364
         10  |   1.263413   .0409942    30.82   0.000     1.183061    1.343765
         11  |   1.328395   .0438767    30.28   0.000     1.242393    1.414397
         12  |   1.357939   .0471002    28.83   0.000     1.265618    1.450259
         13  |   1.403595   .0500281    28.06   0.000     1.305536    1.501654
         14  |   1.449968   .0529245    27.40   0.000     1.346232    1.553705
         15  |   1.513184   .0563125    26.87   0.000     1.402807    1.623561
         16  |   1.550196   .0591112    26.23   0.000     1.434334    1.666059
         17  |     1.5984   .0625202    25.57   0.000     1.475855    1.720944
         18  |   1.535177   .0656783    23.37   0.000     1.406442    1.663912
         19  |   1.561115   .0688041    22.69   0.000     1.426254    1.695977
         20  |   1.622655   .0718238    22.59   0.000     1.481874    1.763435
         21  |   1.639939   .0747373    21.94   0.000     1.493448     1.78643
         22  |   1.689278   .0774593    21.81   0.000     1.537452    1.841105
         23  |    1.73641   .0802107    21.65   0.000      1.57919    1.893629
         24  |   1.762259   .0833815    21.13   0.000     1.598825    1.925694
         25  |   1.779962   .0862329    20.64   0.000     1.610939    1.948986
         26  |   -.275006   .0414048    -6.64   0.000    -.3561628   -.1938492
         27  |  -.1464316   .0399228    -3.67   0.000    -.2246835   -.0681798
         28  |   .0395851   .0380913     1.04   0.299     -.035077    .1142472
         29  |   .2664807   .0384173     6.94   0.000     .1911797    .3417817
         30  |     .43194   .0388418    11.12   0.000     .3558069     .508073
         31  |   .5904861   .0398814    14.81   0.000     .5123152    .6686569
         32  |   .7430695   .0411035    18.08   0.000     .6625034    .8236356
         33  |   .8254244   .0424573    19.44   0.000     .7422048    .9086441
         34  |   .9699506   .0445149    21.79   0.000     .8826978    1.057203
         35  |    1.06532   .0465075    22.91   0.000     .9741616    1.156479
         36  |   1.116987   .0492553    22.68   0.000     1.020442    1.213531
         37  |   1.186358    .051712    22.94   0.000     1.084998    1.287717
         38  |   1.259425   .0544672    23.12   0.000     1.152665    1.366185
         39  |   1.310521   .0571471    22.93   0.000     1.198508    1.422533
         40  |   1.409565   .0606326    23.25   0.000      1.29072     1.52841
         41  |   1.475666   .0631216    23.38   0.000     1.351942    1.599389
         42  |   1.552093   .0658064    23.59   0.000     1.423107    1.681079
         43  |   1.533667   .0689551    22.24   0.000     1.398509    1.668825
         44  |   1.590806   .0719956    22.10   0.000     1.449689    1.731923
         45  |   1.659127   .0749998    22.12   0.000     1.512121    1.806132
         46  |   1.669717   .0778528    21.45   0.000     1.517119    1.822315
         47  |    1.70375    .080328    21.21   0.000       1.5463    1.861199
         48  |   1.775051   .0827481    21.45   0.000     1.612858    1.937244
         49  |   1.783934   .0859005    20.77   0.000     1.615562    1.952306
         50  |   1.828334   .0888577    20.58   0.000     1.654166    2.002502
             |
     age_cat |
          1  |   .2848313   .0161912    17.59   0.000     .2530952    .3165675
          2  |   .3315295   .0181338    18.28   0.000     .2959858    .3670732
          3  |   .3251293   .0202177    16.08   0.000      .285501    .3647575
          4  |   .3162151   .0226108    13.99   0.000     .2718961     .360534
          5  |   .3091341   .0252463    12.24   0.000     .2596493    .3586188
          6  |   .2995122   .0280468    10.68   0.000     .2445382    .3544861
          7  |   .3041043   .0309536     9.82   0.000     .2434327    .3647759
          8  |   .2850062   .0340181     8.38   0.000      .218328    .3516845
          9  |   .2830427   .0371435     7.62   0.000     .2102385     .355847
         10  |   .2715373   .0403672     6.73   0.000     .1924143    .3506604
         11  |   .2755091   .0436156     6.32   0.000      .190019    .3609991
         12  |   .2607391   .0469702     5.55   0.000     .1686737    .3528045
         13  |   .2581201   .0502087     5.14   0.000      .159707    .3565332
         14  |   .2585819   .0535508     4.83   0.000     .1536179    .3635458
         15  |   .2618266   .0569219     4.60   0.000      .150255    .3733982
         16  |   .2590605   .0602334     4.30   0.000     .1409982    .3771228
         17  |   .2465495   .0638079     3.86   0.000     .1214808    .3716182
         18  |   .2488373   .0672076     3.70   0.000     .1171049    .3805696
         19  |   .2250159   .0709024     3.17   0.002     .0860415    .3639902
         20  |   .2005676    .078014     2.57   0.010     .0476538    .3534814
         25  |   .1508529   .0901234     1.67   0.094    -.0257962     .327502
         30  |   .1794012   .1222008     1.47   0.142    -.0601223    .4189247
         40  |   .2957997   .1411946     2.09   0.036     .0190469    .5725524
         50  |   .3003024   .1588641     1.89   0.059     -.011084    .6116889
             |
       _cons |   7.456876   .0308949   241.36   0.000      7.39632    7.517433
-------------+----------------------------------------------------------------
     sigma_u |  1.2663782
     sigma_e |  .54610807
         rho |  .84319546   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    533201
Group variable: firm_person                     Number of groups   =     61260

R-sq:  within  = 0.2273                         Obs per group: min =         1
       between = 0.1464                                        avg =       8.7
       overall = 0.1394                                        max =        25

                                                F(78,20301)        =    161.38
corr(u_i, Xb)  = 0.0565                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0659898   .0206237     3.20   0.001     .0255656     .106414
      during |   .0356579   .0067442     5.29   0.000     .0224387     .048877
       after |   .0629962   .0121073     5.20   0.000      .039265    .0867275
during_expat |   .0527003   .0135398     3.89   0.000     .0261612    .0792395
 after_expat |    .067931    .019329     3.51   0.000     .0300446    .1058175
             |
    ind_year |
          2  |   .0948833   .0180117     5.27   0.000     .0595789    .1301876
          3  |   .2729129   .0227741    11.98   0.000     .2282738    .3175519
          4  |   .4651216   .0247765    18.77   0.000     .4165577    .5136855
          5  |   .6287195   .0272108    23.11   0.000     .5753841    .6820548
          6  |   .8125224     .03005    27.04   0.000      .753622    .8714228
          7  |   .9388154   .0324623    28.92   0.000     .8751867    1.002444
          8  |   1.005763   .0349995    28.74   0.000      .937161    1.074365
          9  |   1.122636   .0375519    29.90   0.000     1.049031     1.19624
         10  |   1.230194   .0405702    30.32   0.000     1.150673    1.309714
         11  |   1.296774   .0434098    29.87   0.000     1.211687    1.381861
         12  |   1.323594   .0465004    28.46   0.000     1.232449    1.414739
         13  |   1.373348   .0494327    27.78   0.000     1.276456    1.470241
         14  |     1.4152   .0523137    27.05   0.000     1.312661    1.517739
         15  |   1.473432   .0555891    26.51   0.000     1.364472    1.582391
         16  |   1.508889   .0581645    25.94   0.000     1.394882    1.622896
         17  |   1.554019   .0613096    25.35   0.000     1.433847    1.674191
         18  |   1.489739   .0643401    23.15   0.000     1.363627     1.61585
         19  |   1.517927   .0674197    22.51   0.000     1.385779    1.650075
         20  |   1.566523   .0702255    22.31   0.000     1.428875    1.704171
         21  |   1.579633   .0728565    21.68   0.000     1.436829    1.722438
         22  |   1.632045   .0753614    21.66   0.000     1.484331     1.77976
         23  |   1.676258   .0779312    21.51   0.000     1.523506    1.829009
         24  |   1.699554   .0807377    21.05   0.000     1.541302    1.857807
         25  |   1.709699   .0833659    20.51   0.000     1.546295    1.873103
         26  |  -.2830619   .0407933    -6.94   0.000    -.3630201   -.2031036
         27  |  -.1603576   .0388546    -4.13   0.000    -.2365157   -.0841994
         28  |   .0357342   .0371851     0.96   0.337    -.0371516      .10862
         29  |   .2667966   .0375559     7.10   0.000      .193184    .3404093
         30  |   .4345411    .037516    11.58   0.000     .3610067    .5080755
         31  |   .5904199   .0387132    15.25   0.000      .514539    .6663008
         32  |   .7398112   .0402651    18.37   0.000     .6608884     .818734
         33  |   .8170594   .0415785    19.65   0.000     .7355621    .8985567
         34  |   .9579145   .0437032    21.92   0.000     .8722528    1.043576
         35  |    1.04782   .0455808    22.99   0.000     .9584778    1.137162
         36  |   1.090709   .0480944    22.68   0.000       .99644    1.184978
         37  |   1.164936   .0505633    23.04   0.000     1.065828    1.264044
         38  |    1.23674   .0531819    23.25   0.000       1.1325    1.340981
         39  |   1.290666   .0559025    23.09   0.000     1.181093     1.40024
         40  |   1.389458   .0592163    23.46   0.000     1.273389    1.505526
         41  |    1.44839   .0616275    23.50   0.000     1.327595    1.569185
         42  |     1.5225   .0641864    23.72   0.000     1.396689     1.64831
         43  |   1.501631   .0671188    22.37   0.000     1.370073    1.633189
         44  |   1.556324   .0700738    22.21   0.000     1.418974    1.693674
         45  |   1.617632   .0729282    22.18   0.000     1.474686    1.760577
         46  |   1.631765   .0755584    21.60   0.000     1.483664    1.779865
         47  |    1.66422   .0778925    21.37   0.000     1.511544    1.816895
         48  |   1.726321   .0801539    21.54   0.000     1.569213    1.883429
         49  |   1.723493   .0830336    20.76   0.000      1.56074    1.886245
         50  |    1.76498   .0856178    20.61   0.000     1.597162    1.932797
             |
     age_cat |
          1  |   .3024148   .0157884    19.15   0.000     .2714683    .3333613
          2  |   .3477655   .0176236    19.73   0.000     .3132219    .3823092
          3  |   .3462154    .019629    17.64   0.000     .3077409    .3846898
          4  |   .3446163   .0218736    15.75   0.000     .3017424    .3874902
          5  |   .3374066   .0244506    13.80   0.000     .2894814    .3853317
          6  |   .3280992   .0271455    12.09   0.000     .2748918    .3813066
          7  |   .3351641   .0299342    11.20   0.000     .2764907    .3938376
          8  |   .3185405   .0328922     9.68   0.000     .2540692    .3830118
          9  |   .3150511   .0358454     8.79   0.000     .2447913    .3853108
         10  |   .3069852   .0388901     7.89   0.000     .2307574     .383213
         11  |   .3083897   .0420128     7.34   0.000     .2260412    .3907382
         12  |   .2958431   .0451467     6.55   0.000      .207352    .3843343
         13  |   .2917582   .0482347     6.05   0.000     .1972144    .3863021
         14  |   .2932966   .0513864     5.71   0.000      .192575    .3940182
         15  |   .2937383   .0546084     5.38   0.000     .1867015    .4007751
         16  |   .2912709   .0577692     5.04   0.000     .1780386    .4045033
         17  |   .2785551   .0611043     4.56   0.000     .1587857    .3983245
         18  |   .2794306   .0643139     4.34   0.000     .1533701    .4054911
         19  |   .2568717   .0677946     3.79   0.000     .1239887    .3897546
         20  |   .2315531   .0741646     3.12   0.002     .0861845    .3769217
         25  |   .1893376   .0846751     2.24   0.025     .0233675    .3553077
         30  |    .190318    .113096     1.68   0.092    -.0313594    .4119954
         40  |   .2231657   .1275206     1.75   0.080     -.026785    .4731165
         50  |   .2259382   .1404221     1.61   0.108    -.0493006    .5011769
             |
       _cons |   7.497354   .0310182   241.71   0.000     7.436556    7.558152
-------------+----------------------------------------------------------------
     sigma_u |  1.2639944
     sigma_e |  .56003178
         rho |  .83590607   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2273388271320523

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    533,201
Group variable: firm_person                     Number of groups  =     61,260

R-sq:                                           Obs per group:
     within  = 0.2273                                         min =          1
     between = 0.1464                                         avg =        8.7
     overall = 0.1394                                         max =         25

                                                F(78,20301)       =     161.38
corr(u_i, Xb)  = 0.0565                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0659898   .0206237     3.20   0.001     .0255656     .106414
      during |   .0356579   .0067442     5.29   0.000     .0224387     .048877
       after |   .0629962   .0121073     5.20   0.000      .039265    .0867275
during_expat |   .0527003   .0135398     3.89   0.000     .0261612    .0792395
 after_expat |    .067931    .019329     3.51   0.000     .0300446    .1058175
             |
    ind_year |
          2  |   .0948833   .0180117     5.27   0.000     .0595789    .1301876
          3  |   .2729129   .0227741    11.98   0.000     .2282738    .3175519
          4  |   .4651216   .0247765    18.77   0.000     .4165577    .5136855
          5  |   .6287195   .0272108    23.11   0.000     .5753841    .6820548
          6  |   .8125224     .03005    27.04   0.000      .753622    .8714228
          7  |   .9388154   .0324623    28.92   0.000     .8751867    1.002444
          8  |   1.005763   .0349995    28.74   0.000      .937161    1.074365
          9  |   1.122636   .0375519    29.90   0.000     1.049031     1.19624
         10  |   1.230194   .0405702    30.32   0.000     1.150673    1.309714
         11  |   1.296774   .0434098    29.87   0.000     1.211687    1.381861
         12  |   1.323594   .0465004    28.46   0.000     1.232449    1.414739
         13  |   1.373348   .0494327    27.78   0.000     1.276456    1.470241
         14  |     1.4152   .0523137    27.05   0.000     1.312661    1.517739
         15  |   1.473432   .0555891    26.51   0.000     1.364472    1.582391
         16  |   1.508889   .0581645    25.94   0.000     1.394882    1.622896
         17  |   1.554019   .0613096    25.35   0.000     1.433847    1.674191
         18  |   1.489739   .0643401    23.15   0.000     1.363627     1.61585
         19  |   1.517927   .0674197    22.51   0.000     1.385779    1.650075
         20  |   1.566523   .0702255    22.31   0.000     1.428875    1.704171
         21  |   1.579633   .0728565    21.68   0.000     1.436829    1.722438
         22  |   1.632045   .0753614    21.66   0.000     1.484331     1.77976
         23  |   1.676258   .0779312    21.51   0.000     1.523506    1.829009
         24  |   1.699554   .0807377    21.05   0.000     1.541302    1.857807
         25  |   1.709699   .0833659    20.51   0.000     1.546295    1.873103
         26  |  -.2830619   .0407933    -6.94   0.000    -.3630201   -.2031036
         27  |  -.1603576   .0388546    -4.13   0.000    -.2365157   -.0841994
         28  |   .0357342   .0371851     0.96   0.337    -.0371516      .10862
         29  |   .2667966   .0375559     7.10   0.000      .193184    .3404093
         30  |   .4345411    .037516    11.58   0.000     .3610067    .5080755
         31  |   .5904199   .0387132    15.25   0.000      .514539    .6663008
         32  |   .7398112   .0402651    18.37   0.000     .6608884     .818734
         33  |   .8170594   .0415785    19.65   0.000     .7355621    .8985567
         34  |   .9579145   .0437032    21.92   0.000     .8722528    1.043576
         35  |    1.04782   .0455808    22.99   0.000     .9584778    1.137162
         36  |   1.090709   .0480944    22.68   0.000       .99644    1.184978
         37  |   1.164936   .0505633    23.04   0.000     1.065828    1.264044
         38  |    1.23674   .0531819    23.25   0.000       1.1325    1.340981
         39  |   1.290666   .0559025    23.09   0.000     1.181093     1.40024
         40  |   1.389458   .0592163    23.46   0.000     1.273389    1.505526
         41  |    1.44839   .0616275    23.50   0.000     1.327595    1.569185
         42  |     1.5225   .0641864    23.72   0.000     1.396689     1.64831
         43  |   1.501631   .0671188    22.37   0.000     1.370073    1.633189
         44  |   1.556324   .0700738    22.21   0.000     1.418974    1.693674
         45  |   1.617632   .0729282    22.18   0.000     1.474686    1.760577
         46  |   1.631765   .0755584    21.60   0.000     1.483664    1.779865
         47  |    1.66422   .0778925    21.37   0.000     1.511544    1.816895
         48  |   1.726321   .0801539    21.54   0.000     1.569213    1.883429
         49  |   1.723493   .0830336    20.76   0.000      1.56074    1.886245
         50  |    1.76498   .0856178    20.61   0.000     1.597162    1.932797
             |
     age_cat |
          1  |   .3024148   .0157884    19.15   0.000     .2714683    .3333613
          2  |   .3477655   .0176236    19.73   0.000     .3132219    .3823092
          3  |   .3462154    .019629    17.64   0.000     .3077409    .3846898
          4  |   .3446163   .0218736    15.75   0.000     .3017424    .3874902
          5  |   .3374066   .0244506    13.80   0.000     .2894814    .3853317
          6  |   .3280992   .0271455    12.09   0.000     .2748918    .3813066
          7  |   .3351641   .0299342    11.20   0.000     .2764907    .3938376
          8  |   .3185405   .0328922     9.68   0.000     .2540692    .3830118
          9  |   .3150511   .0358454     8.79   0.000     .2447913    .3853108
         10  |   .3069852   .0388901     7.89   0.000     .2307574     .383213
         11  |   .3083897   .0420128     7.34   0.000     .2260412    .3907382
         12  |   .2958431   .0451467     6.55   0.000      .207352    .3843343
         13  |   .2917582   .0482347     6.05   0.000     .1972144    .3863021
         14  |   .2932966   .0513864     5.71   0.000      .192575    .3940182
         15  |   .2937383   .0546084     5.38   0.000     .1867015    .4007751
         16  |   .2912709   .0577692     5.04   0.000     .1780386    .4045033
         17  |   .2785551   .0611043     4.56   0.000     .1587857    .3983245
         18  |   .2794306   .0643139     4.34   0.000     .1533701    .4054911
         19  |   .2568717   .0677946     3.79   0.000     .1239887    .3897546
         20  |   .2315531   .0741646     3.12   0.002     .0861845    .3769217
         25  |   .1893376   .0846751     2.24   0.025     .0233675    .3553077
         30  |    .190318    .113096     1.68   0.092    -.0313594    .4119954
         40  |   .2231657   .1275206     1.75   0.080     -.026785    .4731165
         50  |   .2259382   .1404221     1.61   0.108    -.0493006    .5011769
             |
       _cons |   7.497354   .0310182   241.71   0.000     7.436556    7.558152
-------------+----------------------------------------------------------------
     sigma_u |  1.2639944
     sigma_e |  .56003178
         rho |  .83590607   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 20301) =   27.95
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 20301) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 20301) =   10.09
            Prob > F =    0.0015

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 20301) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 20301) =   15.15
            Prob > F =    0.0001

 ( 1)  during_expat = 0

       F(  1, 20301) =   15.15
            Prob > F =    0.0001
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 20301) =    1.37
            Prob > F =    0.2413

 ( 1)  after_expat = 0

       F(  1, 20301) =   12.35
            Prob > F =    0.0004
(1 real change made)
(file output/figure/baseline_lnQL_slope.png written in PNG format)
(sum of wgt is 40,785.5878564715)

Linear regression                               Number of obs     =    109,056
                                                F(50, 7121)       =     136.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2758
                                                Root MSE          =     1.0478

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .476213   .0346955    13.73   0.000     .4081995    .5442264
       expat |  -.0937499   .0379679    -2.47   0.014    -.1681784   -.0193215
             |
    ind_year |
         27  |   .1072809   .0294207     3.65   0.000     .0496075    .1649543
         28  |   .3019577   .0334918     9.02   0.000     .2363039    .3676116
         29  |    .519631   .0360692    14.41   0.000     .4489246    .5903373
         30  |   .6698411   .0371667    18.02   0.000     .5969834    .7426989
         31  |    .810576   .0386473    20.97   0.000     .7348158    .8863362
         32  |    .947565   .0388487    24.39   0.000     .8714101     1.02372
         33  |   .9965312   .0390011    25.55   0.000     .9200776    1.072985
         34  |   1.133053   .0404414    28.02   0.000     1.053776    1.212331
         35  |   1.216118    .040865    29.76   0.000     1.136011    1.296226
         36  |   1.296238   .0414354    31.28   0.000     1.215012    1.377464
         37  |   1.349381   .0420904    32.06   0.000     1.266871     1.43189
         38  |   1.430692   .0429041    33.35   0.000     1.346587    1.514797
         39  |   1.492004   .0436678    34.17   0.000     1.406402    1.577606
         40  |    1.58333   .0451954    35.03   0.000     1.494733    1.671926
         41  |   1.645321   .0450887    36.49   0.000     1.556933    1.733708
         42  |   1.729488   .0447739    38.63   0.000     1.641717    1.817258
         43  |   1.713422   .0458779    37.35   0.000     1.623487    1.803356
         44  |   1.764247   .0466724    37.80   0.000     1.672755    1.855739
         45  |    1.82417   .0478762    38.10   0.000     1.730319    1.918022
         46  |    1.83724   .0486093    37.80   0.000     1.741951    1.932528
         47  |   1.859588   .0496384    37.46   0.000     1.762282    1.956894
         48  |   1.922979   .0501432    38.35   0.000     1.824683    2.021274
         49  |   1.947362   .0519783    37.46   0.000     1.845469    2.049255
         50  |   2.004546   .0520409    38.52   0.000      1.90253    2.106562
             |
     age_cat |
          1  |   .3819931   .0361266    10.57   0.000     .3111743    .4528119
          2  |   .5201685   .0371611    14.00   0.000     .4473217    .5930153
          3  |   .5868935   .0386987    15.17   0.000     .5110326    .6627545
          4  |   .6550444   .0396608    16.52   0.000     .5772975    .7327912
          5  |   .6805233   .0406546    16.74   0.000     .6008282    .7602184
          6  |   .7000534   .0415157    16.86   0.000     .6186703    .7814364
          7  |   .7330307    .042036    17.44   0.000     .6506277    .8154336
          8  |   .7355044   .0427305    17.21   0.000     .6517399    .8192689
          9  |   .7663879    .043715    17.53   0.000     .6806934    .8520823
         10  |   .7868535   .0442487    17.78   0.000     .7001128    .8735941
         11  |   .7982707   .0451388    17.68   0.000     .7097853    .8867562
         12  |   .8106237   .0463117    17.50   0.000     .7198391    .9014083
         13  |   .8377681   .0469828    17.83   0.000     .7456678    .9298684
         14  |   .8326296   .0479687    17.36   0.000     .7385967    .9266624
         15  |   .8400417   .0486946    17.25   0.000     .7445859    .9354975
         16  |   .8615811   .0498973    17.27   0.000     .7637675    .9593946
         17  |   .8415679   .0511616    16.45   0.000     .7412759      .94186
         18  |   .8435002   .0526809    16.01   0.000       .74023    .9467705
         19  |   .8429953   .0539787    15.62   0.000     .7371811    .9488096
         20  |   .8543757   .0577985    14.78   0.000     .7410735    .9676779
         25  |   .8055335    .072252    11.15   0.000     .6638981    .9471689
         30  |   .3212182   .1273547     2.52   0.012     .0715652    .5708713
         40  |   .0463855   .1151737     0.40   0.687    -.1793892    .2721602
         50  |   .1783319   .1229982     1.45   0.147    -.0627812     .419445
             |
       _cons |   6.645435   .0459917   144.49   0.000     6.555278    6.735593
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    109,056
                                                F(50, 7121)       =     136.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2758
                                                Root MSE          =     1.0478

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .476213   .0346955    13.73   0.000     .4081995    .5442264
       expat |  -.0937499   .0379679    -2.47   0.014    -.1681784   -.0193215
             |
    ind_year |
         27  |   .1072809   .0294207     3.65   0.000     .0496075    .1649543
         28  |   .3019577   .0334918     9.02   0.000     .2363039    .3676116
         29  |    .519631   .0360692    14.41   0.000     .4489246    .5903373
         30  |   .6698411   .0371667    18.02   0.000     .5969834    .7426989
         31  |    .810576   .0386473    20.97   0.000     .7348158    .8863362
         32  |    .947565   .0388487    24.39   0.000     .8714101     1.02372
         33  |   .9965312   .0390011    25.55   0.000     .9200776    1.072985
         34  |   1.133053   .0404414    28.02   0.000     1.053776    1.212331
         35  |   1.216118    .040865    29.76   0.000     1.136011    1.296226
         36  |   1.296238   .0414354    31.28   0.000     1.215012    1.377464
         37  |   1.349381   .0420904    32.06   0.000     1.266871     1.43189
         38  |   1.430692   .0429041    33.35   0.000     1.346587    1.514797
         39  |   1.492004   .0436678    34.17   0.000     1.406402    1.577606
         40  |    1.58333   .0451954    35.03   0.000     1.494733    1.671926
         41  |   1.645321   .0450887    36.49   0.000     1.556933    1.733708
         42  |   1.729488   .0447739    38.63   0.000     1.641717    1.817258
         43  |   1.713422   .0458779    37.35   0.000     1.623487    1.803356
         44  |   1.764247   .0466724    37.80   0.000     1.672755    1.855739
         45  |    1.82417   .0478762    38.10   0.000     1.730319    1.918022
         46  |    1.83724   .0486093    37.80   0.000     1.741951    1.932528
         47  |   1.859588   .0496384    37.46   0.000     1.762282    1.956894
         48  |   1.922979   .0501432    38.35   0.000     1.824683    2.021274
         49  |   1.947362   .0519783    37.46   0.000     1.845469    2.049255
         50  |   2.004546   .0520409    38.52   0.000      1.90253    2.106562
             |
     age_cat |
          1  |   .3819931   .0361266    10.57   0.000     .3111743    .4528119
          2  |   .5201685   .0371611    14.00   0.000     .4473217    .5930153
          3  |   .5868935   .0386987    15.17   0.000     .5110326    .6627545
          4  |   .6550444   .0396608    16.52   0.000     .5772975    .7327912
          5  |   .6805233   .0406546    16.74   0.000     .6008282    .7602184
          6  |   .7000534   .0415157    16.86   0.000     .6186703    .7814364
          7  |   .7330307    .042036    17.44   0.000     .6506277    .8154336
          8  |   .7355044   .0427305    17.21   0.000     .6517399    .8192689
          9  |   .7663879    .043715    17.53   0.000     .6806934    .8520823
         10  |   .7868535   .0442487    17.78   0.000     .7001128    .8735941
         11  |   .7982707   .0451388    17.68   0.000     .7097853    .8867562
         12  |   .8106237   .0463117    17.50   0.000     .7198391    .9014083
         13  |   .8377681   .0469828    17.83   0.000     .7456678    .9298684
         14  |   .8326296   .0479687    17.36   0.000     .7385967    .9266624
         15  |   .8400417   .0486946    17.25   0.000     .7445859    .9354975
         16  |   .8615811   .0498973    17.27   0.000     .7637675    .9593946
         17  |   .8415679   .0511616    16.45   0.000     .7412759      .94186
         18  |   .8435002   .0526809    16.01   0.000       .74023    .9467705
         19  |   .8429953   .0539787    15.62   0.000     .7371811    .9488096
         20  |   .8543757   .0577985    14.78   0.000     .7410735    .9676779
         25  |   .8055335    .072252    11.15   0.000     .6638981    .9471689
         30  |   .3212182   .1273547     2.52   0.012     .0715652    .5708713
         40  |   .0463855   .1151737     0.40   0.687    -.1793892    .2721602
         50  |   .1783319   .1229982     1.45   0.147    -.0627812     .419445
             |
       _cons |   6.645435   .0459917   144.49   0.000     6.555278    6.735593
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    109,056
Group variable: id                              Number of groups  =      7,122

R-sq:                                           Obs per group:
     within  = 0.3733                                         min =          1
     between = 0.2616                                         avg =       15.3
     overall = 0.2460                                         max =        125

                                                F(50,7121)        =     134.09
corr(u_i, Xb)  = 0.1156                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0761484   .0349993     2.18   0.030     .0075393    .1447575
       expat |   .0151059    .010432     1.45   0.148    -.0053439    .0355558
             |
    ind_year |
         27  |   .1121771   .0211097     5.31   0.000     .0707959    .1535584
         28  |   .2754989   .0262502    10.50   0.000     .2240408    .3269571
         29  |   .4880555   .0311013    15.69   0.000     .4270877    .5490234
         30  |     .62947   .0344045    18.30   0.000     .5620269    .6969131
         31  |    .768386   .0386403    19.89   0.000     .6926395    .8441325
         32  |    .909999   .0430638    21.13   0.000      .825581    .9944169
         33  |   .9709395   .0471099    20.61   0.000     .8785901    1.063289
         34  |   1.101739    .052188    21.11   0.000     .9994354    1.204043
         35  |   1.189019   .0569764    20.87   0.000     1.077329     1.30071
         36  |    1.22111   .0617387    19.78   0.000     1.100083    1.342136
         37  |   1.280368   .0664244    19.28   0.000     1.150157     1.41058
         38  |   1.342617   .0716774    18.73   0.000     1.202108    1.483125
         39  |    1.37989   .0765412    18.03   0.000     1.229847    1.529934
         40  |   1.468861   .0823631    17.83   0.000     1.307405    1.630317
         41  |   1.520628   .0869961    17.48   0.000      1.35009    1.691166
         42  |   1.585982   .0913924    17.35   0.000     1.406826    1.765138
         43  |     1.5493    .096339    16.08   0.000     1.360447    1.738153
         44  |   1.596544   .1011346    15.79   0.000      1.39829    1.794798
         45  |    1.65904   .1059096    15.66   0.000     1.451426    1.866654
         46  |   1.657074   .1108262    14.95   0.000     1.439822    1.874326
         47  |   1.686403    .114851    14.68   0.000     1.461261    1.911545
         48  |   1.749267   .1187254    14.73   0.000      1.51653    1.982004
         49  |   1.752885   .1232007    14.23   0.000     1.511375    1.994395
         50  |   1.791511   .1279599    14.00   0.000     1.540671     2.04235
             |
     age_cat |
          1  |   .2816483   .0271209    10.38   0.000     .2284833    .3348133
          2  |   .3559074   .0301213    11.82   0.000     .2968606    .4149541
          3  |   .3651252   .0336199    10.86   0.000     .2992202    .4310302
          4  |   .3974137   .0372965    10.66   0.000     .3243016    .4705259
          5  |   .4002531   .0409709     9.77   0.000      .319938    .4805682
          6  |   .4100449   .0449695     9.12   0.000     .3218914    .4981984
          7  |    .431233   .0491414     8.78   0.000     .3349012    .5275647
          8  |   .4253831   .0537228     7.92   0.000     .3200705    .5306957
          9  |   .4415249   .0582651     7.58   0.000      .327308    .5557419
         10  |   .4434619   .0630141     7.04   0.000     .3199355    .5669883
         11  |   .4489454   .0676227     6.64   0.000     .3163849     .581506
         12  |    .441404   .0729881     6.05   0.000     .2983256    .5844824
         13  |   .4590633   .0776088     5.92   0.000      .306927    .6111996
         14  |   .4598013   .0825104     5.57   0.000     .2980564    .6215461
         15  |   .4637841   .0873452     5.31   0.000     .2925614    .6350067
         16  |   .4873902   .0923086     5.28   0.000     .3064379    .6683424
         17  |   .4832006   .0977668     4.94   0.000     .2915486    .6748527
         18  |   .4983866   .1027967     4.85   0.000     .2968744    .6998988
         19  |    .493946   .1079828     4.57   0.000     .2822676    .7056243
         20  |   .4846647   .1190416     4.07   0.000     .2513077    .7180217
         25  |     .45513     .13613     3.34   0.001     .1882747    .7219852
         30  |   .3289514   .1743664     1.89   0.059    -.0128585    .6707614
         40  |   .3977182   .2209137     1.80   0.072    -.0353383    .8307748
         50  |   .3245896   .2463903     1.32   0.188    -.1584087    .8075879
             |
       _cons |   7.121993   .0380931   186.96   0.000      7.04732    7.196667
-------------+----------------------------------------------------------------
     sigma_u |  1.1184234
     sigma_e |  .47984261
         rho |  .84454403   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3733168095127672

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    109,056
Group variable: id                              Number of groups  =      7,122

R-sq:                                           Obs per group:
     within  = 0.3733                                         min =          1
     between = 0.2616                                         avg =       15.3
     overall = 0.2460                                         max =        125

                                                F(50,7121)        =     134.09
corr(u_i, Xb)  = 0.1156                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0761484   .0349993     2.18   0.030     .0075393    .1447575
       expat |   .0151059    .010432     1.45   0.148    -.0053439    .0355558
             |
    ind_year |
         27  |   .1121771   .0211097     5.31   0.000     .0707959    .1535584
         28  |   .2754989   .0262502    10.50   0.000     .2240408    .3269571
         29  |   .4880555   .0311013    15.69   0.000     .4270877    .5490234
         30  |     .62947   .0344045    18.30   0.000     .5620269    .6969131
         31  |    .768386   .0386403    19.89   0.000     .6926395    .8441325
         32  |    .909999   .0430638    21.13   0.000      .825581    .9944169
         33  |   .9709395   .0471099    20.61   0.000     .8785901    1.063289
         34  |   1.101739    .052188    21.11   0.000     .9994354    1.204043
         35  |   1.189019   .0569764    20.87   0.000     1.077329     1.30071
         36  |    1.22111   .0617387    19.78   0.000     1.100083    1.342136
         37  |   1.280368   .0664244    19.28   0.000     1.150157     1.41058
         38  |   1.342617   .0716774    18.73   0.000     1.202108    1.483125
         39  |    1.37989   .0765412    18.03   0.000     1.229847    1.529934
         40  |   1.468861   .0823631    17.83   0.000     1.307405    1.630317
         41  |   1.520628   .0869961    17.48   0.000      1.35009    1.691166
         42  |   1.585982   .0913924    17.35   0.000     1.406826    1.765138
         43  |     1.5493    .096339    16.08   0.000     1.360447    1.738153
         44  |   1.596544   .1011346    15.79   0.000      1.39829    1.794798
         45  |    1.65904   .1059096    15.66   0.000     1.451426    1.866654
         46  |   1.657074   .1108262    14.95   0.000     1.439822    1.874326
         47  |   1.686403    .114851    14.68   0.000     1.461261    1.911545
         48  |   1.749267   .1187254    14.73   0.000      1.51653    1.982004
         49  |   1.752885   .1232007    14.23   0.000     1.511375    1.994395
         50  |   1.791511   .1279599    14.00   0.000     1.540671     2.04235
             |
     age_cat |
          1  |   .2816483   .0271209    10.38   0.000     .2284833    .3348133
          2  |   .3559074   .0301213    11.82   0.000     .2968606    .4149541
          3  |   .3651252   .0336199    10.86   0.000     .2992202    .4310302
          4  |   .3974137   .0372965    10.66   0.000     .3243016    .4705259
          5  |   .4002531   .0409709     9.77   0.000      .319938    .4805682
          6  |   .4100449   .0449695     9.12   0.000     .3218914    .4981984
          7  |    .431233   .0491414     8.78   0.000     .3349012    .5275647
          8  |   .4253831   .0537228     7.92   0.000     .3200705    .5306957
          9  |   .4415249   .0582651     7.58   0.000      .327308    .5557419
         10  |   .4434619   .0630141     7.04   0.000     .3199355    .5669883
         11  |   .4489454   .0676227     6.64   0.000     .3163849     .581506
         12  |    .441404   .0729881     6.05   0.000     .2983256    .5844824
         13  |   .4590633   .0776088     5.92   0.000      .306927    .6111996
         14  |   .4598013   .0825104     5.57   0.000     .2980564    .6215461
         15  |   .4637841   .0873452     5.31   0.000     .2925614    .6350067
         16  |   .4873902   .0923086     5.28   0.000     .3064379    .6683424
         17  |   .4832006   .0977668     4.94   0.000     .2915486    .6748527
         18  |   .4983866   .1027967     4.85   0.000     .2968744    .6998988
         19  |    .493946   .1079828     4.57   0.000     .2822676    .7056243
         20  |   .4846647   .1190416     4.07   0.000     .2513077    .7180217
         25  |     .45513     .13613     3.34   0.001     .1882747    .7219852
         30  |   .3289514   .1743664     1.89   0.059    -.0128585    .6707614
         40  |   .3977182   .2209137     1.80   0.072    -.0353383    .8307748
         50  |   .3245896   .2463903     1.32   0.188    -.1584087    .8075879
             |
       _cons |   7.121993   .0380931   186.96   0.000      7.04732    7.196667
-------------+----------------------------------------------------------------
     sigma_u |  1.1184234
     sigma_e |  .47984261
         rho |  .84454403   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    181711
Group variable: firm_person                     Number of groups   =     21971

R-sq:  within  = 0.3198                         Obs per group: min =         1
       between = 0.2711                                        avg =       8.3
       overall = 0.2476                                        max =        25

                                                F(53,7121)         =    126.71
corr(u_i, Xb)  = 0.1446                         Prob > F           =    0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0620268   .0329901     1.88   0.060    -.0026437    .1266972
      during |   .0178421   .0102753     1.74   0.083    -.0023006    .0379848
       after |   .0565333   .0178471     3.17   0.002     .0215477     .091519
during_expat |    .110693   .0178113     6.21   0.000     .0757775    .1456084
 after_expat |   .1681591   .0257472     6.53   0.000     .1176869    .2186313
             |
    ind_year |
         27  |   .1045178   .0211943     4.93   0.000     .0629707     .146065
         28  |   .2787556   .0258182    10.80   0.000     .2281444    .3293669
         29  |   .4914965   .0313779    15.66   0.000     .4299866    .5530065
         30  |   .6320988   .0340986    18.54   0.000     .5652554    .6989422
         31  |   .7685161   .0383135    20.06   0.000     .6934103    .8436219
         32  |   .9034506   .0425607    21.23   0.000      .820019    .9868823
         33  |   .9616714   .0463378    20.75   0.000     .8708356    1.052507
         34  |   1.093772   .0510771    21.41   0.000     .9936453    1.193898
         35  |   1.174006   .0555374    21.14   0.000     1.065137    1.282876
         36  |   1.196801   .0598949    19.98   0.000     1.079389    1.314212
         37  |   1.258681   .0643801    19.55   0.000     1.132477    1.384886
         38  |   1.321461    .069234    19.09   0.000     1.185742     1.45718
         39  |   1.359531   .0738063    18.42   0.000     1.214848    1.504213
         40  |   1.449842   .0792575    18.29   0.000     1.294474    1.605211
         41  |   1.494605   .0834198    17.92   0.000     1.331077    1.658132
         42  |   1.557748   .0875743    17.79   0.000     1.386076    1.729419
         43  |   1.516958   .0919617    16.50   0.000     1.336686     1.69723
         44  |   1.562315   .0964734    16.19   0.000     1.373199    1.751432
         45  |   1.617768    .100894    16.03   0.000     1.419986     1.81555
         46  |   1.619222   .1051076    15.41   0.000      1.41318    1.825264
         47  |   1.647701   .1087917    15.15   0.000     1.434437    1.860966
         48  |    1.70301   .1122847    15.17   0.000     1.482898    1.923121
         49  |   1.694614   .1164387    14.55   0.000     1.466359    1.922868
         50  |   1.729226   .1206163    14.34   0.000     1.492782     1.96567
             |
     age_cat |
          1  |   .2979274   .0273326    10.90   0.000     .2443474    .3515073
          2  |   .3788073   .0301386    12.57   0.000     .3197268    .4378879
          3  |   .3905781   .0334309    11.68   0.000     .3250436    .4561126
          4  |   .4283596   .0366261    11.70   0.000     .3565617    .5001576
          5  |    .435431   .0400765    10.86   0.000     .3568691    .5139929
          6  |   .4473212    .043695    10.24   0.000      .361666    .5329764
          7  |   .4644923   .0476602     9.75   0.000     .3710641    .5579204
          8  |   .4631609   .0518951     8.92   0.000     .3614312    .5648906
          9  |    .474847    .055988     8.48   0.000      .365094       .5846
         10  |   .4771504    .060354     7.91   0.000     .3588386    .5954622
         11  |   .4809927   .0646163     7.44   0.000     .3543256    .6076598
         12  |   .4753855   .0694035     6.85   0.000     .3393339    .6114371
         13  |   .4900869   .0737771     6.64   0.000     .3454619    .6347119
         14  |   .4933463    .078248     6.30   0.000     .3399568    .6467357
         15  |    .496719   .0826849     6.01   0.000      .334632    .6588061
         16  |   .5164849   .0872846     5.92   0.000     .3453812    .6875886
         17  |   .5163085   .0923042     5.59   0.000     .3353649    .6972521
         18  |   .5348946   .0970248     5.51   0.000     .3446971     .725092
         19  |   .5290305    .101619     5.21   0.000     .3298271     .728234
         20  |   .5177545   .1109935     4.66   0.000     .3001742    .7353347
         25  |   .4970315   .1261081     3.94   0.000      .249822    .7442409
         30  |   .3857035     .16747     2.30   0.021     .0574125    .7139945
         40  |   .4528807   .2027603     2.23   0.026     .0554102    .8503512
         50  |   .3859545   .2198294     1.76   0.079    -.0449765    .8168855
             |
       _cons |   7.158607   .0386246   185.34   0.000     7.082891    7.234322
-------------+----------------------------------------------------------------
     sigma_u |   1.112445
     sigma_e |  .49082749
         rho |  .83705072   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .3197650709335359

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    181,711
Group variable: firm_person                     Number of groups  =     21,971

R-sq:                                           Obs per group:
     within  = 0.3198                                         min =          1
     between = 0.2711                                         avg =        8.3
     overall = 0.2476                                         max =         25

                                                F(53,7121)        =     126.71
corr(u_i, Xb)  = 0.1446                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0620268   .0329901     1.88   0.060    -.0026437    .1266972
      during |   .0178421   .0102753     1.74   0.083    -.0023006    .0379848
       after |   .0565333   .0178471     3.17   0.002     .0215477     .091519
during_expat |    .110693   .0178113     6.21   0.000     .0757775    .1456084
 after_expat |   .1681591   .0257472     6.53   0.000     .1176869    .2186313
             |
    ind_year |
         27  |   .1045178   .0211943     4.93   0.000     .0629707     .146065
         28  |   .2787556   .0258182    10.80   0.000     .2281444    .3293669
         29  |   .4914965   .0313779    15.66   0.000     .4299866    .5530065
         30  |   .6320988   .0340986    18.54   0.000     .5652554    .6989422
         31  |   .7685161   .0383135    20.06   0.000     .6934103    .8436219
         32  |   .9034506   .0425607    21.23   0.000      .820019    .9868823
         33  |   .9616714   .0463378    20.75   0.000     .8708356    1.052507
         34  |   1.093772   .0510771    21.41   0.000     .9936453    1.193898
         35  |   1.174006   .0555374    21.14   0.000     1.065137    1.282876
         36  |   1.196801   .0598949    19.98   0.000     1.079389    1.314212
         37  |   1.258681   .0643801    19.55   0.000     1.132477    1.384886
         38  |   1.321461    .069234    19.09   0.000     1.185742     1.45718
         39  |   1.359531   .0738063    18.42   0.000     1.214848    1.504213
         40  |   1.449842   .0792575    18.29   0.000     1.294474    1.605211
         41  |   1.494605   .0834198    17.92   0.000     1.331077    1.658132
         42  |   1.557748   .0875743    17.79   0.000     1.386076    1.729419
         43  |   1.516958   .0919617    16.50   0.000     1.336686     1.69723
         44  |   1.562315   .0964734    16.19   0.000     1.373199    1.751432
         45  |   1.617768    .100894    16.03   0.000     1.419986     1.81555
         46  |   1.619222   .1051076    15.41   0.000      1.41318    1.825264
         47  |   1.647701   .1087917    15.15   0.000     1.434437    1.860966
         48  |    1.70301   .1122847    15.17   0.000     1.482898    1.923121
         49  |   1.694614   .1164387    14.55   0.000     1.466359    1.922868
         50  |   1.729226   .1206163    14.34   0.000     1.492782     1.96567
             |
     age_cat |
          1  |   .2979274   .0273326    10.90   0.000     .2443474    .3515073
          2  |   .3788073   .0301386    12.57   0.000     .3197268    .4378879
          3  |   .3905781   .0334309    11.68   0.000     .3250436    .4561126
          4  |   .4283596   .0366261    11.70   0.000     .3565617    .5001576
          5  |    .435431   .0400765    10.86   0.000     .3568691    .5139929
          6  |   .4473212    .043695    10.24   0.000      .361666    .5329764
          7  |   .4644923   .0476602     9.75   0.000     .3710641    .5579204
          8  |   .4631609   .0518951     8.92   0.000     .3614312    .5648906
          9  |    .474847    .055988     8.48   0.000      .365094       .5846
         10  |   .4771504    .060354     7.91   0.000     .3588386    .5954622
         11  |   .4809927   .0646163     7.44   0.000     .3543256    .6076598
         12  |   .4753855   .0694035     6.85   0.000     .3393339    .6114371
         13  |   .4900869   .0737771     6.64   0.000     .3454619    .6347119
         14  |   .4933463    .078248     6.30   0.000     .3399568    .6467357
         15  |    .496719   .0826849     6.01   0.000      .334632    .6588061
         16  |   .5164849   .0872846     5.92   0.000     .3453812    .6875886
         17  |   .5163085   .0923042     5.59   0.000     .3353649    .6972521
         18  |   .5348946   .0970248     5.51   0.000     .3446971     .725092
         19  |   .5290305    .101619     5.21   0.000     .3298271     .728234
         20  |   .5177545   .1109935     4.66   0.000     .3001742    .7353347
         25  |   .4970315   .1261081     3.94   0.000      .249822    .7442409
         30  |   .3857035     .16747     2.30   0.021     .0574125    .7139945
         40  |   .4528807   .2027603     2.23   0.026     .0554102    .8503512
         50  |   .3859545   .2198294     1.76   0.079    -.0449765    .8168855
             |
       _cons |   7.158607   .0386246   185.34   0.000     7.082891    7.234322
-------------+----------------------------------------------------------------
     sigma_u |   1.112445
     sigma_e |  .49082749
         rho |  .83705072   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1,  7121) =    3.02
            Prob > F =    0.0825

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  7121) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1,  7121) =    8.58
            Prob > F =    0.0034

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  7121) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1,  7121) =   38.62
            Prob > F =    0.0000

 ( 1)  during_expat = 0

       F(  1,  7121) =   38.62
            Prob > F =    0.0000
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1,  7121) =    9.93
            Prob > F =    0.0016

 ( 1)  after_expat = 0

       F(  1,  7121) =   42.66
            Prob > F =    0.0000
(1 real change made)
(file output/figure/manufacturing_lnQL_slope.png written in PNG format)
(sum of wgt is 101,303.286886573)

Linear regression                               Number of obs     =    238,775
                                                F(75, 16123)      =     153.91
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1876
                                                Root MSE          =     1.1617

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5925479   .0361675    16.38   0.000     .5216555    .6634403
       expat |  -.0460756   .0493461    -0.93   0.350    -.1427995    .0506483
             |
    ind_year |
          2  |   .0986213   .0284299     3.47   0.001     .0428956    .1543469
          3  |   .3090638   .0329285     9.39   0.000     .2445203    .3736072
          4  |   .5463603      .0342    15.98   0.000     .4793246     .613396
          5  |   .6984648   .0351031    19.90   0.000     .6296588    .7672707
          6  |   .8887695   .0361133    24.61   0.000     .8179834    .9595557
          7  |   .9648491   .0365962    26.36   0.000     .8931166    1.036582
          8  |   1.031571   .0365943    28.19   0.000     .9598418      1.1033
          9  |   1.130125   .0369344    30.60   0.000     1.057729     1.20252
         10  |   1.227783   .0372713    32.94   0.000     1.154727    1.300839
         11  |    1.22707   .0376811    32.56   0.000     1.153211    1.300929
         12  |   1.227377   .0381604    32.16   0.000     1.152578    1.302175
         13  |   1.228529   .0384484    31.95   0.000     1.153166    1.303892
         14  |   1.236056   .0388075    31.85   0.000     1.159989    1.312123
         15  |   1.264986   .0392036    32.27   0.000     1.188142    1.341829
         16  |   1.270652   .0389481    32.62   0.000      1.19431    1.346995
         17  |    1.31235   .0391355    33.53   0.000      1.23564     1.38906
         18  |   1.222323   .0396862    30.80   0.000     1.144534    1.300112
         19  |   1.229619   .0396324    31.03   0.000     1.151935    1.307303
         20  |   1.275395   .0400978    31.81   0.000     1.196799    1.353991
         21  |   1.263977   .0411623    30.71   0.000     1.183295     1.34466
         22  |   1.298308   .0415477    31.25   0.000      1.21687    1.379746
         23  |   1.335058    .041712    32.01   0.000     1.253298    1.416818
         24  |   1.336208    .042509    31.43   0.000     1.252886    1.419531
         25  |   1.330575    .042372    31.40   0.000     1.247521    1.413628
         26  |  -.5088009   .0487255   -10.44   0.000    -.6043083   -.4132935
         27  |  -.3585193   .0467713    -7.67   0.000    -.4501962   -.2668424
         28  |  -.1616002   .0447091    -3.61   0.000     -.249235   -.0739655
         29  |   .0431452   .0443817     0.97   0.331    -.0438478    .1301383
         30  |   .2178399   .0437121     4.98   0.000     .1321593    .3035204
         31  |   .3437278   .0434102     7.92   0.000     .2586389    .4288167
         32  |   .4753563   .0422471    11.25   0.000     .3925473    .5581654
         33  |   .5010749   .0416545    12.03   0.000     .4194275    .5827224
         34  |   .6287866    .042312    14.86   0.000     .5458503    .7117229
         35  |   .7000598   .0420072    16.67   0.000     .6177211    .7823986
         36  |   .7754556   .0420265    18.45   0.000     .6930789    .8578323
         37  |   .7802739   .0423758    18.41   0.000     .6972126    .8633352
         38  |   .8353004   .0426497    19.59   0.000     .7517022    .9188985
         39  |   .8657312   .0427882    20.23   0.000     .7818616    .9496008
         40  |   .9291265   .0438633    21.18   0.000     .8431496    1.015103
         41  |   .9894047   .0435913    22.70   0.000     .9039609    1.074848
         42  |    1.06771   .0430045    24.83   0.000     .9834162    1.152003
         43  |   1.036006   .0442399    23.42   0.000     .9492913    1.122721
         44  |   1.075274   .0447583    24.02   0.000     .9875427    1.163005
         45  |   1.123056   .0453333    24.77   0.000     1.034197    1.211914
         46  |   1.121788   .0459519    24.41   0.000     1.031717    1.211858
         47  |   1.147722   .0462251    24.83   0.000     1.057116    1.238329
         48  |   1.217756   .0459037    26.53   0.000      1.12778    1.307733
         49  |    1.21998   .0476033    25.63   0.000     1.126672    1.313287
         50  |   1.270323   .0463127    27.43   0.000     1.179545    1.361102
             |
     age_cat |
          1  |   .3960048   .0240576    16.46   0.000     .3488492    .4431604
          2  |   .5235875    .024692    21.20   0.000     .4751885    .5719865
          3  |   .5940773   .0253865    23.40   0.000     .5443169    .6438377
          4  |   .6496994   .0260586    24.93   0.000     .5986216    .7007771
          5  |   .7019267   .0266839    26.31   0.000     .6496233    .7542301
          6  |   .7308706   .0272501    26.82   0.000     .6774575    .7842838
          7  |   .7839032   .0276444    28.36   0.000     .7297172    .8380893
          8  |   .8172842    .028097    29.09   0.000      .762211    .8723574
          9  |    .868902    .028661    30.32   0.000     .8127232    .9250807
         10  |   .8844609   .0291288    30.36   0.000     .8273651    .9415566
         11  |   .9362559    .029795    31.42   0.000     .8778544    .9946573
         12  |   .9661905   .0305218    31.66   0.000     .9063644    1.026017
         13  |   1.002101   .0311795    32.14   0.000     .9409859    1.063217
         14  |   1.039912   .0317374    32.77   0.000     .9777033    1.102121
         15  |   1.073388   .0325293    33.00   0.000     1.009627    1.137149
         16  |   1.096318    .033287    32.94   0.000     1.031071    1.161564
         17  |   1.103414    .034378    32.10   0.000     1.036029    1.170798
         18  |   1.122018   .0349924    32.06   0.000     1.053429    1.190607
         19  |   1.127207    .036166    31.17   0.000     1.056318    1.198097
         20  |   1.140455   .0385316    29.60   0.000     1.064929    1.215982
         25  |   1.055873   .0499511    21.14   0.000     .9579635    1.153783
         30  |    .416473   .0661834     6.29   0.000     .2867462    .5461998
         40  |   .3494828   .0585005     5.97   0.000     .2348152    .4641503
         50  |   .5924605   .0696293     8.51   0.000     .4559793    .7289416
             |
       _cons |   7.126292   .0382691   186.22   0.000      7.05128    7.201304
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    238,775
                                                F(75, 16123)      =     153.91
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1876
                                                Root MSE          =     1.1617

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .5925479   .0361675    16.38   0.000     .5216555    .6634403
       expat |  -.0460756   .0493461    -0.93   0.350    -.1427995    .0506483
             |
    ind_year |
          2  |   .0986213   .0284299     3.47   0.001     .0428956    .1543469
          3  |   .3090638   .0329285     9.39   0.000     .2445203    .3736072
          4  |   .5463603      .0342    15.98   0.000     .4793246     .613396
          5  |   .6984648   .0351031    19.90   0.000     .6296588    .7672707
          6  |   .8887695   .0361133    24.61   0.000     .8179834    .9595557
          7  |   .9648491   .0365962    26.36   0.000     .8931166    1.036582
          8  |   1.031571   .0365943    28.19   0.000     .9598418      1.1033
          9  |   1.130125   .0369344    30.60   0.000     1.057729     1.20252
         10  |   1.227783   .0372713    32.94   0.000     1.154727    1.300839
         11  |    1.22707   .0376811    32.56   0.000     1.153211    1.300929
         12  |   1.227377   .0381604    32.16   0.000     1.152578    1.302175
         13  |   1.228529   .0384484    31.95   0.000     1.153166    1.303892
         14  |   1.236056   .0388075    31.85   0.000     1.159989    1.312123
         15  |   1.264986   .0392036    32.27   0.000     1.188142    1.341829
         16  |   1.270652   .0389481    32.62   0.000      1.19431    1.346995
         17  |    1.31235   .0391355    33.53   0.000      1.23564     1.38906
         18  |   1.222323   .0396862    30.80   0.000     1.144534    1.300112
         19  |   1.229619   .0396324    31.03   0.000     1.151935    1.307303
         20  |   1.275395   .0400978    31.81   0.000     1.196799    1.353991
         21  |   1.263977   .0411623    30.71   0.000     1.183295     1.34466
         22  |   1.298308   .0415477    31.25   0.000      1.21687    1.379746
         23  |   1.335058    .041712    32.01   0.000     1.253298    1.416818
         24  |   1.336208    .042509    31.43   0.000     1.252886    1.419531
         25  |   1.330575    .042372    31.40   0.000     1.247521    1.413628
         26  |  -.5088009   .0487255   -10.44   0.000    -.6043083   -.4132935
         27  |  -.3585193   .0467713    -7.67   0.000    -.4501962   -.2668424
         28  |  -.1616002   .0447091    -3.61   0.000     -.249235   -.0739655
         29  |   .0431452   .0443817     0.97   0.331    -.0438478    .1301383
         30  |   .2178399   .0437121     4.98   0.000     .1321593    .3035204
         31  |   .3437278   .0434102     7.92   0.000     .2586389    .4288167
         32  |   .4753563   .0422471    11.25   0.000     .3925473    .5581654
         33  |   .5010749   .0416545    12.03   0.000     .4194275    .5827224
         34  |   .6287866    .042312    14.86   0.000     .5458503    .7117229
         35  |   .7000598   .0420072    16.67   0.000     .6177211    .7823986
         36  |   .7754556   .0420265    18.45   0.000     .6930789    .8578323
         37  |   .7802739   .0423758    18.41   0.000     .6972126    .8633352
         38  |   .8353004   .0426497    19.59   0.000     .7517022    .9188985
         39  |   .8657312   .0427882    20.23   0.000     .7818616    .9496008
         40  |   .9291265   .0438633    21.18   0.000     .8431496    1.015103
         41  |   .9894047   .0435913    22.70   0.000     .9039609    1.074848
         42  |    1.06771   .0430045    24.83   0.000     .9834162    1.152003
         43  |   1.036006   .0442399    23.42   0.000     .9492913    1.122721
         44  |   1.075274   .0447583    24.02   0.000     .9875427    1.163005
         45  |   1.123056   .0453333    24.77   0.000     1.034197    1.211914
         46  |   1.121788   .0459519    24.41   0.000     1.031717    1.211858
         47  |   1.147722   .0462251    24.83   0.000     1.057116    1.238329
         48  |   1.217756   .0459037    26.53   0.000      1.12778    1.307733
         49  |    1.21998   .0476033    25.63   0.000     1.126672    1.313287
         50  |   1.270323   .0463127    27.43   0.000     1.179545    1.361102
             |
     age_cat |
          1  |   .3960048   .0240576    16.46   0.000     .3488492    .4431604
          2  |   .5235875    .024692    21.20   0.000     .4751885    .5719865
          3  |   .5940773   .0253865    23.40   0.000     .5443169    .6438377
          4  |   .6496994   .0260586    24.93   0.000     .5986216    .7007771
          5  |   .7019267   .0266839    26.31   0.000     .6496233    .7542301
          6  |   .7308706   .0272501    26.82   0.000     .6774575    .7842838
          7  |   .7839032   .0276444    28.36   0.000     .7297172    .8380893
          8  |   .8172842    .028097    29.09   0.000      .762211    .8723574
          9  |    .868902    .028661    30.32   0.000     .8127232    .9250807
         10  |   .8844609   .0291288    30.36   0.000     .8273651    .9415566
         11  |   .9362559    .029795    31.42   0.000     .8778544    .9946573
         12  |   .9661905   .0305218    31.66   0.000     .9063644    1.026017
         13  |   1.002101   .0311795    32.14   0.000     .9409859    1.063217
         14  |   1.039912   .0317374    32.77   0.000     .9777033    1.102121
         15  |   1.073388   .0325293    33.00   0.000     1.009627    1.137149
         16  |   1.096318    .033287    32.94   0.000     1.031071    1.161564
         17  |   1.103414    .034378    32.10   0.000     1.036029    1.170798
         18  |   1.122018   .0349924    32.06   0.000     1.053429    1.190607
         19  |   1.127207    .036166    31.17   0.000     1.056318    1.198097
         20  |   1.140455   .0385316    29.60   0.000     1.064929    1.215982
         25  |   1.055873   .0499511    21.14   0.000     .9579635    1.153783
         30  |    .416473   .0661834     6.29   0.000     .2867462    .5461998
         40  |   .3494828   .0585005     5.97   0.000     .2348152    .4641503
         50  |   .5924605   .0696293     8.51   0.000     .4559793    .7289416
             |
       _cons |   7.126292   .0382691   186.22   0.000      7.05128    7.201304
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    238,775
Group variable: id                              Number of groups  =     16,124

R-sq:                                           Obs per group:
     within  = 0.2757                                         min =          1
     between = 0.1214                                         avg =       14.8
     overall = 0.1280                                         max =        161

                                                F(75,16123)       =     129.37
corr(u_i, Xb)  = -0.0025                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0555974   .0289688     1.92   0.055    -.0011848    .1123796
       expat |   .0340993   .0212364     1.61   0.108    -.0075264     .075725
             |
    ind_year |
          2  |   .0905818   .0203349     4.45   0.000     .0507231    .1304405
          3  |     .29181    .024902    11.72   0.000     .2429994    .3406206
          4  |   .4960105   .0268762    18.46   0.000     .4433302    .5486908
          5  |   .6534718   .0298104    21.92   0.000     .5950402    .7119034
          6  |   .8502401   .0324876    26.17   0.000     .7865608    .9139194
          7  |   .9749741   .0351442    27.74   0.000     .9060876    1.043861
          8  |   1.057654    .037759    28.01   0.000     .9836423    1.131666
          9  |   1.178529   .0405675    29.05   0.000     1.099012    1.258046
         10  |   1.296486   .0439023    29.53   0.000     1.210433    1.382539
         11  |   1.362882   .0469144    29.05   0.000     1.270924    1.454839
         12  |   1.391456   .0503356    27.64   0.000     1.292793    1.490119
         13  |   1.429916   .0533922    26.78   0.000     1.325261    1.534571
         14  |   1.478118   .0564618    26.18   0.000     1.367447     1.58879
         15  |   1.546636   .0600742    25.75   0.000     1.428884    1.664388
         16  |    1.58999   .0629325    25.27   0.000     1.466635    1.713345
         17  |   1.645851   .0665294    24.74   0.000     1.515446    1.776256
         18  |   1.577688   .0698684    22.58   0.000     1.440738    1.714638
         19  |   1.600366   .0731115    21.89   0.000     1.457059    1.743673
         20  |   1.660349    .076284    21.77   0.000     1.510824    1.809874
         21  |   1.681381   .0793789    21.18   0.000     1.525789    1.836972
         22  |   1.734453   .0822145    21.10   0.000     1.573303    1.895603
         23  |   1.783687   .0850616    20.97   0.000     1.616957    1.950418
         24  |   1.812168   .0884441    20.49   0.000     1.638808    1.985528
         25  |   1.827388   .0914104    19.99   0.000     1.648213    2.006562
         26  |  -.2174569   .0467696    -4.65   0.000    -.3091305   -.1257833
         27  |  -.0815052   .0443134    -1.84   0.066    -.1683644     .005354
         28  |   .0783612    .042614     1.84   0.066     -.005167    .1618893
         29  |   .2946506   .0428008     6.88   0.000     .2107564    .3785449
         30  |   .4775969   .0430347    11.10   0.000     .3932441    .5619497
         31  |   .6258194   .0442034    14.16   0.000     .5391758    .7124631
         32  |   .7836203   .0454141    17.26   0.000     .6946037     .872637
         33  |   .8539648   .0467256    18.28   0.000     .7623775    .9455522
         34  |   1.002045   .0487299    20.56   0.000      .906529    1.097561
         35  |   1.102945   .0507362    21.74   0.000     1.003496    1.202393
         36  |   1.157043   .0537142    21.54   0.000     1.051757    1.262329
         37  |   1.218491   .0562812    21.65   0.000     1.108173    1.328808
         38  |   1.293857   .0590821    21.90   0.000      1.17805    1.409665
         39  |   1.334058   .0617834    21.59   0.000     1.212956     1.45516
         40  |   1.430187   .0653781    21.88   0.000     1.302038    1.558335
         41  |   1.506667   .0678687    22.20   0.000     1.373636    1.639697
         42  |   1.585253   .0706555    22.44   0.000     1.446761    1.723746
         43  |   1.561606   .0740655    21.08   0.000      1.41643    1.706783
         44  |   1.606943    .077226    20.81   0.000     1.455572    1.758315
         45  |   1.678814   .0803072    20.90   0.000     1.521403    1.836225
         46  |   1.676169   .0834177    20.09   0.000     1.512661    1.839677
         47  |   1.710185   .0858511    19.92   0.000     1.541907    1.878462
         48  |   1.786717    .088287    20.24   0.000     1.613665    1.959769
         49  |   1.788525   .0917165    19.50   0.000      1.60875      1.9683
         50  |   1.838432   .0948217    19.39   0.000     1.652571    2.024293
             |
     age_cat |
          1  |   .2690275   .0173086    15.54   0.000     .2351007    .3029543
          2  |    .291748   .0194757    14.98   0.000     .2535735    .3299225
          3  |   .2718886   .0217934    12.48   0.000     .2291711    .3146061
          4  |    .259433   .0243511    10.65   0.000     .2117022    .3071639
          5  |   .2545951   .0271361     9.38   0.000     .2014053    .3077849
          6  |   .2390657   .0301407     7.93   0.000     .1799865    .2981449
          7  |   .2435839   .0332214     7.33   0.000     .1784663    .3087016
          8  |   .2274548   .0364923     6.23   0.000     .1559258    .2989839
          9  |   .2242726   .0397797     5.64   0.000     .1462998    .3022453
         10  |   .2107609    .043197     4.88   0.000       .12609    .2954318
         11  |    .216014   .0466002     4.64   0.000     .1246724    .3073556
         12  |   .2030146   .0501437     4.05   0.000     .1047274    .3013019
         13  |   .1984497    .053536     3.71   0.000     .0935132    .3033861
         14  |   .2010177   .0570532     3.52   0.000      .089187    .3128484
         15  |   .2013698   .0606053     3.32   0.001     .0825767     .320163
         16  |   .1989487   .0640901     3.10   0.002      .073325    .3245724
         17  |   .1859681   .0679077     2.74   0.006     .0528614    .3190748
         18  |   .1882132   .0714938     2.63   0.008     .0480774    .3283489
         19  |   .1649159   .0754601     2.19   0.029     .0170057     .312826
         20  |   .1402472    .083006     1.69   0.091    -.0224537    .3029482
         25  |   .0905502   .0958808     0.94   0.345    -.0973869    .2784873
         30  |   .1243009   .1292221     0.96   0.336    -.1289888    .3775907
         40  |   .2476838   .1483159     1.67   0.095    -.0430319    .5383995
         50  |   .2450011   .1667671     1.47   0.142    -.0818809    .5718831
             |
       _cons |   7.400137   .0323969   228.42   0.000     7.336635    7.463638
-------------+----------------------------------------------------------------
     sigma_u |  1.2345849
     sigma_e |  .54151186
         rho |  .83865442   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .275749175134595

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    238,775
Group variable: id                              Number of groups  =     16,124

R-sq:                                           Obs per group:
     within  = 0.2757                                         min =          1
     between = 0.1214                                         avg =       14.8
     overall = 0.1280                                         max =        161

                                                F(75,16123)       =     129.37
corr(u_i, Xb)  = -0.0025                        Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0555974   .0289688     1.92   0.055    -.0011848    .1123796
       expat |   .0340993   .0212364     1.61   0.108    -.0075264     .075725
             |
    ind_year |
          2  |   .0905818   .0203349     4.45   0.000     .0507231    .1304405
          3  |     .29181    .024902    11.72   0.000     .2429994    .3406206
          4  |   .4960105   .0268762    18.46   0.000     .4433302    .5486908
          5  |   .6534718   .0298104    21.92   0.000     .5950402    .7119034
          6  |   .8502401   .0324876    26.17   0.000     .7865608    .9139194
          7  |   .9749741   .0351442    27.74   0.000     .9060876    1.043861
          8  |   1.057654    .037759    28.01   0.000     .9836423    1.131666
          9  |   1.178529   .0405675    29.05   0.000     1.099012    1.258046
         10  |   1.296486   .0439023    29.53   0.000     1.210433    1.382539
         11  |   1.362882   .0469144    29.05   0.000     1.270924    1.454839
         12  |   1.391456   .0503356    27.64   0.000     1.292793    1.490119
         13  |   1.429916   .0533922    26.78   0.000     1.325261    1.534571
         14  |   1.478118   .0564618    26.18   0.000     1.367447     1.58879
         15  |   1.546636   .0600742    25.75   0.000     1.428884    1.664388
         16  |    1.58999   .0629325    25.27   0.000     1.466635    1.713345
         17  |   1.645851   .0665294    24.74   0.000     1.515446    1.776256
         18  |   1.577688   .0698684    22.58   0.000     1.440738    1.714638
         19  |   1.600366   .0731115    21.89   0.000     1.457059    1.743673
         20  |   1.660349    .076284    21.77   0.000     1.510824    1.809874
         21  |   1.681381   .0793789    21.18   0.000     1.525789    1.836972
         22  |   1.734453   .0822145    21.10   0.000     1.573303    1.895603
         23  |   1.783687   .0850616    20.97   0.000     1.616957    1.950418
         24  |   1.812168   .0884441    20.49   0.000     1.638808    1.985528
         25  |   1.827388   .0914104    19.99   0.000     1.648213    2.006562
         26  |  -.2174569   .0467696    -4.65   0.000    -.3091305   -.1257833
         27  |  -.0815052   .0443134    -1.84   0.066    -.1683644     .005354
         28  |   .0783612    .042614     1.84   0.066     -.005167    .1618893
         29  |   .2946506   .0428008     6.88   0.000     .2107564    .3785449
         30  |   .4775969   .0430347    11.10   0.000     .3932441    .5619497
         31  |   .6258194   .0442034    14.16   0.000     .5391758    .7124631
         32  |   .7836203   .0454141    17.26   0.000     .6946037     .872637
         33  |   .8539648   .0467256    18.28   0.000     .7623775    .9455522
         34  |   1.002045   .0487299    20.56   0.000      .906529    1.097561
         35  |   1.102945   .0507362    21.74   0.000     1.003496    1.202393
         36  |   1.157043   .0537142    21.54   0.000     1.051757    1.262329
         37  |   1.218491   .0562812    21.65   0.000     1.108173    1.328808
         38  |   1.293857   .0590821    21.90   0.000      1.17805    1.409665
         39  |   1.334058   .0617834    21.59   0.000     1.212956     1.45516
         40  |   1.430187   .0653781    21.88   0.000     1.302038    1.558335
         41  |   1.506667   .0678687    22.20   0.000     1.373636    1.639697
         42  |   1.585253   .0706555    22.44   0.000     1.446761    1.723746
         43  |   1.561606   .0740655    21.08   0.000      1.41643    1.706783
         44  |   1.606943    .077226    20.81   0.000     1.455572    1.758315
         45  |   1.678814   .0803072    20.90   0.000     1.521403    1.836225
         46  |   1.676169   .0834177    20.09   0.000     1.512661    1.839677
         47  |   1.710185   .0858511    19.92   0.000     1.541907    1.878462
         48  |   1.786717    .088287    20.24   0.000     1.613665    1.959769
         49  |   1.788525   .0917165    19.50   0.000      1.60875      1.9683
         50  |   1.838432   .0948217    19.39   0.000     1.652571    2.024293
             |
     age_cat |
          1  |   .2690275   .0173086    15.54   0.000     .2351007    .3029543
          2  |    .291748   .0194757    14.98   0.000     .2535735    .3299225
          3  |   .2718886   .0217934    12.48   0.000     .2291711    .3146061
          4  |    .259433   .0243511    10.65   0.000     .2117022    .3071639
          5  |   .2545951   .0271361     9.38   0.000     .2014053    .3077849
          6  |   .2390657   .0301407     7.93   0.000     .1799865    .2981449
          7  |   .2435839   .0332214     7.33   0.000     .1784663    .3087016
          8  |   .2274548   .0364923     6.23   0.000     .1559258    .2989839
          9  |   .2242726   .0397797     5.64   0.000     .1462998    .3022453
         10  |   .2107609    .043197     4.88   0.000       .12609    .2954318
         11  |    .216014   .0466002     4.64   0.000     .1246724    .3073556
         12  |   .2030146   .0501437     4.05   0.000     .1047274    .3013019
         13  |   .1984497    .053536     3.71   0.000     .0935132    .3033861
         14  |   .2010177   .0570532     3.52   0.000      .089187    .3128484
         15  |   .2013698   .0606053     3.32   0.001     .0825767     .320163
         16  |   .1989487   .0640901     3.10   0.002      .073325    .3245724
         17  |   .1859681   .0679077     2.74   0.006     .0528614    .3190748
         18  |   .1882132   .0714938     2.63   0.008     .0480774    .3283489
         19  |   .1649159   .0754601     2.19   0.029     .0170057     .312826
         20  |   .1402472    .083006     1.69   0.091    -.0224537    .3029482
         25  |   .0905502   .0958808     0.94   0.345    -.0973869    .2784873
         30  |   .1243009   .1292221     0.96   0.336    -.1289888    .3775907
         40  |   .2476838   .1483159     1.67   0.095    -.0430319    .5383995
         50  |   .2450011   .1667671     1.47   0.142    -.0818809    .5718831
             |
       _cons |   7.400137   .0323969   228.42   0.000     7.336635    7.463638
-------------+----------------------------------------------------------------
     sigma_u |  1.2345849
     sigma_e |  .54151186
         rho |  .83865442   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.2276                         Obs per group: min =         1
       between = 0.1237                                        avg =       8.7
       overall = 0.1225                                        max =        25

                                                F(78,16123)        =    122.66
corr(u_i, Xb)  = 0.0192                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0656818   .0263873     2.49   0.013     .0139598    .1174039
      during |   .0383483    .007603     5.04   0.000     .0234456     .053251
       after |   .0702162   .0139709     5.03   0.000     .0428318    .0976007
during_expat |   .1413855   .0288502     4.90   0.000     .0848359    .1979351
 after_expat |   .2046821   .0378621     5.41   0.000     .1304681     .278896
             |
    ind_year |
          2  |   .0858932   .0194446     4.42   0.000     .0477795    .1240069
          3  |   .2805511   .0244854    11.46   0.000     .2325569    .3285452
          4  |   .4852466   .0263535    18.41   0.000     .4335907    .5369025
          5  |   .6397797   .0292645    21.86   0.000      .582418    .6971414
          6  |   .8253063   .0325359    25.37   0.000     .7615323    .8890803
          7  |   .9492059   .0351804    26.98   0.000     .8802485    1.018163
          8  |   1.019326   .0378714    26.92   0.000     .9450934    1.093558
          9  |   1.145177    .040604    28.20   0.000     1.065589    1.224765
         10  |   1.258152   .0438908    28.67   0.000     1.172121    1.344183
         11  |    1.32503   .0469283    28.24   0.000     1.233045    1.417015
         12  |   1.350563   .0502399    26.88   0.000     1.252087    1.449039
         13  |   1.392598   .0533747    26.09   0.000     1.287978    1.497218
         14  |     1.4348   .0564976    25.40   0.000     1.324058    1.545541
         15  |   1.499827   .0600767    24.97   0.000      1.38207    1.617584
         16  |   1.540511   .0627604    24.55   0.000     1.417494    1.663529
         17  |   1.594131   .0661108    24.11   0.000     1.464546    1.723715
         18  |   1.523512   .0693587    21.97   0.000     1.387561    1.659463
         19  |   1.549911   .0726125    21.34   0.000     1.407582    1.692239
         20  |   1.597001   .0755629    21.13   0.000     1.448889    1.745113
         21  |   1.615002    .078433    20.59   0.000     1.461265     1.76874
         22  |   1.671899   .0810925    20.62   0.000     1.512948    1.830849
         23  |      1.715   .0837568    20.48   0.000     1.550827    1.879173
         24  |   1.742971   .0867499    20.09   0.000     1.572932     1.91301
         25  |   1.752216   .0895252    19.57   0.000     1.576737    1.927695
         26  |  -.2311891   .0454846    -5.08   0.000    -.3203439   -.1420343
         27  |   -.102209   .0433685    -2.36   0.018    -.1872161   -.0172019
         28  |   .0634339   .0419215     1.51   0.130    -.0187368    .1456047
         29  |   .2828551   .0420411     6.73   0.000     .2004499    .3652603
         30  |   .4638816   .0420013    11.04   0.000     .3815543    .5462089
         31  |    .608371   .0434367    14.01   0.000     .5232302    .6935118
         32  |   .7666909   .0447617    17.13   0.000     .6789531    .8544287
         33  |   .8311631   .0462412    17.97   0.000     .7405253    .9218009
         34  |   .9771476    .048356    20.21   0.000     .8823645    1.071931
         35  |   1.071882   .0503136    21.30   0.000      .973262    1.170503
         36  |   1.118303   .0529567    21.12   0.000     1.014502    1.222104
         37  |   1.182684   .0556208    21.26   0.000     1.073661    1.291707
         38  |   1.262167   .0582581    21.67   0.000     1.147975    1.376359
         39  |   1.300566   .0610785    21.29   0.000     1.180845    1.420287
         40  |   1.395109   .0646282    21.59   0.000     1.268431    1.521788
         41  |   1.469139   .0669652    21.94   0.000      1.33788    1.600398
         42  |   1.546983   .0697722    22.17   0.000     1.410221    1.683744
         43  |   1.524465   .0729617    20.89   0.000     1.381452    1.667478
         44  |   1.557184   .0760888    20.47   0.000     1.408041    1.706327
         45  |   1.628359   .0789813    20.62   0.000     1.473546    1.783171
         46  |   1.629987   .0819959    19.88   0.000     1.469266    1.790708
         47  |   1.656983   .0843034    19.65   0.000     1.491739    1.822227
         48  |   1.721831   .0866516    19.87   0.000     1.551984    1.891678
         49  |   1.720999   .0898327    19.16   0.000     1.544917    1.897081
         50  |   1.767174   .0925369    19.10   0.000     1.585792    1.948557
             |
     age_cat |
          1  |   .2845213   .0167248    17.01   0.000     .2517388    .3173039
          2  |   .3017716   .0188647    16.00   0.000     .2647948    .3387485
          3  |   .2840411   .0211441    13.43   0.000     .2425963    .3254858
          4  |   .2774304   .0236189    11.75   0.000     .2311349     .323726
          5  |   .2724904   .0264011    10.32   0.000     .2207414    .3242394
          6  |   .2566155   .0293435     8.75   0.000      .199099    .3141319
          7  |    .267099   .0323341     8.26   0.000     .2037207    .3304774
          8  |   .2542138   .0355467     7.15   0.000     .1845383    .3238892
          9  |   .2504143   .0386972     6.47   0.000     .1745636     .326265
         10  |   .2393984   .0419746     5.70   0.000     .1571235    .3216733
         11  |    .242734   .0453279     5.36   0.000     .1538863    .3315816
         12  |   .2369024   .0486557     4.87   0.000     .1415318    .3322731
         13  |   .2286581   .0519455     4.40   0.000     .1268392     .330477
         14  |   .2315834   .0553282     4.19   0.000     .1231339    .3400329
         15  |   .2302669   .0587481     3.92   0.000     .1151141    .3454197
         16  |   .2299599   .0621402     3.70   0.000     .1081582    .3517616
         17  |   .2155597   .0657307     3.28   0.001     .0867203    .3443992
         18  |   .2174068   .0691936     3.14   0.002     .0817797     .353034
         19  |   .1972535   .0729524     2.70   0.007     .0542586    .3402483
         20  |   .1687942   .0798129     2.11   0.034      .012352    .3252364
         25  |   .1264577   .0912539     1.39   0.166    -.0524101    .3053255
         30  |   .1273159   .1211975     1.05   0.294    -.1102447    .3648764
         40  |   .1654961   .1355876     1.22   0.222    -.1002707    .4312628
         50  |   .1594942   .1489999     1.07   0.284    -.1325623    .4515506
             |
       _cons |   7.422041   .0326648   227.22   0.000     7.358014    7.486068
-------------+----------------------------------------------------------------
     sigma_u |  1.2196706
     sigma_e |  .55684681
         rho |  .82751143   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2276313549569242

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.2276                                         min =          1
     between = 0.1237                                         avg =        8.7
     overall = 0.1225                                         max =         25

                                                F(78,16123)       =     122.66
corr(u_i, Xb)  = 0.0192                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0656818   .0263873     2.49   0.013     .0139598    .1174039
      during |   .0383483    .007603     5.04   0.000     .0234456     .053251
       after |   .0702162   .0139709     5.03   0.000     .0428318    .0976007
during_expat |   .1413855   .0288502     4.90   0.000     .0848359    .1979351
 after_expat |   .2046821   .0378621     5.41   0.000     .1304681     .278896
             |
    ind_year |
          2  |   .0858932   .0194446     4.42   0.000     .0477795    .1240069
          3  |   .2805511   .0244854    11.46   0.000     .2325569    .3285452
          4  |   .4852466   .0263535    18.41   0.000     .4335907    .5369025
          5  |   .6397797   .0292645    21.86   0.000      .582418    .6971414
          6  |   .8253063   .0325359    25.37   0.000     .7615323    .8890803
          7  |   .9492059   .0351804    26.98   0.000     .8802485    1.018163
          8  |   1.019326   .0378714    26.92   0.000     .9450934    1.093558
          9  |   1.145177    .040604    28.20   0.000     1.065589    1.224765
         10  |   1.258152   .0438908    28.67   0.000     1.172121    1.344183
         11  |    1.32503   .0469283    28.24   0.000     1.233045    1.417015
         12  |   1.350563   .0502399    26.88   0.000     1.252087    1.449039
         13  |   1.392598   .0533747    26.09   0.000     1.287978    1.497218
         14  |     1.4348   .0564976    25.40   0.000     1.324058    1.545541
         15  |   1.499827   .0600767    24.97   0.000      1.38207    1.617584
         16  |   1.540511   .0627604    24.55   0.000     1.417494    1.663529
         17  |   1.594131   .0661108    24.11   0.000     1.464546    1.723715
         18  |   1.523512   .0693587    21.97   0.000     1.387561    1.659463
         19  |   1.549911   .0726125    21.34   0.000     1.407582    1.692239
         20  |   1.597001   .0755629    21.13   0.000     1.448889    1.745113
         21  |   1.615002    .078433    20.59   0.000     1.461265     1.76874
         22  |   1.671899   .0810925    20.62   0.000     1.512948    1.830849
         23  |      1.715   .0837568    20.48   0.000     1.550827    1.879173
         24  |   1.742971   .0867499    20.09   0.000     1.572932     1.91301
         25  |   1.752216   .0895252    19.57   0.000     1.576737    1.927695
         26  |  -.2311891   .0454846    -5.08   0.000    -.3203439   -.1420343
         27  |   -.102209   .0433685    -2.36   0.018    -.1872161   -.0172019
         28  |   .0634339   .0419215     1.51   0.130    -.0187368    .1456047
         29  |   .2828551   .0420411     6.73   0.000     .2004499    .3652603
         30  |   .4638816   .0420013    11.04   0.000     .3815543    .5462089
         31  |    .608371   .0434367    14.01   0.000     .5232302    .6935118
         32  |   .7666909   .0447617    17.13   0.000     .6789531    .8544287
         33  |   .8311631   .0462412    17.97   0.000     .7405253    .9218009
         34  |   .9771476    .048356    20.21   0.000     .8823645    1.071931
         35  |   1.071882   .0503136    21.30   0.000      .973262    1.170503
         36  |   1.118303   .0529567    21.12   0.000     1.014502    1.222104
         37  |   1.182684   .0556208    21.26   0.000     1.073661    1.291707
         38  |   1.262167   .0582581    21.67   0.000     1.147975    1.376359
         39  |   1.300566   .0610785    21.29   0.000     1.180845    1.420287
         40  |   1.395109   .0646282    21.59   0.000     1.268431    1.521788
         41  |   1.469139   .0669652    21.94   0.000      1.33788    1.600398
         42  |   1.546983   .0697722    22.17   0.000     1.410221    1.683744
         43  |   1.524465   .0729617    20.89   0.000     1.381452    1.667478
         44  |   1.557184   .0760888    20.47   0.000     1.408041    1.706327
         45  |   1.628359   .0789813    20.62   0.000     1.473546    1.783171
         46  |   1.629987   .0819959    19.88   0.000     1.469266    1.790708
         47  |   1.656983   .0843034    19.65   0.000     1.491739    1.822227
         48  |   1.721831   .0866516    19.87   0.000     1.551984    1.891678
         49  |   1.720999   .0898327    19.16   0.000     1.544917    1.897081
         50  |   1.767174   .0925369    19.10   0.000     1.585792    1.948557
             |
     age_cat |
          1  |   .2845213   .0167248    17.01   0.000     .2517388    .3173039
          2  |   .3017716   .0188647    16.00   0.000     .2647948    .3387485
          3  |   .2840411   .0211441    13.43   0.000     .2425963    .3254858
          4  |   .2774304   .0236189    11.75   0.000     .2311349     .323726
          5  |   .2724904   .0264011    10.32   0.000     .2207414    .3242394
          6  |   .2566155   .0293435     8.75   0.000      .199099    .3141319
          7  |    .267099   .0323341     8.26   0.000     .2037207    .3304774
          8  |   .2542138   .0355467     7.15   0.000     .1845383    .3238892
          9  |   .2504143   .0386972     6.47   0.000     .1745636     .326265
         10  |   .2393984   .0419746     5.70   0.000     .1571235    .3216733
         11  |    .242734   .0453279     5.36   0.000     .1538863    .3315816
         12  |   .2369024   .0486557     4.87   0.000     .1415318    .3322731
         13  |   .2286581   .0519455     4.40   0.000     .1268392     .330477
         14  |   .2315834   .0553282     4.19   0.000     .1231339    .3400329
         15  |   .2302669   .0587481     3.92   0.000     .1151141    .3454197
         16  |   .2299599   .0621402     3.70   0.000     .1081582    .3517616
         17  |   .2155597   .0657307     3.28   0.001     .0867203    .3443992
         18  |   .2174068   .0691936     3.14   0.002     .0817797     .353034
         19  |   .1972535   .0729524     2.70   0.007     .0542586    .3402483
         20  |   .1687942   .0798129     2.11   0.034      .012352    .3252364
         25  |   .1264577   .0912539     1.39   0.166    -.0524101    .3053255
         30  |   .1273159   .1211975     1.05   0.294    -.1102447    .3648764
         40  |   .1654961   .1355876     1.22   0.222    -.1002707    .4312628
         50  |   .1594942   .1489999     1.07   0.284    -.1325623    .4515506
             |
       _cons |   7.422041   .0326648   227.22   0.000     7.358014    7.486068
-------------+----------------------------------------------------------------
     sigma_u |  1.2196706
     sigma_e |  .55684681
         rho |  .82751143   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 16123) =   25.44
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 16123) =   10.04
            Prob > F =    0.0015

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 16123) =   24.02
            Prob > F =    0.0000

 ( 1)  during_expat = 0

       F(  1, 16123) =   24.02
            Prob > F =    0.0000
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 16123) =    6.39
            Prob > F =    0.0115

 ( 1)  after_expat = 0

       F(  1, 16123) =   29.22
            Prob > F =    0.0000
(1 real change made)
(file output/figure/acquisitions_lnQL_slope.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.2274                         Obs per group: min =         1
       between = 0.1197                                        avg =       8.7
       overall = 0.1204                                        max =        25

                                                F(82,16123)        =    116.13
corr(u_i, Xb)  = 0.0140                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0665474   .0263777     2.52   0.012     .0148441    .1182506
   during_DD |   .0286682   .0077398     3.70   0.000     .0134974     .043839
   during_DE |   .1571963    .042767     3.68   0.000     .0733682    .2410244
   during_ED |   .1187422   .0338268     3.51   0.000     .0524379    .1850465
   during_EE |   .1836838   .0405722     4.53   0.000     .1041578    .2632098
    after_DD |   .0388594   .0150384     2.58   0.010     .0093825    .0683363
    after_DE |   .2613935   .0506918     5.16   0.000      .162032     .360755
    after_ED |   .2222625   .0483478     4.60   0.000     .1274955    .3170295
    after_EE |   .2544304   .0515982     4.93   0.000     .1532922    .3555686
             |
    ind_year |
          2  |    .086818   .0194395     4.47   0.000     .0487144    .1249216
          3  |   .2823978   .0244757    11.54   0.000     .2344228    .3303728
          4  |   .4878651   .0263336    18.53   0.000     .4362483    .5394818
          5  |   .6431312   .0292341    22.00   0.000      .585829    .7004333
          6  |   .8294417    .032492    25.53   0.000     .7657539    .8931296
          7  |   .9541653   .0351231    27.17   0.000     .8853202     1.02301
          8  |   1.024926    .037806    27.11   0.000     .9508221     1.09903
          9  |    1.15174   .0405251    28.42   0.000     1.072306    1.231173
         10  |   1.265744   .0438008    28.90   0.000      1.17989    1.351599
         11  |   1.333905   .0468186    28.49   0.000     1.242135    1.425674
         12  |   1.360541   .0501148    27.15   0.000     1.262311    1.458772
         13  |   1.403984     .05323    26.38   0.000     1.299648    1.508321
         14  |   1.447578   .0563286    25.70   0.000     1.337168    1.557988
         15  |   1.514084   .0598792    25.29   0.000     1.396715    1.631454
         16  |   1.556203   .0625376    24.88   0.000     1.433623    1.678784
         17  |   1.611902   .0658454    24.48   0.000     1.482838    1.740967
         18  |   1.542812   .0690626    22.34   0.000     1.407442    1.678182
         19  |    1.57083   .0722839    21.73   0.000     1.429146    1.712515
         20  |   1.619609   .0752198    21.53   0.000      1.47217    1.767048
         21  |   1.639082   .0780644    21.00   0.000     1.486067    1.792097
         22  |   1.697564   .0806905    21.04   0.000     1.539401    1.855726
         23  |   1.742072    .083325    20.91   0.000     1.578745    1.905398
         24  |   1.771595   .0863029    20.53   0.000     1.602432    1.940758
         25  |   1.782524   .0890552    20.02   0.000     1.607966    1.957082
         26  |  -.2307096     .04548    -5.07   0.000    -.3198554   -.1415638
         27  |  -.1010295   .0433668    -2.33   0.020    -.1860333   -.0160257
         28  |   .0652301   .0419106     1.56   0.120    -.0169194    .1473795
         29  |    .285486   .0420273     6.79   0.000     .2031078    .3678642
         30  |    .467045   .0419796    11.13   0.000     .3847603    .5493297
         31  |    .612434   .0434026    14.11   0.000       .52736    .6975079
         32  |   .7716084   .0447129    17.26   0.000     .6839662    .8592507
         33  |   .8369069   .0461876    18.12   0.000      .746374    .9274397
         34  |   .9838051   .0482872    20.37   0.000     .8891568    1.078453
         35  |    1.07953   .0502322    21.49   0.000     .9810696    1.177991
         36  |   1.127258   .0528671    21.32   0.000     1.023632    1.230883
         37  |   1.192756   .0555207    21.48   0.000     1.083929    1.301582
         38  |   1.273645   .0581342    21.91   0.000     1.159696    1.387595
         39  |   1.313665   .0609343    21.56   0.000     1.194227    1.433103
         40  |   1.409633   .0644479    21.87   0.000     1.283308    1.535958
         41  |   1.484924   .0667613    22.24   0.000     1.354064    1.615783
         42  |   1.564426   .0695586    22.49   0.000     1.428083    1.700768
         43  |   1.543392   .0727298    21.22   0.000     1.400834    1.685951
         44  |   1.577438   .0758251    20.80   0.000     1.428812    1.726064
         45  |   1.650198   .0786946    20.97   0.000     1.495948    1.804448
         46  |   1.653228   .0816703    20.24   0.000     1.493145    1.813311
         47  |    1.68154   .0839585    20.03   0.000     1.516972    1.846108
         48  |   1.747783   .0862908    20.25   0.000     1.578644    1.916923
         49  |   1.748608    .089469    19.54   0.000     1.573239    1.923977
         50  |    1.79625   .0921284    19.50   0.000     1.615668    1.976832
             |
     age_cat |
          1  |   .2838418   .0167264    16.97   0.000     .2510562    .3166273
          2  |   .3004875   .0188641    15.93   0.000     .2635119    .3374632
          3  |   .2821311   .0211407    13.35   0.000     .2406931    .3235692
          4  |   .2748147   .0236121    11.64   0.000     .2285325     .321097
          5  |   .2690563   .0263923    10.19   0.000     .2173244    .3207881
          6  |   .2524116   .0293297     8.61   0.000     .1949222     .309901
          7  |   .2619759   .0323201     8.11   0.000      .198625    .3253269
          8  |   .2482356   .0355238     6.99   0.000      .178605    .3178662
          9  |   .2436035   .0386727     6.30   0.000     .1678007    .3194063
         10  |   .2317115   .0419469     5.52   0.000     .1494909    .3139322
         11  |   .2340354   .0452868     5.17   0.000     .1452683    .3228026
         12  |   .2272672   .0486157     4.67   0.000     .1319749    .3225594
         13  |   .2180511   .0519097     4.20   0.000     .1163024    .3197998
         14  |   .2199246    .055286     3.98   0.000     .1115578    .3282913
         15  |   .2175578   .0587006     3.71   0.000     .1024982    .3326175
         16  |   .2164412   .0620829     3.49   0.000     .0947518    .3381307
         17  |   .2009759   .0656836     3.06   0.002     .0722289     .329723
         18  |   .2017151   .0691369     2.92   0.004      .066199    .3372312
         19  |   .1804468   .0728984     2.48   0.013     .0375579    .3233358
         20  |   .1497467   .0797301     1.88   0.060     -.006533    .3060265
         25  |   .1041528   .0911492     1.14   0.253    -.0745098    .2828154
         30  |   .1041428   .1210948     0.86   0.390    -.1332165     .341502
         40  |    .145671   .1355398     1.07   0.283     -.120002     .411344
         50  |   .1405762   .1489261     0.94   0.345    -.1513356    .4324879
             |
       _cons |   7.421263   .0326516   227.29   0.000     7.357262    7.485264
-------------+----------------------------------------------------------------
     sigma_u |  1.2222291
     sigma_e |  .55692648
         rho |  .82806807   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2274198015193868

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.2274                                         min =          1
     between = 0.1197                                         avg =        8.7
     overall = 0.1204                                         max =         25

                                                F(82,16123)       =     116.13
corr(u_i, Xb)  = 0.0140                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0665474   .0263777     2.52   0.012     .0148441    .1182506
   during_DD |   .0286682   .0077398     3.70   0.000     .0134974     .043839
   during_DE |   .1571963    .042767     3.68   0.000     .0733682    .2410244
   during_ED |   .1187422   .0338268     3.51   0.000     .0524379    .1850465
   during_EE |   .1836838   .0405722     4.53   0.000     .1041578    .2632098
    after_DD |   .0388594   .0150384     2.58   0.010     .0093825    .0683363
    after_DE |   .2613935   .0506918     5.16   0.000      .162032     .360755
    after_ED |   .2222625   .0483478     4.60   0.000     .1274955    .3170295
    after_EE |   .2544304   .0515982     4.93   0.000     .1532922    .3555686
             |
    ind_year |
          2  |    .086818   .0194395     4.47   0.000     .0487144    .1249216
          3  |   .2823978   .0244757    11.54   0.000     .2344228    .3303728
          4  |   .4878651   .0263336    18.53   0.000     .4362483    .5394818
          5  |   .6431312   .0292341    22.00   0.000      .585829    .7004333
          6  |   .8294417    .032492    25.53   0.000     .7657539    .8931296
          7  |   .9541653   .0351231    27.17   0.000     .8853202     1.02301
          8  |   1.024926    .037806    27.11   0.000     .9508221     1.09903
          9  |    1.15174   .0405251    28.42   0.000     1.072306    1.231173
         10  |   1.265744   .0438008    28.90   0.000      1.17989    1.351599
         11  |   1.333905   .0468186    28.49   0.000     1.242135    1.425674
         12  |   1.360541   .0501148    27.15   0.000     1.262311    1.458772
         13  |   1.403984     .05323    26.38   0.000     1.299648    1.508321
         14  |   1.447578   .0563286    25.70   0.000     1.337168    1.557988
         15  |   1.514084   .0598792    25.29   0.000     1.396715    1.631454
         16  |   1.556203   .0625376    24.88   0.000     1.433623    1.678784
         17  |   1.611902   .0658454    24.48   0.000     1.482838    1.740967
         18  |   1.542812   .0690626    22.34   0.000     1.407442    1.678182
         19  |    1.57083   .0722839    21.73   0.000     1.429146    1.712515
         20  |   1.619609   .0752198    21.53   0.000      1.47217    1.767048
         21  |   1.639082   .0780644    21.00   0.000     1.486067    1.792097
         22  |   1.697564   .0806905    21.04   0.000     1.539401    1.855726
         23  |   1.742072    .083325    20.91   0.000     1.578745    1.905398
         24  |   1.771595   .0863029    20.53   0.000     1.602432    1.940758
         25  |   1.782524   .0890552    20.02   0.000     1.607966    1.957082
         26  |  -.2307096     .04548    -5.07   0.000    -.3198554   -.1415638
         27  |  -.1010295   .0433668    -2.33   0.020    -.1860333   -.0160257
         28  |   .0652301   .0419106     1.56   0.120    -.0169194    .1473795
         29  |    .285486   .0420273     6.79   0.000     .2031078    .3678642
         30  |    .467045   .0419796    11.13   0.000     .3847603    .5493297
         31  |    .612434   .0434026    14.11   0.000       .52736    .6975079
         32  |   .7716084   .0447129    17.26   0.000     .6839662    .8592507
         33  |   .8369069   .0461876    18.12   0.000      .746374    .9274397
         34  |   .9838051   .0482872    20.37   0.000     .8891568    1.078453
         35  |    1.07953   .0502322    21.49   0.000     .9810696    1.177991
         36  |   1.127258   .0528671    21.32   0.000     1.023632    1.230883
         37  |   1.192756   .0555207    21.48   0.000     1.083929    1.301582
         38  |   1.273645   .0581342    21.91   0.000     1.159696    1.387595
         39  |   1.313665   .0609343    21.56   0.000     1.194227    1.433103
         40  |   1.409633   .0644479    21.87   0.000     1.283308    1.535958
         41  |   1.484924   .0667613    22.24   0.000     1.354064    1.615783
         42  |   1.564426   .0695586    22.49   0.000     1.428083    1.700768
         43  |   1.543392   .0727298    21.22   0.000     1.400834    1.685951
         44  |   1.577438   .0758251    20.80   0.000     1.428812    1.726064
         45  |   1.650198   .0786946    20.97   0.000     1.495948    1.804448
         46  |   1.653228   .0816703    20.24   0.000     1.493145    1.813311
         47  |    1.68154   .0839585    20.03   0.000     1.516972    1.846108
         48  |   1.747783   .0862908    20.25   0.000     1.578644    1.916923
         49  |   1.748608    .089469    19.54   0.000     1.573239    1.923977
         50  |    1.79625   .0921284    19.50   0.000     1.615668    1.976832
             |
     age_cat |
          1  |   .2838418   .0167264    16.97   0.000     .2510562    .3166273
          2  |   .3004875   .0188641    15.93   0.000     .2635119    .3374632
          3  |   .2821311   .0211407    13.35   0.000     .2406931    .3235692
          4  |   .2748147   .0236121    11.64   0.000     .2285325     .321097
          5  |   .2690563   .0263923    10.19   0.000     .2173244    .3207881
          6  |   .2524116   .0293297     8.61   0.000     .1949222     .309901
          7  |   .2619759   .0323201     8.11   0.000      .198625    .3253269
          8  |   .2482356   .0355238     6.99   0.000      .178605    .3178662
          9  |   .2436035   .0386727     6.30   0.000     .1678007    .3194063
         10  |   .2317115   .0419469     5.52   0.000     .1494909    .3139322
         11  |   .2340354   .0452868     5.17   0.000     .1452683    .3228026
         12  |   .2272672   .0486157     4.67   0.000     .1319749    .3225594
         13  |   .2180511   .0519097     4.20   0.000     .1163024    .3197998
         14  |   .2199246    .055286     3.98   0.000     .1115578    .3282913
         15  |   .2175578   .0587006     3.71   0.000     .1024982    .3326175
         16  |   .2164412   .0620829     3.49   0.000     .0947518    .3381307
         17  |   .2009759   .0656836     3.06   0.002     .0722289     .329723
         18  |   .2017151   .0691369     2.92   0.004      .066199    .3372312
         19  |   .1804468   .0728984     2.48   0.013     .0375579    .3233358
         20  |   .1497467   .0797301     1.88   0.060     -.006533    .3060265
         25  |   .1041528   .0911492     1.14   0.253    -.0745098    .2828154
         30  |   .1041428   .1210948     0.86   0.390    -.1332165     .341502
         40  |    .145671   .1355398     1.07   0.283     -.120002     .411344
         50  |   .1405762   .1489261     0.94   0.345    -.1513356    .4324879
             |
       _cons |   7.421263   .0326516   227.29   0.000     7.357262    7.485264
-------------+----------------------------------------------------------------
     sigma_u |  1.2222291
     sigma_e |  .55692648
         rho |  .82806807   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. local fname = e(depvar)

. local title : variable label `fname'

. 
. slopegraph, ///
>         from(0 0 0 0 1 _b[during_DE] 1 _b[during_DE]) ///
>         to(1 _b[during_DD] 1 _b[during_DE] 2 _b[during_ED]+_b[during_DE] 2 _b[during_EE]+_b[during_DE]) ///
>         style(p1 p2 p1 p2) ///
>         label(Local-Local Local-Expat Expat-Local Expat-Expat) ///
>         width_test(during_DD during_DE during_ED during_EE) ///
>         star_test(1==1 during_DE==during_DD 1==1 during_EE==during_ED) ///
>         connect(stepstair) ///
>         format(scheme(538w) xlabel(none) xtitle("") ytitle("") title(`title') legend(off) aspect(0.67))
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str11
(1 real change made)

 ( 1)  during_DD = 0

       F(  1, 16123) =   13.72
            Prob > F =    0.0002

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_DE = 0

       F(  1, 16123) =   13.51
            Prob > F =    0.0002

 ( 1)  - during_DD + during_DE = 0

       F(  1, 16123) =    8.77
            Prob > F =    0.0031
variable label was str11 now str13
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_ED = 0

       F(  1, 16123) =   12.32
            Prob > F =    0.0004

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_EE = 0

       F(  1, 16123) =   20.50
            Prob > F =    0.0000

 ( 1)  - during_ED + during_EE = 0

       F(  1, 16123) =    1.60
            Prob > F =    0.2064

. 
. graph export output/figure/`fname'_tree.png, width(800) replace
(file output/figure/lnQL_tree.png written in PNG format)

. 
end of do-file
(sum of wgt is 121,707.306675576)

Linear regression                               Number of obs     =    322,194
                                                F(75, 20301)      =     182.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2044
                                                Root MSE          =     .43297

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3315621   .0079638    41.63   0.000     .3159524    .3471717
       expat |   .0596962   .0082814     7.21   0.000      .043464    .0759284
             |
    ind_year |
          2  |  -.0302257   .0094183    -3.21   0.001    -.0486864    -.011765
          3  |  -.0528853   .0105922    -4.99   0.000    -.0736467   -.0321238
          4  |  -.0639987   .0109509    -5.84   0.000    -.0854634    -.042534
          5  |  -.0510643   .0114226    -4.47   0.000    -.0734534   -.0286751
          6  |  -.0684154   .0115141    -5.94   0.000    -.0909839   -.0458469
          7  |  -.0692836   .0115097    -6.02   0.000    -.0918435   -.0467237
          8  |  -.0832502   .0116803    -7.13   0.000    -.1061445   -.0603558
          9  |  -.0946423    .011706    -8.08   0.000    -.1175871   -.0716976
         10  |  -.0938544   .0118108    -7.95   0.000    -.1170045   -.0707043
         11  |  -.1080104   .0117043    -9.23   0.000    -.1309517   -.0850691
         12  |   -.111847   .0116772    -9.58   0.000    -.1347352   -.0889588
         13  |  -.1087334    .011686    -9.30   0.000    -.1316388   -.0858279
         14  |  -.0992254   .0118094    -8.40   0.000    -.1223728    -.076078
         15  |  -.0920408    .011858    -7.76   0.000    -.1152835   -.0687981
         16  |  -.0831665   .0119608    -6.95   0.000    -.1066107   -.0597223
         17  |   -.072691   .0120781    -6.02   0.000     -.096365    -.049017
         18  |  -.0698291   .0121761    -5.73   0.000    -.0936953   -.0459629
         19  |  -.0659338   .0122792    -5.37   0.000    -.0900021   -.0418656
         20  |  -.0547738   .0124186    -4.41   0.000    -.0791153   -.0304323
         21  |   -.045276   .0125621    -3.60   0.000    -.0698987   -.0206532
         22  |  -.0490668   .0128001    -3.83   0.000     -.074156   -.0239776
         23  |  -.0522184   .0128189    -4.07   0.000    -.0773445   -.0270923
         24  |  -.1487539   .0124403   -11.96   0.000     -.173138   -.1243698
         25  |  -.1750875   .0125024   -14.00   0.000    -.1995932   -.1505819
         26  |     .19024   .0176683    10.77   0.000     .1556087    .2248713
         27  |   .1513606   .0161038     9.40   0.000     .1197957    .1829254
         28  |   .1630633   .0154357    10.56   0.000     .1328081    .1933186
         29  |   .1646741   .0151043    10.90   0.000     .1350684    .1942798
         30  |   .1851365   .0149942    12.35   0.000     .1557466    .2145264
         31  |   .1823419   .0147267    12.38   0.000     .1534763    .2112075
         32  |   .1799707   .0144446    12.46   0.000     .1516582    .2082832
         33  |   .1713015   .0142267    12.04   0.000      .143416     .199187
         34  |   .1758658   .0142009    12.38   0.000      .148031    .2037006
         35  |   .1774782   .0142033    12.50   0.000     .1496386    .2053178
         36  |   .1829545   .0141747    12.91   0.000     .1551709    .2107381
         37  |   .1722214   .0141203    12.20   0.000     .1445446    .1998983
         38  |   .1713272   .0139966    12.24   0.000     .1438927    .1987617
         39  |   .1686379   .0140226    12.03   0.000     .1411524    .1961234
         40  |   .1657321   .0141127    11.74   0.000     .1380701    .1933942
         41  |   .1874994   .0142012    13.20   0.000     .1596638    .2153349
         42  |   .1957451   .0142982    13.69   0.000     .1677195    .2237707
         43  |    .190828   .0145219    13.14   0.000     .1623638    .2192921
         44  |   .2040313   .0146464    13.93   0.000     .1753233    .2327393
         45  |   .2063104   .0148306    13.91   0.000     .1772413    .2353795
         46  |   .2120191   .0149145    14.22   0.000     .1827854    .2412528
         47  |   .2188758   .0152657    14.34   0.000     .1889538    .2487978
         48  |   .1988815   .0153625    12.95   0.000     .1687698    .2289931
         49  |  -.0421559   .0151248    -2.79   0.005    -.0718017   -.0125101
         50  |  -.0841638   .0152555    -5.52   0.000    -.1140659   -.0542618
             |
     age_cat |
          1  |    .056249   .0057211     9.83   0.000     .0450352    .0674628
          2  |   .0859205   .0060902    14.11   0.000     .0739833    .0978578
          3  |   .1093547   .0063286    17.28   0.000     .0969502    .1217592
          4  |   .1363023   .0065786    20.72   0.000     .1234078    .1491969
          5  |   .1545009    .006806    22.70   0.000     .1411606    .1678411
          6  |   .1675623   .0070776    23.67   0.000     .1536896    .1814351
          7  |   .1807878   .0073298    24.66   0.000     .1664207    .1951549
          8  |   .1972554   .0076274    25.86   0.000     .1823051    .2122056
          9  |    .203755   .0078412    25.99   0.000     .1883855    .2191244
         10  |   .2075703   .0080143    25.90   0.000     .1918615     .223279
         11  |   .2162994   .0082115    26.34   0.000     .2002042    .2323946
         12  |   .2202568   .0084349    26.11   0.000     .2037237    .2367898
         13  |   .2316794   .0087204    26.57   0.000     .2145868     .248772
         14  |   .2423732   .0091162    26.59   0.000     .2245046    .2602417
         15  |   .2541541   .0094334    26.94   0.000     .2356638    .2726444
         16  |    .261673   .0097999    26.70   0.000     .2424645    .2808815
         17  |   .2625851   .0102258    25.68   0.000     .2425416    .2826286
         18  |   .2706647    .010697    25.30   0.000     .2496977    .2916317
         19  |   .2588643   .0110952    23.33   0.000     .2371168    .2806119
         20  |   .2680746   .0114774    23.36   0.000     .2455781    .2905712
         25  |   .2772842   .0162443    17.07   0.000     .2454441    .3091242
         30  |   .0932532   .0200722     4.65   0.000     .0539101    .1325963
         40  |   .1167952   .0197635     5.91   0.000     .0780571    .1555332
         50  |   .1146591   .0226065     5.07   0.000     .0703485    .1589698
             |
       _cons |   .1294978   .0111289    11.64   0.000     .1076843    .1513113
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    322,194
                                                F(75, 20301)      =     182.21
                                                Prob > F          =     0.0000
                                                R-squared         =     0.2044
                                                Root MSE          =     .43297

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3315621   .0079638    41.63   0.000     .3159524    .3471717
       expat |   .0596962   .0082814     7.21   0.000      .043464    .0759284
             |
    ind_year |
          2  |  -.0302257   .0094183    -3.21   0.001    -.0486864    -.011765
          3  |  -.0528853   .0105922    -4.99   0.000    -.0736467   -.0321238
          4  |  -.0639987   .0109509    -5.84   0.000    -.0854634    -.042534
          5  |  -.0510643   .0114226    -4.47   0.000    -.0734534   -.0286751
          6  |  -.0684154   .0115141    -5.94   0.000    -.0909839   -.0458469
          7  |  -.0692836   .0115097    -6.02   0.000    -.0918435   -.0467237
          8  |  -.0832502   .0116803    -7.13   0.000    -.1061445   -.0603558
          9  |  -.0946423    .011706    -8.08   0.000    -.1175871   -.0716976
         10  |  -.0938544   .0118108    -7.95   0.000    -.1170045   -.0707043
         11  |  -.1080104   .0117043    -9.23   0.000    -.1309517   -.0850691
         12  |   -.111847   .0116772    -9.58   0.000    -.1347352   -.0889588
         13  |  -.1087334    .011686    -9.30   0.000    -.1316388   -.0858279
         14  |  -.0992254   .0118094    -8.40   0.000    -.1223728    -.076078
         15  |  -.0920408    .011858    -7.76   0.000    -.1152835   -.0687981
         16  |  -.0831665   .0119608    -6.95   0.000    -.1066107   -.0597223
         17  |   -.072691   .0120781    -6.02   0.000     -.096365    -.049017
         18  |  -.0698291   .0121761    -5.73   0.000    -.0936953   -.0459629
         19  |  -.0659338   .0122792    -5.37   0.000    -.0900021   -.0418656
         20  |  -.0547738   .0124186    -4.41   0.000    -.0791153   -.0304323
         21  |   -.045276   .0125621    -3.60   0.000    -.0698987   -.0206532
         22  |  -.0490668   .0128001    -3.83   0.000     -.074156   -.0239776
         23  |  -.0522184   .0128189    -4.07   0.000    -.0773445   -.0270923
         24  |  -.1487539   .0124403   -11.96   0.000     -.173138   -.1243698
         25  |  -.1750875   .0125024   -14.00   0.000    -.1995932   -.1505819
         26  |     .19024   .0176683    10.77   0.000     .1556087    .2248713
         27  |   .1513606   .0161038     9.40   0.000     .1197957    .1829254
         28  |   .1630633   .0154357    10.56   0.000     .1328081    .1933186
         29  |   .1646741   .0151043    10.90   0.000     .1350684    .1942798
         30  |   .1851365   .0149942    12.35   0.000     .1557466    .2145264
         31  |   .1823419   .0147267    12.38   0.000     .1534763    .2112075
         32  |   .1799707   .0144446    12.46   0.000     .1516582    .2082832
         33  |   .1713015   .0142267    12.04   0.000      .143416     .199187
         34  |   .1758658   .0142009    12.38   0.000      .148031    .2037006
         35  |   .1774782   .0142033    12.50   0.000     .1496386    .2053178
         36  |   .1829545   .0141747    12.91   0.000     .1551709    .2107381
         37  |   .1722214   .0141203    12.20   0.000     .1445446    .1998983
         38  |   .1713272   .0139966    12.24   0.000     .1438927    .1987617
         39  |   .1686379   .0140226    12.03   0.000     .1411524    .1961234
         40  |   .1657321   .0141127    11.74   0.000     .1380701    .1933942
         41  |   .1874994   .0142012    13.20   0.000     .1596638    .2153349
         42  |   .1957451   .0142982    13.69   0.000     .1677195    .2237707
         43  |    .190828   .0145219    13.14   0.000     .1623638    .2192921
         44  |   .2040313   .0146464    13.93   0.000     .1753233    .2327393
         45  |   .2063104   .0148306    13.91   0.000     .1772413    .2353795
         46  |   .2120191   .0149145    14.22   0.000     .1827854    .2412528
         47  |   .2188758   .0152657    14.34   0.000     .1889538    .2487978
         48  |   .1988815   .0153625    12.95   0.000     .1687698    .2289931
         49  |  -.0421559   .0151248    -2.79   0.005    -.0718017   -.0125101
         50  |  -.0841638   .0152555    -5.52   0.000    -.1140659   -.0542618
             |
     age_cat |
          1  |    .056249   .0057211     9.83   0.000     .0450352    .0674628
          2  |   .0859205   .0060902    14.11   0.000     .0739833    .0978578
          3  |   .1093547   .0063286    17.28   0.000     .0969502    .1217592
          4  |   .1363023   .0065786    20.72   0.000     .1234078    .1491969
          5  |   .1545009    .006806    22.70   0.000     .1411606    .1678411
          6  |   .1675623   .0070776    23.67   0.000     .1536896    .1814351
          7  |   .1807878   .0073298    24.66   0.000     .1664207    .1951549
          8  |   .1972554   .0076274    25.86   0.000     .1823051    .2122056
          9  |    .203755   .0078412    25.99   0.000     .1883855    .2191244
         10  |   .2075703   .0080143    25.90   0.000     .1918615     .223279
         11  |   .2162994   .0082115    26.34   0.000     .2002042    .2323946
         12  |   .2202568   .0084349    26.11   0.000     .2037237    .2367898
         13  |   .2316794   .0087204    26.57   0.000     .2145868     .248772
         14  |   .2423732   .0091162    26.59   0.000     .2245046    .2602417
         15  |   .2541541   .0094334    26.94   0.000     .2356638    .2726444
         16  |    .261673   .0097999    26.70   0.000     .2424645    .2808815
         17  |   .2625851   .0102258    25.68   0.000     .2425416    .2826286
         18  |   .2706647    .010697    25.30   0.000     .2496977    .2916317
         19  |   .2588643   .0110952    23.33   0.000     .2371168    .2806119
         20  |   .2680746   .0114774    23.36   0.000     .2455781    .2905712
         25  |   .2772842   .0162443    17.07   0.000     .2454441    .3091242
         30  |   .0932532   .0200722     4.65   0.000     .0539101    .1325963
         40  |   .1167952   .0197635     5.91   0.000     .0780571    .1555332
         50  |   .1146591   .0226065     5.07   0.000     .0703485    .1589698
             |
       _cons |   .1294978   .0111289    11.64   0.000     .1076843    .1513113
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    322,194
Group variable: id                              Number of groups  =     20,302

R-sq:                                           Obs per group:
     within  = 0.0493                                         min =          1
     between = 0.1845                                         avg =       15.9
     overall = 0.1046                                         max =        161

                                                F(75,20301)       =      33.87
corr(u_i, Xb)  = 0.2145                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0279424   .0121628     2.30   0.022     .0041024    .0517825
       expat |   .0164671   .0037508     4.39   0.000     .0091153    .0238189
             |
    ind_year |
          2  |  -.0166725   .0088627    -1.88   0.060    -.0340441     .000699
          3  |  -.0322265   .0106999    -3.01   0.003    -.0531991   -.0112539
          4  |  -.0402337    .011423    -3.52   0.000    -.0626236   -.0178437
          5  |   -.026019   .0127268    -2.04   0.041    -.0509646   -.0010735
          6  |  -.0379614   .0136437    -2.78   0.005    -.0647042   -.0112186
          7  |  -.0351098   .0146857    -2.39   0.017    -.0638949   -.0063246
          8  |  -.0485704   .0158567    -3.06   0.002    -.0796508   -.0174899
          9  |   -.051805   .0171695    -3.02   0.003    -.0854587   -.0181514
         10  |  -.0485463   .0184205    -2.64   0.008    -.0846519   -.0124406
         11  |    -.05379   .0197222    -2.73   0.006     -.092447   -.0151329
         12  |   -.053201   .0209201    -2.54   0.011     -.094206   -.0121959
         13  |  -.0467113   .0223193    -2.09   0.036     -.090459   -.0029636
         14  |  -.0353627   .0237088    -1.49   0.136    -.0818339    .0111084
         15  |  -.0244901   .0251056    -0.98   0.329     -.073699    .0247189
         16  |  -.0118501    .026496    -0.45   0.655    -.0637844    .0400842
         17  |  -.0006377    .027931    -0.02   0.982    -.0553848    .0541094
         18  |   .0014718   .0295147     0.05   0.960    -.0563794     .059323
         19  |   .0052538   .0309726     0.17   0.865    -.0554551    .0659627
         20  |   .0123339   .0323418     0.38   0.703    -.0510586    .0757264
         21  |    .017399   .0336671     0.52   0.605    -.0485912    .0833891
         22  |    .019234   .0349476     0.55   0.582    -.0492661     .087734
         23  |   .0148072   .0362063     0.41   0.683      -.05616    .0857744
         24  |  -.0982049   .0374983    -2.62   0.009    -.1717046   -.0247052
         25  |  -.1298425   .0390055    -3.33   0.001    -.2062964   -.0533886
         26  |   .0269124   .0205198     1.31   0.190     -.013308    .0671329
         27  |   .0183198   .0188415     0.97   0.331     -.018611    .0552505
         28  |   .0312411   .0184993     1.69   0.091     -.005019    .0675012
         29  |   .0394892   .0182471     2.16   0.030     .0037235     .075255
         30  |   .0500089   .0183935     2.72   0.007     .0139562    .0860616
         31  |   .0414067   .0185326     2.23   0.025     .0050814    .0777321
         32  |   .0433458   .0191193     2.27   0.023     .0058704    .0808212
         33  |   .0435567   .0198328     2.20   0.028     .0046828    .0824305
         34  |   .0431576   .0206449     2.09   0.037     .0026919    .0836234
         35  |    .045833   .0216419     2.12   0.034     .0034132    .0882528
         36  |   .0445779   .0227978     1.96   0.051    -.0001076    .0892634
         37  |   .0436735   .0238754     1.83   0.067    -.0031242    .0904712
         38  |   .0461999   .0248792     1.86   0.063    -.0025654    .0949651
         39  |    .047426   .0261096     1.82   0.069    -.0037509    .0986029
         40  |   .0459835   .0272245     1.69   0.091    -.0073787    .0993457
         41  |    .067019   .0284626     2.35   0.019       .01123    .1228081
         42  |   .0764938   .0297549     2.57   0.010     .0181718    .1348157
         43  |   .0737904   .0312484     2.36   0.018      .012541    .1350399
         44  |   .0895118   .0327264     2.74   0.006     .0253653    .1536582
         45  |   .0946937   .0340342     2.78   0.005     .0279839    .1614035
         46  |   .0964293   .0354162     2.72   0.006     .0270107     .165848
         47  |   .1040536   .0367071     2.83   0.005     .0321047    .1760025
         48  |   .0872812   .0376641     2.32   0.020     .0134564     .161106
         49  |  -.1749087   .0391006    -4.47   0.000     -.251549   -.0982684
         50  |   -.227366   .0405381    -5.61   0.000    -.3068239    -.147908
             |
     age_cat |
          1  |   .0420244    .005869     7.16   0.000     .0305205    .0535282
          2  |   .0631331    .006828     9.25   0.000     .0497496    .0765165
          3  |   .0795456   .0078736    10.10   0.000     .0641127    .0949786
          4  |   .1005412    .009102    11.05   0.000     .0827005    .1183818
          5  |    .115975   .0103851    11.17   0.000     .0956193    .1363306
          6  |   .1262222    .011808    10.69   0.000     .1030777    .1493668
          7  |    .134565   .0132429    10.16   0.000     .1086078    .1605223
          8  |    .147831   .0147409    10.03   0.000     .1189377    .1767244
          9  |   .1493138   .0162291     9.20   0.000     .1175035    .1811242
         10  |    .151248   .0177072     8.54   0.000     .1165403    .1859556
         11  |   .1584286   .0191911     8.26   0.000     .1208124    .1960447
         12  |   .1576748   .0206996     7.62   0.000      .117102    .1982477
         13  |   .1686324   .0222918     7.56   0.000     .1249386    .2123262
         14  |   .1793995   .0239344     7.50   0.000     .1324862    .2263129
         15  |   .1867247   .0254605     7.33   0.000       .13682    .2366294
         16  |   .1940112   .0270348     7.18   0.000     .1410208    .2470015
         17  |   .1929667   .0285664     6.76   0.000     .1369743    .2489591
         18  |   .2005721   .0302771     6.62   0.000     .1412264    .2599177
         19  |   .1889692   .0321027     5.89   0.000     .1260453    .2518932
         20  |   .1971823   .0348429     5.66   0.000     .1288873    .2654772
         25  |   .2141535   .0404125     5.30   0.000     .1349418    .2933652
         30  |   .1979454   .0601168     3.29   0.001     .0801116    .3157792
         40  |   .1838845   .0677738     2.71   0.007     .0510424    .3167266
         50  |   .1064076   .0732468     1.45   0.146    -.0371621    .2499772
             |
       _cons |   .2466201   .0132266    18.65   0.000      .220695    .2725453
-------------+----------------------------------------------------------------
     sigma_u |  .38294279
     sigma_e |  .28384414
         rho |  .64540933   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0492564816543409

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    322,194
Group variable: id                              Number of groups  =     20,302

R-sq:                                           Obs per group:
     within  = 0.0493                                         min =          1
     between = 0.1845                                         avg =       15.9
     overall = 0.1046                                         max =        161

                                                F(75,20301)       =      33.87
corr(u_i, Xb)  = 0.2145                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0279424   .0121628     2.30   0.022     .0041024    .0517825
       expat |   .0164671   .0037508     4.39   0.000     .0091153    .0238189
             |
    ind_year |
          2  |  -.0166725   .0088627    -1.88   0.060    -.0340441     .000699
          3  |  -.0322265   .0106999    -3.01   0.003    -.0531991   -.0112539
          4  |  -.0402337    .011423    -3.52   0.000    -.0626236   -.0178437
          5  |   -.026019   .0127268    -2.04   0.041    -.0509646   -.0010735
          6  |  -.0379614   .0136437    -2.78   0.005    -.0647042   -.0112186
          7  |  -.0351098   .0146857    -2.39   0.017    -.0638949   -.0063246
          8  |  -.0485704   .0158567    -3.06   0.002    -.0796508   -.0174899
          9  |   -.051805   .0171695    -3.02   0.003    -.0854587   -.0181514
         10  |  -.0485463   .0184205    -2.64   0.008    -.0846519   -.0124406
         11  |    -.05379   .0197222    -2.73   0.006     -.092447   -.0151329
         12  |   -.053201   .0209201    -2.54   0.011     -.094206   -.0121959
         13  |  -.0467113   .0223193    -2.09   0.036     -.090459   -.0029636
         14  |  -.0353627   .0237088    -1.49   0.136    -.0818339    .0111084
         15  |  -.0244901   .0251056    -0.98   0.329     -.073699    .0247189
         16  |  -.0118501    .026496    -0.45   0.655    -.0637844    .0400842
         17  |  -.0006377    .027931    -0.02   0.982    -.0553848    .0541094
         18  |   .0014718   .0295147     0.05   0.960    -.0563794     .059323
         19  |   .0052538   .0309726     0.17   0.865    -.0554551    .0659627
         20  |   .0123339   .0323418     0.38   0.703    -.0510586    .0757264
         21  |    .017399   .0336671     0.52   0.605    -.0485912    .0833891
         22  |    .019234   .0349476     0.55   0.582    -.0492661     .087734
         23  |   .0148072   .0362063     0.41   0.683      -.05616    .0857744
         24  |  -.0982049   .0374983    -2.62   0.009    -.1717046   -.0247052
         25  |  -.1298425   .0390055    -3.33   0.001    -.2062964   -.0533886
         26  |   .0269124   .0205198     1.31   0.190     -.013308    .0671329
         27  |   .0183198   .0188415     0.97   0.331     -.018611    .0552505
         28  |   .0312411   .0184993     1.69   0.091     -.005019    .0675012
         29  |   .0394892   .0182471     2.16   0.030     .0037235     .075255
         30  |   .0500089   .0183935     2.72   0.007     .0139562    .0860616
         31  |   .0414067   .0185326     2.23   0.025     .0050814    .0777321
         32  |   .0433458   .0191193     2.27   0.023     .0058704    .0808212
         33  |   .0435567   .0198328     2.20   0.028     .0046828    .0824305
         34  |   .0431576   .0206449     2.09   0.037     .0026919    .0836234
         35  |    .045833   .0216419     2.12   0.034     .0034132    .0882528
         36  |   .0445779   .0227978     1.96   0.051    -.0001076    .0892634
         37  |   .0436735   .0238754     1.83   0.067    -.0031242    .0904712
         38  |   .0461999   .0248792     1.86   0.063    -.0025654    .0949651
         39  |    .047426   .0261096     1.82   0.069    -.0037509    .0986029
         40  |   .0459835   .0272245     1.69   0.091    -.0073787    .0993457
         41  |    .067019   .0284626     2.35   0.019       .01123    .1228081
         42  |   .0764938   .0297549     2.57   0.010     .0181718    .1348157
         43  |   .0737904   .0312484     2.36   0.018      .012541    .1350399
         44  |   .0895118   .0327264     2.74   0.006     .0253653    .1536582
         45  |   .0946937   .0340342     2.78   0.005     .0279839    .1614035
         46  |   .0964293   .0354162     2.72   0.006     .0270107     .165848
         47  |   .1040536   .0367071     2.83   0.005     .0321047    .1760025
         48  |   .0872812   .0376641     2.32   0.020     .0134564     .161106
         49  |  -.1749087   .0391006    -4.47   0.000     -.251549   -.0982684
         50  |   -.227366   .0405381    -5.61   0.000    -.3068239    -.147908
             |
     age_cat |
          1  |   .0420244    .005869     7.16   0.000     .0305205    .0535282
          2  |   .0631331    .006828     9.25   0.000     .0497496    .0765165
          3  |   .0795456   .0078736    10.10   0.000     .0641127    .0949786
          4  |   .1005412    .009102    11.05   0.000     .0827005    .1183818
          5  |    .115975   .0103851    11.17   0.000     .0956193    .1363306
          6  |   .1262222    .011808    10.69   0.000     .1030777    .1493668
          7  |    .134565   .0132429    10.16   0.000     .1086078    .1605223
          8  |    .147831   .0147409    10.03   0.000     .1189377    .1767244
          9  |   .1493138   .0162291     9.20   0.000     .1175035    .1811242
         10  |    .151248   .0177072     8.54   0.000     .1165403    .1859556
         11  |   .1584286   .0191911     8.26   0.000     .1208124    .1960447
         12  |   .1576748   .0206996     7.62   0.000      .117102    .1982477
         13  |   .1686324   .0222918     7.56   0.000     .1249386    .2123262
         14  |   .1793995   .0239344     7.50   0.000     .1324862    .2263129
         15  |   .1867247   .0254605     7.33   0.000       .13682    .2366294
         16  |   .1940112   .0270348     7.18   0.000     .1410208    .2470015
         17  |   .1929667   .0285664     6.76   0.000     .1369743    .2489591
         18  |   .2005721   .0302771     6.62   0.000     .1412264    .2599177
         19  |   .1889692   .0321027     5.89   0.000     .1260453    .2518932
         20  |   .1971823   .0348429     5.66   0.000     .1288873    .2654772
         25  |   .2141535   .0404125     5.30   0.000     .1349418    .2933652
         30  |   .1979454   .0601168     3.29   0.001     .0801116    .3157792
         40  |   .1838845   .0677738     2.71   0.007     .0510424    .3167266
         50  |   .1064076   .0732468     1.45   0.146    -.0371621    .2499772
             |
       _cons |   .2466201   .0132266    18.65   0.000      .220695    .2725453
-------------+----------------------------------------------------------------
     sigma_u |  .38294279
     sigma_e |  .28384414
         rho |  .64540933   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    533201
Group variable: firm_person                     Number of groups   =     61260

R-sq:  within  = 0.0440                         Obs per group: min =         1
       between = 0.1698                                        avg =       8.7
       overall = 0.0976                                        max =        25

                                                F(78,20301)        =     34.80
corr(u_i, Xb)  = 0.2053                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0260289   .0108988     2.39   0.017     .0046663    .0473915
      during |  -.0036633   .0030365    -1.21   0.228     -.009615    .0022884
       after |  -.0190096   .0051611    -3.68   0.000    -.0291258   -.0088934
during_expat |   .0042143   .0055022     0.77   0.444    -.0065705    .0149992
 after_expat |  -.0038572   .0078014    -0.49   0.621    -.0191484    .0114341
             |
    ind_year |
          2  |  -.0160451   .0087498    -1.83   0.067    -.0331955    .0011052
          3  |  -.0295628   .0104984    -2.82   0.005    -.0501405   -.0089851
          4  |  -.0380078   .0114145    -3.33   0.001    -.0603811   -.0156345
          5  |  -.0245845   .0127669    -1.93   0.054    -.0496086    .0004396
          6  |   -.037131   .0138423    -2.68   0.007    -.0642629    -.009999
          7  |  -.0328359   .0149435    -2.20   0.028    -.0621264   -.0035454
          8  |  -.0450398   .0161958    -2.78   0.005    -.0767848   -.0132947
          9  |  -.0493203   .0175824    -2.81   0.005    -.0837833   -.0148573
         10  |  -.0458233   .0188735    -2.43   0.015     -.082817   -.0088297
         11  |  -.0496612   .0202808    -2.45   0.014    -.0894132   -.0099092
         12  |    -.04987    .021597    -2.31   0.021    -.0922018   -.0075382
         13  |  -.0425551   .0230845    -1.84   0.065    -.0878026    .0026923
         14  |  -.0308441   .0245828    -1.25   0.210    -.0790283    .0173401
         15  |   -.021871   .0260322    -0.84   0.401    -.0728961    .0291541
         16  |   -.007332   .0274862    -0.27   0.790    -.0612073    .0465432
         17  |   .0050038   .0290021     0.17   0.863    -.0518427    .0618503
         18  |   .0093604   .0305711     0.31   0.759    -.0505615    .0692823
         19  |    .013685   .0320681     0.43   0.670     -.049171     .076541
         20  |   .0212043     .03347     0.63   0.526    -.0443997    .0868082
         21  |   .0229428   .0348401     0.66   0.510    -.0453467    .0912322
         22  |   .0296142   .0361056     0.82   0.412    -.0411558    .1003842
         23  |   .0243293   .0373891     0.65   0.515    -.0489564    .0976151
         24  |  -.0831187   .0387516    -2.14   0.032    -.1590749   -.0071625
         25  |  -.1151576   .0402231    -2.86   0.004    -.1939982    -.036317
         26  |    .028027   .0198008     1.42   0.157    -.0107841    .0668381
         27  |   .0210785   .0182591     1.15   0.248    -.0147109    .0568678
         28  |   .0355848   .0178161     2.00   0.046     .0006639    .0705057
         29  |    .039856    .017649     2.26   0.024     .0052626    .0744494
         30  |   .0514858    .017718     2.91   0.004     .0167571    .0862146
         31  |   .0429333   .0180687     2.38   0.018     .0075172    .0783493
         32  |   .0462159    .018718     2.47   0.014     .0095271    .0829047
         33  |   .0503386   .0193726     2.60   0.009     .0123667    .0883105
         34  |   .0449673   .0203843     2.21   0.027     .0050124    .0849222
         35  |    .052567   .0213962     2.46   0.014     .0106287    .0945054
         36  |   .0506788   .0226561     2.24   0.025     .0062709    .0950867
         37  |   .0504256   .0238002     2.12   0.034     .0037754    .0970758
         38  |   .0539151   .0249961     2.16   0.031     .0049207    .1029095
         39  |   .0539793   .0263616     2.05   0.041     .0023085    .1056502
         40  |   .0529948   .0276088     1.92   0.055    -.0011206    .1071102
         41  |   .0708128   .0289135     2.45   0.014     .0141401    .1274856
         42  |   .0800427   .0303232     2.64   0.008     .0206069    .1394786
         43  |   .0786358    .031858     2.47   0.014     .0161915    .1410802
         44  |   .0934456    .033392     2.80   0.005     .0279946    .1588965
         45  |   .0995267   .0348416     2.86   0.004     .0312343    .1678191
         46  |   .1019375   .0362982     2.81   0.005     .0307901    .1730849
         47  |   .1072725   .0375272     2.86   0.004     .0337162    .1808288
         48  |   .0934493   .0386249     2.42   0.016     .0177414    .1691573
         49  |  -.1533569   .0400832    -3.83   0.000    -.2319233   -.0747905
         50  |  -.2028008    .041532    -4.88   0.000    -.2842068   -.1213948
             |
     age_cat |
          1  |   .0446523   .0055972     7.98   0.000     .0336812    .0556233
          2  |   .0668068   .0065882    10.14   0.000     .0538934    .0797203
          3  |   .0838589   .0076967    10.90   0.000     .0687727    .0989451
          4  |    .106371   .0090026    11.82   0.000     .0887253    .1240167
          5  |   .1208123   .0103593    11.66   0.000     .1005073    .1411173
          6  |   .1298652   .0118432    10.97   0.000     .1066515    .1530788
          7  |    .136851   .0133446    10.26   0.000     .1106944    .1630076
          8  |   .1493163    .014889    10.03   0.000     .1201327    .1784999
          9  |   .1508779   .0164463     9.17   0.000     .1186418    .1831139
         10  |   .1546119   .0180035     8.59   0.000     .1193235    .1899003
         11  |   .1612399   .0195519     8.25   0.000     .1229166    .1995632
         12  |   .1610538   .0211099     7.63   0.000     .1196768    .2024308
         13  |   .1694236   .0227359     7.45   0.000     .1248594    .2139878
         14  |   .1793692    .024373     7.36   0.000     .1315962    .2271422
         15  |   .1854213   .0259207     7.15   0.000     .1346147     .236228
         16  |   .1937847   .0275118     7.04   0.000     .1398594    .2477101
         17  |    .193951   .0290959     6.67   0.000     .1369207    .2509812
         18  |   .1996436   .0308184     6.48   0.000     .1392371      .26005
         19  |   .1912305   .0325692     5.87   0.000     .1273923    .2550687
         20  |   .1971035   .0354336     5.56   0.000     .1276509    .2665562
         25  |   .2148716   .0408327     5.26   0.000     .1348362     .294907
         30  |   .1988961   .0583373     3.41   0.001     .0845503    .3132419
         40  |    .182545   .0650726     2.81   0.005     .0549974    .3100926
         50  |   .1194735   .0689388     1.73   0.083    -.0156521    .2545992
             |
       _cons |   .2603535   .0134048    19.42   0.000      .234079    .2866281
-------------+----------------------------------------------------------------
     sigma_u |  .40763155
     sigma_e |    .284092
         rho |  .67307614   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0439930365259935

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    533,201
Group variable: firm_person                     Number of groups  =     61,260

R-sq:                                           Obs per group:
     within  = 0.0440                                         min =          1
     between = 0.1698                                         avg =        8.7
     overall = 0.0976                                         max =         25

                                                F(78,20301)       =      34.80
corr(u_i, Xb)  = 0.2053                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 20,302 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0260289   .0108988     2.39   0.017     .0046663    .0473915
      during |  -.0036633   .0030365    -1.21   0.228     -.009615    .0022884
       after |  -.0190096   .0051611    -3.68   0.000    -.0291258   -.0088934
during_expat |   .0042143   .0055022     0.77   0.444    -.0065705    .0149992
 after_expat |  -.0038572   .0078014    -0.49   0.621    -.0191484    .0114341
             |
    ind_year |
          2  |  -.0160451   .0087498    -1.83   0.067    -.0331955    .0011052
          3  |  -.0295628   .0104984    -2.82   0.005    -.0501405   -.0089851
          4  |  -.0380078   .0114145    -3.33   0.001    -.0603811   -.0156345
          5  |  -.0245845   .0127669    -1.93   0.054    -.0496086    .0004396
          6  |   -.037131   .0138423    -2.68   0.007    -.0642629    -.009999
          7  |  -.0328359   .0149435    -2.20   0.028    -.0621264   -.0035454
          8  |  -.0450398   .0161958    -2.78   0.005    -.0767848   -.0132947
          9  |  -.0493203   .0175824    -2.81   0.005    -.0837833   -.0148573
         10  |  -.0458233   .0188735    -2.43   0.015     -.082817   -.0088297
         11  |  -.0496612   .0202808    -2.45   0.014    -.0894132   -.0099092
         12  |    -.04987    .021597    -2.31   0.021    -.0922018   -.0075382
         13  |  -.0425551   .0230845    -1.84   0.065    -.0878026    .0026923
         14  |  -.0308441   .0245828    -1.25   0.210    -.0790283    .0173401
         15  |   -.021871   .0260322    -0.84   0.401    -.0728961    .0291541
         16  |   -.007332   .0274862    -0.27   0.790    -.0612073    .0465432
         17  |   .0050038   .0290021     0.17   0.863    -.0518427    .0618503
         18  |   .0093604   .0305711     0.31   0.759    -.0505615    .0692823
         19  |    .013685   .0320681     0.43   0.670     -.049171     .076541
         20  |   .0212043     .03347     0.63   0.526    -.0443997    .0868082
         21  |   .0229428   .0348401     0.66   0.510    -.0453467    .0912322
         22  |   .0296142   .0361056     0.82   0.412    -.0411558    .1003842
         23  |   .0243293   .0373891     0.65   0.515    -.0489564    .0976151
         24  |  -.0831187   .0387516    -2.14   0.032    -.1590749   -.0071625
         25  |  -.1151576   .0402231    -2.86   0.004    -.1939982    -.036317
         26  |    .028027   .0198008     1.42   0.157    -.0107841    .0668381
         27  |   .0210785   .0182591     1.15   0.248    -.0147109    .0568678
         28  |   .0355848   .0178161     2.00   0.046     .0006639    .0705057
         29  |    .039856    .017649     2.26   0.024     .0052626    .0744494
         30  |   .0514858    .017718     2.91   0.004     .0167571    .0862146
         31  |   .0429333   .0180687     2.38   0.018     .0075172    .0783493
         32  |   .0462159    .018718     2.47   0.014     .0095271    .0829047
         33  |   .0503386   .0193726     2.60   0.009     .0123667    .0883105
         34  |   .0449673   .0203843     2.21   0.027     .0050124    .0849222
         35  |    .052567   .0213962     2.46   0.014     .0106287    .0945054
         36  |   .0506788   .0226561     2.24   0.025     .0062709    .0950867
         37  |   .0504256   .0238002     2.12   0.034     .0037754    .0970758
         38  |   .0539151   .0249961     2.16   0.031     .0049207    .1029095
         39  |   .0539793   .0263616     2.05   0.041     .0023085    .1056502
         40  |   .0529948   .0276088     1.92   0.055    -.0011206    .1071102
         41  |   .0708128   .0289135     2.45   0.014     .0141401    .1274856
         42  |   .0800427   .0303232     2.64   0.008     .0206069    .1394786
         43  |   .0786358    .031858     2.47   0.014     .0161915    .1410802
         44  |   .0934456    .033392     2.80   0.005     .0279946    .1588965
         45  |   .0995267   .0348416     2.86   0.004     .0312343    .1678191
         46  |   .1019375   .0362982     2.81   0.005     .0307901    .1730849
         47  |   .1072725   .0375272     2.86   0.004     .0337162    .1808288
         48  |   .0934493   .0386249     2.42   0.016     .0177414    .1691573
         49  |  -.1533569   .0400832    -3.83   0.000    -.2319233   -.0747905
         50  |  -.2028008    .041532    -4.88   0.000    -.2842068   -.1213948
             |
     age_cat |
          1  |   .0446523   .0055972     7.98   0.000     .0336812    .0556233
          2  |   .0668068   .0065882    10.14   0.000     .0538934    .0797203
          3  |   .0838589   .0076967    10.90   0.000     .0687727    .0989451
          4  |    .106371   .0090026    11.82   0.000     .0887253    .1240167
          5  |   .1208123   .0103593    11.66   0.000     .1005073    .1411173
          6  |   .1298652   .0118432    10.97   0.000     .1066515    .1530788
          7  |    .136851   .0133446    10.26   0.000     .1106944    .1630076
          8  |   .1493163    .014889    10.03   0.000     .1201327    .1784999
          9  |   .1508779   .0164463     9.17   0.000     .1186418    .1831139
         10  |   .1546119   .0180035     8.59   0.000     .1193235    .1899003
         11  |   .1612399   .0195519     8.25   0.000     .1229166    .1995632
         12  |   .1610538   .0211099     7.63   0.000     .1196768    .2024308
         13  |   .1694236   .0227359     7.45   0.000     .1248594    .2139878
         14  |   .1793692    .024373     7.36   0.000     .1315962    .2271422
         15  |   .1854213   .0259207     7.15   0.000     .1346147     .236228
         16  |   .1937847   .0275118     7.04   0.000     .1398594    .2477101
         17  |    .193951   .0290959     6.67   0.000     .1369207    .2509812
         18  |   .1996436   .0308184     6.48   0.000     .1392371      .26005
         19  |   .1912305   .0325692     5.87   0.000     .1273923    .2550687
         20  |   .1971035   .0354336     5.56   0.000     .1276509    .2665562
         25  |   .2148716   .0408327     5.26   0.000     .1348362     .294907
         30  |   .1988961   .0583373     3.41   0.001     .0845503    .3132419
         40  |    .182545   .0650726     2.81   0.005     .0549974    .3100926
         50  |   .1194735   .0689388     1.73   0.083    -.0156521    .2545992
             |
       _cons |   .2603535   .0134048    19.42   0.000      .234079    .2866281
-------------+----------------------------------------------------------------
     sigma_u |  .40763155
     sigma_e |    .284092
         rho |  .67307614   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 20301) =    1.46
            Prob > F =    0.2277

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 20301) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 20301) =   16.90
            Prob > F =    0.0000

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 20301) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 20301) =    0.59
            Prob > F =    0.4437

 ( 1)  during_expat = 0

       F(  1, 20301) =    0.59
            Prob > F =    0.4437
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 20301) =    1.92
            Prob > F =    0.1659

 ( 1)  after_expat = 0

       F(  1, 20301) =    0.24
            Prob > F =    0.6210
(file output/figure/baseline_exporter_slope.png written in PNG format)
(sum of wgt is 40,785.5878564715)

Linear regression                               Number of obs     =    109,056
                                                F(50, 7121)       =      95.16
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1548
                                                Root MSE          =     .45045

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3329674   .0107207    31.06   0.000     .3119516    .3539831
       expat |   .0530001    .009236     5.74   0.000     .0348949    .0711053
             |
    ind_year |
         27  |  -.0357207   .0143124    -2.50   0.013    -.0637773   -.0076641
         28  |  -.0233717   .0158542    -1.47   0.140    -.0544507    .0077072
         29  |  -.0249162    .016327    -1.53   0.127    -.0569219    .0070895
         30  |   .0009848   .0171169     0.06   0.954    -.0325693    .0345389
         31  |  -.0015232   .0174048    -0.09   0.930    -.0356417    .0325954
         32  |  -.0048981   .0176027    -0.28   0.781    -.0394047    .0296085
         33  |  -.0159584   .0178854    -0.89   0.372    -.0510191    .0191024
         34  |  -.0126751   .0182517    -0.69   0.487    -.0484538    .0231036
         35  |  -.0108411   .0184041    -0.59   0.556    -.0469185    .0252364
         36  |  -.0072522   .0185792    -0.39   0.696    -.0436729    .0291686
         37  |  -.0171828   .0186295    -0.92   0.356    -.0537022    .0193366
         38  |  -.0196815   .0186818    -1.05   0.292    -.0563033    .0169403
         39  |  -.0234751    .018784    -1.25   0.211    -.0602974    .0133472
         40  |  -.0283646    .019047    -1.49   0.136    -.0657023    .0089731
         41  |  -.0061872   .0191854    -0.32   0.747    -.0437963     .031422
         42  |    .000847   .0194567     0.04   0.965    -.0372938    .0389879
         43  |   -.003653   .0198438    -0.18   0.854    -.0425528    .0352468
         44  |   .0083596   .0201598     0.41   0.678    -.0311597    .0478789
         45  |   .0088972   .0204157     0.44   0.663    -.0311236    .0489181
         46  |   .0128309   .0205478     0.62   0.532     -.027449    .0531107
         47  |   .0203852   .0209418     0.97   0.330     -.020667    .0614373
         48  |  -.0003894   .0212559    -0.02   0.985    -.0420572    .0412784
         49  |  -.2575507   .0211213   -12.19   0.000    -.2989548   -.2161466
         50  |  -.3006968   .0214734   -14.00   0.000     -.342791   -.2586026
             |
     age_cat |
          1  |   .0873843   .0128992     6.77   0.000      .062098    .1126705
          2  |   .1193242   .0135328     8.82   0.000     .0927959    .1458525
          3  |   .1338608   .0138928     9.64   0.000     .1066267    .1610949
          4  |   .1688336     .01445    11.68   0.000     .1405072    .1971599
          5  |   .1885142   .0149626    12.60   0.000      .159183    .2178453
          6  |    .202822   .0153897    13.18   0.000     .1726536    .2329904
          7  |   .2192929   .0157577    13.92   0.000     .1884031    .2501827
          8  |   .2269375   .0162547    13.96   0.000     .1950734    .2588015
          9  |   .2365129   .0165559    14.29   0.000     .2040584    .2689674
         10  |   .2487415   .0168263    14.78   0.000      .215757    .2817261
         11  |   .2556473   .0170758    14.97   0.000     .2221737     .289121
         12  |   .2636325   .0173804    15.17   0.000     .2295619    .2977032
         13  |   .2856042   .0177186    16.12   0.000     .2508704     .320338
         14  |   .2981486   .0183436    16.25   0.000     .2621898    .3341075
         15  |   .3057251   .0188301    16.24   0.000     .2688125    .3426377
         16  |   .3130558    .019483    16.07   0.000     .2748633    .3512483
         17  |   .3139705   .0199721    15.72   0.000     .2748192    .3531218
         18  |   .3220855   .0205259    15.69   0.000     .2818486    .3623224
         19  |   .3115842   .0215047    14.49   0.000     .2694286    .3537398
         20  |    .328144   .0215456    15.23   0.000     .2859082    .3703797
         25  |   .3188322   .0305326    10.44   0.000     .2589792    .3786853
         30  |   .2242904   .0592778     3.78   0.000     .1080882    .3404926
         40  |   .3313333   .0494481     6.70   0.000     .2344003    .4282663
         50  |   .2846542   .0561867     5.07   0.000     .1745116    .3947967
             |
       _cons |   .3061976   .0183118    16.72   0.000     .2703011    .3420941
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    109,056
                                                F(50, 7121)       =      95.16
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1548
                                                Root MSE          =     .45045

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .3329674   .0107207    31.06   0.000     .3119516    .3539831
       expat |   .0530001    .009236     5.74   0.000     .0348949    .0711053
             |
    ind_year |
         27  |  -.0357207   .0143124    -2.50   0.013    -.0637773   -.0076641
         28  |  -.0233717   .0158542    -1.47   0.140    -.0544507    .0077072
         29  |  -.0249162    .016327    -1.53   0.127    -.0569219    .0070895
         30  |   .0009848   .0171169     0.06   0.954    -.0325693    .0345389
         31  |  -.0015232   .0174048    -0.09   0.930    -.0356417    .0325954
         32  |  -.0048981   .0176027    -0.28   0.781    -.0394047    .0296085
         33  |  -.0159584   .0178854    -0.89   0.372    -.0510191    .0191024
         34  |  -.0126751   .0182517    -0.69   0.487    -.0484538    .0231036
         35  |  -.0108411   .0184041    -0.59   0.556    -.0469185    .0252364
         36  |  -.0072522   .0185792    -0.39   0.696    -.0436729    .0291686
         37  |  -.0171828   .0186295    -0.92   0.356    -.0537022    .0193366
         38  |  -.0196815   .0186818    -1.05   0.292    -.0563033    .0169403
         39  |  -.0234751    .018784    -1.25   0.211    -.0602974    .0133472
         40  |  -.0283646    .019047    -1.49   0.136    -.0657023    .0089731
         41  |  -.0061872   .0191854    -0.32   0.747    -.0437963     .031422
         42  |    .000847   .0194567     0.04   0.965    -.0372938    .0389879
         43  |   -.003653   .0198438    -0.18   0.854    -.0425528    .0352468
         44  |   .0083596   .0201598     0.41   0.678    -.0311597    .0478789
         45  |   .0088972   .0204157     0.44   0.663    -.0311236    .0489181
         46  |   .0128309   .0205478     0.62   0.532     -.027449    .0531107
         47  |   .0203852   .0209418     0.97   0.330     -.020667    .0614373
         48  |  -.0003894   .0212559    -0.02   0.985    -.0420572    .0412784
         49  |  -.2575507   .0211213   -12.19   0.000    -.2989548   -.2161466
         50  |  -.3006968   .0214734   -14.00   0.000     -.342791   -.2586026
             |
     age_cat |
          1  |   .0873843   .0128992     6.77   0.000      .062098    .1126705
          2  |   .1193242   .0135328     8.82   0.000     .0927959    .1458525
          3  |   .1338608   .0138928     9.64   0.000     .1066267    .1610949
          4  |   .1688336     .01445    11.68   0.000     .1405072    .1971599
          5  |   .1885142   .0149626    12.60   0.000      .159183    .2178453
          6  |    .202822   .0153897    13.18   0.000     .1726536    .2329904
          7  |   .2192929   .0157577    13.92   0.000     .1884031    .2501827
          8  |   .2269375   .0162547    13.96   0.000     .1950734    .2588015
          9  |   .2365129   .0165559    14.29   0.000     .2040584    .2689674
         10  |   .2487415   .0168263    14.78   0.000      .215757    .2817261
         11  |   .2556473   .0170758    14.97   0.000     .2221737     .289121
         12  |   .2636325   .0173804    15.17   0.000     .2295619    .2977032
         13  |   .2856042   .0177186    16.12   0.000     .2508704     .320338
         14  |   .2981486   .0183436    16.25   0.000     .2621898    .3341075
         15  |   .3057251   .0188301    16.24   0.000     .2688125    .3426377
         16  |   .3130558    .019483    16.07   0.000     .2748633    .3512483
         17  |   .3139705   .0199721    15.72   0.000     .2748192    .3531218
         18  |   .3220855   .0205259    15.69   0.000     .2818486    .3623224
         19  |   .3115842   .0215047    14.49   0.000     .2694286    .3537398
         20  |    .328144   .0215456    15.23   0.000     .2859082    .3703797
         25  |   .3188322   .0305326    10.44   0.000     .2589792    .3786853
         30  |   .2242904   .0592778     3.78   0.000     .1080882    .3404926
         40  |   .3313333   .0494481     6.70   0.000     .2344003    .4282663
         50  |   .2846542   .0561867     5.07   0.000     .1745116    .3947967
             |
       _cons |   .3061976   .0183118    16.72   0.000     .2703011    .3420941
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    109,056
Group variable: id                              Number of groups  =      7,122

R-sq:                                           Obs per group:
     within  = 0.0688                                         min =          1
     between = 0.1043                                         avg =       15.3
     overall = 0.0543                                         max =        125

                                                F(50,7121)        =      25.66
corr(u_i, Xb)  = 0.0703                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0216675   .0221626     0.98   0.328    -.0217779    .0651129
       expat |   .0185847   .0043147     4.31   0.000     .0101267    .0270428
             |
    ind_year |
         27  |  -.0074197   .0130592    -0.57   0.570    -.0330196    .0181803
         28  |   .0048877   .0155006     0.32   0.753    -.0254981    .0352736
         29  |   .0092498   .0177149     0.52   0.602    -.0254767    .0439763
         30  |   .0221753   .0204467     1.08   0.278    -.0179064     .062257
         31  |   .0123407   .0229591     0.54   0.591    -.0326659    .0573473
         32  |   .0150611   .0254543     0.59   0.554    -.0348369    .0649591
         33  |   .0134621   .0279589     0.48   0.630    -.0413457    .0682698
         34  |   .0113104   .0307541     0.37   0.713    -.0489768    .0715977
         35  |   .0126213   .0334647     0.38   0.706    -.0529796    .0782221
         36  |   .0109923   .0363344     0.30   0.762    -.0602339    .0822185
         37  |    .007678   .0388972     0.20   0.844    -.0685721    .0839281
         38  |    .008028   .0417301     0.19   0.847    -.0737755    .0898315
         39  |   .0072148    .044641     0.16   0.872    -.0802949    .0947244
         40  |   .0038475   .0472204     0.08   0.935    -.0887185    .0964136
         41  |   .0228767   .0498403     0.46   0.646     -.074825    .1205784
         42  |   .0330501   .0527373     0.63   0.531    -.0703306    .1364308
         43  |   .0314383   .0558679     0.56   0.574    -.0780794    .1409559
         44  |   .0455098    .058767     0.77   0.439     -.069691    .1607107
         45  |   .0494985   .0615897     0.80   0.422    -.0712355    .1702326
         46  |    .048347   .0641257     0.75   0.451    -.0773584    .1740525
         47  |   .0547837   .0666913     0.82   0.411    -.0759511    .1855185
         48  |   .0400679   .0687598     0.58   0.560    -.0947218    .1748576
         49  |  -.2348894   .0712471    -3.30   0.001    -.3745548   -.0952239
         50  |  -.2886897    .073934    -3.90   0.000    -.4336224    -.143757
             |
     age_cat |
          1  |   .0676513   .0125218     5.40   0.000     .0431048    .0921977
          2  |   .0983397   .0143059     6.87   0.000     .0702959    .1263834
          3  |   .1089284   .0163194     6.67   0.000     .0769376    .1409192
          4  |   .1369479   .0187699     7.30   0.000     .1001533    .1737425
          5  |   .1570062   .0213077     7.37   0.000     .1152368    .1987755
          6  |   .1688157   .0240217     7.03   0.000      .121726    .2159054
          7  |   .1770194   .0267078     6.63   0.000     .1246641    .2293746
          8  |   .1793897   .0295721     6.07   0.000     .1214195    .2373599
          9  |   .1902618   .0323782     5.88   0.000     .1267909    .2537326
         10  |   .1975227   .0349787     5.65   0.000      .128954    .2660915
         11  |    .202859   .0377916     5.37   0.000     .1287762    .2769417
         12  |   .2041335   .0407208     5.01   0.000     .1243086    .2839583
         13  |    .225507    .043808     5.15   0.000     .1396303    .3113836
         14  |   .2423735   .0470008     5.16   0.000      .150238     .334509
         15  |   .2483324   .0499821     4.97   0.000     .1503525    .3463122
         16  |   .2508597   .0528272     4.75   0.000     .1473027    .3544168
         17  |   .2571545   .0559406     4.60   0.000     .1474942    .3668148
         18  |   .2588531   .0592588     4.37   0.000     .1426883    .3750179
         19  |   .2470769   .0626023     3.95   0.000     .1243578    .3697959
         20  |   .2577791   .0675749     3.81   0.000     .1253123    .3902459
         25  |   .2638264   .0774864     3.40   0.001     .1119301    .4157228
         30  |   .2720375   .1158961     2.35   0.019     .0448467    .4992283
         40  |   .1705395   .1342898     1.27   0.204    -.0927083    .4337874
         50  |  -.0015859   .1527855    -0.01   0.992    -.3010908     .297919
             |
       _cons |   .4184624   .0206781    20.24   0.000     .3779272    .4589975
-------------+----------------------------------------------------------------
     sigma_u |  .39731182
     sigma_e |  .30229576
         rho |  .63335363   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0688261497467004

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    109,056
Group variable: id                              Number of groups  =      7,122

R-sq:                                           Obs per group:
     within  = 0.0688                                         min =          1
     between = 0.1043                                         avg =       15.3
     overall = 0.0543                                         max =        125

                                                F(50,7121)        =      25.66
corr(u_i, Xb)  = 0.0703                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0216675   .0221626     0.98   0.328    -.0217779    .0651129
       expat |   .0185847   .0043147     4.31   0.000     .0101267    .0270428
             |
    ind_year |
         27  |  -.0074197   .0130592    -0.57   0.570    -.0330196    .0181803
         28  |   .0048877   .0155006     0.32   0.753    -.0254981    .0352736
         29  |   .0092498   .0177149     0.52   0.602    -.0254767    .0439763
         30  |   .0221753   .0204467     1.08   0.278    -.0179064     .062257
         31  |   .0123407   .0229591     0.54   0.591    -.0326659    .0573473
         32  |   .0150611   .0254543     0.59   0.554    -.0348369    .0649591
         33  |   .0134621   .0279589     0.48   0.630    -.0413457    .0682698
         34  |   .0113104   .0307541     0.37   0.713    -.0489768    .0715977
         35  |   .0126213   .0334647     0.38   0.706    -.0529796    .0782221
         36  |   .0109923   .0363344     0.30   0.762    -.0602339    .0822185
         37  |    .007678   .0388972     0.20   0.844    -.0685721    .0839281
         38  |    .008028   .0417301     0.19   0.847    -.0737755    .0898315
         39  |   .0072148    .044641     0.16   0.872    -.0802949    .0947244
         40  |   .0038475   .0472204     0.08   0.935    -.0887185    .0964136
         41  |   .0228767   .0498403     0.46   0.646     -.074825    .1205784
         42  |   .0330501   .0527373     0.63   0.531    -.0703306    .1364308
         43  |   .0314383   .0558679     0.56   0.574    -.0780794    .1409559
         44  |   .0455098    .058767     0.77   0.439     -.069691    .1607107
         45  |   .0494985   .0615897     0.80   0.422    -.0712355    .1702326
         46  |    .048347   .0641257     0.75   0.451    -.0773584    .1740525
         47  |   .0547837   .0666913     0.82   0.411    -.0759511    .1855185
         48  |   .0400679   .0687598     0.58   0.560    -.0947218    .1748576
         49  |  -.2348894   .0712471    -3.30   0.001    -.3745548   -.0952239
         50  |  -.2886897    .073934    -3.90   0.000    -.4336224    -.143757
             |
     age_cat |
          1  |   .0676513   .0125218     5.40   0.000     .0431048    .0921977
          2  |   .0983397   .0143059     6.87   0.000     .0702959    .1263834
          3  |   .1089284   .0163194     6.67   0.000     .0769376    .1409192
          4  |   .1369479   .0187699     7.30   0.000     .1001533    .1737425
          5  |   .1570062   .0213077     7.37   0.000     .1152368    .1987755
          6  |   .1688157   .0240217     7.03   0.000      .121726    .2159054
          7  |   .1770194   .0267078     6.63   0.000     .1246641    .2293746
          8  |   .1793897   .0295721     6.07   0.000     .1214195    .2373599
          9  |   .1902618   .0323782     5.88   0.000     .1267909    .2537326
         10  |   .1975227   .0349787     5.65   0.000      .128954    .2660915
         11  |    .202859   .0377916     5.37   0.000     .1287762    .2769417
         12  |   .2041335   .0407208     5.01   0.000     .1243086    .2839583
         13  |    .225507    .043808     5.15   0.000     .1396303    .3113836
         14  |   .2423735   .0470008     5.16   0.000      .150238     .334509
         15  |   .2483324   .0499821     4.97   0.000     .1503525    .3463122
         16  |   .2508597   .0528272     4.75   0.000     .1473027    .3544168
         17  |   .2571545   .0559406     4.60   0.000     .1474942    .3668148
         18  |   .2588531   .0592588     4.37   0.000     .1426883    .3750179
         19  |   .2470769   .0626023     3.95   0.000     .1243578    .3697959
         20  |   .2577791   .0675749     3.81   0.000     .1253123    .3902459
         25  |   .2638264   .0774864     3.40   0.001     .1119301    .4157228
         30  |   .2720375   .1158961     2.35   0.019     .0448467    .4992283
         40  |   .1705395   .1342898     1.27   0.204    -.0927083    .4337874
         50  |  -.0015859   .1527855    -0.01   0.992    -.3010908     .297919
             |
       _cons |   .4184624   .0206781    20.24   0.000     .3779272    .4589975
-------------+----------------------------------------------------------------
     sigma_u |  .39731182
     sigma_e |  .30229576
         rho |  .63335363   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    181711
Group variable: firm_person                     Number of groups   =     21971

R-sq:  within  = 0.0627                         Obs per group: min =         1
       between = 0.0748                                        avg =       8.3
       overall = 0.0404                                        max =        25

                                                F(53,7121)         =     25.33
corr(u_i, Xb)  = 0.0289                         Prob > F           =    0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .024579   .0198968     1.24   0.217    -.0144245    .0635826
      during |   -.018842   .0060543    -3.11   0.002    -.0307102   -.0069738
       after |  -.0340601   .0098595    -3.45   0.001    -.0533877   -.0147326
during_expat |  -.0043012   .0077615    -0.55   0.579     -.019516    .0109136
 after_expat |  -.0244488   .0112287    -2.18   0.029    -.0464604   -.0024372
             |
    ind_year |
         27  |  -.0082223   .0118447    -0.69   0.488    -.0314415    .0149968
         28  |    .003368   .0142301     0.24   0.813    -.0245272    .0312632
         29  |   .0015885   .0166085     0.10   0.924    -.0309692    .0341462
         30  |   .0143773   .0194495     0.74   0.460    -.0237496    .0525041
         31  |   .0031267   .0222673     0.14   0.888    -.0405239    .0467772
         32  |   .0045205   .0249799     0.18   0.856    -.0444475    .0534885
         33  |   .0048907   .0275728     0.18   0.859    -.0491601    .0589416
         34  |  -.0043894    .030528    -0.14   0.886    -.0642334    .0554546
         35  |  -.0010846   .0333094    -0.03   0.974    -.0663809    .0642117
         36  |  -.0056866   .0362454    -0.16   0.875    -.0767384    .0653651
         37  |  -.0104455    .038929    -0.27   0.788     -.086758    .0658669
         38  |  -.0108924   .0419162    -0.26   0.795    -.0930606    .0712758
         39  |  -.0146376   .0449096    -0.33   0.744    -.1026737    .0733985
         40  |  -.0198965   .0476106    -0.42   0.676    -.1132275    .0734345
         41  |   -.005562   .0502866    -0.11   0.912    -.1041387    .0930146
         42  |   .0019417   .0532157     0.04   0.971    -.1023769    .1062603
         43  |   .0001664   .0562662     0.00   0.998    -.1101322    .1104649
         44  |   .0113618   .0591845     0.19   0.848    -.1046574    .1273811
         45  |    .013839   .0620979     0.22   0.824    -.1078914    .1355693
         46  |    .012249   .0646942     0.19   0.850    -.1145709    .1390688
         47  |   .0170562   .0670949     0.25   0.799    -.1144697    .1485821
         48  |    .003441   .0692828     0.05   0.960    -.1323739    .1392559
         49  |  -.2576023   .0717157    -3.59   0.000    -.3981865   -.1170182
         50  |   -.309907   .0743432    -4.17   0.000    -.4556417   -.1641722
             |
     age_cat |
          1  |   .0755679   .0117789     6.42   0.000     .0524777    .0986581
          2  |   .1068725   .0135499     7.89   0.000     .0803107    .1334342
          3  |   .1244813   .0155878     7.99   0.000     .0939246    .1550381
          4  |   .1524938   .0181139     8.42   0.000     .1169852    .1880024
          5  |   .1703854   .0207013     8.23   0.000     .1298047    .2109661
          6  |   .1828043   .0234736     7.79   0.000     .1367892    .2288195
          7  |   .1938835    .026256     7.38   0.000     .1424139    .2453532
          8  |   .1987014   .0291545     6.82   0.000     .1415498     .255853
          9  |   .2132754   .0320028     6.66   0.000     .1505403    .2760104
         10  |   .2221163   .0347401     6.39   0.000     .1540154    .2902172
         11  |   .2327712   .0375848     6.19   0.000     .1590938    .3064485
         12  |   .2363294   .0405463     5.83   0.000     .1568467    .3158121
         13  |   .2543907   .0435791     5.84   0.000     .1689628    .3398186
         14  |   .2730727   .0466874     5.85   0.000     .1815515    .3645939
         15  |   .2837032   .0496595     5.71   0.000     .1863558    .3810507
         16  |   .2877863   .0524597     5.49   0.000     .1849496     .390623
         17  |   .2975982   .0555179     5.36   0.000     .1887666    .4064298
         18  |   .2992581   .0587658     5.09   0.000     .1840598    .4144565
         19  |    .290206   .0619453     4.68   0.000     .1687747    .4116373
         20  |   .3040196   .0670155     4.54   0.000     .1726492    .4353899
         25  |   .3124643    .076305     4.09   0.000     .1628839    .4620447
         30  |    .326188   .1079805     3.02   0.003     .1145142    .5378618
         40  |    .237396   .1262722     1.88   0.060    -.0101351     .484927
         50  |   .1060859   .1396112     0.76   0.447    -.1675936    .3797653
             |
       _cons |    .452773   .0202399    22.37   0.000     .4130967    .4924492
-------------+----------------------------------------------------------------
     sigma_u |  .37904317
     sigma_e |  .29688679
         rho |  .61977621   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0626549956658411

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    181,711
Group variable: firm_person                     Number of groups  =     21,971

R-sq:                                           Obs per group:
     within  = 0.0627                                         min =          1
     between = 0.0748                                         avg =        8.3
     overall = 0.0404                                         max =         25

                                                F(53,7121)        =      25.33
corr(u_i, Xb)  = 0.0289                         Prob > F          =     0.0000

                                 (Std. Err. adjusted for 7,122 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |    .024579   .0198968     1.24   0.217    -.0144245    .0635826
      during |   -.018842   .0060543    -3.11   0.002    -.0307102   -.0069738
       after |  -.0340601   .0098595    -3.45   0.001    -.0533877   -.0147326
during_expat |  -.0043012   .0077615    -0.55   0.579     -.019516    .0109136
 after_expat |  -.0244488   .0112287    -2.18   0.029    -.0464604   -.0024372
             |
    ind_year |
         27  |  -.0082223   .0118447    -0.69   0.488    -.0314415    .0149968
         28  |    .003368   .0142301     0.24   0.813    -.0245272    .0312632
         29  |   .0015885   .0166085     0.10   0.924    -.0309692    .0341462
         30  |   .0143773   .0194495     0.74   0.460    -.0237496    .0525041
         31  |   .0031267   .0222673     0.14   0.888    -.0405239    .0467772
         32  |   .0045205   .0249799     0.18   0.856    -.0444475    .0534885
         33  |   .0048907   .0275728     0.18   0.859    -.0491601    .0589416
         34  |  -.0043894    .030528    -0.14   0.886    -.0642334    .0554546
         35  |  -.0010846   .0333094    -0.03   0.974    -.0663809    .0642117
         36  |  -.0056866   .0362454    -0.16   0.875    -.0767384    .0653651
         37  |  -.0104455    .038929    -0.27   0.788     -.086758    .0658669
         38  |  -.0108924   .0419162    -0.26   0.795    -.0930606    .0712758
         39  |  -.0146376   .0449096    -0.33   0.744    -.1026737    .0733985
         40  |  -.0198965   .0476106    -0.42   0.676    -.1132275    .0734345
         41  |   -.005562   .0502866    -0.11   0.912    -.1041387    .0930146
         42  |   .0019417   .0532157     0.04   0.971    -.1023769    .1062603
         43  |   .0001664   .0562662     0.00   0.998    -.1101322    .1104649
         44  |   .0113618   .0591845     0.19   0.848    -.1046574    .1273811
         45  |    .013839   .0620979     0.22   0.824    -.1078914    .1355693
         46  |    .012249   .0646942     0.19   0.850    -.1145709    .1390688
         47  |   .0170562   .0670949     0.25   0.799    -.1144697    .1485821
         48  |    .003441   .0692828     0.05   0.960    -.1323739    .1392559
         49  |  -.2576023   .0717157    -3.59   0.000    -.3981865   -.1170182
         50  |   -.309907   .0743432    -4.17   0.000    -.4556417   -.1641722
             |
     age_cat |
          1  |   .0755679   .0117789     6.42   0.000     .0524777    .0986581
          2  |   .1068725   .0135499     7.89   0.000     .0803107    .1334342
          3  |   .1244813   .0155878     7.99   0.000     .0939246    .1550381
          4  |   .1524938   .0181139     8.42   0.000     .1169852    .1880024
          5  |   .1703854   .0207013     8.23   0.000     .1298047    .2109661
          6  |   .1828043   .0234736     7.79   0.000     .1367892    .2288195
          7  |   .1938835    .026256     7.38   0.000     .1424139    .2453532
          8  |   .1987014   .0291545     6.82   0.000     .1415498     .255853
          9  |   .2132754   .0320028     6.66   0.000     .1505403    .2760104
         10  |   .2221163   .0347401     6.39   0.000     .1540154    .2902172
         11  |   .2327712   .0375848     6.19   0.000     .1590938    .3064485
         12  |   .2363294   .0405463     5.83   0.000     .1568467    .3158121
         13  |   .2543907   .0435791     5.84   0.000     .1689628    .3398186
         14  |   .2730727   .0466874     5.85   0.000     .1815515    .3645939
         15  |   .2837032   .0496595     5.71   0.000     .1863558    .3810507
         16  |   .2877863   .0524597     5.49   0.000     .1849496     .390623
         17  |   .2975982   .0555179     5.36   0.000     .1887666    .4064298
         18  |   .2992581   .0587658     5.09   0.000     .1840598    .4144565
         19  |    .290206   .0619453     4.68   0.000     .1687747    .4116373
         20  |   .3040196   .0670155     4.54   0.000     .1726492    .4353899
         25  |   .3124643    .076305     4.09   0.000     .1628839    .4620447
         30  |    .326188   .1079805     3.02   0.003     .1145142    .5378618
         40  |    .237396   .1262722     1.88   0.060    -.0101351     .484927
         50  |   .1060859   .1396112     0.76   0.447    -.1675936    .3797653
             |
       _cons |    .452773   .0202399    22.37   0.000     .4130967    .4924492
-------------+----------------------------------------------------------------
     sigma_u |  .37904317
     sigma_e |  .29688679
         rho |  .61977621   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1,  7121) =    9.69
            Prob > F =    0.0019

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  7121) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1,  7121) =    4.39
            Prob > F =    0.0362

 ( 1) = 0
       Constraint 1 dropped

       F(  0,  7121) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1,  7121) =    0.31
            Prob > F =    0.5795

 ( 1)  during_expat = 0

       F(  1,  7121) =    0.31
            Prob > F =    0.5795
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1,  7121) =    4.91
            Prob > F =    0.0268

 ( 1)  after_expat = 0

       F(  1,  7121) =    4.74
            Prob > F =    0.0295
variable label was str12 now str13
(1 real change made)
(file output/figure/manufacturing_exporter_slope.png written in PNG format)
(sum of wgt is 101,303.286886573)

Linear regression                               Number of obs     =    238,775
                                                F(75, 16123)      =      62.05
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1185
                                                Root MSE          =     .43434

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .2409846   .0136935    17.60   0.000     .2141439    .2678254
       expat |   .0644631   .0194961     3.31   0.001     .0262485    .1026777
             |
    ind_year |
          2  |  -.0322063   .0097858    -3.29   0.001    -.0513875   -.0130251
          3  |  -.0537492    .011245    -4.78   0.000    -.0757907   -.0317077
          4  |  -.0623767    .011553    -5.40   0.000     -.085022   -.0397315
          5  |  -.0507312   .0120872    -4.20   0.000    -.0744233    -.027039
          6  |  -.0609446   .0122645    -4.97   0.000    -.0849843   -.0369049
          7  |  -.0678629   .0122886    -5.52   0.000    -.0919499   -.0437758
          8  |  -.0787034   .0124139    -6.34   0.000     -.103036   -.0543708
          9  |  -.0879711   .0124673    -7.06   0.000    -.1124084   -.0635338
         10  |  -.0885678   .0125602    -7.05   0.000    -.1131873   -.0639483
         11  |   -.103055   .0124369    -8.29   0.000    -.1274326   -.0786773
         12  |  -.1085658   .0124186    -8.74   0.000    -.1329078   -.0842239
         13  |  -.1074144   .0124341    -8.64   0.000    -.1317867   -.0830422
         14  |   -.100878   .0125712    -8.02   0.000    -.1255189   -.0762371
         15  |   -.094858   .0126367    -7.51   0.000    -.1196272   -.0700887
         16  |  -.0862533   .0127319    -6.77   0.000    -.1112092   -.0612974
         17  |  -.0751265   .0129026    -5.82   0.000     -.100417    -.049836
         18  |  -.0720005   .0130222    -5.53   0.000    -.0975255   -.0464756
         19  |  -.0663763   .0131493    -5.05   0.000    -.0921504   -.0406022
         20  |  -.0558522   .0133041    -4.20   0.000    -.0819297   -.0297746
         21  |  -.0505433   .0134896    -3.75   0.000    -.0769843   -.0241022
         22  |  -.0524736   .0137232    -3.82   0.000    -.0793726   -.0255747
         23  |  -.0591849   .0137741    -4.30   0.000    -.0861837    -.032186
         24  |  -.1610668   .0132231   -12.18   0.000    -.1869856   -.1351479
         25  |  -.1876923   .0132606   -14.15   0.000    -.2136846      -.1617
         26  |    .174631   .0202635     8.62   0.000     .1349123    .2143497
         27  |   .1435675   .0181884     7.89   0.000     .1079162    .1792188
         28  |   .1562834   .0175706     8.89   0.000     .1218431    .1907236
         29  |   .1496624   .0173334     8.63   0.000      .115687    .1836378
         30  |   .1790002   .0172166    10.40   0.000     .1452537    .2127467
         31  |   .1757222   .0169056    10.39   0.000     .1425853     .208859
         32  |    .173565   .0165136    10.51   0.000     .1411964    .2059336
         33  |   .1590246   .0162515     9.79   0.000       .12717    .1908793
         34  |   .1684576    .016157    10.43   0.000     .1367882    .2001271
         35  |   .1726242   .0160884    10.73   0.000     .1410891    .2041593
         36  |   .1825862   .0160193    11.40   0.000     .1511866    .2139858
         37  |   .1640386   .0159632    10.28   0.000     .1327491    .1953282
         38  |   .1612878   .0157972    10.21   0.000     .1303235    .1922521
         39  |    .160226   .0158171    10.13   0.000     .1292227    .1912292
         40  |   .1642551   .0158758    10.35   0.000     .1331369    .1953734
         41  |   .1841258   .0161445    11.40   0.000     .1524808    .2157708
         42  |   .1960062   .0162719    12.05   0.000     .1641114     .227901
         43  |   .1911923   .0165737    11.54   0.000     .1587059    .2236786
         44  |   .2079586   .0167486    12.42   0.000     .1751295    .2407877
         45  |   .2128252   .0169471    12.56   0.000     .1796071    .2460434
         46  |   .2184185   .0171256    12.75   0.000     .1848505    .2519865
         47  |   .2352684   .0174356    13.49   0.000     .2010927    .2694442
         48  |   .2180597   .0174304    12.51   0.000     .1838942    .2522252
         49  |  -.0565873    .016753    -3.38   0.001     -.089425   -.0237496
         50  |  -.0972744   .0167476    -5.81   0.000    -.1301015   -.0644473
             |
     age_cat |
          1  |   .0492942   .0059323     8.31   0.000     .0376662    .0609221
          2  |   .0763936   .0063309    12.07   0.000     .0639844    .0888028
          3  |   .0977907   .0066425    14.72   0.000     .0847707    .1108108
          4  |   .1225681   .0069291    17.69   0.000     .1089862      .13615
          5  |   .1427085   .0072099    19.79   0.000     .1285764    .1568406
          6  |   .1560877   .0075444    20.69   0.000     .1412998    .1708756
          7  |   .1687945   .0078198    21.59   0.000     .1534668    .1841222
          8  |   .1860701   .0081649    22.79   0.000      .170066    .2020741
          9  |   .1910222   .0084246    22.67   0.000     .1745092    .2075353
         10  |   .1956123   .0086232    22.68   0.000     .1787099    .2125147
         11  |   .2043313   .0088583    23.07   0.000      .186968    .2216946
         12  |   .2115249   .0091118    23.21   0.000     .1936648     .229385
         13  |   .2243472   .0094657    23.70   0.000     .2057933    .2429011
         14  |   .2332122   .0099214    23.51   0.000     .2137651    .2526592
         15  |   .2458422   .0103064    23.85   0.000     .2256404    .2660439
         16  |   .2497763   .0107514    23.23   0.000     .2287022    .2708503
         17  |   .2553318    .011219    22.76   0.000     .2333413    .2773222
         18  |   .2631093   .0117976    22.30   0.000     .2399847    .2862338
         19  |   .2502892   .0122595    20.42   0.000     .2262592    .2743192
         20  |   .2607249   .0126684    20.58   0.000     .2358934    .2855563
         25  |   .2679004   .0176719    15.16   0.000     .2332614    .3025393
         30  |   .0867743   .0204449     4.24   0.000        .0467    .1268486
         40  |   .1125213   .0199911     5.63   0.000     .0733365    .1517062
         50  |   .1141915   .0228247     5.00   0.000     .0694525    .1589304
             |
       _cons |   .1372357    .011735    11.69   0.000     .1142338    .1602375
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression                               Number of obs     =    238,775
                                                F(75, 16123)      =      62.05
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1185
                                                Root MSE          =     .43434

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .2409846   .0136935    17.60   0.000     .2141439    .2678254
       expat |   .0644631   .0194961     3.31   0.001     .0262485    .1026777
             |
    ind_year |
          2  |  -.0322063   .0097858    -3.29   0.001    -.0513875   -.0130251
          3  |  -.0537492    .011245    -4.78   0.000    -.0757907   -.0317077
          4  |  -.0623767    .011553    -5.40   0.000     -.085022   -.0397315
          5  |  -.0507312   .0120872    -4.20   0.000    -.0744233    -.027039
          6  |  -.0609446   .0122645    -4.97   0.000    -.0849843   -.0369049
          7  |  -.0678629   .0122886    -5.52   0.000    -.0919499   -.0437758
          8  |  -.0787034   .0124139    -6.34   0.000     -.103036   -.0543708
          9  |  -.0879711   .0124673    -7.06   0.000    -.1124084   -.0635338
         10  |  -.0885678   .0125602    -7.05   0.000    -.1131873   -.0639483
         11  |   -.103055   .0124369    -8.29   0.000    -.1274326   -.0786773
         12  |  -.1085658   .0124186    -8.74   0.000    -.1329078   -.0842239
         13  |  -.1074144   .0124341    -8.64   0.000    -.1317867   -.0830422
         14  |   -.100878   .0125712    -8.02   0.000    -.1255189   -.0762371
         15  |   -.094858   .0126367    -7.51   0.000    -.1196272   -.0700887
         16  |  -.0862533   .0127319    -6.77   0.000    -.1112092   -.0612974
         17  |  -.0751265   .0129026    -5.82   0.000     -.100417    -.049836
         18  |  -.0720005   .0130222    -5.53   0.000    -.0975255   -.0464756
         19  |  -.0663763   .0131493    -5.05   0.000    -.0921504   -.0406022
         20  |  -.0558522   .0133041    -4.20   0.000    -.0819297   -.0297746
         21  |  -.0505433   .0134896    -3.75   0.000    -.0769843   -.0241022
         22  |  -.0524736   .0137232    -3.82   0.000    -.0793726   -.0255747
         23  |  -.0591849   .0137741    -4.30   0.000    -.0861837    -.032186
         24  |  -.1610668   .0132231   -12.18   0.000    -.1869856   -.1351479
         25  |  -.1876923   .0132606   -14.15   0.000    -.2136846      -.1617
         26  |    .174631   .0202635     8.62   0.000     .1349123    .2143497
         27  |   .1435675   .0181884     7.89   0.000     .1079162    .1792188
         28  |   .1562834   .0175706     8.89   0.000     .1218431    .1907236
         29  |   .1496624   .0173334     8.63   0.000      .115687    .1836378
         30  |   .1790002   .0172166    10.40   0.000     .1452537    .2127467
         31  |   .1757222   .0169056    10.39   0.000     .1425853     .208859
         32  |    .173565   .0165136    10.51   0.000     .1411964    .2059336
         33  |   .1590246   .0162515     9.79   0.000       .12717    .1908793
         34  |   .1684576    .016157    10.43   0.000     .1367882    .2001271
         35  |   .1726242   .0160884    10.73   0.000     .1410891    .2041593
         36  |   .1825862   .0160193    11.40   0.000     .1511866    .2139858
         37  |   .1640386   .0159632    10.28   0.000     .1327491    .1953282
         38  |   .1612878   .0157972    10.21   0.000     .1303235    .1922521
         39  |    .160226   .0158171    10.13   0.000     .1292227    .1912292
         40  |   .1642551   .0158758    10.35   0.000     .1331369    .1953734
         41  |   .1841258   .0161445    11.40   0.000     .1524808    .2157708
         42  |   .1960062   .0162719    12.05   0.000     .1641114     .227901
         43  |   .1911923   .0165737    11.54   0.000     .1587059    .2236786
         44  |   .2079586   .0167486    12.42   0.000     .1751295    .2407877
         45  |   .2128252   .0169471    12.56   0.000     .1796071    .2460434
         46  |   .2184185   .0171256    12.75   0.000     .1848505    .2519865
         47  |   .2352684   .0174356    13.49   0.000     .2010927    .2694442
         48  |   .2180597   .0174304    12.51   0.000     .1838942    .2522252
         49  |  -.0565873    .016753    -3.38   0.001     -.089425   -.0237496
         50  |  -.0972744   .0167476    -5.81   0.000    -.1301015   -.0644473
             |
     age_cat |
          1  |   .0492942   .0059323     8.31   0.000     .0376662    .0609221
          2  |   .0763936   .0063309    12.07   0.000     .0639844    .0888028
          3  |   .0977907   .0066425    14.72   0.000     .0847707    .1108108
          4  |   .1225681   .0069291    17.69   0.000     .1089862      .13615
          5  |   .1427085   .0072099    19.79   0.000     .1285764    .1568406
          6  |   .1560877   .0075444    20.69   0.000     .1412998    .1708756
          7  |   .1687945   .0078198    21.59   0.000     .1534668    .1841222
          8  |   .1860701   .0081649    22.79   0.000      .170066    .2020741
          9  |   .1910222   .0084246    22.67   0.000     .1745092    .2075353
         10  |   .1956123   .0086232    22.68   0.000     .1787099    .2125147
         11  |   .2043313   .0088583    23.07   0.000      .186968    .2216946
         12  |   .2115249   .0091118    23.21   0.000     .1936648     .229385
         13  |   .2243472   .0094657    23.70   0.000     .2057933    .2429011
         14  |   .2332122   .0099214    23.51   0.000     .2137651    .2526592
         15  |   .2458422   .0103064    23.85   0.000     .2256404    .2660439
         16  |   .2497763   .0107514    23.23   0.000     .2287022    .2708503
         17  |   .2553318    .011219    22.76   0.000     .2333413    .2773222
         18  |   .2631093   .0117976    22.30   0.000     .2399847    .2862338
         19  |   .2502892   .0122595    20.42   0.000     .2262592    .2743192
         20  |   .2607249   .0126684    20.58   0.000     .2358934    .2855563
         25  |   .2679004   .0176719    15.16   0.000     .2332614    .3025393
         30  |   .0867743   .0204449     4.24   0.000        .0467    .1268486
         40  |   .1125213   .0199911     5.63   0.000     .0733365    .1517062
         50  |   .1141915   .0228247     5.00   0.000     .0694525    .1589304
             |
       _cons |   .1372357    .011735    11.69   0.000     .1142338    .1602375
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not id

Fixed-effects (within) regression               Number of obs     =    238,775
Group variable: id                              Number of groups  =     16,124

R-sq:                                           Obs per group:
     within  = 0.0541                                         min =          1
     between = 0.1019                                         avg =       14.8
     overall = 0.0681                                         max =        161

                                                F(75,16123)       =      28.40
corr(u_i, Xb)  = 0.1108                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0181175   .0135994     1.33   0.183    -.0085389    .0447738
       expat |   .0345177    .009323     3.70   0.000     .0162435    .0527918
             |
    ind_year |
          2  |  -.0150853   .0092852    -1.62   0.104    -.0332854    .0031148
          3  |  -.0301941   .0115216    -2.62   0.009    -.0527778   -.0076104
          4  |   -.038183   .0121544    -3.14   0.002     -.062007    -.014359
          5  |  -.0265778   .0135712    -1.96   0.050    -.0531789    .0000233
          6  |  -.0354364   .0146146    -2.42   0.015    -.0640827   -.0067901
          7  |  -.0408373    .015768    -2.59   0.010    -.0717443   -.0099303
          8  |  -.0522585   .0169426    -3.08   0.002    -.0854679   -.0190491
          9  |  -.0552903    .018339    -3.01   0.003    -.0912366   -.0193439
         10  |  -.0544178   .0196476    -2.77   0.006    -.0929291   -.0159064
         11  |  -.0600052   .0210069    -2.86   0.004     -.101181   -.0188294
         12  |  -.0625836   .0222875    -2.81   0.005    -.1062695   -.0188977
         13  |  -.0584822   .0237728    -2.46   0.014    -.1050796   -.0118848
         14  |  -.0490571   .0252474    -1.94   0.052    -.0985449    .0004306
         15  |  -.0378251   .0267221    -1.42   0.157    -.0902034    .0145533
         16  |  -.0264289   .0281669    -0.94   0.348    -.0816393    .0287814
         17  |  -.0143131   .0296901    -0.48   0.630     -.072509    .0438827
         18  |    -.01402   .0313858    -0.45   0.655    -.0755396    .0474997
         19  |  -.0077355   .0329113    -0.24   0.814    -.0722453    .0567743
         20  |  -.0027388   .0343596    -0.08   0.936    -.0700874    .0646099
         21  |  -.0021181   .0357437    -0.06   0.953    -.0721798    .0679436
         22  |    -.00145   .0370949    -0.04   0.969    -.0741602    .0712602
         23  |  -.0081173   .0384366    -0.21   0.833    -.0834573    .0672226
         24  |  -.1178162   .0397722    -2.96   0.003    -.1957742   -.0398583
         25  |  -.1514781   .0413906    -3.66   0.000    -.2326082    -.070348
         26  |  -.0127344   .0234859    -0.54   0.588    -.0587693    .0333005
         27  |  -.0106008   .0213829    -0.50   0.620    -.0525136     .031312
         28  |   .0109026   .0209648     0.52   0.603    -.0301909     .051996
         29  |   .0110548   .0207207     0.53   0.594    -.0295602    .0516697
         30  |   .0302894   .0207779     1.46   0.145    -.0104376    .0710164
         31  |   .0218536   .0208183     1.05   0.294    -.0189527    .0626598
         32  |    .027065   .0213304     1.27   0.205    -.0147451     .068875
         33  |   .0242775    .022006     1.10   0.270    -.0188567    .0674116
         34  |    .027651   .0227977     1.21   0.225    -.0170351     .072337
         35  |   .0322028   .0237174     1.36   0.175    -.0142859    .0786915
         36  |    .034472   .0249471     1.38   0.167     -.014427     .083371
         37  |   .0255927   .0261223     0.98   0.327      -.02561    .0767954
         38  |   .0267655   .0270658     0.99   0.323    -.0262865    .0798176
         39  |   .0312723   .0284201     1.10   0.271    -.0244344    .0869789
         40  |   .0401993   .0294875     1.36   0.173    -.0175994    .0979981
         41  |   .0598285   .0308133     1.94   0.052    -.0005691     .120226
         42  |   .0703719   .0320862     2.19   0.028     .0074795    .1332644
         43  |   .0682121   .0336637     2.03   0.043     .0022275    .1341966
         44  |   .0863181   .0352405     2.45   0.014     .0172428    .1553934
         45  |   .0950093   .0365678     2.60   0.009     .0233322    .1666863
         46  |   .0955826   .0380524     2.51   0.012     .0209958    .1701694
         47  |    .108914   .0393393     2.77   0.006     .0318047    .1860234
         48  |   .0911703   .0402497     2.27   0.024     .0122763    .1700642
         49  |  -.1956338   .0417856    -4.68   0.000    -.2775383   -.1137294
         50  |  -.2494396   .0433515    -5.75   0.000    -.3344133   -.1644658
             |
     age_cat |
          1  |   .0416098   .0062395     6.67   0.000     .0293797    .0538399
          2  |   .0612948   .0072779     8.42   0.000     .0470292    .0755604
          3  |   .0785154   .0084266     9.32   0.000     .0619983    .0950326
          4  |   .1003047   .0097366    10.30   0.000     .0812199    .1193895
          5  |   .1197437   .0111062    10.78   0.000     .0979742    .1415131
          6  |   .1315861   .0126347    10.41   0.000     .1068207    .1563516
          7  |   .1413608   .0141493     9.99   0.000     .1136267    .1690949
          8  |   .1570137    .015749     9.97   0.000     .1261438    .1878835
          9  |   .1583085   .0172971     9.15   0.000     .1244042    .1922128
         10  |   .1610744     .01888     8.53   0.000     .1240674    .1980813
         11  |   .1695609   .0204573     8.29   0.000     .1294623    .2096596
         12  |   .1723645   .0220506     7.82   0.000     .1291428    .2155862
         13  |   .1845689   .0237439     7.77   0.000     .1380281    .2311096
         14  |   .1954109   .0254947     7.66   0.000     .1454385    .2453833
         15  |   .2042385   .0271265     7.53   0.000     .1510676    .2574094
         16  |   .2077432   .0287883     7.22   0.000     .1513149    .2641715
         17  |   .2121858    .030372     6.99   0.000     .1526533    .2717183
         18  |   .2203631   .0322028     6.84   0.000      .157242    .2834842
         19  |   .2087632   .0341364     6.12   0.000      .141852    .2756743
         20  |   .2206101   .0370283     5.96   0.000     .1480305    .2931896
         25  |   .2386609   .0429604     5.56   0.000     .1544538    .3228679
         30  |   .2358409   .0634901     3.71   0.000     .1113933    .3602885
         40  |   .2229112    .071628     3.11   0.002     .0825123    .3633101
         50  |   .1480579   .0769542     1.92   0.054    -.0027809    .2988967
             |
       _cons |   .1866637   .0136923    13.63   0.000     .1598253    .2135022
-------------+----------------------------------------------------------------
     sigma_u |  .35305539
     sigma_e |  .28428608
         rho |  .60665849   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0540789377467291

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    238,775
Group variable: id                              Number of groups  =     16,124

R-sq:                                           Obs per group:
     within  = 0.0541                                         min =          1
     between = 0.1019                                         avg =       14.8
     overall = 0.0681                                         max =        161

                                                F(75,16123)       =      28.40
corr(u_i, Xb)  = 0.1108                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0181175   .0135994     1.33   0.183    -.0085389    .0447738
       expat |   .0345177    .009323     3.70   0.000     .0162435    .0527918
             |
    ind_year |
          2  |  -.0150853   .0092852    -1.62   0.104    -.0332854    .0031148
          3  |  -.0301941   .0115216    -2.62   0.009    -.0527778   -.0076104
          4  |   -.038183   .0121544    -3.14   0.002     -.062007    -.014359
          5  |  -.0265778   .0135712    -1.96   0.050    -.0531789    .0000233
          6  |  -.0354364   .0146146    -2.42   0.015    -.0640827   -.0067901
          7  |  -.0408373    .015768    -2.59   0.010    -.0717443   -.0099303
          8  |  -.0522585   .0169426    -3.08   0.002    -.0854679   -.0190491
          9  |  -.0552903    .018339    -3.01   0.003    -.0912366   -.0193439
         10  |  -.0544178   .0196476    -2.77   0.006    -.0929291   -.0159064
         11  |  -.0600052   .0210069    -2.86   0.004     -.101181   -.0188294
         12  |  -.0625836   .0222875    -2.81   0.005    -.1062695   -.0188977
         13  |  -.0584822   .0237728    -2.46   0.014    -.1050796   -.0118848
         14  |  -.0490571   .0252474    -1.94   0.052    -.0985449    .0004306
         15  |  -.0378251   .0267221    -1.42   0.157    -.0902034    .0145533
         16  |  -.0264289   .0281669    -0.94   0.348    -.0816393    .0287814
         17  |  -.0143131   .0296901    -0.48   0.630     -.072509    .0438827
         18  |    -.01402   .0313858    -0.45   0.655    -.0755396    .0474997
         19  |  -.0077355   .0329113    -0.24   0.814    -.0722453    .0567743
         20  |  -.0027388   .0343596    -0.08   0.936    -.0700874    .0646099
         21  |  -.0021181   .0357437    -0.06   0.953    -.0721798    .0679436
         22  |    -.00145   .0370949    -0.04   0.969    -.0741602    .0712602
         23  |  -.0081173   .0384366    -0.21   0.833    -.0834573    .0672226
         24  |  -.1178162   .0397722    -2.96   0.003    -.1957742   -.0398583
         25  |  -.1514781   .0413906    -3.66   0.000    -.2326082    -.070348
         26  |  -.0127344   .0234859    -0.54   0.588    -.0587693    .0333005
         27  |  -.0106008   .0213829    -0.50   0.620    -.0525136     .031312
         28  |   .0109026   .0209648     0.52   0.603    -.0301909     .051996
         29  |   .0110548   .0207207     0.53   0.594    -.0295602    .0516697
         30  |   .0302894   .0207779     1.46   0.145    -.0104376    .0710164
         31  |   .0218536   .0208183     1.05   0.294    -.0189527    .0626598
         32  |    .027065   .0213304     1.27   0.205    -.0147451     .068875
         33  |   .0242775    .022006     1.10   0.270    -.0188567    .0674116
         34  |    .027651   .0227977     1.21   0.225    -.0170351     .072337
         35  |   .0322028   .0237174     1.36   0.175    -.0142859    .0786915
         36  |    .034472   .0249471     1.38   0.167     -.014427     .083371
         37  |   .0255927   .0261223     0.98   0.327      -.02561    .0767954
         38  |   .0267655   .0270658     0.99   0.323    -.0262865    .0798176
         39  |   .0312723   .0284201     1.10   0.271    -.0244344    .0869789
         40  |   .0401993   .0294875     1.36   0.173    -.0175994    .0979981
         41  |   .0598285   .0308133     1.94   0.052    -.0005691     .120226
         42  |   .0703719   .0320862     2.19   0.028     .0074795    .1332644
         43  |   .0682121   .0336637     2.03   0.043     .0022275    .1341966
         44  |   .0863181   .0352405     2.45   0.014     .0172428    .1553934
         45  |   .0950093   .0365678     2.60   0.009     .0233322    .1666863
         46  |   .0955826   .0380524     2.51   0.012     .0209958    .1701694
         47  |    .108914   .0393393     2.77   0.006     .0318047    .1860234
         48  |   .0911703   .0402497     2.27   0.024     .0122763    .1700642
         49  |  -.1956338   .0417856    -4.68   0.000    -.2775383   -.1137294
         50  |  -.2494396   .0433515    -5.75   0.000    -.3344133   -.1644658
             |
     age_cat |
          1  |   .0416098   .0062395     6.67   0.000     .0293797    .0538399
          2  |   .0612948   .0072779     8.42   0.000     .0470292    .0755604
          3  |   .0785154   .0084266     9.32   0.000     .0619983    .0950326
          4  |   .1003047   .0097366    10.30   0.000     .0812199    .1193895
          5  |   .1197437   .0111062    10.78   0.000     .0979742    .1415131
          6  |   .1315861   .0126347    10.41   0.000     .1068207    .1563516
          7  |   .1413608   .0141493     9.99   0.000     .1136267    .1690949
          8  |   .1570137    .015749     9.97   0.000     .1261438    .1878835
          9  |   .1583085   .0172971     9.15   0.000     .1244042    .1922128
         10  |   .1610744     .01888     8.53   0.000     .1240674    .1980813
         11  |   .1695609   .0204573     8.29   0.000     .1294623    .2096596
         12  |   .1723645   .0220506     7.82   0.000     .1291428    .2155862
         13  |   .1845689   .0237439     7.77   0.000     .1380281    .2311096
         14  |   .1954109   .0254947     7.66   0.000     .1454385    .2453833
         15  |   .2042385   .0271265     7.53   0.000     .1510676    .2574094
         16  |   .2077432   .0287883     7.22   0.000     .1513149    .2641715
         17  |   .2121858    .030372     6.99   0.000     .1526533    .2717183
         18  |   .2203631   .0322028     6.84   0.000      .157242    .2834842
         19  |   .2087632   .0341364     6.12   0.000      .141852    .2756743
         20  |   .2206101   .0370283     5.96   0.000     .1480305    .2931896
         25  |   .2386609   .0429604     5.56   0.000     .1544538    .3228679
         30  |   .2358409   .0634901     3.71   0.000     .1113933    .3602885
         40  |   .2229112    .071628     3.11   0.002     .0825123    .3633101
         50  |   .1480579   .0769542     1.92   0.054    -.0027809    .2988967
             |
       _cons |   .1866637   .0136923    13.63   0.000     .1598253    .2135022
-------------+----------------------------------------------------------------
     sigma_u |  .35305539
     sigma_e |  .28428608
         rho |  .60665849   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
warning: existing panel variable is not firm_person

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.0496                         Obs per group: min =         1
       between = 0.1029                                        avg =       8.7
       overall = 0.0703                                        max =        25

                                                F(78,16123)        =     28.99
corr(u_i, Xb)  = 0.1199                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0217031    .012582     1.72   0.085    -.0029589    .0463652
      during |  -.0046656   .0034133    -1.37   0.172    -.0113561     .002025
       after |  -.0210928   .0058902    -3.58   0.000    -.0326382   -.0095474
during_expat |   .0332301   .0132035     2.52   0.012     .0073497    .0591105
 after_expat |   .0377963   .0177958     2.12   0.034     .0029146    .0726781
             |
    ind_year |
          2  |  -.0141861   .0091444    -1.55   0.121      -.03211    .0037379
          3  |  -.0283903   .0112564    -2.52   0.012    -.0504541   -.0063264
          4  |   -.037009   .0121453    -3.05   0.002    -.0608152   -.0132028
          5  |   -.026658   .0136816    -1.95   0.051    -.0534754    .0001595
          6  |  -.0343872    .014904    -2.31   0.021    -.0636008   -.0051736
          7  |  -.0386228   .0161281    -2.39   0.017    -.0702355     -.00701
          8  |  -.0487836   .0174224    -2.80   0.005    -.0829335   -.0146337
          9  |   -.052169   .0189457    -2.75   0.006    -.0893047   -.0150332
         10  |   -.052063   .0203128    -2.56   0.010    -.0918783   -.0122476
         11  |  -.0585172   .0218176    -2.68   0.007    -.1012822   -.0157523
         12  |  -.0598302   .0232459    -2.57   0.010    -.1053947   -.0142656
         13  |  -.0547127   .0248632    -2.20   0.028    -.1034473   -.0059781
         14  |  -.0463186   .0264872    -1.75   0.080    -.0982364    .0055992
         15  |  -.0367077   .0280357    -1.31   0.190    -.0916607    .0182453
         16  |  -.0223144   .0295772    -0.75   0.451     -.080289    .0356602
         17  |  -.0087926   .0312172    -0.28   0.778    -.0699818    .0523965
         18  |  -.0049674   .0329252    -0.15   0.880    -.0695044    .0595696
         19  |   .0002398   .0345204     0.01   0.994    -.0674241    .0679037
         20  |    .005888   .0360256     0.16   0.870    -.0647262    .0765023
         21  |   .0014964   .0374802     0.04   0.968    -.0719689    .0749618
         22  |   .0074539   .0388275     0.19   0.848    -.0686524    .0835602
         23  |   .0006086   .0402102     0.02   0.988    -.0782079    .0794251
         24  |  -.1046672   .0416552    -2.51   0.012    -.1863161   -.0230183
         25  |  -.1380578    .043255    -3.19   0.001    -.2228424   -.0532731
         26  |  -.0150104   .0229427    -0.65   0.513    -.0599806    .0299598
         27  |  -.0114183   .0209013    -0.55   0.585    -.0523872    .0295506
         28  |   .0115835   .0203633     0.57   0.569    -.0283308    .0514978
         29  |   .0117946   .0201668     0.58   0.559    -.0277347    .0513238
         30  |   .0313574   .0201706     1.55   0.120    -.0081792    .0708939
         31  |   .0232134   .0203705     1.14   0.254    -.0167151    .0631419
         32  |   .0336599   .0209672     1.61   0.108    -.0074381    .0747579
         33  |    .029884    .021637     1.38   0.167    -.0125269    .0722949
         34  |    .029708   .0226937     1.31   0.191    -.0147741    .0741902
         35  |   .0400355   .0236517     1.69   0.091    -.0063245    .0863955
         36  |   .0401073   .0250113     1.60   0.109    -.0089176    .0891321
         37  |   .0331685   .0262427     1.26   0.206    -.0182702    .0846072
         38  |   .0326662   .0274274     1.19   0.234    -.0210945     .086427
         39  |   .0366389    .028949     1.27   0.206    -.0201044    .0933822
         40  |   .0478304   .0301944     1.58   0.113     -.011354    .1070147
         41  |   .0634555   .0315926     2.01   0.045     .0015304    .1253805
         42  |   .0742824   .0330305     2.25   0.025      .009539    .1390258
         43  |   .0740283   .0346627     2.14   0.033     .0060855    .1419711
         44  |   .0924041   .0363336     2.54   0.011     .0211861    .1636221
         45  |   .1020937   .0378652     2.70   0.007     .0278737    .1763137
         46  |   .1020091   .0394674     2.58   0.010     .0246487    .1793696
         47  |   .1133945   .0406827     2.79   0.005     .0336519    .1931371
         48  |    .096814   .0417656     2.32   0.020     .0149488    .1786791
         49  |  -.1800507   .0433579    -4.15   0.000    -.2650371   -.0950644
         50  |  -.2289411   .0449655    -5.09   0.000    -.3170785   -.1408038
             |
     age_cat |
          1  |   .0443609   .0059849     7.41   0.000     .0326299    .0560919
          2  |   .0638691    .007073     9.03   0.000     .0500052    .0777331
          3  |   .0814501    .008302     9.81   0.000     .0651773     .097723
          4  |   .1044686     .00971    10.76   0.000     .0854358    .1235013
          5  |   .1226248   .0111808    10.97   0.000     .1007092    .1445405
          6  |   .1335518   .0127917    10.44   0.000     .1084787     .158625
          7  |   .1417674     .01442     9.83   0.000     .1135026    .1700323
          8  |   .1575028   .0160931     9.79   0.000     .1259586    .1890471
          9  |   .1587687   .0177485     8.95   0.000     .1239798    .1935577
         10  |   .1637449    .019435     8.43   0.000     .1256501    .2018397
         11  |   .1721947   .0210959     8.16   0.000     .1308443    .2135451
         12  |    .174612   .0227687     7.67   0.000     .1299827    .2192413
         13  |    .185035   .0245224     7.55   0.000     .1369684    .2331016
         14  |   .1943291   .0262807     7.39   0.000      .142816    .2458422
         15  |   .2021658   .0279524     7.23   0.000      .147376    .2569556
         16  |   .2069905   .0296658     6.98   0.000     .1488423    .2651388
         17  |   .2118513   .0313343     6.76   0.000     .1504327    .2732699
         18  |    .218871   .0332051     6.59   0.000     .1537854    .2839565
         19  |   .2101688   .0350975     5.99   0.000     .1413739    .2789638
         20  |   .2203668   .0381564     5.78   0.000     .1455761    .2951575
         25  |   .2372642   .0440319     5.39   0.000     .1509567    .3235716
         30  |   .2400701   .0621644     3.86   0.000     .1182211    .3619192
         40  |   .2241935   .0693548     3.23   0.001     .0882505    .3601366
         50  |   .1636838   .0730166     2.24   0.025     .0205633    .3068044
             |
       _cons |   .1857764     .01394    13.33   0.000     .1584525    .2131003
-------------+----------------------------------------------------------------
     sigma_u |  .37732687
     sigma_e |  .28506846
         rho |  .63662952   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .049634523169074

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.0496                                         min =          1
     between = 0.1029                                         avg =        8.7
     overall = 0.0703                                         max =         25

                                                F(78,16123)       =      28.99
corr(u_i, Xb)  = 0.1199                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0217031    .012582     1.72   0.085    -.0029589    .0463652
      during |  -.0046656   .0034133    -1.37   0.172    -.0113561     .002025
       after |  -.0210928   .0058902    -3.58   0.000    -.0326382   -.0095474
during_expat |   .0332301   .0132035     2.52   0.012     .0073497    .0591105
 after_expat |   .0377963   .0177958     2.12   0.034     .0029146    .0726781
             |
    ind_year |
          2  |  -.0141861   .0091444    -1.55   0.121      -.03211    .0037379
          3  |  -.0283903   .0112564    -2.52   0.012    -.0504541   -.0063264
          4  |   -.037009   .0121453    -3.05   0.002    -.0608152   -.0132028
          5  |   -.026658   .0136816    -1.95   0.051    -.0534754    .0001595
          6  |  -.0343872    .014904    -2.31   0.021    -.0636008   -.0051736
          7  |  -.0386228   .0161281    -2.39   0.017    -.0702355     -.00701
          8  |  -.0487836   .0174224    -2.80   0.005    -.0829335   -.0146337
          9  |   -.052169   .0189457    -2.75   0.006    -.0893047   -.0150332
         10  |   -.052063   .0203128    -2.56   0.010    -.0918783   -.0122476
         11  |  -.0585172   .0218176    -2.68   0.007    -.1012822   -.0157523
         12  |  -.0598302   .0232459    -2.57   0.010    -.1053947   -.0142656
         13  |  -.0547127   .0248632    -2.20   0.028    -.1034473   -.0059781
         14  |  -.0463186   .0264872    -1.75   0.080    -.0982364    .0055992
         15  |  -.0367077   .0280357    -1.31   0.190    -.0916607    .0182453
         16  |  -.0223144   .0295772    -0.75   0.451     -.080289    .0356602
         17  |  -.0087926   .0312172    -0.28   0.778    -.0699818    .0523965
         18  |  -.0049674   .0329252    -0.15   0.880    -.0695044    .0595696
         19  |   .0002398   .0345204     0.01   0.994    -.0674241    .0679037
         20  |    .005888   .0360256     0.16   0.870    -.0647262    .0765023
         21  |   .0014964   .0374802     0.04   0.968    -.0719689    .0749618
         22  |   .0074539   .0388275     0.19   0.848    -.0686524    .0835602
         23  |   .0006086   .0402102     0.02   0.988    -.0782079    .0794251
         24  |  -.1046672   .0416552    -2.51   0.012    -.1863161   -.0230183
         25  |  -.1380578    .043255    -3.19   0.001    -.2228424   -.0532731
         26  |  -.0150104   .0229427    -0.65   0.513    -.0599806    .0299598
         27  |  -.0114183   .0209013    -0.55   0.585    -.0523872    .0295506
         28  |   .0115835   .0203633     0.57   0.569    -.0283308    .0514978
         29  |   .0117946   .0201668     0.58   0.559    -.0277347    .0513238
         30  |   .0313574   .0201706     1.55   0.120    -.0081792    .0708939
         31  |   .0232134   .0203705     1.14   0.254    -.0167151    .0631419
         32  |   .0336599   .0209672     1.61   0.108    -.0074381    .0747579
         33  |    .029884    .021637     1.38   0.167    -.0125269    .0722949
         34  |    .029708   .0226937     1.31   0.191    -.0147741    .0741902
         35  |   .0400355   .0236517     1.69   0.091    -.0063245    .0863955
         36  |   .0401073   .0250113     1.60   0.109    -.0089176    .0891321
         37  |   .0331685   .0262427     1.26   0.206    -.0182702    .0846072
         38  |   .0326662   .0274274     1.19   0.234    -.0210945     .086427
         39  |   .0366389    .028949     1.27   0.206    -.0201044    .0933822
         40  |   .0478304   .0301944     1.58   0.113     -.011354    .1070147
         41  |   .0634555   .0315926     2.01   0.045     .0015304    .1253805
         42  |   .0742824   .0330305     2.25   0.025      .009539    .1390258
         43  |   .0740283   .0346627     2.14   0.033     .0060855    .1419711
         44  |   .0924041   .0363336     2.54   0.011     .0211861    .1636221
         45  |   .1020937   .0378652     2.70   0.007     .0278737    .1763137
         46  |   .1020091   .0394674     2.58   0.010     .0246487    .1793696
         47  |   .1133945   .0406827     2.79   0.005     .0336519    .1931371
         48  |    .096814   .0417656     2.32   0.020     .0149488    .1786791
         49  |  -.1800507   .0433579    -4.15   0.000    -.2650371   -.0950644
         50  |  -.2289411   .0449655    -5.09   0.000    -.3170785   -.1408038
             |
     age_cat |
          1  |   .0443609   .0059849     7.41   0.000     .0326299    .0560919
          2  |   .0638691    .007073     9.03   0.000     .0500052    .0777331
          3  |   .0814501    .008302     9.81   0.000     .0651773     .097723
          4  |   .1044686     .00971    10.76   0.000     .0854358    .1235013
          5  |   .1226248   .0111808    10.97   0.000     .1007092    .1445405
          6  |   .1335518   .0127917    10.44   0.000     .1084787     .158625
          7  |   .1417674     .01442     9.83   0.000     .1135026    .1700323
          8  |   .1575028   .0160931     9.79   0.000     .1259586    .1890471
          9  |   .1587687   .0177485     8.95   0.000     .1239798    .1935577
         10  |   .1637449    .019435     8.43   0.000     .1256501    .2018397
         11  |   .1721947   .0210959     8.16   0.000     .1308443    .2135451
         12  |    .174612   .0227687     7.67   0.000     .1299827    .2192413
         13  |    .185035   .0245224     7.55   0.000     .1369684    .2331016
         14  |   .1943291   .0262807     7.39   0.000      .142816    .2458422
         15  |   .2021658   .0279524     7.23   0.000      .147376    .2569556
         16  |   .2069905   .0296658     6.98   0.000     .1488423    .2651388
         17  |   .2118513   .0313343     6.76   0.000     .1504327    .2732699
         18  |    .218871   .0332051     6.59   0.000     .1537854    .2839565
         19  |   .2101688   .0350975     5.99   0.000     .1413739    .2789638
         20  |   .2203668   .0381564     5.78   0.000     .1455761    .2951575
         25  |   .2372642   .0440319     5.39   0.000     .1509567    .3235716
         30  |   .2400701   .0621644     3.86   0.000     .1182211    .3619192
         40  |   .2241935   .0693548     3.23   0.001     .0882505    .3601366
         50  |   .1636838   .0730166     2.24   0.025     .0205633    .3068044
             |
       _cons |   .1857764     .01394    13.33   0.000     .1584525    .2131003
-------------+----------------------------------------------------------------
     sigma_u |  .37732687
     sigma_e |  .28506846
         rho |  .63662952   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str12
(1 real change made)

 ( 1)  during = 0

       F(  1, 16123) =    1.87
            Prob > F =    0.1717

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during + after = 0

       F(  1, 16123) =   14.42
            Prob > F =    0.0001

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_expat = 0

       F(  1, 16123) =    6.33
            Prob > F =    0.0119

 ( 1)  during_expat = 0

       F(  1, 16123) =    6.33
            Prob > F =    0.0119
variable label was str12 now str14
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  - during_expat + after_expat = 0

       F(  1, 16123) =    0.13
            Prob > F =    0.7204

 ( 1)  after_expat = 0

       F(  1, 16123) =    4.51
            Prob > F =    0.0337
(1 real change made)
(file output/figure/acquisitions_exporter_slope.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.0496                         Obs per group: min =         1
       between = 0.1001                                        avg =       8.7
       overall = 0.0689                                        max =        25

                                                F(82,16123)        =     27.58
corr(u_i, Xb)  = 0.1144                         Prob > F           =    0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0215461   .0125851     1.71   0.087    -.0031222    .0462143
   during_DD |  -.0030218   .0035009    -0.86   0.388    -.0098839    .0038402
   during_DE |   .0272845   .0179558     1.52   0.129    -.0079108    .0624798
   during_ED |  -.0013287   .0161319    -0.08   0.934     -.032949    .0302915
   during_EE |   .0191124   .0186718     1.02   0.306    -.0174863    .0557112
    after_DD |  -.0173321   .0061198    -2.83   0.005    -.0293276   -.0053367
    after_DE |   .0063294   .0206726     0.31   0.759    -.0341912      .04685
    after_ED |  -.0323178   .0187295    -1.73   0.084    -.0690296     .004394
    after_EE |   .0143399   .0239396     0.60   0.549    -.0325844    .0612642
             |
    ind_year |
          2  |   -.014415   .0091419    -1.58   0.115    -.0323342    .0035041
          3  |  -.0288545   .0112519    -2.56   0.010    -.0509096   -.0067994
          4  |  -.0377004   .0121373    -3.11   0.002    -.0614908   -.0139099
          5  |  -.0275789   .0136692    -2.02   0.044     -.054372   -.0007858
          6  |  -.0355531   .0148843    -2.39   0.017    -.0647279   -.0063783
          7  |  -.0400067   .0161017    -2.48   0.013    -.0715678   -.0084457
          8  |  -.0503964   .0173928    -2.90   0.004    -.0844881   -.0163047
          9  |  -.0540417   .0189068    -2.86   0.004    -.0911011   -.0169823
         10  |  -.0542131   .0202585    -2.68   0.007    -.0939221   -.0145042
         11  |  -.0609571    .021748    -2.80   0.005    -.1035855   -.0183286
         12  |  -.0625617   .0231645    -2.70   0.007    -.1079666   -.0171567
         13  |   -.057727   .0247595    -2.33   0.020    -.1062583   -.0091957
         14  |  -.0496297   .0263718    -1.88   0.060    -.1013213    .0020619
         15  |  -.0403972   .0279072    -1.45   0.148    -.0950983     .014304
         16  |  -.0263637    .029435    -0.90   0.370    -.0840596    .0313321
         17  |  -.0133042   .0310493    -0.43   0.668    -.0741642    .0475557
         18  |   -.009825   .0327427    -0.30   0.764    -.0740043    .0543543
         19  |  -.0049967   .0343127    -0.15   0.884    -.0722535    .0622601
         20  |    .000253      .0358     0.01   0.994     -.069919     .070425
         21  |  -.0044723   .0372343    -0.12   0.904    -.0774557     .068511
         22  |   .0011187   .0385661     0.03   0.977    -.0744751    .0767124
         23  |  -.0060587   .0399326    -0.15   0.879    -.0843311    .0722136
         24  |  -.1116923   .0413657    -2.70   0.007    -.1927737   -.0306109
         25  |  -.1454707   .0429507    -3.39   0.001    -.2296588   -.0612825
         26  |  -.0149427   .0229476    -0.65   0.515    -.0599225    .0300371
         27  |  -.0116542   .0209056    -0.56   0.577    -.0526315     .029323
         28  |   .0110774   .0203677     0.54   0.587    -.0288455    .0510003
         29  |   .0111103   .0201683     0.55   0.582    -.0284217    .0506424
         30  |   .0304402   .0201711     1.51   0.131    -.0090975    .0699779
         31  |   .0220354   .0203664     1.08   0.279     -.017885    .0619559
         32  |   .0322464     .02096     1.54   0.124    -.0088375    .0733303
         33  |   .0282324   .0216255     1.31   0.192    -.0141558    .0706207
         34  |   .0277878   .0226733     1.23   0.220    -.0166543    .0722298
         35  |   .0378927   .0236186     1.60   0.109    -.0084025    .0841878
         36  |   .0376597   .0249632     1.51   0.131    -.0112708    .0865903
         37  |   .0304444   .0261863     1.16   0.245    -.0208837    .0817726
         38  |   .0297126   .0273549     1.09   0.277     -.023906    .0833312
         39  |   .0332946   .0288554     1.15   0.249    -.0232652    .0898543
         40  |   .0441114   .0300839     1.47   0.143    -.0148564    .1030792
         41  |   .0593784   .0314598     1.89   0.059    -.0022864    .1210432
         42  |   .0698283    .032878     2.12   0.034     .0053836    .1342729
         43  |   .0692459   .0345013     2.01   0.045     .0016195    .1368723
         44  |   .0873254   .0361489     2.42   0.016     .0164695    .1581813
         45  |   .0966833   .0376632     2.57   0.010     .0228591    .1705074
         46  |   .0962958   .0392443     2.45   0.014     .0193726     .173219
         47  |   .1073864   .0404526     2.65   0.008     .0280947     .186678
         48  |   .0904654   .0415181     2.18   0.029     .0090853    .1718456
         49  |  -.1867522   .0430936    -4.33   0.000    -.2712203    -.102284
         50  |  -.2359773   .0446892    -5.28   0.000    -.3235732   -.1483814
             |
     age_cat |
          1  |   .0445665   .0059822     7.45   0.000     .0328408    .0562923
          2  |   .0642977   .0070644     9.10   0.000     .0504507    .0781447
          3  |   .0820964    .008289     9.90   0.000     .0658489    .0983438
          4  |   .1053275   .0096905    10.87   0.000     .0863331     .124322
          5  |   .1237258   .0111543    11.09   0.000     .1018621    .1455894
          6  |   .1348805   .0127608    10.57   0.000      .109868     .159893
          7  |   .1433293   .0143823     9.97   0.000     .1151383    .1715203
          8  |   .1593131   .0160481     9.93   0.000     .1278571    .1907691
          9  |   .1608176   .0176916     9.09   0.000     .1261402    .1954951
         10  |   .1660129   .0193716     8.57   0.000     .1280425    .2039834
         11  |   .1747287   .0210269     8.31   0.000     .1335136    .2159437
         12  |   .1773979   .0226931     7.82   0.000     .1329169    .2218788
         13  |   .1880598     .02444     7.69   0.000     .1401548    .2359649
         14  |   .1976365    .026199     7.54   0.000     .1462836    .2489893
         15  |   .2057444   .0278652     7.38   0.000     .1511255    .2603633
         16  |   .2108139   .0295705     7.13   0.000     .1528525    .2687753
         17  |   .2159566   .0312331     6.91   0.000     .1547363    .2771769
         18  |   .2232661   .0330957     6.75   0.000     .1583948    .2881374
         19  |   .2148493    .034983     6.14   0.000     .1462789    .2834198
         20  |   .2256286   .0380224     5.93   0.000     .1511005    .3001567
         25  |   .2433809   .0438812     5.55   0.000     .1573689     .329393
         30  |   .2461897   .0620856     3.97   0.000     .1244951    .3678843
         40  |    .229532   .0692897     3.31   0.001     .0937164    .3653476
         50  |   .1687207   .0730064     2.31   0.021       .02562    .3118214
             |
       _cons |   .1864039    .013934    13.38   0.000     .1590918    .2137161
-------------+----------------------------------------------------------------
     sigma_u |  .37746902
     sigma_e |  .28507949
         rho |  .63678587   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0495726591721077

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.0496                                         min =          1
     between = 0.1001                                         avg =        8.7
     overall = 0.0689                                         max =         25

                                                F(82,16123)       =      27.58
corr(u_i, Xb)  = 0.1144                         Prob > F          =     0.0000

                                (Std. Err. adjusted for 16,124 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     foreign |   .0215461   .0125851     1.71   0.087    -.0031222    .0462143
   during_DD |  -.0030218   .0035009    -0.86   0.388    -.0098839    .0038402
   during_DE |   .0272845   .0179558     1.52   0.129    -.0079108    .0624798
   during_ED |  -.0013287   .0161319    -0.08   0.934     -.032949    .0302915
   during_EE |   .0191124   .0186718     1.02   0.306    -.0174863    .0557112
    after_DD |  -.0173321   .0061198    -2.83   0.005    -.0293276   -.0053367
    after_DE |   .0063294   .0206726     0.31   0.759    -.0341912      .04685
    after_ED |  -.0323178   .0187295    -1.73   0.084    -.0690296     .004394
    after_EE |   .0143399   .0239396     0.60   0.549    -.0325844    .0612642
             |
    ind_year |
          2  |   -.014415   .0091419    -1.58   0.115    -.0323342    .0035041
          3  |  -.0288545   .0112519    -2.56   0.010    -.0509096   -.0067994
          4  |  -.0377004   .0121373    -3.11   0.002    -.0614908   -.0139099
          5  |  -.0275789   .0136692    -2.02   0.044     -.054372   -.0007858
          6  |  -.0355531   .0148843    -2.39   0.017    -.0647279   -.0063783
          7  |  -.0400067   .0161017    -2.48   0.013    -.0715678   -.0084457
          8  |  -.0503964   .0173928    -2.90   0.004    -.0844881   -.0163047
          9  |  -.0540417   .0189068    -2.86   0.004    -.0911011   -.0169823
         10  |  -.0542131   .0202585    -2.68   0.007    -.0939221   -.0145042
         11  |  -.0609571    .021748    -2.80   0.005    -.1035855   -.0183286
         12  |  -.0625617   .0231645    -2.70   0.007    -.1079666   -.0171567
         13  |   -.057727   .0247595    -2.33   0.020    -.1062583   -.0091957
         14  |  -.0496297   .0263718    -1.88   0.060    -.1013213    .0020619
         15  |  -.0403972   .0279072    -1.45   0.148    -.0950983     .014304
         16  |  -.0263637    .029435    -0.90   0.370    -.0840596    .0313321
         17  |  -.0133042   .0310493    -0.43   0.668    -.0741642    .0475557
         18  |   -.009825   .0327427    -0.30   0.764    -.0740043    .0543543
         19  |  -.0049967   .0343127    -0.15   0.884    -.0722535    .0622601
         20  |    .000253      .0358     0.01   0.994     -.069919     .070425
         21  |  -.0044723   .0372343    -0.12   0.904    -.0774557     .068511
         22  |   .0011187   .0385661     0.03   0.977    -.0744751    .0767124
         23  |  -.0060587   .0399326    -0.15   0.879    -.0843311    .0722136
         24  |  -.1116923   .0413657    -2.70   0.007    -.1927737   -.0306109
         25  |  -.1454707   .0429507    -3.39   0.001    -.2296588   -.0612825
         26  |  -.0149427   .0229476    -0.65   0.515    -.0599225    .0300371
         27  |  -.0116542   .0209056    -0.56   0.577    -.0526315     .029323
         28  |   .0110774   .0203677     0.54   0.587    -.0288455    .0510003
         29  |   .0111103   .0201683     0.55   0.582    -.0284217    .0506424
         30  |   .0304402   .0201711     1.51   0.131    -.0090975    .0699779
         31  |   .0220354   .0203664     1.08   0.279     -.017885    .0619559
         32  |   .0322464     .02096     1.54   0.124    -.0088375    .0733303
         33  |   .0282324   .0216255     1.31   0.192    -.0141558    .0706207
         34  |   .0277878   .0226733     1.23   0.220    -.0166543    .0722298
         35  |   .0378927   .0236186     1.60   0.109    -.0084025    .0841878
         36  |   .0376597   .0249632     1.51   0.131    -.0112708    .0865903
         37  |   .0304444   .0261863     1.16   0.245    -.0208837    .0817726
         38  |   .0297126   .0273549     1.09   0.277     -.023906    .0833312
         39  |   .0332946   .0288554     1.15   0.249    -.0232652    .0898543
         40  |   .0441114   .0300839     1.47   0.143    -.0148564    .1030792
         41  |   .0593784   .0314598     1.89   0.059    -.0022864    .1210432
         42  |   .0698283    .032878     2.12   0.034     .0053836    .1342729
         43  |   .0692459   .0345013     2.01   0.045     .0016195    .1368723
         44  |   .0873254   .0361489     2.42   0.016     .0164695    .1581813
         45  |   .0966833   .0376632     2.57   0.010     .0228591    .1705074
         46  |   .0962958   .0392443     2.45   0.014     .0193726     .173219
         47  |   .1073864   .0404526     2.65   0.008     .0280947     .186678
         48  |   .0904654   .0415181     2.18   0.029     .0090853    .1718456
         49  |  -.1867522   .0430936    -4.33   0.000    -.2712203    -.102284
         50  |  -.2359773   .0446892    -5.28   0.000    -.3235732   -.1483814
             |
     age_cat |
          1  |   .0445665   .0059822     7.45   0.000     .0328408    .0562923
          2  |   .0642977   .0070644     9.10   0.000     .0504507    .0781447
          3  |   .0820964    .008289     9.90   0.000     .0658489    .0983438
          4  |   .1053275   .0096905    10.87   0.000     .0863331     .124322
          5  |   .1237258   .0111543    11.09   0.000     .1018621    .1455894
          6  |   .1348805   .0127608    10.57   0.000      .109868     .159893
          7  |   .1433293   .0143823     9.97   0.000     .1151383    .1715203
          8  |   .1593131   .0160481     9.93   0.000     .1278571    .1907691
          9  |   .1608176   .0176916     9.09   0.000     .1261402    .1954951
         10  |   .1660129   .0193716     8.57   0.000     .1280425    .2039834
         11  |   .1747287   .0210269     8.31   0.000     .1335136    .2159437
         12  |   .1773979   .0226931     7.82   0.000     .1329169    .2218788
         13  |   .1880598     .02444     7.69   0.000     .1401548    .2359649
         14  |   .1976365    .026199     7.54   0.000     .1462836    .2489893
         15  |   .2057444   .0278652     7.38   0.000     .1511255    .2603633
         16  |   .2108139   .0295705     7.13   0.000     .1528525    .2687753
         17  |   .2159566   .0312331     6.91   0.000     .1547363    .2771769
         18  |   .2232661   .0330957     6.75   0.000     .1583948    .2881374
         19  |   .2148493    .034983     6.14   0.000     .1462789    .2834198
         20  |   .2256286   .0380224     5.93   0.000     .1511005    .3001567
         25  |   .2433809   .0438812     5.55   0.000     .1573689     .329393
         30  |   .2461897   .0620856     3.97   0.000     .1244951    .3678843
         40  |    .229532   .0692897     3.31   0.001     .0937164    .3653476
         50  |   .1687207   .0730064     2.31   0.021       .02562    .3118214
             |
       _cons |   .1864039    .013934    13.38   0.000     .1590918    .2137161
-------------+----------------------------------------------------------------
     sigma_u |  .37746902
     sigma_e |  .28507949
         rho |  .63678587   (fraction of variance due to u_i)
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. local fname = e(depvar)

. local title : variable label `fname'

. 
. slopegraph, ///
>         from(0 0 0 0 1 _b[during_DE] 1 _b[during_DE]) ///
>         to(1 _b[during_DD] 1 _b[during_DE] 2 _b[during_ED]+_b[during_DE] 2 _b[during_EE]+_b[during_DE]) ///
>         style(p1 p2 p1 p2) ///
>         label(Local-Local Local-Expat Expat-Local Expat-Expat) ///
>         width_test(during_DD during_DE during_ED during_EE) ///
>         star_test(1==1 during_DE==during_DD 1==1 during_EE==during_ED) ///
>         connect(stepstair) ///
>         format(scheme(538w) xlabel(none) xtitle("") ytitle("") title(`title') legend(off) aspect(0.67))
number of observations (_N) was 0, now 8
(8 missing values generated)
(8 missing values generated)
(8 missing values generated)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
variable label was str1 now str11
(1 real change made)

 ( 1)  during_DD = 0

       F(  1, 16123) =    0.75
            Prob > F =    0.3881

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_DE = 0

       F(  1, 16123) =    2.31
            Prob > F =    0.1286

 ( 1)  - during_DD + during_DE = 0

       F(  1, 16123) =    2.76
            Prob > F =    0.0965
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_ED = 0

       F(  1, 16123) =    0.01
            Prob > F =    0.9344

 ( 1) = 0
       Constraint 1 dropped

       F(  0, 16123) =       .
            Prob > F =         .
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)

 ( 1)  during_EE = 0

       F(  1, 16123) =    1.05
            Prob > F =    0.3060

 ( 1)  - during_ED + during_EE = 0

       F(  1, 16123) =    0.69
            Prob > F =    0.4063

. 
. graph export output/figure/`fname'_tree.png, width(800) replace
(file output/figure/exporter_tree.png written in PNG format)

. 
end of do-file

. foreach X of var exporter lnQL {
  2.         local i = 1
  3.         foreach Z of var H_* {
  4.                 xtreg `X' foreign during_domestic after_domestic during_expat after_expat during_domestic_`Z' after_domesti
> c_`Z' during_expat_`Z' after_expat_`Z' i.ind_year i.age_cat if `sample_acquisitions' [aw=inverse_weight], i(firm_person ) fe v
> ce(cluster id)
  5.                 local r2_w = `e(r2_w)'
  6.                 test during_expat_`Z'==during_domestic_`Z'
  7.                 local p = `r(p)'        
  8.                 do regram output/regression/`X'_heterogeneity `i' `Z' R2_within "`r2_w'" p_value "`p'"
  9.                 local i = `i'+1
 10.         }
 11. }

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.0500                         Obs per group: min =         1
       between = 0.1027                                        avg =       8.7
       overall = 0.0689                                        max =        25

                                                F(82,16123)        =     27.90
corr(u_i, Xb)  = 0.1215                         Prob > F           =    0.0000

                                         (Std. Err. adjusted for 16,124 clusters in id)
---------------------------------------------------------------------------------------
                      |               Robust
             exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------------+----------------------------------------------------------------
              foreign |    .022109   .0125669     1.76   0.079    -.0025235    .0467415
      during_domestic |   .0135917   .0051525     2.64   0.008     .0034923    .0236911
       after_domestic |   .0048612    .008636     0.56   0.574    -.0120662    .0217887
         during_expat |   .0707204   .0218673     3.23   0.001      .027858    .1135828
          after_expat |   .0575977   .0301627     1.91   0.056    -.0015245      .11672
during_domestic_H_lnL |  -.0352679   .0067126    -5.25   0.000    -.0484253   -.0221104
 after_domestic_H_lnL |  -.0464511   .0111722    -4.16   0.000    -.0683498   -.0245523
   during_expat_H_lnL |  -.0636128   .0269923    -2.36   0.018    -.1165207    -.010705
    after_expat_H_lnL |  -.0612066   .0368722    -1.66   0.097    -.1334801     .011067
                      |
             ind_year |
                   2  |  -.0132786   .0091382    -1.45   0.146    -.0311905    .0046333
                   3  |  -.0266586   .0112603    -2.37   0.018      -.04873   -.0045871
                   4  |  -.0343449   .0121589    -2.82   0.005    -.0581778   -.0105121
                   5  |  -.0231745   .0137119    -1.69   0.091    -.0500513    .0037024
                   6  |   -.030175   .0149498    -2.02   0.044    -.0594783   -.0008717
                   7  |  -.0335791   .0161981    -2.07   0.038    -.0653292   -.0018291
                   8  |   -.043117   .0175103    -2.46   0.014     -.077439   -.0087949
                   9  |  -.0458248   .0190563    -2.40   0.016    -.0831773   -.0084723
                  10  |  -.0450144   .0204438    -2.20   0.028    -.0850865   -.0049424
                  11  |  -.0507149   .0219688    -2.31   0.021    -.0937761   -.0076537
                  12  |   -.051371   .0234143    -2.19   0.028    -.0972656   -.0054764
                  13  |  -.0455862   .0250483    -1.82   0.069    -.0946836    .0035113
                  14  |  -.0365539   .0266931    -1.37   0.171    -.0888754    .0157676
                  15  |  -.0262546   .0282507    -0.93   0.353    -.0816291    .0291199
                  16  |  -.0112854   .0298078    -0.38   0.705     -.069712    .0471412
                  17  |   .0030136   .0314746     0.10   0.924    -.0586801    .0647073
                  18  |   .0075114   .0332012     0.23   0.821    -.0575667    .0725895
                  19  |   .0133964   .0348278     0.38   0.701    -.0548699    .0816627
                  20  |   .0196661   .0363449     0.54   0.588     -.051574    .0909061
                  21  |   .0158467   .0378135     0.42   0.675    -.0582719    .0899652
                  22  |   .0223357    .039168     0.57   0.569    -.0544379    .0991092
                  23  |   .0159364   .0405599     0.39   0.694    -.0635655    .0954384
                  24  |  -.0887455   .0420175    -2.11   0.035    -.1711045   -.0063865
                  25  |  -.1215017   .0436295    -2.78   0.005    -.2070204   -.0359831
                  26  |   -.015951   .0229225    -0.70   0.487    -.0608816    .0289796
                  27  |  -.0114703     .02088    -0.55   0.583    -.0523974    .0294569
                  28  |   .0123864   .0203452     0.61   0.543    -.0274924    .0522652
                  29  |    .013622   .0201546     0.68   0.499    -.0258833    .0531272
                  30  |   .0340412   .0201694     1.69   0.091     -.005493    .0735754
                  31  |     .02673   .0203806     1.31   0.190    -.0132182    .0666782
                  32  |   .0380478   .0209878     1.81   0.070    -.0030906    .0791862
                  33  |   .0349668   .0216806     1.61   0.107    -.0075295    .0774632
                  34  |   .0354083   .0227459     1.56   0.120    -.0091762    .0799928
                  35  |   .0464005   .0237267     1.96   0.051    -.0001064    .0929074
                  36  |   .0472917     .02512     1.88   0.060    -.0019463    .0965298
                  37  |    .041141   .0263785     1.56   0.119    -.0105638    .0928458
                  38  |   .0415185   .0275869     1.51   0.132     -.012555    .0955919
                  39  |    .046206     .02914     1.59   0.113    -.0109116    .1033236
                  40  |   .0580031   .0304025     1.91   0.056    -.0015893    .1175954
                  41  |    .074226   .0318216     2.33   0.020     .0118521    .1365999
                  42  |   .0856647   .0332807     2.57   0.010     .0204309    .1508985
                  43  |   .0860125   .0349251     2.46   0.014     .0175555    .1544696
                  44  |   .1050188   .0366235     2.87   0.004     .0332326     .176805
                  45  |   .1152476   .0381747     3.02   0.003      .040421    .1900741
                  46  |    .115675    .039776     2.91   0.004     .0377097    .1936404
                  47  |   .1274287    .040999     3.11   0.002     .0470661    .2077913
                  48  |   .1113383   .0420992     2.64   0.008     .0288192    .1938573
                  49  |  -.1650766   .0436995    -3.78   0.000    -.2507324   -.0794208
                  50  |  -.2133403   .0453186    -4.71   0.000    -.3021699   -.1245107
                      |
              age_cat |
                   1  |   .0432651    .005988     7.23   0.000     .0315279    .0550022
                   2  |   .0618605     .00709     8.73   0.000     .0479634    .0757576
                   3  |   .0785194   .0083407     9.41   0.000     .0621708     .094868
                   4  |   .1006996   .0097653    10.31   0.000     .0815585    .1198406
                   5  |   .1180814   .0112622    10.48   0.000     .0960062    .1401566
                   6  |   .1282181   .0128919     9.95   0.000     .1029485    .1534877
                   7  |   .1356688    .014542     9.33   0.000     .1071648    .1641728
                   8  |    .150634   .0162381     9.28   0.000     .1188056    .1824624
                   9  |   .1511518   .0179198     8.43   0.000      .116027    .1862766
                  10  |   .1553511   .0196207     7.92   0.000     .1168924    .1938098
                  11  |    .163078   .0213053     7.65   0.000     .1213173    .2048387
                  12  |   .1647988    .022991     7.17   0.000      .119734    .2098636
                  13  |   .1745909   .0247649     7.05   0.000     .1260489     .223133
                  14  |    .183197    .026544     6.90   0.000     .1311678    .2352261
                  15  |    .190457     .02824     6.74   0.000     .1351035    .2458105
                  16  |   .1946251   .0299609     6.50   0.000     .1358985    .2533517
                  17  |    .198809   .0316388     6.28   0.000     .1367934    .2608246
                  18  |   .2052004    .033527     6.12   0.000     .1394837    .2709171
                  19  |   .1959494   .0354339     5.53   0.000     .1264949    .2654038
                  20  |   .2047931   .0385194     5.32   0.000     .1292909    .2802954
                  25  |    .220228   .0444159     4.96   0.000     .1331679    .3072881
                  30  |   .2232098   .0624471     3.57   0.000     .1008065    .3456132
                  40  |   .2082088   .0695896     2.99   0.003     .0718056    .3446121
                  50  |   .1482868   .0730714     2.03   0.042     .0050587    .2915148
                      |
                _cons |   .1847077   .0139461    13.24   0.000     .1573718    .2120437
----------------------+----------------------------------------------------------------
              sigma_u |  .37797296
              sigma_e |  .28502235
                  rho |  .63749546   (fraction of variance due to u_i)
---------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnL + during_expat_H_lnL = 0

       F(  1, 16123) =    1.06
            Prob > F =    0.3038

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0499536496883831
key: p_value
value: .3037815927026997

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.0500                                         min =          1
     between = 0.1027                                         avg =        8.7
     overall = 0.0689                                         max =         25

                                                F(82,16123)       =      27.90
corr(u_i, Xb)  = 0.1215                         Prob > F          =     0.0000

                                         (Std. Err. adjusted for 16,124 clusters in id)
---------------------------------------------------------------------------------------
                      |               Robust
             exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------------+----------------------------------------------------------------
              foreign |    .022109   .0125669     1.76   0.079    -.0025235    .0467415
      during_domestic |   .0135917   .0051525     2.64   0.008     .0034923    .0236911
       after_domestic |   .0048612    .008636     0.56   0.574    -.0120662    .0217887
         during_expat |   .0707204   .0218673     3.23   0.001      .027858    .1135828
          after_expat |   .0575977   .0301627     1.91   0.056    -.0015245      .11672
during_domestic_H_lnL |  -.0352679   .0067126    -5.25   0.000    -.0484253   -.0221104
 after_domestic_H_lnL |  -.0464511   .0111722    -4.16   0.000    -.0683498   -.0245523
   during_expat_H_lnL |  -.0636128   .0269923    -2.36   0.018    -.1165207    -.010705
    after_expat_H_lnL |  -.0612066   .0368722    -1.66   0.097    -.1334801     .011067
                      |
             ind_year |
                   2  |  -.0132786   .0091382    -1.45   0.146    -.0311905    .0046333
                   3  |  -.0266586   .0112603    -2.37   0.018      -.04873   -.0045871
                   4  |  -.0343449   .0121589    -2.82   0.005    -.0581778   -.0105121
                   5  |  -.0231745   .0137119    -1.69   0.091    -.0500513    .0037024
                   6  |   -.030175   .0149498    -2.02   0.044    -.0594783   -.0008717
                   7  |  -.0335791   .0161981    -2.07   0.038    -.0653292   -.0018291
                   8  |   -.043117   .0175103    -2.46   0.014     -.077439   -.0087949
                   9  |  -.0458248   .0190563    -2.40   0.016    -.0831773   -.0084723
                  10  |  -.0450144   .0204438    -2.20   0.028    -.0850865   -.0049424
                  11  |  -.0507149   .0219688    -2.31   0.021    -.0937761   -.0076537
                  12  |   -.051371   .0234143    -2.19   0.028    -.0972656   -.0054764
                  13  |  -.0455862   .0250483    -1.82   0.069    -.0946836    .0035113
                  14  |  -.0365539   .0266931    -1.37   0.171    -.0888754    .0157676
                  15  |  -.0262546   .0282507    -0.93   0.353    -.0816291    .0291199
                  16  |  -.0112854   .0298078    -0.38   0.705     -.069712    .0471412
                  17  |   .0030136   .0314746     0.10   0.924    -.0586801    .0647073
                  18  |   .0075114   .0332012     0.23   0.821    -.0575667    .0725895
                  19  |   .0133964   .0348278     0.38   0.701    -.0548699    .0816627
                  20  |   .0196661   .0363449     0.54   0.588     -.051574    .0909061
                  21  |   .0158467   .0378135     0.42   0.675    -.0582719    .0899652
                  22  |   .0223357    .039168     0.57   0.569    -.0544379    .0991092
                  23  |   .0159364   .0405599     0.39   0.694    -.0635655    .0954384
                  24  |  -.0887455   .0420175    -2.11   0.035    -.1711045   -.0063865
                  25  |  -.1215017   .0436295    -2.78   0.005    -.2070204   -.0359831
                  26  |   -.015951   .0229225    -0.70   0.487    -.0608816    .0289796
                  27  |  -.0114703     .02088    -0.55   0.583    -.0523974    .0294569
                  28  |   .0123864   .0203452     0.61   0.543    -.0274924    .0522652
                  29  |    .013622   .0201546     0.68   0.499    -.0258833    .0531272
                  30  |   .0340412   .0201694     1.69   0.091     -.005493    .0735754
                  31  |     .02673   .0203806     1.31   0.190    -.0132182    .0666782
                  32  |   .0380478   .0209878     1.81   0.070    -.0030906    .0791862
                  33  |   .0349668   .0216806     1.61   0.107    -.0075295    .0774632
                  34  |   .0354083   .0227459     1.56   0.120    -.0091762    .0799928
                  35  |   .0464005   .0237267     1.96   0.051    -.0001064    .0929074
                  36  |   .0472917     .02512     1.88   0.060    -.0019463    .0965298
                  37  |    .041141   .0263785     1.56   0.119    -.0105638    .0928458
                  38  |   .0415185   .0275869     1.51   0.132     -.012555    .0955919
                  39  |    .046206     .02914     1.59   0.113    -.0109116    .1033236
                  40  |   .0580031   .0304025     1.91   0.056    -.0015893    .1175954
                  41  |    .074226   .0318216     2.33   0.020     .0118521    .1365999
                  42  |   .0856647   .0332807     2.57   0.010     .0204309    .1508985
                  43  |   .0860125   .0349251     2.46   0.014     .0175555    .1544696
                  44  |   .1050188   .0366235     2.87   0.004     .0332326     .176805
                  45  |   .1152476   .0381747     3.02   0.003      .040421    .1900741
                  46  |    .115675    .039776     2.91   0.004     .0377097    .1936404
                  47  |   .1274287    .040999     3.11   0.002     .0470661    .2077913
                  48  |   .1113383   .0420992     2.64   0.008     .0288192    .1938573
                  49  |  -.1650766   .0436995    -3.78   0.000    -.2507324   -.0794208
                  50  |  -.2133403   .0453186    -4.71   0.000    -.3021699   -.1245107
                      |
              age_cat |
                   1  |   .0432651    .005988     7.23   0.000     .0315279    .0550022
                   2  |   .0618605     .00709     8.73   0.000     .0479634    .0757576
                   3  |   .0785194   .0083407     9.41   0.000     .0621708     .094868
                   4  |   .1006996   .0097653    10.31   0.000     .0815585    .1198406
                   5  |   .1180814   .0112622    10.48   0.000     .0960062    .1401566
                   6  |   .1282181   .0128919     9.95   0.000     .1029485    .1534877
                   7  |   .1356688    .014542     9.33   0.000     .1071648    .1641728
                   8  |    .150634   .0162381     9.28   0.000     .1188056    .1824624
                   9  |   .1511518   .0179198     8.43   0.000      .116027    .1862766
                  10  |   .1553511   .0196207     7.92   0.000     .1168924    .1938098
                  11  |    .163078   .0213053     7.65   0.000     .1213173    .2048387
                  12  |   .1647988    .022991     7.17   0.000      .119734    .2098636
                  13  |   .1745909   .0247649     7.05   0.000     .1260489     .223133
                  14  |    .183197    .026544     6.90   0.000     .1311678    .2352261
                  15  |    .190457     .02824     6.74   0.000     .1351035    .2458105
                  16  |   .1946251   .0299609     6.50   0.000     .1358985    .2533517
                  17  |    .198809   .0316388     6.28   0.000     .1367934    .2608246
                  18  |   .2052004    .033527     6.12   0.000     .1394837    .2709171
                  19  |   .1959494   .0354339     5.53   0.000     .1264949    .2654038
                  20  |   .2047931   .0385194     5.32   0.000     .1292909    .2802954
                  25  |    .220228   .0444159     4.96   0.000     .1331679    .3072881
                  30  |   .2232098   .0624471     3.57   0.000     .1008065    .3456132
                  40  |   .2082088   .0695896     2.99   0.003     .0718056    .3446121
                  50  |   .1482868   .0730714     2.03   0.042     .0050587    .2915148
                      |
                _cons |   .1847077   .0139461    13.24   0.000     .1573718    .2120437
----------------------+----------------------------------------------------------------
              sigma_u |  .37797296
              sigma_e |  .28502235
                  rho |  .63749546   (fraction of variance due to u_i)
---------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.0500                         Obs per group: min =         1
       between = 0.0986                                        avg =       8.7
       overall = 0.0684                                        max =        25

                                                F(82,16123)        =     27.98
corr(u_i, Xb)  = 0.1106                         Prob > F           =    0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0216433   .0125801     1.72   0.085     -.003015    .0463017
       during_domestic |  -.0258526   .0053026    -4.88   0.000    -.0362463   -.0154589
        after_domestic |  -.0459453   .0089135    -5.15   0.000    -.0634168   -.0284739
          during_expat |  -.0017444    .023986    -0.07   0.942    -.0487595    .0452708
           after_expat |   -.020791   .0279501    -0.74   0.457    -.0755763    .0339944
during_domestic_H_lnKL |   .0371146   .0067168     5.53   0.000     .0239489    .0502804
 after_domestic_H_lnKL |   .0431154   .0110804     3.89   0.000     .0213966    .0648342
   during_expat_H_lnKL |    .051387   .0277737     1.85   0.064    -.0030525    .1058266
    after_expat_H_lnKL |   .0639102   .0353813     1.81   0.071     -.005441    .1332614
                       |
              ind_year |
                    2  |   -.014165   .0091412    -1.55   0.121    -.0320828    .0037529
                    3  |   -.028355   .0112542    -2.52   0.012    -.0504145   -.0062955
                    4  |  -.0369467   .0121449    -3.04   0.002    -.0607521   -.0131413
                    5  |  -.0266788   .0136788    -1.95   0.051    -.0534907    .0001331
                    6  |  -.0343635   .0149015    -2.31   0.021    -.0635721   -.0051549
                    7  |  -.0386923   .0161263    -2.40   0.016    -.0703016    -.007083
                    8  |  -.0489836   .0174217    -2.81   0.005    -.0831321   -.0148351
                    9  |  -.0523004   .0189471    -2.76   0.006    -.0894389   -.0151619
                   10  |  -.0522832   .0203152    -2.57   0.010    -.0921033   -.0124632
                   11  |  -.0588633   .0218218    -2.70   0.007    -.1016363   -.0160902
                   12  |  -.0603939   .0232526    -2.60   0.009    -.1059716   -.0148162
                   13  |  -.0555004   .0248703    -2.23   0.026     -.104249   -.0067518
                   14  |  -.0473502   .0264981    -1.79   0.074    -.0992894     .004589
                   15  |   -.038097   .0280514    -1.36   0.174     -.093081    .0168869
                   16  |  -.0239889   .0295964    -0.81   0.418    -.0820012    .0340234
                   17  |  -.0109934   .0312366    -0.35   0.725    -.0722206    .0502338
                   18  |   -.007645    .032948    -0.23   0.817    -.0722268    .0569368
                   19  |  -.0028213   .0345487    -0.08   0.935    -.0705406     .064898
                   20  |    .002469   .0360572     0.07   0.945    -.0682071     .073145
                   21  |  -.0022517   .0375151    -0.06   0.952    -.0757854     .071282
                   22  |   .0034008   .0388655     0.09   0.930      -.07278    .0795816
                   23  |  -.0037727   .0402529    -0.09   0.925     -.082673    .0751275
                   24  |  -.1093399   .0416992    -2.62   0.009    -.1910749   -.0276049
                   25  |  -.1431545   .0433053    -3.31   0.001    -.2280378   -.0582713
                   26  |  -.0157162   .0229248    -0.69   0.493    -.0606514     .029219
                   27  |  -.0118798   .0208874    -0.57   0.570    -.0528215    .0290618
                   28  |     .01117   .0203522     0.55   0.583    -.0287226    .0510626
                   29  |   .0111096   .0201594     0.55   0.582    -.0284051    .0506243
                   30  |   .0306678   .0201696     1.52   0.128    -.0088668    .0702024
                   31  |   .0224611   .0203682     1.10   0.270    -.0174628    .0623851
                   32  |   .0329911    .020965     1.57   0.116    -.0081027    .0740848
                   33  |    .029185   .0216365     1.35   0.177     -.013225     .071595
                   34  |   .0290298   .0226965     1.28   0.201    -.0154578    .0735174
                   35  |   .0393724   .0236575     1.66   0.096     -.006999    .0857437
                   36  |    .039314     .02502     1.57   0.116    -.0097281     .088356
                   37  |   .0321499   .0262538     1.22   0.221    -.0193105    .0836103
                   38  |   .0314532   .0274407     1.15   0.252    -.0223336      .08524
                   39  |   .0351433   .0289631     1.21   0.225    -.0216277    .0919142
                   40  |    .046066   .0302102     1.52   0.127    -.0131494    .1052814
                   41  |    .061404   .0316116     1.94   0.052    -.0005582    .1233662
                   42  |   .0720856    .033052     2.18   0.029        .0073    .1368713
                   43  |     .07158   .0346869     2.06   0.039     .0035898    .1395702
                   44  |   .0896105   .0363592     2.46   0.014     .0183425    .1608786
                   45  |   .0989658   .0378972     2.61   0.009     .0246831    .1732484
                   46  |   .0986009   .0394984     2.50   0.013     .0211796    .1760222
                   47  |   .1097341   .0407165     2.70   0.007     .0299253     .189543
                   48  |   .0927851   .0418015     2.22   0.026     .0108496    .1747207
                   49  |  -.1844881   .0433965    -4.25   0.000    -.2695501   -.0994262
                   50  |  -.2337951   .0450077    -5.19   0.000    -.3220152   -.1455751
                       |
               age_cat |
                    1  |    .044609    .005984     7.45   0.000     .0328797    .0563383
                    2  |   .0644359   .0070747     9.11   0.000     .0505687     .078303
                    3  |   .0823412   .0083072     9.91   0.000     .0660582    .0986243
                    4  |   .1056088   .0097183    10.87   0.000     .0865599    .1246578
                    5  |   .1239755   .0111901    11.08   0.000     .1020417    .1459092
                    6  |   .1350958   .0128045    10.55   0.000     .1099975     .160194
                    7  |   .1434889    .014433     9.94   0.000     .1151985    .1717792
                    8  |    .159392   .0161101     9.89   0.000     .1278144    .1909696
                    9  |   .1608424   .0177689     9.05   0.000     .1260134    .1956713
                   10  |    .165973   .0194563     8.53   0.000     .1278364    .2041095
                   11  |   .1746493   .0211186     8.27   0.000     .1332545     .216044
                   12  |   .1773227   .0227936     7.78   0.000     .1326447    .2220007
                   13  |   .1880082    .024551     7.66   0.000     .1398855    .2361309
                   14  |    .197559   .0263103     7.51   0.000     .1459879    .2491301
                   15  |   .2056502   .0279856     7.35   0.000     .1507953    .2605052
                   16  |   .2107237   .0297053     7.09   0.000     .1524981    .2689493
                   17  |   .2158937   .0313718     6.88   0.000     .1544014     .277386
                   18  |    .223269   .0332504     6.71   0.000     .1580946    .2884434
                   19  |    .214864   .0351443     6.11   0.000     .1459773    .2837507
                   20  |   .2259018   .0382137     5.91   0.000     .1509987    .3008049
                   25  |   .2436329   .0440972     5.52   0.000     .1571974    .3300683
                   30  |   .2460379   .0621891     3.96   0.000     .1241404    .3679354
                   40  |   .2292321   .0693822     3.30   0.001     .0932353    .3652289
                   50  |   .1685818   .0730646     2.31   0.021      .025367    .3117966
                       |
                 _cons |   .1841941   .0139389    13.21   0.000     .1568723     .211516
-----------------------+----------------------------------------------------------------
               sigma_u |  .37754557
               sigma_e |  .28502242
                   rho |  .63697225   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnKL + during_expat_H_lnKL = 0

       F(  1, 16123) =    0.25
            Prob > F =    0.6148

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0499531229201415
key: p_value
value: .6147733478593662

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.0500                                         min =          1
     between = 0.0986                                         avg =        8.7
     overall = 0.0684                                         max =         25

                                                F(82,16123)       =      27.98
corr(u_i, Xb)  = 0.1106                         Prob > F          =     0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0216433   .0125801     1.72   0.085     -.003015    .0463017
       during_domestic |  -.0258526   .0053026    -4.88   0.000    -.0362463   -.0154589
        after_domestic |  -.0459453   .0089135    -5.15   0.000    -.0634168   -.0284739
          during_expat |  -.0017444    .023986    -0.07   0.942    -.0487595    .0452708
           after_expat |   -.020791   .0279501    -0.74   0.457    -.0755763    .0339944
during_domestic_H_lnKL |   .0371146   .0067168     5.53   0.000     .0239489    .0502804
 after_domestic_H_lnKL |   .0431154   .0110804     3.89   0.000     .0213966    .0648342
   during_expat_H_lnKL |    .051387   .0277737     1.85   0.064    -.0030525    .1058266
    after_expat_H_lnKL |   .0639102   .0353813     1.81   0.071     -.005441    .1332614
                       |
              ind_year |
                    2  |   -.014165   .0091412    -1.55   0.121    -.0320828    .0037529
                    3  |   -.028355   .0112542    -2.52   0.012    -.0504145   -.0062955
                    4  |  -.0369467   .0121449    -3.04   0.002    -.0607521   -.0131413
                    5  |  -.0266788   .0136788    -1.95   0.051    -.0534907    .0001331
                    6  |  -.0343635   .0149015    -2.31   0.021    -.0635721   -.0051549
                    7  |  -.0386923   .0161263    -2.40   0.016    -.0703016    -.007083
                    8  |  -.0489836   .0174217    -2.81   0.005    -.0831321   -.0148351
                    9  |  -.0523004   .0189471    -2.76   0.006    -.0894389   -.0151619
                   10  |  -.0522832   .0203152    -2.57   0.010    -.0921033   -.0124632
                   11  |  -.0588633   .0218218    -2.70   0.007    -.1016363   -.0160902
                   12  |  -.0603939   .0232526    -2.60   0.009    -.1059716   -.0148162
                   13  |  -.0555004   .0248703    -2.23   0.026     -.104249   -.0067518
                   14  |  -.0473502   .0264981    -1.79   0.074    -.0992894     .004589
                   15  |   -.038097   .0280514    -1.36   0.174     -.093081    .0168869
                   16  |  -.0239889   .0295964    -0.81   0.418    -.0820012    .0340234
                   17  |  -.0109934   .0312366    -0.35   0.725    -.0722206    .0502338
                   18  |   -.007645    .032948    -0.23   0.817    -.0722268    .0569368
                   19  |  -.0028213   .0345487    -0.08   0.935    -.0705406     .064898
                   20  |    .002469   .0360572     0.07   0.945    -.0682071     .073145
                   21  |  -.0022517   .0375151    -0.06   0.952    -.0757854     .071282
                   22  |   .0034008   .0388655     0.09   0.930      -.07278    .0795816
                   23  |  -.0037727   .0402529    -0.09   0.925     -.082673    .0751275
                   24  |  -.1093399   .0416992    -2.62   0.009    -.1910749   -.0276049
                   25  |  -.1431545   .0433053    -3.31   0.001    -.2280378   -.0582713
                   26  |  -.0157162   .0229248    -0.69   0.493    -.0606514     .029219
                   27  |  -.0118798   .0208874    -0.57   0.570    -.0528215    .0290618
                   28  |     .01117   .0203522     0.55   0.583    -.0287226    .0510626
                   29  |   .0111096   .0201594     0.55   0.582    -.0284051    .0506243
                   30  |   .0306678   .0201696     1.52   0.128    -.0088668    .0702024
                   31  |   .0224611   .0203682     1.10   0.270    -.0174628    .0623851
                   32  |   .0329911    .020965     1.57   0.116    -.0081027    .0740848
                   33  |    .029185   .0216365     1.35   0.177     -.013225     .071595
                   34  |   .0290298   .0226965     1.28   0.201    -.0154578    .0735174
                   35  |   .0393724   .0236575     1.66   0.096     -.006999    .0857437
                   36  |    .039314     .02502     1.57   0.116    -.0097281     .088356
                   37  |   .0321499   .0262538     1.22   0.221    -.0193105    .0836103
                   38  |   .0314532   .0274407     1.15   0.252    -.0223336      .08524
                   39  |   .0351433   .0289631     1.21   0.225    -.0216277    .0919142
                   40  |    .046066   .0302102     1.52   0.127    -.0131494    .1052814
                   41  |    .061404   .0316116     1.94   0.052    -.0005582    .1233662
                   42  |   .0720856    .033052     2.18   0.029        .0073    .1368713
                   43  |     .07158   .0346869     2.06   0.039     .0035898    .1395702
                   44  |   .0896105   .0363592     2.46   0.014     .0183425    .1608786
                   45  |   .0989658   .0378972     2.61   0.009     .0246831    .1732484
                   46  |   .0986009   .0394984     2.50   0.013     .0211796    .1760222
                   47  |   .1097341   .0407165     2.70   0.007     .0299253     .189543
                   48  |   .0927851   .0418015     2.22   0.026     .0108496    .1747207
                   49  |  -.1844881   .0433965    -4.25   0.000    -.2695501   -.0994262
                   50  |  -.2337951   .0450077    -5.19   0.000    -.3220152   -.1455751
                       |
               age_cat |
                    1  |    .044609    .005984     7.45   0.000     .0328797    .0563383
                    2  |   .0644359   .0070747     9.11   0.000     .0505687     .078303
                    3  |   .0823412   .0083072     9.91   0.000     .0660582    .0986243
                    4  |   .1056088   .0097183    10.87   0.000     .0865599    .1246578
                    5  |   .1239755   .0111901    11.08   0.000     .1020417    .1459092
                    6  |   .1350958   .0128045    10.55   0.000     .1099975     .160194
                    7  |   .1434889    .014433     9.94   0.000     .1151985    .1717792
                    8  |    .159392   .0161101     9.89   0.000     .1278144    .1909696
                    9  |   .1608424   .0177689     9.05   0.000     .1260134    .1956713
                   10  |    .165973   .0194563     8.53   0.000     .1278364    .2041095
                   11  |   .1746493   .0211186     8.27   0.000     .1332545     .216044
                   12  |   .1773227   .0227936     7.78   0.000     .1326447    .2220007
                   13  |   .1880082    .024551     7.66   0.000     .1398855    .2361309
                   14  |    .197559   .0263103     7.51   0.000     .1459879    .2491301
                   15  |   .2056502   .0279856     7.35   0.000     .1507953    .2605052
                   16  |   .2107237   .0297053     7.09   0.000     .1524981    .2689493
                   17  |   .2158937   .0313718     6.88   0.000     .1544014     .277386
                   18  |    .223269   .0332504     6.71   0.000     .1580946    .2884434
                   19  |    .214864   .0351443     6.11   0.000     .1459773    .2837507
                   20  |   .2259018   .0382137     5.91   0.000     .1509987    .3008049
                   25  |   .2436329   .0440972     5.52   0.000     .1571974    .3300683
                   30  |   .2460379   .0621891     3.96   0.000     .1241404    .3679354
                   40  |   .2292321   .0693822     3.30   0.001     .0932353    .3652289
                   50  |   .1685818   .0730646     2.31   0.021      .025367    .3117966
                       |
                 _cons |   .1841941   .0139389    13.21   0.000     .1568723     .211516
-----------------------+----------------------------------------------------------------
               sigma_u |  .37754557
               sigma_e |  .28502242
                   rho |  .63697225   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.0499                         Obs per group: min =         1
       between = 0.1017                                        avg =       8.7
       overall = 0.0704                                        max =        25

                                                F(82,16123)        =     27.81
corr(u_i, Xb)  = 0.1161                         Prob > F           =    0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0220706   .0125759     1.75   0.079    -.0025796    .0467208
       during_domestic |  -.0188523    .005118    -3.68   0.000    -.0288841   -.0088205
        after_domestic |  -.0494012   .0087231    -5.66   0.000    -.0664995   -.0323029
          during_expat |    .001478   .0225182     0.07   0.948    -.0426602    .0456161
           after_expat |  -.0183777    .027478    -0.67   0.504    -.0722376    .0354822
during_domestic_H_lnQL |   .0251024   .0066461     3.78   0.000     .0120753    .0381296
 after_domestic_H_lnQL |   .0480113   .0109896     4.37   0.000     .0264705    .0695521
   during_expat_H_lnQL |   .0474926   .0269715     1.76   0.078    -.0053746    .1003598
    after_expat_H_lnQL |   .0614652   .0352684     1.74   0.081    -.0076647    .1305951
                       |
              ind_year |
                    2  |  -.0142054   .0091426    -1.55   0.120     -.032126    .0037152
                    3  |   -.028443   .0112545    -2.53   0.012     -.050503   -.0063829
                    4  |  -.0370988   .0121469    -3.05   0.002    -.0609082   -.0132895
                    5  |  -.0268732   .0136795    -1.96   0.049    -.0536865   -.0000599
                    6  |  -.0345783   .0149039    -2.32   0.020    -.0637915   -.0053651
                    7  |  -.0389442   .0161277    -2.41   0.016    -.0705562   -.0073321
                    8  |  -.0492128   .0174228    -2.82   0.005    -.0833633   -.0150622
                    9  |  -.0525638   .0189463    -2.77   0.006    -.0897005    -.015427
                   10  |  -.0525508   .0203137    -2.59   0.010    -.0923679   -.0127337
                   11  |   -.059156   .0218192    -2.71   0.007    -.1019241    -.016388
                   12  |  -.0606207   .0232474    -2.61   0.009    -.1061882   -.0150531
                   13  |  -.0556355   .0248636    -2.24   0.025     -.104371      -.0069
                   14  |  -.0474446     .02649    -1.79   0.073    -.0993679    .0044786
                   15  |  -.0381177   .0280379    -1.36   0.174    -.0930751    .0168397
                   16  |  -.0239415   .0295817    -0.81   0.418    -.0819249     .034042
                   17  |  -.0108217   .0312193    -0.35   0.729     -.072015    .0503715
                   18  |  -.0073895   .0329293    -0.22   0.822    -.0719346    .0571556
                   19  |  -.0025265   .0345279    -0.07   0.942    -.0702051     .065152
                   20  |   .0027966   .0360338     0.08   0.938    -.0678336    .0734269
                   21  |  -.0019441   .0374902    -0.05   0.959     -.075429    .0715408
                   22  |   .0037482   .0388396     0.10   0.923    -.0723816    .0798781
                   23  |  -.0034493   .0402246    -0.09   0.932    -.0822939    .0753954
                   24  |   -.109083   .0416684    -2.62   0.009    -.1907578   -.0274083
                   25  |  -.1428614   .0432729    -3.30   0.001    -.2276811   -.0580417
                   26  |  -.0156525   .0229356    -0.68   0.495    -.0606088    .0293038
                   27  |   -.011916   .0208928    -0.57   0.568    -.0528682    .0290362
                   28  |     .01108   .0203574     0.54   0.586    -.0288227    .0509827
                   29  |   .0111079   .0201597     0.55   0.582    -.0284074    .0506232
                   30  |   .0306966   .0201693     1.52   0.128    -.0088374    .0702306
                   31  |   .0225574   .0203683     1.11   0.268    -.0173667    .0624815
                   32  |   .0330324   .0209639     1.58   0.115    -.0080591    .0741239
                   33  |   .0292652   .0216334     1.35   0.176    -.0131387     .071669
                   34  |   .0290443    .022692     1.28   0.201    -.0154346    .0735232
                   35  |   .0393994   .0236516     1.67   0.096    -.0069603    .0857591
                   36  |   .0393735   .0250126     1.57   0.115     -.009654     .088401
                   37  |   .0322326   .0262448     1.23   0.219    -.0192101    .0836752
                   38  |   .0315637   .0274282     1.15   0.250    -.0221987    .0853261
                   39  |   .0352312   .0289497     1.22   0.224    -.0215135    .0919759
                   40  |   .0462012    .030196     1.53   0.126    -.0129864    .1053887
                   41  |   .0615331   .0315928     1.95   0.051    -.0003923    .1234585
                   42  |   .0720616   .0330344     2.18   0.029     .0073105    .1368126
                   43  |   .0714879    .034667     2.06   0.039     .0035368    .1394391
                   44  |   .0895645   .0363386     2.46   0.014     .0183369    .1607922
                   45  |   .0989561   .0378728     2.61   0.009     .0247212     .173191
                   46  |   .0985406   .0394743     2.50   0.013     .0211666    .1759146
                   47  |   .1096835     .04069     2.70   0.007     .0299266    .1894405
                   48  |    .092828   .0417755     2.22   0.026     .0109434    .1747126
                   49  |  -.1844289   .0433686    -4.25   0.000    -.2694361   -.0994217
                   50  |  -.2337304   .0449773    -5.20   0.000    -.3218908   -.1455699
                       |
               age_cat |
                    1  |   .0449042   .0059855     7.50   0.000      .033172    .0566365
                    2  |   .0647063    .007074     9.15   0.000     .0508404    .0785722
                    3  |   .0825489   .0083039     9.94   0.000     .0662723    .0988255
                    4  |   .1057773   .0097141    10.89   0.000     .0867367     .124818
                    5  |    .124125   .0111846    11.10   0.000      .102202     .146048
                    6  |     .13525   .0127959    10.57   0.000     .1101687    .1603314
                    7  |   .1436494   .0144247     9.96   0.000     .1153754    .1719234
                    8  |   .1595057   .0161001     9.91   0.000     .1279477    .1910637
                    9  |   .1609668   .0177593     9.06   0.000     .1261567     .195777
                   10  |   .1660893   .0194445     8.54   0.000     .1279759    .2042027
                   11  |   .1747482   .0211045     8.28   0.000      .133381    .2161155
                   12  |   .1773586    .022779     7.79   0.000     .1327092     .222008
                   13  |   .1879982   .0245342     7.66   0.000     .1399085     .236088
                   14  |   .1975177   .0262919     7.51   0.000     .1459826    .2490527
                   15  |   .2056569   .0279659     7.35   0.000     .1508407    .2604731
                   16  |   .2107495   .0296842     7.10   0.000     .1525652    .2689337
                   17  |   .2159054   .0313531     6.89   0.000     .1544498    .2773609
                   18  |   .2231917   .0332333     6.72   0.000     .1580508    .2883327
                   19  |   .2147123   .0351265     6.11   0.000     .1458605    .2835642
                   20  |   .2256107   .0381953     5.91   0.000     .1507438    .3004777
                   25  |   .2431706   .0440767     5.52   0.000     .1567754    .3295659
                   30  |   .2454165    .062162     3.95   0.000     .1235721    .3672609
                   40  |   .2288002    .069352     3.30   0.001     .0928626    .3647377
                   50  |   .1683016   .0730182     2.30   0.021     .0251779    .3114253
                       |
                 _cons |   .1844326   .0139562    13.22   0.000     .1570768    .2117884
-----------------------+----------------------------------------------------------------
               sigma_u |  .37719503
               sigma_e |  .28503515
                   rho |   .6365219   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnQL + during_expat_H_lnQL = 0

       F(  1, 16123) =    0.66
            Prob > F =    0.4169

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0498683014454037
key: p_value
value: .4168958236567837

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.0499                                         min =          1
     between = 0.1017                                         avg =        8.7
     overall = 0.0704                                         max =         25

                                                F(82,16123)       =      27.81
corr(u_i, Xb)  = 0.1161                         Prob > F          =     0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0220706   .0125759     1.75   0.079    -.0025796    .0467208
       during_domestic |  -.0188523    .005118    -3.68   0.000    -.0288841   -.0088205
        after_domestic |  -.0494012   .0087231    -5.66   0.000    -.0664995   -.0323029
          during_expat |    .001478   .0225182     0.07   0.948    -.0426602    .0456161
           after_expat |  -.0183777    .027478    -0.67   0.504    -.0722376    .0354822
during_domestic_H_lnQL |   .0251024   .0066461     3.78   0.000     .0120753    .0381296
 after_domestic_H_lnQL |   .0480113   .0109896     4.37   0.000     .0264705    .0695521
   during_expat_H_lnQL |   .0474926   .0269715     1.76   0.078    -.0053746    .1003598
    after_expat_H_lnQL |   .0614652   .0352684     1.74   0.081    -.0076647    .1305951
                       |
              ind_year |
                    2  |  -.0142054   .0091426    -1.55   0.120     -.032126    .0037152
                    3  |   -.028443   .0112545    -2.53   0.012     -.050503   -.0063829
                    4  |  -.0370988   .0121469    -3.05   0.002    -.0609082   -.0132895
                    5  |  -.0268732   .0136795    -1.96   0.049    -.0536865   -.0000599
                    6  |  -.0345783   .0149039    -2.32   0.020    -.0637915   -.0053651
                    7  |  -.0389442   .0161277    -2.41   0.016    -.0705562   -.0073321
                    8  |  -.0492128   .0174228    -2.82   0.005    -.0833633   -.0150622
                    9  |  -.0525638   .0189463    -2.77   0.006    -.0897005    -.015427
                   10  |  -.0525508   .0203137    -2.59   0.010    -.0923679   -.0127337
                   11  |   -.059156   .0218192    -2.71   0.007    -.1019241    -.016388
                   12  |  -.0606207   .0232474    -2.61   0.009    -.1061882   -.0150531
                   13  |  -.0556355   .0248636    -2.24   0.025     -.104371      -.0069
                   14  |  -.0474446     .02649    -1.79   0.073    -.0993679    .0044786
                   15  |  -.0381177   .0280379    -1.36   0.174    -.0930751    .0168397
                   16  |  -.0239415   .0295817    -0.81   0.418    -.0819249     .034042
                   17  |  -.0108217   .0312193    -0.35   0.729     -.072015    .0503715
                   18  |  -.0073895   .0329293    -0.22   0.822    -.0719346    .0571556
                   19  |  -.0025265   .0345279    -0.07   0.942    -.0702051     .065152
                   20  |   .0027966   .0360338     0.08   0.938    -.0678336    .0734269
                   21  |  -.0019441   .0374902    -0.05   0.959     -.075429    .0715408
                   22  |   .0037482   .0388396     0.10   0.923    -.0723816    .0798781
                   23  |  -.0034493   .0402246    -0.09   0.932    -.0822939    .0753954
                   24  |   -.109083   .0416684    -2.62   0.009    -.1907578   -.0274083
                   25  |  -.1428614   .0432729    -3.30   0.001    -.2276811   -.0580417
                   26  |  -.0156525   .0229356    -0.68   0.495    -.0606088    .0293038
                   27  |   -.011916   .0208928    -0.57   0.568    -.0528682    .0290362
                   28  |     .01108   .0203574     0.54   0.586    -.0288227    .0509827
                   29  |   .0111079   .0201597     0.55   0.582    -.0284074    .0506232
                   30  |   .0306966   .0201693     1.52   0.128    -.0088374    .0702306
                   31  |   .0225574   .0203683     1.11   0.268    -.0173667    .0624815
                   32  |   .0330324   .0209639     1.58   0.115    -.0080591    .0741239
                   33  |   .0292652   .0216334     1.35   0.176    -.0131387     .071669
                   34  |   .0290443    .022692     1.28   0.201    -.0154346    .0735232
                   35  |   .0393994   .0236516     1.67   0.096    -.0069603    .0857591
                   36  |   .0393735   .0250126     1.57   0.115     -.009654     .088401
                   37  |   .0322326   .0262448     1.23   0.219    -.0192101    .0836752
                   38  |   .0315637   .0274282     1.15   0.250    -.0221987    .0853261
                   39  |   .0352312   .0289497     1.22   0.224    -.0215135    .0919759
                   40  |   .0462012    .030196     1.53   0.126    -.0129864    .1053887
                   41  |   .0615331   .0315928     1.95   0.051    -.0003923    .1234585
                   42  |   .0720616   .0330344     2.18   0.029     .0073105    .1368126
                   43  |   .0714879    .034667     2.06   0.039     .0035368    .1394391
                   44  |   .0895645   .0363386     2.46   0.014     .0183369    .1607922
                   45  |   .0989561   .0378728     2.61   0.009     .0247212     .173191
                   46  |   .0985406   .0394743     2.50   0.013     .0211666    .1759146
                   47  |   .1096835     .04069     2.70   0.007     .0299266    .1894405
                   48  |    .092828   .0417755     2.22   0.026     .0109434    .1747126
                   49  |  -.1844289   .0433686    -4.25   0.000    -.2694361   -.0994217
                   50  |  -.2337304   .0449773    -5.20   0.000    -.3218908   -.1455699
                       |
               age_cat |
                    1  |   .0449042   .0059855     7.50   0.000      .033172    .0566365
                    2  |   .0647063    .007074     9.15   0.000     .0508404    .0785722
                    3  |   .0825489   .0083039     9.94   0.000     .0662723    .0988255
                    4  |   .1057773   .0097141    10.89   0.000     .0867367     .124818
                    5  |    .124125   .0111846    11.10   0.000      .102202     .146048
                    6  |     .13525   .0127959    10.57   0.000     .1101687    .1603314
                    7  |   .1436494   .0144247     9.96   0.000     .1153754    .1719234
                    8  |   .1595057   .0161001     9.91   0.000     .1279477    .1910637
                    9  |   .1609668   .0177593     9.06   0.000     .1261567     .195777
                   10  |   .1660893   .0194445     8.54   0.000     .1279759    .2042027
                   11  |   .1747482   .0211045     8.28   0.000      .133381    .2161155
                   12  |   .1773586    .022779     7.79   0.000     .1327092     .222008
                   13  |   .1879982   .0245342     7.66   0.000     .1399085     .236088
                   14  |   .1975177   .0262919     7.51   0.000     .1459826    .2490527
                   15  |   .2056569   .0279659     7.35   0.000     .1508407    .2604731
                   16  |   .2107495   .0296842     7.10   0.000     .1525652    .2689337
                   17  |   .2159054   .0313531     6.89   0.000     .1544498    .2773609
                   18  |   .2231917   .0332333     6.72   0.000     .1580508    .2883327
                   19  |   .2147123   .0351265     6.11   0.000     .1458605    .2835642
                   20  |   .2256107   .0381953     5.91   0.000     .1507438    .3004777
                   25  |   .2431706   .0440767     5.52   0.000     .1567754    .3295659
                   30  |   .2454165    .062162     3.95   0.000     .1235721    .3672609
                   40  |   .2288002    .069352     3.30   0.001     .0928626    .3647377
                   50  |   .1683016   .0730182     2.30   0.021     .0251779    .3114253
                       |
                 _cons |   .1844326   .0139562    13.22   0.000     .1570768    .2117884
-----------------------+----------------------------------------------------------------
               sigma_u |  .37719503
               sigma_e |  .28503515
                   rho |   .6365219   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.0524                         Obs per group: min =         1
       between = 0.0369                                        avg =       8.7
       overall = 0.0274                                        max =        25

                                                F(82,16123)        =     30.61
corr(u_i, Xb)  = -0.0062                        Prob > F           =    0.0000

                                              (Std. Err. adjusted for 16,124 clusters in id)
--------------------------------------------------------------------------------------------
                           |               Robust
                  exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
---------------------------+----------------------------------------------------------------
                   foreign |   .0230416   .0125342     1.84   0.066    -.0015268    .0476101
           during_domestic |   .0332582   .0040894     8.13   0.000     .0252425    .0412739
            after_domestic |   .0422294   .0068339     6.18   0.000     .0288341    .0556247
              during_expat |   .1385256   .0239597     5.78   0.000     .0915619    .1854892
               after_expat |   .1685097   .0331682     5.08   0.000     .1034963    .2335232
during_domestic_H_exporter |  -.1013002   .0071105   -14.25   0.000    -.1152376   -.0873629
 after_domestic_H_exporter |  -.1513525   .0112681   -13.43   0.000    -.1734392   -.1292657
   during_expat_H_exporter |  -.1686018   .0277407    -6.08   0.000    -.2229766    -.114227
    after_expat_H_exporter |  -.2286413   .0382479    -5.98   0.000    -.3036114   -.1536711
                           |
                  ind_year |
                        2  |  -.0115628   .0091395    -1.27   0.206    -.0294773    .0063517
                        3  |  -.0234032   .0112602    -2.08   0.038    -.0454744    -.001332
                        4  |  -.0291981   .0121541    -2.40   0.016    -.0530215   -.0053747
                        5  |  -.0163078   .0137137    -1.19   0.234    -.0431881    .0105725
                        6  |    -.02173   .0149556    -1.45   0.146    -.0510447    .0075847
                        7  |  -.0233063   .0162172    -1.44   0.151    -.0550938    .0084813
                        8  |  -.0312943   .0175402    -1.78   0.074    -.0656751    .0030865
                        9  |  -.0328302   .0190758    -1.72   0.085     -.070221    .0045605
                       10  |  -.0306977    .020464    -1.50   0.134    -.0708095    .0094141
                       11  |  -.0351852    .021987    -1.60   0.110    -.0782822    .0079118
                       12  |  -.0341861   .0234418    -1.46   0.145    -.0801345    .0117624
                       13  |  -.0275378   .0250759    -1.10   0.272    -.0766894    .0216138
                       14  |  -.0174571   .0267321    -0.65   0.514     -.069855    .0349408
                       15  |  -.0057598   .0282862    -0.20   0.839    -.0612039    .0496843
                       16  |    .010695   .0298627     0.36   0.720    -.0478392    .0692293
                       17  |   .0264478   .0315301     0.84   0.402    -.0353547    .0882503
                       18  |    .032221   .0332599     0.97   0.333    -.0329722    .0974141
                       19  |   .0393859   .0348914     1.13   0.259    -.0290052    .1077769
                       20  |   .0466942   .0364132     1.28   0.200    -.0246798    .1180683
                       21  |   .0438503   .0378891     1.16   0.247    -.0304166    .1181171
                       22  |    .051376   .0392558     1.31   0.191    -.0255698    .1283217
                       23  |   .0461643   .0406556     1.14   0.256    -.0335252    .1258539
                       24  |   -.057533   .0421136    -1.37   0.172    -.1400803    .0250143
                       25  |  -.0894457   .0437297    -2.05   0.041    -.1751607   -.0037307
                       26  |   -.021249   .0228986    -0.93   0.353    -.0661327    .0236348
                       27  |  -.0144383   .0208361    -0.69   0.488    -.0552794    .0264027
                       28  |   .0113887   .0202993     0.56   0.575    -.0284003    .0511776
                       29  |    .014671   .0201111     0.73   0.466     -.024749     .054091
                       30  |   .0370642   .0201224     1.84   0.066    -.0023779    .0765062
                       31  |   .0317659   .0203358     1.56   0.118    -.0080945    .0716262
                       32  |    .044657    .020952     2.13   0.033     .0035888    .0857252
                       33  |   .0433808   .0216515     2.00   0.045     .0009415    .0858201
                       34  |   .0455737   .0227321     2.00   0.045     .0010162    .0901312
                       35  |   .0584399     .02372     2.46   0.014      .011946    .1049338
                       36  |   .0614566   .0251248     2.45   0.014     .0122093     .110704
                       37  |   .0570252   .0264039     2.16   0.031     .0052706    .1087798
                       38  |   .0595512   .0276179     2.16   0.031      .005417    .1136854
                       39  |   .0663668   .0291694     2.28   0.023     .0091914    .1235421
                       40  |   .0801332   .0304647     2.63   0.009      .020419    .1398474
                       41  |   .0981565   .0319075     3.08   0.002     .0356142    .1606988
                       42  |    .111594   .0333961     3.34   0.001      .046134    .1770541
                       43  |   .1137674   .0350395     3.25   0.001      .045086    .1824487
                       44  |   .1343883     .03676     3.66   0.000     .0623347     .206442
                       45  |   .1464277   .0383339     3.82   0.000      .071289    .2215664
                       46  |   .1486215    .039965     3.72   0.000     .0702856    .2269574
                       47  |   .1620409   .0411956     3.93   0.000     .0812929    .2427888
                       48  |   .1476229   .0423185     3.49   0.000      .064674    .2305719
                       49  |  -.1270295   .0439069    -2.89   0.004    -.2130919   -.0409671
                       50  |  -.1735487   .0455304    -3.81   0.000    -.2627934   -.0843041
                           |
                   age_cat |
                        1  |   .0408741    .005994     6.82   0.000     .0291252    .0526231
                        2  |   .0573032   .0071087     8.06   0.000     .0433693    .0712371
                        3  |   .0718051   .0083731     8.58   0.000     .0553929    .0882173
                        4  |   .0921386   .0098214     9.38   0.000     .0728876    .1113896
                        5  |   .1077473   .0113262     9.51   0.000     .0855468    .1299478
                        6  |   .1161559    .012974     8.95   0.000     .0907253    .1415864
                        7  |   .1219071   .0146399     8.33   0.000     .0932112    .1506029
                        8  |    .135293   .0163456     8.28   0.000     .1032538    .1673321
                        9  |   .1342466   .0180388     7.44   0.000     .0988885    .1696046
                       10  |   .1370445   .0197437     6.94   0.000     .0983447    .1757444
                       11  |   .1432318   .0214298     6.68   0.000     .1012269    .1852366
                       12  |    .143403    .023131     6.20   0.000     .0980638    .1887423
                       13  |   .1517325   .0249072     6.09   0.000     .1029115    .2005534
                       14  |   .1589184   .0266835     5.96   0.000     .1066157    .2112211
                       15  |   .1647216   .0283776     5.80   0.000     .1090984    .2203448
                       16  |    .167527   .0301186     5.56   0.000     .1084911    .2265628
                       17  |   .1702285   .0318106     5.35   0.000     .1078762    .2325808
                       18  |   .1755148   .0337027     5.21   0.000     .1094537    .2415758
                       19  |   .1650045   .0356067     4.63   0.000     .0952115    .2347975
                       20  |   .1712674   .0387352     4.42   0.000     .0953421    .2471927
                       25  |   .1840192   .0446685     4.12   0.000      .096464    .2715744
                       30  |    .186345   .0625795     2.98   0.003     .0636822    .3090077
                       40  |   .1725482   .0697099     2.48   0.013      .035909    .3091873
                       50  |    .112466   .0730429     1.54   0.124    -.0307061    .2556381
                           |
                     _cons |   .1851182   .0139303    13.29   0.000     .1578133    .2124231
---------------------------+----------------------------------------------------------------
                   sigma_u |   .3874915
                   sigma_e |   .2846492
                       rho |  .64950696   (fraction of variance due to u_i)
--------------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_exporter + during_expat_H_exporter = 0

       F(  1, 16123) =    5.61
            Prob > F =    0.0178

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0524395713533842
key: p_value
value: .0178491578290356

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.0524                                         min =          1
     between = 0.0369                                         avg =        8.7
     overall = 0.0274                                         max =         25

                                                F(82,16123)       =      30.61
corr(u_i, Xb)  = -0.0062                        Prob > F          =     0.0000

                                              (Std. Err. adjusted for 16,124 clusters in id)
--------------------------------------------------------------------------------------------
                           |               Robust
                  exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
---------------------------+----------------------------------------------------------------
                   foreign |   .0230416   .0125342     1.84   0.066    -.0015268    .0476101
           during_domestic |   .0332582   .0040894     8.13   0.000     .0252425    .0412739
            after_domestic |   .0422294   .0068339     6.18   0.000     .0288341    .0556247
              during_expat |   .1385256   .0239597     5.78   0.000     .0915619    .1854892
               after_expat |   .1685097   .0331682     5.08   0.000     .1034963    .2335232
during_domestic_H_exporter |  -.1013002   .0071105   -14.25   0.000    -.1152376   -.0873629
 after_domestic_H_exporter |  -.1513525   .0112681   -13.43   0.000    -.1734392   -.1292657
   during_expat_H_exporter |  -.1686018   .0277407    -6.08   0.000    -.2229766    -.114227
    after_expat_H_exporter |  -.2286413   .0382479    -5.98   0.000    -.3036114   -.1536711
                           |
                  ind_year |
                        2  |  -.0115628   .0091395    -1.27   0.206    -.0294773    .0063517
                        3  |  -.0234032   .0112602    -2.08   0.038    -.0454744    -.001332
                        4  |  -.0291981   .0121541    -2.40   0.016    -.0530215   -.0053747
                        5  |  -.0163078   .0137137    -1.19   0.234    -.0431881    .0105725
                        6  |    -.02173   .0149556    -1.45   0.146    -.0510447    .0075847
                        7  |  -.0233063   .0162172    -1.44   0.151    -.0550938    .0084813
                        8  |  -.0312943   .0175402    -1.78   0.074    -.0656751    .0030865
                        9  |  -.0328302   .0190758    -1.72   0.085     -.070221    .0045605
                       10  |  -.0306977    .020464    -1.50   0.134    -.0708095    .0094141
                       11  |  -.0351852    .021987    -1.60   0.110    -.0782822    .0079118
                       12  |  -.0341861   .0234418    -1.46   0.145    -.0801345    .0117624
                       13  |  -.0275378   .0250759    -1.10   0.272    -.0766894    .0216138
                       14  |  -.0174571   .0267321    -0.65   0.514     -.069855    .0349408
                       15  |  -.0057598   .0282862    -0.20   0.839    -.0612039    .0496843
                       16  |    .010695   .0298627     0.36   0.720    -.0478392    .0692293
                       17  |   .0264478   .0315301     0.84   0.402    -.0353547    .0882503
                       18  |    .032221   .0332599     0.97   0.333    -.0329722    .0974141
                       19  |   .0393859   .0348914     1.13   0.259    -.0290052    .1077769
                       20  |   .0466942   .0364132     1.28   0.200    -.0246798    .1180683
                       21  |   .0438503   .0378891     1.16   0.247    -.0304166    .1181171
                       22  |    .051376   .0392558     1.31   0.191    -.0255698    .1283217
                       23  |   .0461643   .0406556     1.14   0.256    -.0335252    .1258539
                       24  |   -.057533   .0421136    -1.37   0.172    -.1400803    .0250143
                       25  |  -.0894457   .0437297    -2.05   0.041    -.1751607   -.0037307
                       26  |   -.021249   .0228986    -0.93   0.353    -.0661327    .0236348
                       27  |  -.0144383   .0208361    -0.69   0.488    -.0552794    .0264027
                       28  |   .0113887   .0202993     0.56   0.575    -.0284003    .0511776
                       29  |    .014671   .0201111     0.73   0.466     -.024749     .054091
                       30  |   .0370642   .0201224     1.84   0.066    -.0023779    .0765062
                       31  |   .0317659   .0203358     1.56   0.118    -.0080945    .0716262
                       32  |    .044657    .020952     2.13   0.033     .0035888    .0857252
                       33  |   .0433808   .0216515     2.00   0.045     .0009415    .0858201
                       34  |   .0455737   .0227321     2.00   0.045     .0010162    .0901312
                       35  |   .0584399     .02372     2.46   0.014      .011946    .1049338
                       36  |   .0614566   .0251248     2.45   0.014     .0122093     .110704
                       37  |   .0570252   .0264039     2.16   0.031     .0052706    .1087798
                       38  |   .0595512   .0276179     2.16   0.031      .005417    .1136854
                       39  |   .0663668   .0291694     2.28   0.023     .0091914    .1235421
                       40  |   .0801332   .0304647     2.63   0.009      .020419    .1398474
                       41  |   .0981565   .0319075     3.08   0.002     .0356142    .1606988
                       42  |    .111594   .0333961     3.34   0.001      .046134    .1770541
                       43  |   .1137674   .0350395     3.25   0.001      .045086    .1824487
                       44  |   .1343883     .03676     3.66   0.000     .0623347     .206442
                       45  |   .1464277   .0383339     3.82   0.000      .071289    .2215664
                       46  |   .1486215    .039965     3.72   0.000     .0702856    .2269574
                       47  |   .1620409   .0411956     3.93   0.000     .0812929    .2427888
                       48  |   .1476229   .0423185     3.49   0.000      .064674    .2305719
                       49  |  -.1270295   .0439069    -2.89   0.004    -.2130919   -.0409671
                       50  |  -.1735487   .0455304    -3.81   0.000    -.2627934   -.0843041
                           |
                   age_cat |
                        1  |   .0408741    .005994     6.82   0.000     .0291252    .0526231
                        2  |   .0573032   .0071087     8.06   0.000     .0433693    .0712371
                        3  |   .0718051   .0083731     8.58   0.000     .0553929    .0882173
                        4  |   .0921386   .0098214     9.38   0.000     .0728876    .1113896
                        5  |   .1077473   .0113262     9.51   0.000     .0855468    .1299478
                        6  |   .1161559    .012974     8.95   0.000     .0907253    .1415864
                        7  |   .1219071   .0146399     8.33   0.000     .0932112    .1506029
                        8  |    .135293   .0163456     8.28   0.000     .1032538    .1673321
                        9  |   .1342466   .0180388     7.44   0.000     .0988885    .1696046
                       10  |   .1370445   .0197437     6.94   0.000     .0983447    .1757444
                       11  |   .1432318   .0214298     6.68   0.000     .1012269    .1852366
                       12  |    .143403    .023131     6.20   0.000     .0980638    .1887423
                       13  |   .1517325   .0249072     6.09   0.000     .1029115    .2005534
                       14  |   .1589184   .0266835     5.96   0.000     .1066157    .2112211
                       15  |   .1647216   .0283776     5.80   0.000     .1090984    .2203448
                       16  |    .167527   .0301186     5.56   0.000     .1084911    .2265628
                       17  |   .1702285   .0318106     5.35   0.000     .1078762    .2325808
                       18  |   .1755148   .0337027     5.21   0.000     .1094537    .2415758
                       19  |   .1650045   .0356067     4.63   0.000     .0952115    .2347975
                       20  |   .1712674   .0387352     4.42   0.000     .0953421    .2471927
                       25  |   .1840192   .0446685     4.12   0.000      .096464    .2715744
                       30  |    .186345   .0625795     2.98   0.003     .0636822    .3090077
                       40  |   .1725482   .0697099     2.48   0.013      .035909    .3091873
                       50  |    .112466   .0730429     1.54   0.124    -.0307061    .2556381
                           |
                     _cons |   .1851182   .0139303    13.29   0.000     .1578133    .2124231
---------------------------+----------------------------------------------------------------
                   sigma_u |   .3874915
                   sigma_e |   .2846492
                       rho |  .64950696   (fraction of variance due to u_i)
--------------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.0497                         Obs per group: min =         1
       between = 0.1064                                        avg =       8.7
       overall = 0.0720                                        max =        25

                                                F(82,16123)        =     27.70
corr(u_i, Xb)  = 0.1262                         Prob > F           =    0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0213105   .0125831     1.69   0.090    -.0033538    .0459748
       during_domestic |   .0088383   .0053615     1.65   0.099    -.0016707    .0193474
        after_domestic |  -.0048461   .0086999    -0.56   0.578    -.0218989    .0122068
          during_expat |   .0264296   .0166207     1.59   0.112    -.0061487    .0590079
           after_expat |   .0008811   .0226875     0.04   0.969    -.0435888    .0453511
during_domestic_H_slow |  -.0225363    .006847    -3.29   0.001    -.0359572   -.0091154
 after_domestic_H_slow |  -.0280183   .0111587    -2.51   0.012    -.0498907   -.0061459
   during_expat_H_slow |   .0046848   .0252672     0.19   0.853    -.0448417    .0542113
    after_expat_H_slow |   .0289152   .0343458     0.84   0.400    -.0384064    .0962368
                       |
              ind_year |
                    2  |   -.013818   .0091473    -1.51   0.131    -.0317477    .0041116
                    3  |  -.0277125   .0112645    -2.46   0.014    -.0497922   -.0056327
                    4  |  -.0359965   .0121626    -2.96   0.003    -.0598366   -.0121564
                    5  |  -.0252802     .01371    -1.84   0.065    -.0521533    .0015929
                    6  |  -.0326492    .014945    -2.18   0.029     -.061943   -.0033554
                    7  |  -.0365446   .0161808    -2.26   0.024    -.0682608   -.0048283
                    8  |  -.0463794   .0174825    -2.65   0.008    -.0806471   -.0121116
                    9  |  -.0495552   .0190248    -2.60   0.009     -.086846   -.0122644
                   10  |  -.0491804   .0203991    -2.41   0.016     -.089165   -.0091958
                   11  |   -.055309   .0219164    -2.52   0.012    -.0982676   -.0123503
                   12  |  -.0563681   .0233543    -2.41   0.016    -.1021451   -.0105911
                   13  |  -.0509765   .0249774    -2.04   0.041     -.099935    -.002018
                   14  |  -.0422775   .0266192    -1.59   0.112    -.0944542    .0098992
                   15  |  -.0323362   .0281756    -1.15   0.251    -.0875635     .022891
                   16  |   -.017628   .0297276    -0.59   0.553    -.0758975    .0406414
                   17  |  -.0037027   .0313779    -0.12   0.906    -.0652069    .0578016
                   18  |    .000469   .0331001     0.01   0.989    -.0644108    .0653488
                   19  |   .0060121   .0347136     0.17   0.863    -.0620305    .0740546
                   20  |   .0118832   .0362257     0.33   0.743    -.0591233    .0828897
                   21  |   .0078145   .0376871     0.21   0.836    -.0660564    .0816854
                   22  |    .014055   .0390464     0.36   0.719    -.0624804    .0905904
                   23  |   .0074244   .0404353     0.18   0.854    -.0718332    .0866821
                   24  |  -.0976002   .0418886    -2.33   0.020    -.1797066   -.0154938
                   25  |  -.1307987   .0434935    -3.01   0.003    -.2160508   -.0455467
                   26  |  -.0149279   .0229428    -0.65   0.515    -.0598983    .0300425
                   27  |  -.0108808   .0209077    -0.52   0.603    -.0518621    .0301006
                   28  |   .0125089   .0203795     0.61   0.539    -.0274372    .0524551
                   29  |   .0130167   .0201911     0.64   0.519    -.0265601    .0525935
                   30  |   .0328923   .0202088     1.63   0.104    -.0067192    .0725037
                   31  |   .0251439   .0204188     1.23   0.218    -.0148792     .065167
                   32  |    .035954   .0210307     1.71   0.087    -.0052685    .0771765
                   33  |   .0324747   .0217226     1.49   0.135    -.0101039    .0750534
                   34  |   .0325689   .0227959     1.43   0.153    -.0121136    .0772515
                   35  |      .0432   .0237626     1.82   0.069    -.0033773    .0897773
                   36  |   .0435486   .0251405     1.73   0.083    -.0057296    .0928268
                   37  |     .03689   .0263836     1.40   0.162    -.0148248    .0886048
                   38  |   .0365913   .0275624     1.33   0.184     -.017434    .0906166
                   39  |   .0407901   .0290863     1.40   0.161    -.0162224    .0978025
                   40  |   .0522838   .0303467     1.72   0.085     -.007199    .1117666
                   41  |    .068103   .0317562     2.14   0.032     .0058572    .1303488
                   42  |   .0792095   .0332046     2.39   0.017     .0141248    .1442942
                   43  |   .0792218   .0348395     2.27   0.023     .0109325     .147511
                   44  |   .0978638   .0365206     2.68   0.007     .0262794    .1694482
                   45  |   .1077543   .0380561     2.83   0.005     .0331602    .1823485
                   46  |    .107871   .0396611     2.72   0.007     .0301308    .1856112
                   47  |   .1194914   .0408743     2.92   0.003     .0393732    .1996096
                   48  |    .103066   .0419616     2.46   0.014     .0208166    .1853153
                   49  |  -.1736155   .0435555    -3.99   0.000    -.2589891   -.0882419
                   50  |  -.2222647   .0451713    -4.92   0.000    -.3108054    -.133724
                       |
               age_cat |
                    1  |   .0440269   .0059876     7.35   0.000     .0322905    .0557632
                    2  |   .0631293   .0070835     8.91   0.000     .0492448    .0770137
                    3  |   .0803423   .0083237     9.65   0.000     .0640269    .0966577
                    4  |   .1030172   .0097439    10.57   0.000     .0839181    .1221163
                    5  |   .1208185    .011228    10.76   0.000     .0988103    .1428267
                    6  |   .1314122   .0128511    10.23   0.000     .1062226    .1566019
                    7  |   .1393114   .0144913     9.61   0.000     .1109068     .167716
                    8  |    .154754   .0161767     9.57   0.000      .123046    .1864621
                    9  |   .1557411   .0178434     8.73   0.000     .1207662    .1907161
                   10  |   .1604517   .0195327     8.21   0.000     .1221655    .1987379
                   11  |   .1685989   .0212052     7.95   0.000     .1270343    .2101636
                   12  |   .1707342   .0228785     7.46   0.000     .1258899    .2155786
                   13  |   .1808797   .0246343     7.34   0.000     .1325937    .2291657
                   14  |   .1899069   .0264115     7.19   0.000     .1381373    .2416764
                   15  |   .1974542   .0280914     7.03   0.000     .1423919    .2525164
                   16  |   .2019997   .0298176     6.77   0.000      .143554    .2604454
                   17  |   .2066087   .0314875     6.56   0.000     .1448897    .2683277
                   18  |   .2133712   .0333705     6.39   0.000     .1479613    .2787811
                   19  |   .2044125   .0352667     5.80   0.000     .1352859    .2735392
                   20  |   .2140498     .03834     5.58   0.000     .1388992    .2892004
                   25  |   .2303224   .0442119     5.21   0.000     .1436622    .3169826
                   30  |     .23317   .0622302     3.75   0.000     .1111919    .3551481
                   40  |   .2178404   .0693936     3.14   0.002     .0818211    .3538596
                   50  |   .1570482   .0729978     2.15   0.031     .0139643    .3001321
                       |
                 _cons |   .1853119    .013951    13.28   0.000     .1579664    .2126573
-----------------------+----------------------------------------------------------------
               sigma_u |  .37715206
               sigma_e |   .2850532
                   rho |  .63643988   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_slow + during_expat_H_slow = 0

       F(  1, 16123) =    1.10
            Prob > F =    0.2935

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0497479720581461
key: p_value
value: .2934730658980755

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.0497                                         min =          1
     between = 0.1064                                         avg =        8.7
     overall = 0.0720                                         max =         25

                                                F(82,16123)       =      27.70
corr(u_i, Xb)  = 0.1262                         Prob > F          =     0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
              exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0213105   .0125831     1.69   0.090    -.0033538    .0459748
       during_domestic |   .0088383   .0053615     1.65   0.099    -.0016707    .0193474
        after_domestic |  -.0048461   .0086999    -0.56   0.578    -.0218989    .0122068
          during_expat |   .0264296   .0166207     1.59   0.112    -.0061487    .0590079
           after_expat |   .0008811   .0226875     0.04   0.969    -.0435888    .0453511
during_domestic_H_slow |  -.0225363    .006847    -3.29   0.001    -.0359572   -.0091154
 after_domestic_H_slow |  -.0280183   .0111587    -2.51   0.012    -.0498907   -.0061459
   during_expat_H_slow |   .0046848   .0252672     0.19   0.853    -.0448417    .0542113
    after_expat_H_slow |   .0289152   .0343458     0.84   0.400    -.0384064    .0962368
                       |
              ind_year |
                    2  |   -.013818   .0091473    -1.51   0.131    -.0317477    .0041116
                    3  |  -.0277125   .0112645    -2.46   0.014    -.0497922   -.0056327
                    4  |  -.0359965   .0121626    -2.96   0.003    -.0598366   -.0121564
                    5  |  -.0252802     .01371    -1.84   0.065    -.0521533    .0015929
                    6  |  -.0326492    .014945    -2.18   0.029     -.061943   -.0033554
                    7  |  -.0365446   .0161808    -2.26   0.024    -.0682608   -.0048283
                    8  |  -.0463794   .0174825    -2.65   0.008    -.0806471   -.0121116
                    9  |  -.0495552   .0190248    -2.60   0.009     -.086846   -.0122644
                   10  |  -.0491804   .0203991    -2.41   0.016     -.089165   -.0091958
                   11  |   -.055309   .0219164    -2.52   0.012    -.0982676   -.0123503
                   12  |  -.0563681   .0233543    -2.41   0.016    -.1021451   -.0105911
                   13  |  -.0509765   .0249774    -2.04   0.041     -.099935    -.002018
                   14  |  -.0422775   .0266192    -1.59   0.112    -.0944542    .0098992
                   15  |  -.0323362   .0281756    -1.15   0.251    -.0875635     .022891
                   16  |   -.017628   .0297276    -0.59   0.553    -.0758975    .0406414
                   17  |  -.0037027   .0313779    -0.12   0.906    -.0652069    .0578016
                   18  |    .000469   .0331001     0.01   0.989    -.0644108    .0653488
                   19  |   .0060121   .0347136     0.17   0.863    -.0620305    .0740546
                   20  |   .0118832   .0362257     0.33   0.743    -.0591233    .0828897
                   21  |   .0078145   .0376871     0.21   0.836    -.0660564    .0816854
                   22  |    .014055   .0390464     0.36   0.719    -.0624804    .0905904
                   23  |   .0074244   .0404353     0.18   0.854    -.0718332    .0866821
                   24  |  -.0976002   .0418886    -2.33   0.020    -.1797066   -.0154938
                   25  |  -.1307987   .0434935    -3.01   0.003    -.2160508   -.0455467
                   26  |  -.0149279   .0229428    -0.65   0.515    -.0598983    .0300425
                   27  |  -.0108808   .0209077    -0.52   0.603    -.0518621    .0301006
                   28  |   .0125089   .0203795     0.61   0.539    -.0274372    .0524551
                   29  |   .0130167   .0201911     0.64   0.519    -.0265601    .0525935
                   30  |   .0328923   .0202088     1.63   0.104    -.0067192    .0725037
                   31  |   .0251439   .0204188     1.23   0.218    -.0148792     .065167
                   32  |    .035954   .0210307     1.71   0.087    -.0052685    .0771765
                   33  |   .0324747   .0217226     1.49   0.135    -.0101039    .0750534
                   34  |   .0325689   .0227959     1.43   0.153    -.0121136    .0772515
                   35  |      .0432   .0237626     1.82   0.069    -.0033773    .0897773
                   36  |   .0435486   .0251405     1.73   0.083    -.0057296    .0928268
                   37  |     .03689   .0263836     1.40   0.162    -.0148248    .0886048
                   38  |   .0365913   .0275624     1.33   0.184     -.017434    .0906166
                   39  |   .0407901   .0290863     1.40   0.161    -.0162224    .0978025
                   40  |   .0522838   .0303467     1.72   0.085     -.007199    .1117666
                   41  |    .068103   .0317562     2.14   0.032     .0058572    .1303488
                   42  |   .0792095   .0332046     2.39   0.017     .0141248    .1442942
                   43  |   .0792218   .0348395     2.27   0.023     .0109325     .147511
                   44  |   .0978638   .0365206     2.68   0.007     .0262794    .1694482
                   45  |   .1077543   .0380561     2.83   0.005     .0331602    .1823485
                   46  |    .107871   .0396611     2.72   0.007     .0301308    .1856112
                   47  |   .1194914   .0408743     2.92   0.003     .0393732    .1996096
                   48  |    .103066   .0419616     2.46   0.014     .0208166    .1853153
                   49  |  -.1736155   .0435555    -3.99   0.000    -.2589891   -.0882419
                   50  |  -.2222647   .0451713    -4.92   0.000    -.3108054    -.133724
                       |
               age_cat |
                    1  |   .0440269   .0059876     7.35   0.000     .0322905    .0557632
                    2  |   .0631293   .0070835     8.91   0.000     .0492448    .0770137
                    3  |   .0803423   .0083237     9.65   0.000     .0640269    .0966577
                    4  |   .1030172   .0097439    10.57   0.000     .0839181    .1221163
                    5  |   .1208185    .011228    10.76   0.000     .0988103    .1428267
                    6  |   .1314122   .0128511    10.23   0.000     .1062226    .1566019
                    7  |   .1393114   .0144913     9.61   0.000     .1109068     .167716
                    8  |    .154754   .0161767     9.57   0.000      .123046    .1864621
                    9  |   .1557411   .0178434     8.73   0.000     .1207662    .1907161
                   10  |   .1604517   .0195327     8.21   0.000     .1221655    .1987379
                   11  |   .1685989   .0212052     7.95   0.000     .1270343    .2101636
                   12  |   .1707342   .0228785     7.46   0.000     .1258899    .2155786
                   13  |   .1808797   .0246343     7.34   0.000     .1325937    .2291657
                   14  |   .1899069   .0264115     7.19   0.000     .1381373    .2416764
                   15  |   .1974542   .0280914     7.03   0.000     .1423919    .2525164
                   16  |   .2019997   .0298176     6.77   0.000      .143554    .2604454
                   17  |   .2066087   .0314875     6.56   0.000     .1448897    .2683277
                   18  |   .2133712   .0333705     6.39   0.000     .1479613    .2787811
                   19  |   .2044125   .0352667     5.80   0.000     .1352859    .2735392
                   20  |   .2140498     .03834     5.58   0.000     .1388992    .2892004
                   25  |   .2303224   .0442119     5.21   0.000     .1436622    .3169826
                   30  |     .23317   .0622302     3.75   0.000     .1111919    .3551481
                   40  |   .2178404   .0693936     3.14   0.002     .0818211    .3538596
                   50  |   .1570482   .0729978     2.15   0.031     .0139643    .3001321
                       |
                 _cons |   .1853119    .013951    13.28   0.000     .1579664    .2126573
-----------------------+----------------------------------------------------------------
               sigma_u |  .37715206
               sigma_e |   .2850532
                   rho |  .63643988   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.0497                         Obs per group: min =         1
       between = 0.1014                                        avg =       8.7
       overall = 0.0697                                        max =        25

                                                F(82,16123)        =     27.65
corr(u_i, Xb)  = 0.1175                         Prob > F           =    0.0000

                                           (Std. Err. adjusted for 16,124 clusters in id)
-----------------------------------------------------------------------------------------
                        |               Robust
               exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                foreign |   .0219305   .0125789     1.74   0.081    -.0027256    .0465866
        during_domestic |  -.0061393    .003747    -1.64   0.101    -.0134839    .0012052
         after_domestic |  -.0115391   .0063869    -1.81   0.071     -.024058    .0009799
           during_expat |   .0295193   .0140713     2.10   0.036     .0019379    .0571007
            after_expat |   .0256299   .0214333     1.20   0.232    -.0163818    .0676415
during_domestic_H_early |   .0043856   .0090209     0.49   0.627    -.0132964    .0220676
 after_domestic_H_early |  -.0370205   .0126673    -2.92   0.003    -.0618497   -.0121912
   during_expat_H_early |  -.0057241     .03091    -0.19   0.853    -.0663111    .0548628
    after_expat_H_early |  -.0229006   .0382532    -0.60   0.549     -.097881    .0520798
                        |
               ind_year |
                     2  |  -.0141817   .0091488    -1.55   0.121    -.0321143    .0037509
                     3  |  -.0282921   .0112605    -2.51   0.012    -.0503639   -.0062203
                     4  |  -.0368154   .0121449    -3.03   0.002    -.0606208     -.01301
                     5  |   -.026293   .0136816    -1.92   0.055    -.0531105    .0005244
                     6  |  -.0338988   .0149138    -2.27   0.023    -.0631316   -.0046661
                     7  |  -.0379853   .0161436    -2.35   0.019    -.0696284   -.0063421
                     8  |  -.0479784    .017441    -2.75   0.006    -.0821647   -.0137922
                     9  |  -.0512031   .0189657    -2.70   0.007     -.088378   -.0140282
                    10  |  -.0507191   .0203445    -2.49   0.013    -.0905965   -.0108416
                    11  |  -.0569961    .021841    -2.61   0.009    -.0998069   -.0141852
                    12  |  -.0582466   .0232686    -2.50   0.012    -.1038556   -.0126376
                    13  |  -.0530505   .0248805    -2.13   0.033     -.101819    -.004282
                    14  |  -.0447204   .0264961    -1.69   0.091    -.0966557    .0072149
                    15  |  -.0351931   .0280393    -1.26   0.209    -.0901532     .019767
                    16  |  -.0208966    .029574    -0.71   0.480     -.078865    .0370718
                    17  |  -.0074846   .0312041    -0.24   0.810    -.0686481    .0536789
                    18  |   -.003713   .0329081    -0.11   0.910    -.0682165    .0607906
                    19  |   .0013977   .0344965     0.04   0.968    -.0662193    .0690148
                    20  |   .0068788   .0359961     0.19   0.848    -.0636776    .0774352
                    21  |   .0023321   .0374447     0.06   0.950    -.0710637    .0757278
                    22  |   .0081377   .0387884     0.21   0.834    -.0678919    .0841674
                    23  |   .0011559   .0401678     0.03   0.977    -.0775775    .0798892
                    24  |  -.1042371   .0416097    -2.51   0.012    -.1857968   -.0226774
                    25  |  -.1376983   .0432075    -3.19   0.001    -.2223899   -.0530067
                    26  |  -.0153049   .0229429    -0.67   0.505    -.0602754    .0296657
                    27  |  -.0116814   .0209011    -0.56   0.576    -.0526499    .0292871
                    28  |   .0114476   .0203593     0.56   0.574    -.0284589    .0513541
                    29  |   .0118414   .0201662     0.59   0.557    -.0276866    .0513693
                    30  |   .0315372   .0201696     1.56   0.118    -.0079974    .0710719
                    31  |   .0235977   .0203807     1.16   0.247    -.0163507    .0635461
                    32  |   .0342104   .0209859     1.63   0.103    -.0069243    .0753451
                    33  |   .0305823   .0216772     1.41   0.158    -.0119075    .0730721
                    34  |   .0305869   .0227359     1.35   0.179     -.013978    .0751517
                    35  |   .0412478     .02369     1.74   0.082    -.0051871    .0876828
                    36  |   .0414236   .0250582     1.65   0.098    -.0076932    .0905404
                    37  |   .0345425    .026284     1.31   0.189    -.0169769     .086062
                    38  |   .0341307   .0274584     1.24   0.214    -.0196909    .0879523
                    39  |   .0381211   .0289676     1.32   0.188    -.0186586    .0949007
                    40  |   .0492205   .0302019     1.63   0.103    -.0099786    .1084197
                    41  |   .0647761   .0315914     2.05   0.040     .0028534    .1266988
                    42  |   .0755496   .0330191     2.29   0.022     .0108285    .1402708
                    43  |   .0752435     .03465     2.17   0.030     .0073257    .1431613
                    44  |   .0935212   .0363129     2.58   0.010     .0223439    .1646984
                    45  |   .1030911    .037836     2.72   0.006     .0289283    .1772539
                    46  |   .1028882   .0394329     2.61   0.009     .0255955     .180181
                    47  |   .1141551   .0406459     2.81   0.005     .0344847    .1938256
                    48  |   .0975014   .0417244     2.34   0.019      .015717    .1792857
                    49  |  -.1794305   .0433104    -4.14   0.000    -.2643236   -.0945374
                    50  |  -.2284078   .0449175    -5.09   0.000    -.3164511   -.1403645
                        |
                age_cat |
                     1  |   .0443189   .0059845     7.41   0.000     .0325886    .0560492
                     2  |    .063798   .0070713     9.02   0.000     .0499374    .0776586
                     3  |   .0813406   .0082999     9.80   0.000     .0650719    .0976094
                     4  |    .104328   .0097057    10.75   0.000     .0853038    .1233522
                     5  |   .1224765   .0111745    10.96   0.000     .1005732    .1443798
                     6  |   .1333882   .0127834    10.43   0.000     .1083313    .1584451
                     7  |   .1415805   .0144103     9.82   0.000     .1133347    .1698263
                     8  |   .1572683   .0160817     9.78   0.000     .1257464    .1887902
                     9  |   .1585219   .0177335     8.94   0.000     .1237622    .1932815
                    10  |   .1634963   .0194182     8.42   0.000     .1254345    .2015581
                    11  |   .1719945   .0210769     8.16   0.000     .1306814    .2133076
                    12  |   .1744704   .0227481     7.67   0.000     .1298816    .2190592
                    13  |   .1848986   .0245002     7.55   0.000     .1368754    .2329218
                    14  |   .1942422   .0262563     7.40   0.000     .1427769    .2457074
                    15  |   .2020928   .0279262     7.24   0.000     .1473543    .2568313
                    16  |   .2069372   .0296379     6.98   0.000     .1488437    .2650308
                    17  |   .2118607   .0313052     6.77   0.000     .1504991    .2732223
                    18  |   .2188964   .0331762     6.60   0.000     .1538673    .2839255
                    19  |   .2102613   .0350642     6.00   0.000     .1415316     .278991
                    20  |    .220592   .0381176     5.79   0.000     .1458773    .2953067
                    25  |   .2377393   .0439818     5.41   0.000       .15153    .3239485
                    30  |   .2406811   .0621059     3.88   0.000     .1189467    .3624154
                    40  |   .2243577    .069294     3.24   0.001     .0885338    .3601816
                    50  |   .1639759   .0729501     2.25   0.025     .0209856    .3069661
                        |
                  _cons |   .1848623   .0139538    13.25   0.000     .1575113    .2122133
------------------------+----------------------------------------------------------------
                sigma_u |   .3774585
                sigma_e |  .28505446
                    rho |  .63681359   (fraction of variance due to u_i)
-----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_early + during_expat_H_early = 0

       F(  1, 16123) =    0.10
            Prob > F =    0.7506

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0497395211634767
key: p_value
value: .7505791571421235

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.0497                                         min =          1
     between = 0.1014                                         avg =        8.7
     overall = 0.0697                                         max =         25

                                                F(82,16123)       =      27.65
corr(u_i, Xb)  = 0.1175                         Prob > F          =     0.0000

                                           (Std. Err. adjusted for 16,124 clusters in id)
-----------------------------------------------------------------------------------------
                        |               Robust
               exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                foreign |   .0219305   .0125789     1.74   0.081    -.0027256    .0465866
        during_domestic |  -.0061393    .003747    -1.64   0.101    -.0134839    .0012052
         after_domestic |  -.0115391   .0063869    -1.81   0.071     -.024058    .0009799
           during_expat |   .0295193   .0140713     2.10   0.036     .0019379    .0571007
            after_expat |   .0256299   .0214333     1.20   0.232    -.0163818    .0676415
during_domestic_H_early |   .0043856   .0090209     0.49   0.627    -.0132964    .0220676
 after_domestic_H_early |  -.0370205   .0126673    -2.92   0.003    -.0618497   -.0121912
   during_expat_H_early |  -.0057241     .03091    -0.19   0.853    -.0663111    .0548628
    after_expat_H_early |  -.0229006   .0382532    -0.60   0.549     -.097881    .0520798
                        |
               ind_year |
                     2  |  -.0141817   .0091488    -1.55   0.121    -.0321143    .0037509
                     3  |  -.0282921   .0112605    -2.51   0.012    -.0503639   -.0062203
                     4  |  -.0368154   .0121449    -3.03   0.002    -.0606208     -.01301
                     5  |   -.026293   .0136816    -1.92   0.055    -.0531105    .0005244
                     6  |  -.0338988   .0149138    -2.27   0.023    -.0631316   -.0046661
                     7  |  -.0379853   .0161436    -2.35   0.019    -.0696284   -.0063421
                     8  |  -.0479784    .017441    -2.75   0.006    -.0821647   -.0137922
                     9  |  -.0512031   .0189657    -2.70   0.007     -.088378   -.0140282
                    10  |  -.0507191   .0203445    -2.49   0.013    -.0905965   -.0108416
                    11  |  -.0569961    .021841    -2.61   0.009    -.0998069   -.0141852
                    12  |  -.0582466   .0232686    -2.50   0.012    -.1038556   -.0126376
                    13  |  -.0530505   .0248805    -2.13   0.033     -.101819    -.004282
                    14  |  -.0447204   .0264961    -1.69   0.091    -.0966557    .0072149
                    15  |  -.0351931   .0280393    -1.26   0.209    -.0901532     .019767
                    16  |  -.0208966    .029574    -0.71   0.480     -.078865    .0370718
                    17  |  -.0074846   .0312041    -0.24   0.810    -.0686481    .0536789
                    18  |   -.003713   .0329081    -0.11   0.910    -.0682165    .0607906
                    19  |   .0013977   .0344965     0.04   0.968    -.0662193    .0690148
                    20  |   .0068788   .0359961     0.19   0.848    -.0636776    .0774352
                    21  |   .0023321   .0374447     0.06   0.950    -.0710637    .0757278
                    22  |   .0081377   .0387884     0.21   0.834    -.0678919    .0841674
                    23  |   .0011559   .0401678     0.03   0.977    -.0775775    .0798892
                    24  |  -.1042371   .0416097    -2.51   0.012    -.1857968   -.0226774
                    25  |  -.1376983   .0432075    -3.19   0.001    -.2223899   -.0530067
                    26  |  -.0153049   .0229429    -0.67   0.505    -.0602754    .0296657
                    27  |  -.0116814   .0209011    -0.56   0.576    -.0526499    .0292871
                    28  |   .0114476   .0203593     0.56   0.574    -.0284589    .0513541
                    29  |   .0118414   .0201662     0.59   0.557    -.0276866    .0513693
                    30  |   .0315372   .0201696     1.56   0.118    -.0079974    .0710719
                    31  |   .0235977   .0203807     1.16   0.247    -.0163507    .0635461
                    32  |   .0342104   .0209859     1.63   0.103    -.0069243    .0753451
                    33  |   .0305823   .0216772     1.41   0.158    -.0119075    .0730721
                    34  |   .0305869   .0227359     1.35   0.179     -.013978    .0751517
                    35  |   .0412478     .02369     1.74   0.082    -.0051871    .0876828
                    36  |   .0414236   .0250582     1.65   0.098    -.0076932    .0905404
                    37  |   .0345425    .026284     1.31   0.189    -.0169769     .086062
                    38  |   .0341307   .0274584     1.24   0.214    -.0196909    .0879523
                    39  |   .0381211   .0289676     1.32   0.188    -.0186586    .0949007
                    40  |   .0492205   .0302019     1.63   0.103    -.0099786    .1084197
                    41  |   .0647761   .0315914     2.05   0.040     .0028534    .1266988
                    42  |   .0755496   .0330191     2.29   0.022     .0108285    .1402708
                    43  |   .0752435     .03465     2.17   0.030     .0073257    .1431613
                    44  |   .0935212   .0363129     2.58   0.010     .0223439    .1646984
                    45  |   .1030911    .037836     2.72   0.006     .0289283    .1772539
                    46  |   .1028882   .0394329     2.61   0.009     .0255955     .180181
                    47  |   .1141551   .0406459     2.81   0.005     .0344847    .1938256
                    48  |   .0975014   .0417244     2.34   0.019      .015717    .1792857
                    49  |  -.1794305   .0433104    -4.14   0.000    -.2643236   -.0945374
                    50  |  -.2284078   .0449175    -5.09   0.000    -.3164511   -.1403645
                        |
                age_cat |
                     1  |   .0443189   .0059845     7.41   0.000     .0325886    .0560492
                     2  |    .063798   .0070713     9.02   0.000     .0499374    .0776586
                     3  |   .0813406   .0082999     9.80   0.000     .0650719    .0976094
                     4  |    .104328   .0097057    10.75   0.000     .0853038    .1233522
                     5  |   .1224765   .0111745    10.96   0.000     .1005732    .1443798
                     6  |   .1333882   .0127834    10.43   0.000     .1083313    .1584451
                     7  |   .1415805   .0144103     9.82   0.000     .1133347    .1698263
                     8  |   .1572683   .0160817     9.78   0.000     .1257464    .1887902
                     9  |   .1585219   .0177335     8.94   0.000     .1237622    .1932815
                    10  |   .1634963   .0194182     8.42   0.000     .1254345    .2015581
                    11  |   .1719945   .0210769     8.16   0.000     .1306814    .2133076
                    12  |   .1744704   .0227481     7.67   0.000     .1298816    .2190592
                    13  |   .1848986   .0245002     7.55   0.000     .1368754    .2329218
                    14  |   .1942422   .0262563     7.40   0.000     .1427769    .2457074
                    15  |   .2020928   .0279262     7.24   0.000     .1473543    .2568313
                    16  |   .2069372   .0296379     6.98   0.000     .1488437    .2650308
                    17  |   .2118607   .0313052     6.77   0.000     .1504991    .2732223
                    18  |   .2188964   .0331762     6.60   0.000     .1538673    .2839255
                    19  |   .2102613   .0350642     6.00   0.000     .1415316     .278991
                    20  |    .220592   .0381176     5.79   0.000     .1458773    .2953067
                    25  |   .2377393   .0439818     5.41   0.000       .15153    .3239485
                    30  |   .2406811   .0621059     3.88   0.000     .1189467    .3624154
                    40  |   .2243577    .069294     3.24   0.001     .0885338    .3601816
                    50  |   .1639759   .0729501     2.25   0.025     .0209856    .3069661
                        |
                  _cons |   .1848623   .0139538    13.25   0.000     .1575113    .2122133
------------------------+----------------------------------------------------------------
                sigma_u |   .3774585
                sigma_e |  .28505446
                    rho |  .63681359   (fraction of variance due to u_i)
-----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.0496                         Obs per group: min =         1
       between = 0.1039                                        avg =       8.7
       overall = 0.0705                                        max =        25

                                                F(82,16123)        =     27.62
corr(u_i, Xb)  = 0.1219                         Prob > F           =    0.0000

                                                (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------------
                             |               Robust
                    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------------+----------------------------------------------------------------
                     foreign |   .0215832   .0125854     1.71   0.086    -.0030856    .0462519
             during_domestic |  -.0058426   .0047667    -1.23   0.220    -.0151859    .0035007
              after_domestic |  -.0244535   .0070848    -3.45   0.001    -.0383405   -.0105665
                during_expat |   .0240948    .014204     1.70   0.090    -.0037467    .0519363
                 after_expat |   .0132298   .0184338     0.72   0.473    -.0229026    .0493622
during_domestic_H_young_firm |   .0025154   .0059689     0.42   0.673    -.0091844    .0142151
 after_domestic_H_young_firm |    .011252   .0096841     1.16   0.245    -.0077299     .030234
   during_expat_H_young_firm |   .0115036   .0178571     0.64   0.519    -.0234983    .0465056
    after_expat_H_young_firm |   .0132688   .0281797     0.47   0.638    -.0419666    .0685043
                             |
                    ind_year |
                          2  |   -.014084   .0091468    -1.54   0.124    -.0320127    .0038447
                          3  |  -.0281777   .0112654    -2.50   0.012    -.0502592   -.0060962
                          4  |  -.0366924   .0121628    -3.02   0.003    -.0605329   -.0128519
                          5  |  -.0262158   .0137109    -1.91   0.056    -.0530907    .0006591
                          6  |  -.0338277   .0149457    -2.26   0.024    -.0631229   -.0045325
                          7  |  -.0379368    .016185    -2.34   0.019    -.0696612   -.0062124
                          8  |  -.0479924   .0174895    -2.74   0.006    -.0822738    -.013711
                          9  |  -.0512784   .0190262    -2.70   0.007    -.0885718    -.013985
                         10  |  -.0510845   .0204004    -2.50   0.012    -.0910716   -.0110974
                         11  |  -.0574465   .0219144    -2.62   0.009    -.1004012   -.0144918
                         12  |  -.0587052   .0233466    -2.51   0.012    -.1044672   -.0129432
                         13  |  -.0535089   .0249735    -2.14   0.032    -.1024597   -.0045581
                         14  |  -.0450298    .026611    -1.69   0.091    -.0971904    .0071308
                         15  |  -.0353339   .0281653    -1.25   0.210     -.090541    .0198733
                         16  |  -.0208382   .0297192    -0.70   0.483    -.0790911    .0374148
                         17  |   -.007212    .031374    -0.23   0.818    -.0687085    .0542845
                         18  |  -.0032806   .0330968    -0.10   0.921     -.068154    .0615927
                         19  |   .0020699   .0347069     0.06   0.952    -.0659594    .0700993
                         20  |   .0078487   .0362253     0.22   0.828     -.063157    .0788543
                         21  |   .0035628   .0376913     0.09   0.925    -.0703164     .077442
                         22  |   .0096464    .039045     0.25   0.805    -.0668862     .086179
                         23  |   .0029107   .0404431     0.07   0.943    -.0763622    .0821836
                         24  |  -.1022718   .0418957    -2.44   0.015    -.1843921   -.0201515
                         25  |  -.1355729   .0435032    -3.12   0.002     -.220844   -.0503017
                         26  |  -.0150258   .0229415    -0.65   0.513    -.0599938    .0299422
                         27  |   -.011304   .0208999    -0.54   0.589    -.0522701    .0296622
                         28  |   .0117887   .0203627     0.58   0.563    -.0281245    .0517019
                         29  |   .0120706   .0201708     0.60   0.550    -.0274665    .0516076
                         30  |   .0317503   .0201795     1.57   0.116    -.0078038    .0713045
                         31  |   .0237172   .0203892     1.16   0.245    -.0162479    .0636822
                         32  |   .0342707   .0209943     1.63   0.103    -.0068803    .0754218
                         33  |   .0305846   .0216705     1.41   0.158     -.011892    .0730611
                         34  |   .0305298   .0227444     1.34   0.180    -.0140517    .0751113
                         35  |    .040963   .0237108     1.73   0.084    -.0055127    .0874387
                         36  |   .0410913   .0250873     1.64   0.101    -.0080826    .0902653
                         37  |   .0342641   .0263254     1.30   0.193    -.0173365    .0858648
                         38  |   .0338456   .0275254     1.23   0.219    -.0201073    .0877984
                         39  |   .0379164   .0290574     1.30   0.192    -.0190392    .0948721
                         40  |    .049189   .0303147     1.62   0.105    -.0102313    .1086092
                         41  |   .0648994   .0317255     2.05   0.041      .002714    .1270849
                         42  |   .0758349   .0331817     2.29   0.022      .010795    .1408748
                         43  |   .0756962   .0348148     2.17   0.030     .0074554     .143937
                         44  |   .0941795   .0365007     2.58   0.010     .0226341    .1657249
                         45  |   .1039854   .0380483     2.73   0.006     .0294064    .1785644
                         46  |   .1040283   .0396575     2.62   0.009     .0262952    .1817614
                         47  |   .1154894   .0408722     2.83   0.005     .0353754    .1956034
                         48  |   .0990159   .0419667     2.36   0.018     .0167566    .1812753
                         49  |  -.1777517   .0435782    -4.08   0.000    -.2631698   -.0923335
                         50  |  -.2265455   .0451919    -5.01   0.000    -.3151267   -.1379643
                             |
                     age_cat |
                          1  |   .0441826    .005996     7.37   0.000     .0324298    .0559354
                          2  |   .0634926    .007108     8.93   0.000     .0495602     .077425
                          3  |   .0808441    .008366     9.66   0.000     .0644458    .0972424
                          4  |   .1036351   .0098015    10.57   0.000      .084423    .1228471
                          5  |   .1215601   .0113071    10.75   0.000     .0993969    .1437233
                          6  |   .1322433   .0129476    10.21   0.000     .1068645    .1576221
                          7  |   .1402328    .014609     9.60   0.000     .1115975    .1688681
                          8  |   .1557511   .0163115     9.55   0.000     .1237786    .1877235
                          9  |   .1567805   .0180032     8.71   0.000     .1214923    .1920688
                         10  |   .1615361   .0197146     8.19   0.000     .1228932    .2001789
                         11  |   .1711606   .0211818     8.08   0.000     .1296419    .2126793
                         12  |   .1734703   .0228626     7.59   0.000      .128657    .2182836
                         13  |   .1838033   .0246207     7.47   0.000      .135544    .2320627
                         14  |   .1930218   .0263752     7.32   0.000     .1413235    .2447201
                         15  |    .200793   .0280494     7.16   0.000     .1458132    .2557729
                         16  |   .2055597   .0297632     6.91   0.000     .1472205    .2638988
                         17  |   .2103544   .0314334     6.69   0.000     .1487414    .2719674
                         18  |   .2173032    .033308     6.52   0.000     .1520158    .2825905
                         19  |   .2085267   .0351988     5.92   0.000     .1395331    .2775203
                         20  |   .2185806   .0382651     5.71   0.000     .1435767    .2935845
                         25  |    .235312   .0441489     5.33   0.000     .1487754    .3218487
                         30  |   .2380223   .0622352     3.82   0.000     .1160344    .3600103
                         40  |   .2222816   .0694215     3.20   0.001     .0862077    .3583554
                         50  |   .1617849   .0730421     2.21   0.027     .0186142    .3049555
                             |
                       _cons |   .1856535   .0139451    13.31   0.000     .1583196    .2129873
-----------------------------+----------------------------------------------------------------
                     sigma_u |   .3773369
                     sigma_e |  .28506858
                         rho |  .63664161   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_young_firm + during_expat_H_young_firm = 0

       F(  1, 16123) =    0.24
            Prob > F =    0.6215

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .0496453836126403
key: p_value
value: .621462367905646

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.0496                                         min =          1
     between = 0.1039                                         avg =        8.7
     overall = 0.0705                                         max =         25

                                                F(82,16123)       =      27.62
corr(u_i, Xb)  = 0.1219                         Prob > F          =     0.0000

                                                (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------------
                             |               Robust
                    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------------+----------------------------------------------------------------
                     foreign |   .0215832   .0125854     1.71   0.086    -.0030856    .0462519
             during_domestic |  -.0058426   .0047667    -1.23   0.220    -.0151859    .0035007
              after_domestic |  -.0244535   .0070848    -3.45   0.001    -.0383405   -.0105665
                during_expat |   .0240948    .014204     1.70   0.090    -.0037467    .0519363
                 after_expat |   .0132298   .0184338     0.72   0.473    -.0229026    .0493622
during_domestic_H_young_firm |   .0025154   .0059689     0.42   0.673    -.0091844    .0142151
 after_domestic_H_young_firm |    .011252   .0096841     1.16   0.245    -.0077299     .030234
   during_expat_H_young_firm |   .0115036   .0178571     0.64   0.519    -.0234983    .0465056
    after_expat_H_young_firm |   .0132688   .0281797     0.47   0.638    -.0419666    .0685043
                             |
                    ind_year |
                          2  |   -.014084   .0091468    -1.54   0.124    -.0320127    .0038447
                          3  |  -.0281777   .0112654    -2.50   0.012    -.0502592   -.0060962
                          4  |  -.0366924   .0121628    -3.02   0.003    -.0605329   -.0128519
                          5  |  -.0262158   .0137109    -1.91   0.056    -.0530907    .0006591
                          6  |  -.0338277   .0149457    -2.26   0.024    -.0631229   -.0045325
                          7  |  -.0379368    .016185    -2.34   0.019    -.0696612   -.0062124
                          8  |  -.0479924   .0174895    -2.74   0.006    -.0822738    -.013711
                          9  |  -.0512784   .0190262    -2.70   0.007    -.0885718    -.013985
                         10  |  -.0510845   .0204004    -2.50   0.012    -.0910716   -.0110974
                         11  |  -.0574465   .0219144    -2.62   0.009    -.1004012   -.0144918
                         12  |  -.0587052   .0233466    -2.51   0.012    -.1044672   -.0129432
                         13  |  -.0535089   .0249735    -2.14   0.032    -.1024597   -.0045581
                         14  |  -.0450298    .026611    -1.69   0.091    -.0971904    .0071308
                         15  |  -.0353339   .0281653    -1.25   0.210     -.090541    .0198733
                         16  |  -.0208382   .0297192    -0.70   0.483    -.0790911    .0374148
                         17  |   -.007212    .031374    -0.23   0.818    -.0687085    .0542845
                         18  |  -.0032806   .0330968    -0.10   0.921     -.068154    .0615927
                         19  |   .0020699   .0347069     0.06   0.952    -.0659594    .0700993
                         20  |   .0078487   .0362253     0.22   0.828     -.063157    .0788543
                         21  |   .0035628   .0376913     0.09   0.925    -.0703164     .077442
                         22  |   .0096464    .039045     0.25   0.805    -.0668862     .086179
                         23  |   .0029107   .0404431     0.07   0.943    -.0763622    .0821836
                         24  |  -.1022718   .0418957    -2.44   0.015    -.1843921   -.0201515
                         25  |  -.1355729   .0435032    -3.12   0.002     -.220844   -.0503017
                         26  |  -.0150258   .0229415    -0.65   0.513    -.0599938    .0299422
                         27  |   -.011304   .0208999    -0.54   0.589    -.0522701    .0296622
                         28  |   .0117887   .0203627     0.58   0.563    -.0281245    .0517019
                         29  |   .0120706   .0201708     0.60   0.550    -.0274665    .0516076
                         30  |   .0317503   .0201795     1.57   0.116    -.0078038    .0713045
                         31  |   .0237172   .0203892     1.16   0.245    -.0162479    .0636822
                         32  |   .0342707   .0209943     1.63   0.103    -.0068803    .0754218
                         33  |   .0305846   .0216705     1.41   0.158     -.011892    .0730611
                         34  |   .0305298   .0227444     1.34   0.180    -.0140517    .0751113
                         35  |    .040963   .0237108     1.73   0.084    -.0055127    .0874387
                         36  |   .0410913   .0250873     1.64   0.101    -.0080826    .0902653
                         37  |   .0342641   .0263254     1.30   0.193    -.0173365    .0858648
                         38  |   .0338456   .0275254     1.23   0.219    -.0201073    .0877984
                         39  |   .0379164   .0290574     1.30   0.192    -.0190392    .0948721
                         40  |    .049189   .0303147     1.62   0.105    -.0102313    .1086092
                         41  |   .0648994   .0317255     2.05   0.041      .002714    .1270849
                         42  |   .0758349   .0331817     2.29   0.022      .010795    .1408748
                         43  |   .0756962   .0348148     2.17   0.030     .0074554     .143937
                         44  |   .0941795   .0365007     2.58   0.010     .0226341    .1657249
                         45  |   .1039854   .0380483     2.73   0.006     .0294064    .1785644
                         46  |   .1040283   .0396575     2.62   0.009     .0262952    .1817614
                         47  |   .1154894   .0408722     2.83   0.005     .0353754    .1956034
                         48  |   .0990159   .0419667     2.36   0.018     .0167566    .1812753
                         49  |  -.1777517   .0435782    -4.08   0.000    -.2631698   -.0923335
                         50  |  -.2265455   .0451919    -5.01   0.000    -.3151267   -.1379643
                             |
                     age_cat |
                          1  |   .0441826    .005996     7.37   0.000     .0324298    .0559354
                          2  |   .0634926    .007108     8.93   0.000     .0495602     .077425
                          3  |   .0808441    .008366     9.66   0.000     .0644458    .0972424
                          4  |   .1036351   .0098015    10.57   0.000      .084423    .1228471
                          5  |   .1215601   .0113071    10.75   0.000     .0993969    .1437233
                          6  |   .1322433   .0129476    10.21   0.000     .1068645    .1576221
                          7  |   .1402328    .014609     9.60   0.000     .1115975    .1688681
                          8  |   .1557511   .0163115     9.55   0.000     .1237786    .1877235
                          9  |   .1567805   .0180032     8.71   0.000     .1214923    .1920688
                         10  |   .1615361   .0197146     8.19   0.000     .1228932    .2001789
                         11  |   .1711606   .0211818     8.08   0.000     .1296419    .2126793
                         12  |   .1734703   .0228626     7.59   0.000      .128657    .2182836
                         13  |   .1838033   .0246207     7.47   0.000      .135544    .2320627
                         14  |   .1930218   .0263752     7.32   0.000     .1413235    .2447201
                         15  |    .200793   .0280494     7.16   0.000     .1458132    .2557729
                         16  |   .2055597   .0297632     6.91   0.000     .1472205    .2638988
                         17  |   .2103544   .0314334     6.69   0.000     .1487414    .2719674
                         18  |   .2173032    .033308     6.52   0.000     .1520158    .2825905
                         19  |   .2085267   .0351988     5.92   0.000     .1395331    .2775203
                         20  |   .2185806   .0382651     5.71   0.000     .1435767    .2935845
                         25  |    .235312   .0441489     5.33   0.000     .1487754    .3218487
                         30  |   .2380223   .0622352     3.82   0.000     .1160344    .3600103
                         40  |   .2222816   .0694215     3.20   0.001     .0862077    .3583554
                         50  |   .1617849   .0730421     2.21   0.027     .0186142    .3049555
                             |
                       _cons |   .1856535   .0139451    13.31   0.000     .1583196    .2129873
-----------------------------+----------------------------------------------------------------
                     sigma_u |   .3773369
                     sigma_e |  .28506858
                         rho |  .63664161   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.2282                         Obs per group: min =         1
       between = 0.1280                                        avg =       8.7
       overall = 0.1244                                        max =        25

                                                F(82,16123)        =    120.27
corr(u_i, Xb)  = 0.0263                         Prob > F           =    0.0000

                                         (Std. Err. adjusted for 16,124 clusters in id)
---------------------------------------------------------------------------------------
                      |               Robust
                 lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------------+----------------------------------------------------------------
              foreign |   .0644736   .0263409     2.45   0.014     .0128424    .1161047
      during_domestic |    -.00406    .012069    -0.34   0.737    -.0277166    .0195966
       after_domestic |  -.0287009    .022853    -1.26   0.209    -.0734954    .0160936
         during_expat |     .17099   .0558127     3.06   0.002     .0615909    .2803891
          after_expat |   .1577268   .0715919     2.20   0.028     .0173987    .2980549
during_domestic_H_lnL |   .0835239   .0154065     5.42   0.000     .0533256    .1137223
 after_domestic_H_lnL |   .1705599   .0282712     6.03   0.000     .1151452    .2259745
   during_expat_H_lnL |   .0144556   .0642264     0.23   0.822    -.1114352    .1403465
    after_expat_H_lnL |    .171968   .0828151     2.08   0.038     .0096412    .3342948
                      |
             ind_year |
                   2  |   .0831855   .0194419     4.28   0.000     .0450772    .1212937
                   3  |      .2752   .0244901    11.24   0.000     .2271967    .3232033
                   4  |   .4771205   .0263772    18.09   0.000     .4254183    .5288226
                   5  |   .6290828   .0293008    21.47   0.000     .5716499    .6865156
                   6  |   .8121722   .0325855    24.92   0.000      .748301    .8760434
                   7  |   .9335598   .0352342    26.50   0.000     .8644968    1.002623
                   8  |   1.001654   .0379319    26.41   0.000     .9273031    1.076004
                   9  |   1.125273   .0406828    27.66   0.000      1.04553    1.205016
                  10  |   1.236059   .0439984    28.09   0.000     1.149818    1.322301
                  11  |   1.300538   .0470613    27.64   0.000     1.208293    1.392784
                  12  |   1.323997   .0503976    26.27   0.000     1.225212    1.422782
                  13  |   1.364079   .0535636    25.47   0.000     1.259088    1.469069
                  14  |   1.404339   .0567086    24.76   0.000     1.293183    1.515494
                  15  |   1.467173   .0603225    24.32   0.000     1.348934    1.585412
                  16  |   1.506018   .0630031    23.90   0.000     1.382524    1.629511
                  17  |    1.55723   .0663809    23.46   0.000     1.427116    1.687344
                  18  |   1.484507   .0696496    21.31   0.000     1.347986    1.621028
                  19  |   1.508829   .0729094    20.69   0.000     1.365918    1.651739
                  20  |   1.553923   .0758953    20.47   0.000      1.40516    1.702686
                  21  |   1.570187   .0787658    19.93   0.000     1.415798    1.724577
                  22  |   1.625331   .0814503    19.95   0.000     1.465679    1.784982
                  23  |   1.667028   .0840975    19.82   0.000     1.502187    1.831868
                  24  |   1.693106   .0870631    19.45   0.000     1.522453    1.863759
                  25  |   1.700401   .0898399    18.93   0.000     1.524304    1.876497
                  26  |  -.2290306   .0454453    -5.04   0.000    -.3181085   -.1399527
                  27  |  -.1028661   .0433328    -2.37   0.018    -.1878033   -.0179289
                  28  |   .0602156   .0418959     1.44   0.151    -.0219051    .1423363
                  29  |   .2766907   .0420298     6.58   0.000     .1943077    .3590737
                  30  |   .4551913   .0420168    10.83   0.000     .3728338    .5375488
                  31  |   .5970469     .04346    13.74   0.000     .5118604    .6822334
                  32  |   .7527636   .0448127    16.80   0.000     .6649257    .8406015
                  33  |   .8149727   .0463192    17.59   0.000     .7241818    .9057636
                  34  |    .958994   .0484543    19.79   0.000     .8640181     1.05397
                  35  |   1.051593   .0504299    20.85   0.000     .9527452    1.150442
                  36  |     1.0955   .0530964    20.63   0.000     .9914248    1.199574
                  37  |   1.157515   .0557879    20.75   0.000     1.048164    1.266865
                  38  |   1.234507   .0584578    21.12   0.000     1.119923    1.349091
                  39  |    1.27053   .0613051    20.72   0.000     1.150366    1.390695
                  40  |   1.362997   .0648303    21.02   0.000     1.235922    1.490071
                  41  |   1.435119   .0672208    21.35   0.000     1.303359    1.566879
                  42  |   1.511062   .0700485    21.57   0.000     1.373759    1.648364
                  43  |   1.486672   .0732536    20.29   0.000     1.343087    1.630257
                  44  |   1.517503   .0763763    19.87   0.000     1.367797    1.667209
                  45  |    1.58688   .0793113    20.01   0.000     1.431421    1.742339
                  46  |   1.586987   .0823237    19.28   0.000     1.425623     1.74835
                  47  |   1.612838   .0846305    19.06   0.000     1.446953    1.778723
                  48  |   1.675956   .0869802    19.27   0.000     1.505465    1.846447
                  49  |   1.673671   .0901884    18.56   0.000     1.496892    1.850451
                  50  |   1.717921    .092915    18.49   0.000     1.535798    1.900045
                      |
              age_cat |
                   1  |   .2876529    .016737    17.19   0.000     .2548466    .3204593
                   2  |   .3075827   .0188916    16.28   0.000     .2705531    .3446123
                   3  |   .2926547   .0211711    13.82   0.000     .2511569    .3341525
                   4  |   .2886073    .023654    12.20   0.000     .2422427    .3349718
                   5  |   .2860867   .0264464    10.82   0.000     .2342489    .3379246
                   6  |   .2727327   .0293996     9.28   0.000     .2151062    .3303592
                   7  |   .2855706   .0324187     8.81   0.000     .2220265    .3491148
                   8  |   .2750129   .0356376     7.72   0.000     .2051594    .3448665
                   9  |   .2735908   .0388091     7.05   0.000     .1975207    .3496608
                  10  |   .2648946   .0421274     6.29   0.000     .1823202    .3474689
                  11  |   .2704626   .0454931     5.95   0.000     .1812911    .3596341
                  12  |   .2668127   .0488418     5.46   0.000     .1710774    .3625481
                  13  |   .2605088   .0521388     5.00   0.000      .158311    .3627066
                  14  |   .2656055   .0555431     4.78   0.000     .1567349    .3744762
                  15  |   .2660967   .0589946     4.51   0.000     .1504608    .3817327
                  16  |   .2678424   .0624013     4.29   0.000     .1455289    .3901559
                  17  |   .2556232     .06601     3.87   0.000     .1262363    .3850102
                  18  |   .2594322    .069455     3.74   0.000     .1232927    .3955717
                  19  |   .2409788    .073239     3.29   0.001     .0974221    .3845354
                  20  |   .2166445   .0801374     2.70   0.007     .0595663    .3737227
                  25  |   .1791079   .0915883     1.96   0.051    -.0004153    .3586312
                  30  |   .1794104   .1213425     1.48   0.139    -.0584343    .4172551
                  40  |   .2148946   .1357106     1.58   0.113    -.0511133    .4809025
                  50  |   .2071944   .1491674     1.39   0.165    -.0851903    .4995792
                      |
                _cons |   7.426692   .0326745   227.29   0.000     7.362647    7.490738
----------------------+----------------------------------------------------------------
              sigma_u |  1.2172581
              sigma_e |   .5566484
                  rho |  .82704743   (fraction of variance due to u_i)
---------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnL + during_expat_H_lnL = 0

       F(  1, 16123) =    1.12
            Prob > F =    0.2907

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2281911301941631
key: p_value
value: .2906687227426777

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.2282                                         min =          1
     between = 0.1280                                         avg =        8.7
     overall = 0.1244                                         max =         25

                                                F(82,16123)       =     120.27
corr(u_i, Xb)  = 0.0263                         Prob > F          =     0.0000

                                         (Std. Err. adjusted for 16,124 clusters in id)
---------------------------------------------------------------------------------------
                      |               Robust
                 lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
----------------------+----------------------------------------------------------------
              foreign |   .0644736   .0263409     2.45   0.014     .0128424    .1161047
      during_domestic |    -.00406    .012069    -0.34   0.737    -.0277166    .0195966
       after_domestic |  -.0287009    .022853    -1.26   0.209    -.0734954    .0160936
         during_expat |     .17099   .0558127     3.06   0.002     .0615909    .2803891
          after_expat |   .1577268   .0715919     2.20   0.028     .0173987    .2980549
during_domestic_H_lnL |   .0835239   .0154065     5.42   0.000     .0533256    .1137223
 after_domestic_H_lnL |   .1705599   .0282712     6.03   0.000     .1151452    .2259745
   during_expat_H_lnL |   .0144556   .0642264     0.23   0.822    -.1114352    .1403465
    after_expat_H_lnL |    .171968   .0828151     2.08   0.038     .0096412    .3342948
                      |
             ind_year |
                   2  |   .0831855   .0194419     4.28   0.000     .0450772    .1212937
                   3  |      .2752   .0244901    11.24   0.000     .2271967    .3232033
                   4  |   .4771205   .0263772    18.09   0.000     .4254183    .5288226
                   5  |   .6290828   .0293008    21.47   0.000     .5716499    .6865156
                   6  |   .8121722   .0325855    24.92   0.000      .748301    .8760434
                   7  |   .9335598   .0352342    26.50   0.000     .8644968    1.002623
                   8  |   1.001654   .0379319    26.41   0.000     .9273031    1.076004
                   9  |   1.125273   .0406828    27.66   0.000      1.04553    1.205016
                  10  |   1.236059   .0439984    28.09   0.000     1.149818    1.322301
                  11  |   1.300538   .0470613    27.64   0.000     1.208293    1.392784
                  12  |   1.323997   .0503976    26.27   0.000     1.225212    1.422782
                  13  |   1.364079   .0535636    25.47   0.000     1.259088    1.469069
                  14  |   1.404339   .0567086    24.76   0.000     1.293183    1.515494
                  15  |   1.467173   .0603225    24.32   0.000     1.348934    1.585412
                  16  |   1.506018   .0630031    23.90   0.000     1.382524    1.629511
                  17  |    1.55723   .0663809    23.46   0.000     1.427116    1.687344
                  18  |   1.484507   .0696496    21.31   0.000     1.347986    1.621028
                  19  |   1.508829   .0729094    20.69   0.000     1.365918    1.651739
                  20  |   1.553923   .0758953    20.47   0.000      1.40516    1.702686
                  21  |   1.570187   .0787658    19.93   0.000     1.415798    1.724577
                  22  |   1.625331   .0814503    19.95   0.000     1.465679    1.784982
                  23  |   1.667028   .0840975    19.82   0.000     1.502187    1.831868
                  24  |   1.693106   .0870631    19.45   0.000     1.522453    1.863759
                  25  |   1.700401   .0898399    18.93   0.000     1.524304    1.876497
                  26  |  -.2290306   .0454453    -5.04   0.000    -.3181085   -.1399527
                  27  |  -.1028661   .0433328    -2.37   0.018    -.1878033   -.0179289
                  28  |   .0602156   .0418959     1.44   0.151    -.0219051    .1423363
                  29  |   .2766907   .0420298     6.58   0.000     .1943077    .3590737
                  30  |   .4551913   .0420168    10.83   0.000     .3728338    .5375488
                  31  |   .5970469     .04346    13.74   0.000     .5118604    .6822334
                  32  |   .7527636   .0448127    16.80   0.000     .6649257    .8406015
                  33  |   .8149727   .0463192    17.59   0.000     .7241818    .9057636
                  34  |    .958994   .0484543    19.79   0.000     .8640181     1.05397
                  35  |   1.051593   .0504299    20.85   0.000     .9527452    1.150442
                  36  |     1.0955   .0530964    20.63   0.000     .9914248    1.199574
                  37  |   1.157515   .0557879    20.75   0.000     1.048164    1.266865
                  38  |   1.234507   .0584578    21.12   0.000     1.119923    1.349091
                  39  |    1.27053   .0613051    20.72   0.000     1.150366    1.390695
                  40  |   1.362997   .0648303    21.02   0.000     1.235922    1.490071
                  41  |   1.435119   .0672208    21.35   0.000     1.303359    1.566879
                  42  |   1.511062   .0700485    21.57   0.000     1.373759    1.648364
                  43  |   1.486672   .0732536    20.29   0.000     1.343087    1.630257
                  44  |   1.517503   .0763763    19.87   0.000     1.367797    1.667209
                  45  |    1.58688   .0793113    20.01   0.000     1.431421    1.742339
                  46  |   1.586987   .0823237    19.28   0.000     1.425623     1.74835
                  47  |   1.612838   .0846305    19.06   0.000     1.446953    1.778723
                  48  |   1.675956   .0869802    19.27   0.000     1.505465    1.846447
                  49  |   1.673671   .0901884    18.56   0.000     1.496892    1.850451
                  50  |   1.717921    .092915    18.49   0.000     1.535798    1.900045
                      |
              age_cat |
                   1  |   .2876529    .016737    17.19   0.000     .2548466    .3204593
                   2  |   .3075827   .0188916    16.28   0.000     .2705531    .3446123
                   3  |   .2926547   .0211711    13.82   0.000     .2511569    .3341525
                   4  |   .2886073    .023654    12.20   0.000     .2422427    .3349718
                   5  |   .2860867   .0264464    10.82   0.000     .2342489    .3379246
                   6  |   .2727327   .0293996     9.28   0.000     .2151062    .3303592
                   7  |   .2855706   .0324187     8.81   0.000     .2220265    .3491148
                   8  |   .2750129   .0356376     7.72   0.000     .2051594    .3448665
                   9  |   .2735908   .0388091     7.05   0.000     .1975207    .3496608
                  10  |   .2648946   .0421274     6.29   0.000     .1823202    .3474689
                  11  |   .2704626   .0454931     5.95   0.000     .1812911    .3596341
                  12  |   .2668127   .0488418     5.46   0.000     .1710774    .3625481
                  13  |   .2605088   .0521388     5.00   0.000      .158311    .3627066
                  14  |   .2656055   .0555431     4.78   0.000     .1567349    .3744762
                  15  |   .2660967   .0589946     4.51   0.000     .1504608    .3817327
                  16  |   .2678424   .0624013     4.29   0.000     .1455289    .3901559
                  17  |   .2556232     .06601     3.87   0.000     .1262363    .3850102
                  18  |   .2594322    .069455     3.74   0.000     .1232927    .3955717
                  19  |   .2409788    .073239     3.29   0.001     .0974221    .3845354
                  20  |   .2166445   .0801374     2.70   0.007     .0595663    .3737227
                  25  |   .1791079   .0915883     1.96   0.051    -.0004153    .3586312
                  30  |   .1794104   .1213425     1.48   0.139    -.0584343    .4172551
                  40  |   .2148946   .1357106     1.58   0.113    -.0511133    .4809025
                  50  |   .2071944   .1491674     1.39   0.165    -.0851903    .4995792
                      |
                _cons |   7.426692   .0326745   227.29   0.000     7.362647    7.490738
----------------------+----------------------------------------------------------------
              sigma_u |  1.2172581
              sigma_e |   .5566484
                  rho |  .82704743   (fraction of variance due to u_i)
---------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.2277                         Obs per group: min =         1
       between = 0.1223                                        avg =       8.7
       overall = 0.1213                                        max =        25

                                                F(82,16123)        =    117.04
corr(u_i, Xb)  = 0.0170                         Prob > F           =    0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0656203   .0263823     2.49   0.013     .0139082    .1173325
       during_domestic |   .0534432   .0121432     4.40   0.000     .0296412    .0772452
        after_domestic |   .1084258   .0217659     4.98   0.000     .0657622    .1510895
          during_expat |   .1783693    .051674     3.45   0.001     .0770826    .2796561
           after_expat |   .2729624   .0644152     4.24   0.000     .1467014    .3992234
during_domestic_H_lnKL |  -.0272596   .0156631    -1.74   0.082     -.057961    .0034418
 after_domestic_H_lnKL |  -.0634023   .0277137    -2.29   0.022    -.1177242   -.0090804
   during_expat_H_lnKL |   .0022957   .0606048     0.04   0.970    -.1164964    .1210879
    after_expat_H_lnKL |   .0033321   .0774646     0.04   0.966    -.1485072    .1551714
                       |
              ind_year |
                    2  |   .0860218   .0194468     4.42   0.000     .0479039    .1241397
                    3  |    .280851   .0244879    11.47   0.000     .2328519    .3288501
                    4  |   .4856734   .0263591    18.43   0.000     .4340065    .5373402
                    5  |   .6404419   .0292705    21.88   0.000     .5830684    .6978154
                    6  |   .8260425   .0325439    25.38   0.000     .7622529    .8898322
                    7  |   .9501071   .0351885    27.00   0.000     .8811337     1.01908
                    8  |     1.0204   .0378812    26.94   0.000     .9461486    1.094651
                    9  |   1.146271   .0406173    28.22   0.000     1.066657    1.225885
                   10  |   1.259397   .0439098    28.68   0.000     1.173329    1.345465
                   11  |   1.326438    .046952    28.25   0.000     1.234407    1.418469
                   12  |   1.352271   .0502654    26.90   0.000     1.253745    1.450796
                   13  |   1.394556   .0534094    26.11   0.000     1.289867    1.499244
                   14  |   1.437038   .0565417    25.42   0.000      1.32621    1.547866
                   15  |   1.502498   .0601248    24.99   0.000     1.384647    1.620349
                   16  |   1.543554   .0628135    24.57   0.000     1.420433    1.666675
                   17  |   1.597757   .0661747    24.14   0.000     1.468047    1.727467
                   18  |   1.527662   .0694382    22.00   0.000     1.391555    1.663768
                   19  |   1.554526   .0727034    21.38   0.000     1.412019    1.697033
                   20  |    1.60205    .075663    21.17   0.000     1.453742    1.750358
                   21  |   1.620422   .0785402    20.63   0.000     1.466474    1.774369
                   22  |   1.677682   .0812104    20.66   0.000     1.518501    1.836864
                   23  |   1.721166    .083889    20.52   0.000     1.556734    1.885598
                   24  |    1.74952    .086872    20.14   0.000     1.579241    1.919798
                   25  |   1.759247   .0896541    19.62   0.000     1.583515    1.934979
                   26  |  -.2306367   .0454884    -5.07   0.000     -.319799   -.1414743
                   27  |  -.1016303   .0433709    -2.34   0.019    -.1866421   -.0166184
                   28  |   .0641281   .0419255     1.53   0.126    -.0180505    .1463068
                   29  |   .2838837   .0420452     6.75   0.000     .2014705     .366297
                   30  |   .4650054    .042008    11.07   0.000     .3826651    .5473456
                   31  |   .6097012   .0434408    14.04   0.000     .5245524      .69485
                   32  |    .768076   .0447687    17.16   0.000     .6803245    .8558276
                   33  |   .8327026   .0462518    18.00   0.000     .7420439    .9233613
                   34  |   .9788216    .048366    20.24   0.000     .8840189    1.073624
                   35  |   1.073639   .0503265    21.33   0.000     .9749938    1.172285
                   36  |   1.120212   .0529691    21.15   0.000     1.016387    1.224037
                   37  |   1.184872   .0556399    21.30   0.000     1.075811    1.293932
                   38  |   1.264549   .0582857    21.70   0.000     1.150303    1.378796
                   39  |   1.303304   .0611104    21.33   0.000     1.183521    1.423087
                   40  |   1.398141   .0646642    21.62   0.000     1.271392     1.52489
                   41  |   1.472573   .0670042    21.98   0.000     1.341237    1.603909
                   42  |   1.550614   .0698232    22.21   0.000     1.413752    1.687475
                   43  |   1.528411   .0730081    20.93   0.000     1.385307    1.671514
                   44  |   1.561525   .0761435    20.51   0.000     1.412275    1.710775
                   45  |   1.633016   .0790433    20.66   0.000     1.478082    1.787949
                   46  |   1.635003   .0820703    19.92   0.000     1.474136     1.79587
                   47  |   1.662346   .0843849    19.70   0.000     1.496942     1.82775
                   48  |     1.7276   .0867352    19.92   0.000     1.557589     1.89761
                   49  |   1.727244   .0899043    19.21   0.000     1.551022    1.903467
                   50  |   1.773884   .0926283    19.15   0.000     1.592322    1.955446
                       |
               age_cat |
                    1  |   .2842046    .016727    16.99   0.000     .2514178    .3169915
                    2  |   .3010938   .0188704    15.96   0.000     .2641057    .3380818
                    3  |   .2829943   .0211555    13.38   0.000     .2415271    .3244614
                    4  |   .2760605   .0236368    11.68   0.000     .2297297    .3223913
                    5  |    .270842   .0264281    10.25   0.000     .2190399    .3226441
                    6  |   .2546929   .0293765     8.67   0.000     .1971117    .3122742
                    7  |   .2649359   .0323715     8.18   0.000     .2014842    .3283876
                    8  |    .251826   .0355884     7.08   0.000     .1820689    .3215832
                    9  |   .2477438   .0387443     6.39   0.000     .1718006    .3236871
                   10  |   .2365078   .0420277     5.63   0.000     .1541288    .3188868
                   11  |   .2395419   .0453873     5.28   0.000     .1505778     .328506
                   12  |   .2334008   .0487176     4.79   0.000     .1379089    .3288928
                   13  |   .2248495   .0520187     4.32   0.000     .1228871    .3268119
                   14  |   .2274168   .0554045     4.10   0.000     .1188178    .3360158
                   15  |   .2257872   .0588257     3.84   0.000     .1104823    .3410921
                   16  |    .225139   .0622212     3.62   0.000     .1031786    .3470994
                   17  |   .2104031   .0658185     3.20   0.001     .0813915    .3394147
                   18  |    .211838   .0693031     3.06   0.002     .0759963    .3476798
                   19  |   .1913715   .0730696     2.62   0.009     .0481469    .3345961
                   20  |   .1619303   .0799531     2.03   0.043     .0052132    .3186473
                   25  |   .1184952   .0913868     1.30   0.195    -.0606331    .2976235
                   30  |   .1196466   .1213484     0.99   0.324    -.1182097    .3575029
                   40  |   .1588887   .1356624     1.17   0.242    -.1070247    .4248021
                   50  |    .153004   .1490656     1.03   0.305    -.1391811    .4451892
                       |
                 _cons |   7.422825   .0326526   227.33   0.000     7.358822    7.486828
-----------------------+----------------------------------------------------------------
               sigma_u |  1.2205751
               sigma_e |  .55682588
                   rho |  .82773366   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnKL + during_expat_H_lnKL = 0

       F(  1, 16123) =    0.23
            Prob > F =    0.6326

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2276988893842756
key: p_value
value: .6326266360866868

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.2277                                         min =          1
     between = 0.1223                                         avg =        8.7
     overall = 0.1213                                         max =         25

                                                F(82,16123)       =     117.04
corr(u_i, Xb)  = 0.0170                         Prob > F          =     0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0656203   .0263823     2.49   0.013     .0139082    .1173325
       during_domestic |   .0534432   .0121432     4.40   0.000     .0296412    .0772452
        after_domestic |   .1084258   .0217659     4.98   0.000     .0657622    .1510895
          during_expat |   .1783693    .051674     3.45   0.001     .0770826    .2796561
           after_expat |   .2729624   .0644152     4.24   0.000     .1467014    .3992234
during_domestic_H_lnKL |  -.0272596   .0156631    -1.74   0.082     -.057961    .0034418
 after_domestic_H_lnKL |  -.0634023   .0277137    -2.29   0.022    -.1177242   -.0090804
   during_expat_H_lnKL |   .0022957   .0606048     0.04   0.970    -.1164964    .1210879
    after_expat_H_lnKL |   .0033321   .0774646     0.04   0.966    -.1485072    .1551714
                       |
              ind_year |
                    2  |   .0860218   .0194468     4.42   0.000     .0479039    .1241397
                    3  |    .280851   .0244879    11.47   0.000     .2328519    .3288501
                    4  |   .4856734   .0263591    18.43   0.000     .4340065    .5373402
                    5  |   .6404419   .0292705    21.88   0.000     .5830684    .6978154
                    6  |   .8260425   .0325439    25.38   0.000     .7622529    .8898322
                    7  |   .9501071   .0351885    27.00   0.000     .8811337     1.01908
                    8  |     1.0204   .0378812    26.94   0.000     .9461486    1.094651
                    9  |   1.146271   .0406173    28.22   0.000     1.066657    1.225885
                   10  |   1.259397   .0439098    28.68   0.000     1.173329    1.345465
                   11  |   1.326438    .046952    28.25   0.000     1.234407    1.418469
                   12  |   1.352271   .0502654    26.90   0.000     1.253745    1.450796
                   13  |   1.394556   .0534094    26.11   0.000     1.289867    1.499244
                   14  |   1.437038   .0565417    25.42   0.000      1.32621    1.547866
                   15  |   1.502498   .0601248    24.99   0.000     1.384647    1.620349
                   16  |   1.543554   .0628135    24.57   0.000     1.420433    1.666675
                   17  |   1.597757   .0661747    24.14   0.000     1.468047    1.727467
                   18  |   1.527662   .0694382    22.00   0.000     1.391555    1.663768
                   19  |   1.554526   .0727034    21.38   0.000     1.412019    1.697033
                   20  |    1.60205    .075663    21.17   0.000     1.453742    1.750358
                   21  |   1.620422   .0785402    20.63   0.000     1.466474    1.774369
                   22  |   1.677682   .0812104    20.66   0.000     1.518501    1.836864
                   23  |   1.721166    .083889    20.52   0.000     1.556734    1.885598
                   24  |    1.74952    .086872    20.14   0.000     1.579241    1.919798
                   25  |   1.759247   .0896541    19.62   0.000     1.583515    1.934979
                   26  |  -.2306367   .0454884    -5.07   0.000     -.319799   -.1414743
                   27  |  -.1016303   .0433709    -2.34   0.019    -.1866421   -.0166184
                   28  |   .0641281   .0419255     1.53   0.126    -.0180505    .1463068
                   29  |   .2838837   .0420452     6.75   0.000     .2014705     .366297
                   30  |   .4650054    .042008    11.07   0.000     .3826651    .5473456
                   31  |   .6097012   .0434408    14.04   0.000     .5245524      .69485
                   32  |    .768076   .0447687    17.16   0.000     .6803245    .8558276
                   33  |   .8327026   .0462518    18.00   0.000     .7420439    .9233613
                   34  |   .9788216    .048366    20.24   0.000     .8840189    1.073624
                   35  |   1.073639   .0503265    21.33   0.000     .9749938    1.172285
                   36  |   1.120212   .0529691    21.15   0.000     1.016387    1.224037
                   37  |   1.184872   .0556399    21.30   0.000     1.075811    1.293932
                   38  |   1.264549   .0582857    21.70   0.000     1.150303    1.378796
                   39  |   1.303304   .0611104    21.33   0.000     1.183521    1.423087
                   40  |   1.398141   .0646642    21.62   0.000     1.271392     1.52489
                   41  |   1.472573   .0670042    21.98   0.000     1.341237    1.603909
                   42  |   1.550614   .0698232    22.21   0.000     1.413752    1.687475
                   43  |   1.528411   .0730081    20.93   0.000     1.385307    1.671514
                   44  |   1.561525   .0761435    20.51   0.000     1.412275    1.710775
                   45  |   1.633016   .0790433    20.66   0.000     1.478082    1.787949
                   46  |   1.635003   .0820703    19.92   0.000     1.474136     1.79587
                   47  |   1.662346   .0843849    19.70   0.000     1.496942     1.82775
                   48  |     1.7276   .0867352    19.92   0.000     1.557589     1.89761
                   49  |   1.727244   .0899043    19.21   0.000     1.551022    1.903467
                   50  |   1.773884   .0926283    19.15   0.000     1.592322    1.955446
                       |
               age_cat |
                    1  |   .2842046    .016727    16.99   0.000     .2514178    .3169915
                    2  |   .3010938   .0188704    15.96   0.000     .2641057    .3380818
                    3  |   .2829943   .0211555    13.38   0.000     .2415271    .3244614
                    4  |   .2760605   .0236368    11.68   0.000     .2297297    .3223913
                    5  |    .270842   .0264281    10.25   0.000     .2190399    .3226441
                    6  |   .2546929   .0293765     8.67   0.000     .1971117    .3122742
                    7  |   .2649359   .0323715     8.18   0.000     .2014842    .3283876
                    8  |    .251826   .0355884     7.08   0.000     .1820689    .3215832
                    9  |   .2477438   .0387443     6.39   0.000     .1718006    .3236871
                   10  |   .2365078   .0420277     5.63   0.000     .1541288    .3188868
                   11  |   .2395419   .0453873     5.28   0.000     .1505778     .328506
                   12  |   .2334008   .0487176     4.79   0.000     .1379089    .3288928
                   13  |   .2248495   .0520187     4.32   0.000     .1228871    .3268119
                   14  |   .2274168   .0554045     4.10   0.000     .1188178    .3360158
                   15  |   .2257872   .0588257     3.84   0.000     .1104823    .3410921
                   16  |    .225139   .0622212     3.62   0.000     .1031786    .3470994
                   17  |   .2104031   .0658185     3.20   0.001     .0813915    .3394147
                   18  |    .211838   .0693031     3.06   0.002     .0759963    .3476798
                   19  |   .1913715   .0730696     2.62   0.009     .0481469    .3345961
                   20  |   .1619303   .0799531     2.03   0.043     .0052132    .3186473
                   25  |   .1184952   .0913868     1.30   0.195    -.0606331    .2976235
                   30  |   .1196466   .1213484     0.99   0.324    -.1182097    .3575029
                   40  |   .1588887   .1356624     1.17   0.242    -.1070247    .4248021
                   50  |    .153004   .1490656     1.03   0.305    -.1391811    .4451892
                       |
                 _cons |   7.422825   .0326526   227.33   0.000     7.358822    7.486828
-----------------------+----------------------------------------------------------------
               sigma_u |  1.2205751
               sigma_e |  .55682588
                   rho |  .82773366   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.2294                         Obs per group: min =         1
       between = 0.1080                                        avg =       8.7
       overall = 0.1071                                        max =        25

                                                F(82,16123)        =    119.45
corr(u_i, Xb)  = -0.0104                        Prob > F           =    0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0634393   .0263079     2.41   0.016     .0118729    .1150057
       during_domestic |   .1409314   .0123682    11.39   0.000     .1166884    .1651744
        after_domestic |   .2183718   .0220534     9.90   0.000     .1751448    .2615989
          during_expat |   .3139694    .047183     6.65   0.000     .2214854    .4064534
           after_expat |   .4460152   .0584227     7.63   0.000     .3315002    .5605303
during_domestic_H_lnQL |  -.1794006   .0156915   -11.43   0.000    -.2101577   -.1486436
 after_domestic_H_lnQL |  -.2550048   .0276237    -9.23   0.000    -.3091504   -.2008592
   during_expat_H_lnQL |  -.2351521   .0575407    -4.09   0.000    -.3479383   -.1223659
    after_expat_H_lnQL |  -.2995761    .073557    -4.07   0.000     -.443756   -.1553961
                       |
              ind_year |
                    2  |   .0857007   .0194516     4.41   0.000     .0475734    .1238279
                    3  |   .2803483   .0244984    11.44   0.000     .2323288    .3283678
                    4  |   .4851328   .0263686    18.40   0.000     .4334473    .5368183
                    5  |   .6402832   .0292775    21.87   0.000     .5828961    .6976702
                    6  |    .825497   .0325643    25.35   0.000     .7616674    .8893267
                    7  |    .950113   .0352049    26.99   0.000     .8811075    1.019119
                    8  |   1.020838   .0379054    26.93   0.000      .946539    1.095137
                    9  |   1.146306   .0406553    28.20   0.000     1.066618    1.225995
                   10  |   1.259744   .0439591    28.66   0.000     1.173579    1.345909
                   11  |   1.327446   .0470106    28.24   0.000       1.2353    1.419592
                   12  |   1.353843   .0503334    26.90   0.000     1.255184    1.452503
                   13  |   1.396624   .0534856    26.11   0.000     1.291786    1.501461
                   14  |   1.440001   .0566212    25.43   0.000     1.329017    1.550985
                   15  |   1.506618    .060205    25.02   0.000      1.38861    1.624626
                   16  |   1.548497   .0629087    24.61   0.000     1.425189    1.671805
                   17  |   1.604538   .0662761    24.21   0.000      1.47463    1.734447
                   18  |    1.53621   .0695371    22.09   0.000     1.399909     1.67251
                   19  |   1.564614   .0728071    21.49   0.000     1.421904    1.707324
                   20  |   1.613601   .0757926    21.29   0.000      1.46504    1.762163
                   21  |   1.633607   .0786761    20.76   0.000     1.479393    1.787821
                   22  |   1.692056   .0813546    20.80   0.000     1.532592     1.85152
                   23  |    1.73718   .0840366    20.67   0.000     1.572459    1.901901
                   24  |   1.767244   .0870264    20.31   0.000     1.596663    1.937826
                   25  |   1.778852   .0898097    19.81   0.000     1.602815    1.954889
                   26  |  -.2273316   .0454322    -5.00   0.000    -.3163838   -.1382795
                   27  |  -.0996122    .043307    -2.30   0.021    -.1844988   -.0147257
                   28  |   .0658108   .0418453     1.57   0.116    -.0162106    .1478323
                   29  |   .2862417   .0419663     6.82   0.000     .2039831    .3685002
                   30  |    .467031   .0419315    11.14   0.000     .3848406    .5492215
                   31  |     .61138   .0433735    14.10   0.000     .5263632    .6963968
                   32  |    .769373   .0447118    17.21   0.000     .6817328    .8570131
                   33  |   .8337225   .0462128    18.04   0.000     .7431403    .9243048
                   34  |   .9798561   .0483314    20.27   0.000     .8851212    1.074591
                   35  |   1.074261   .0503133    21.35   0.000      .975641     1.17288
                   36  |   1.121213   .0529703    21.17   0.000     1.017385    1.225041
                   37  |   1.186716   .0556499    21.32   0.000     1.077636    1.295796
                   38  |   1.267151   .0582953    21.74   0.000     1.152886    1.381417
                   39  |   1.307314   .0611299    21.39   0.000     1.187493    1.427135
                   40  |   1.403095   .0646787    21.69   0.000     1.276317    1.529872
                   41  |   1.478789   .0670411    22.06   0.000     1.347381    1.610197
                   42  |   1.558383   .0698801    22.30   0.000     1.421411    1.695356
                   43  |   1.537725   .0730811    21.04   0.000     1.394478    1.680972
                   44  |   1.572199   .0762248    20.63   0.000      1.42279    1.721608
                   45  |   1.645199   .0791389    20.79   0.000     1.490078     1.80032
                   46  |   1.648726   .0821585    20.07   0.000     1.487686    1.809766
                   47  |    1.67705   .0844863    19.85   0.000     1.511447    1.842652
                   48  |   1.743505   .0868521    20.07   0.000     1.573265    1.913745
                   49  |   1.744933   .0900377    19.38   0.000     1.568449    1.921417
                   50  |   1.793579   .0927663    19.33   0.000     1.611747    1.975412
                       |
               age_cat |
                    1  |   .2811237   .0166681    16.87   0.000     .2484523    .3137951
                    2  |   .2966343   .0188096    15.77   0.000     .2597655    .3335031
                    3  |   .2774118   .0210903    13.15   0.000     .2360724    .3187512
                    4  |   .2696728   .0235712    11.44   0.000     .2234706     .315875
                    5  |   .2636741   .0263677    10.00   0.000     .2119906    .3153577
                    6  |   .2467015   .0293251     8.41   0.000      .189221    .3041819
                    7  |   .2561722   .0323297     7.92   0.000     .1928024     .319542
                    8  |   .2426197   .0355658     6.82   0.000     .1729067    .3123327
                    9  |   .2377639   .0387375     6.14   0.000     .1618341    .3136936
                   10  |   .2259058   .0420371     5.37   0.000     .1435083    .3083032
                   11  |   .2280912   .0454082     5.02   0.000      .139086    .3170964
                   12  |   .2211309   .0487517     4.54   0.000     .1255722    .3166896
                   13  |   .2116224   .0520688     4.06   0.000     .1095619     .313683
                   14  |   .2132758   .0554755     3.84   0.000     .1045376     .322014
                   15  |   .2102168   .0589152     3.57   0.000     .0947365    .3256971
                   16  |   .2084232   .0623103     3.34   0.001      .086288    .3305584
                   17  |   .1923235   .0659328     2.92   0.004      .063088    .3215591
                   18  |   .1926206   .0694223     2.77   0.006     .0565453     .328696
                   19  |   .1711208   .0732056     2.34   0.019     .0276298    .3146118
                   20  |   .1385993   .0801295     1.73   0.084    -.0184634     .295662
                   25  |   .0922791   .0916537     1.01   0.314    -.0873722    .2719305
                   30  |   .0964582   .1215799     0.79   0.428     -.141852    .3347683
                   40  |   .1395031   .1359736     1.03   0.305    -.1270203    .4060266
                   50  |   .1333511   .1493851     0.89   0.372    -.1594603    .4261624
                       |
                 _cons |    7.43172   .0326699   227.48   0.000     7.367684    7.495757
-----------------------+----------------------------------------------------------------
               sigma_u |  1.2301838
               sigma_e |  .55620715
                   rho |  .83027199   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_lnQL + during_expat_H_lnQL = 0

       F(  1, 16123) =    0.90
            Prob > F =    0.3436

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .229414256693743
key: p_value
value: .3435525635596686

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.2294                                         min =          1
     between = 0.1080                                         avg =        8.7
     overall = 0.1071                                         max =         25

                                                F(82,16123)       =     119.45
corr(u_i, Xb)  = -0.0104                        Prob > F          =     0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0634393   .0263079     2.41   0.016     .0118729    .1150057
       during_domestic |   .1409314   .0123682    11.39   0.000     .1166884    .1651744
        after_domestic |   .2183718   .0220534     9.90   0.000     .1751448    .2615989
          during_expat |   .3139694    .047183     6.65   0.000     .2214854    .4064534
           after_expat |   .4460152   .0584227     7.63   0.000     .3315002    .5605303
during_domestic_H_lnQL |  -.1794006   .0156915   -11.43   0.000    -.2101577   -.1486436
 after_domestic_H_lnQL |  -.2550048   .0276237    -9.23   0.000    -.3091504   -.2008592
   during_expat_H_lnQL |  -.2351521   .0575407    -4.09   0.000    -.3479383   -.1223659
    after_expat_H_lnQL |  -.2995761    .073557    -4.07   0.000     -.443756   -.1553961
                       |
              ind_year |
                    2  |   .0857007   .0194516     4.41   0.000     .0475734    .1238279
                    3  |   .2803483   .0244984    11.44   0.000     .2323288    .3283678
                    4  |   .4851328   .0263686    18.40   0.000     .4334473    .5368183
                    5  |   .6402832   .0292775    21.87   0.000     .5828961    .6976702
                    6  |    .825497   .0325643    25.35   0.000     .7616674    .8893267
                    7  |    .950113   .0352049    26.99   0.000     .8811075    1.019119
                    8  |   1.020838   .0379054    26.93   0.000      .946539    1.095137
                    9  |   1.146306   .0406553    28.20   0.000     1.066618    1.225995
                   10  |   1.259744   .0439591    28.66   0.000     1.173579    1.345909
                   11  |   1.327446   .0470106    28.24   0.000       1.2353    1.419592
                   12  |   1.353843   .0503334    26.90   0.000     1.255184    1.452503
                   13  |   1.396624   .0534856    26.11   0.000     1.291786    1.501461
                   14  |   1.440001   .0566212    25.43   0.000     1.329017    1.550985
                   15  |   1.506618    .060205    25.02   0.000      1.38861    1.624626
                   16  |   1.548497   .0629087    24.61   0.000     1.425189    1.671805
                   17  |   1.604538   .0662761    24.21   0.000      1.47463    1.734447
                   18  |    1.53621   .0695371    22.09   0.000     1.399909     1.67251
                   19  |   1.564614   .0728071    21.49   0.000     1.421904    1.707324
                   20  |   1.613601   .0757926    21.29   0.000      1.46504    1.762163
                   21  |   1.633607   .0786761    20.76   0.000     1.479393    1.787821
                   22  |   1.692056   .0813546    20.80   0.000     1.532592     1.85152
                   23  |    1.73718   .0840366    20.67   0.000     1.572459    1.901901
                   24  |   1.767244   .0870264    20.31   0.000     1.596663    1.937826
                   25  |   1.778852   .0898097    19.81   0.000     1.602815    1.954889
                   26  |  -.2273316   .0454322    -5.00   0.000    -.3163838   -.1382795
                   27  |  -.0996122    .043307    -2.30   0.021    -.1844988   -.0147257
                   28  |   .0658108   .0418453     1.57   0.116    -.0162106    .1478323
                   29  |   .2862417   .0419663     6.82   0.000     .2039831    .3685002
                   30  |    .467031   .0419315    11.14   0.000     .3848406    .5492215
                   31  |     .61138   .0433735    14.10   0.000     .5263632    .6963968
                   32  |    .769373   .0447118    17.21   0.000     .6817328    .8570131
                   33  |   .8337225   .0462128    18.04   0.000     .7431403    .9243048
                   34  |   .9798561   .0483314    20.27   0.000     .8851212    1.074591
                   35  |   1.074261   .0503133    21.35   0.000      .975641     1.17288
                   36  |   1.121213   .0529703    21.17   0.000     1.017385    1.225041
                   37  |   1.186716   .0556499    21.32   0.000     1.077636    1.295796
                   38  |   1.267151   .0582953    21.74   0.000     1.152886    1.381417
                   39  |   1.307314   .0611299    21.39   0.000     1.187493    1.427135
                   40  |   1.403095   .0646787    21.69   0.000     1.276317    1.529872
                   41  |   1.478789   .0670411    22.06   0.000     1.347381    1.610197
                   42  |   1.558383   .0698801    22.30   0.000     1.421411    1.695356
                   43  |   1.537725   .0730811    21.04   0.000     1.394478    1.680972
                   44  |   1.572199   .0762248    20.63   0.000      1.42279    1.721608
                   45  |   1.645199   .0791389    20.79   0.000     1.490078     1.80032
                   46  |   1.648726   .0821585    20.07   0.000     1.487686    1.809766
                   47  |    1.67705   .0844863    19.85   0.000     1.511447    1.842652
                   48  |   1.743505   .0868521    20.07   0.000     1.573265    1.913745
                   49  |   1.744933   .0900377    19.38   0.000     1.568449    1.921417
                   50  |   1.793579   .0927663    19.33   0.000     1.611747    1.975412
                       |
               age_cat |
                    1  |   .2811237   .0166681    16.87   0.000     .2484523    .3137951
                    2  |   .2966343   .0188096    15.77   0.000     .2597655    .3335031
                    3  |   .2774118   .0210903    13.15   0.000     .2360724    .3187512
                    4  |   .2696728   .0235712    11.44   0.000     .2234706     .315875
                    5  |   .2636741   .0263677    10.00   0.000     .2119906    .3153577
                    6  |   .2467015   .0293251     8.41   0.000      .189221    .3041819
                    7  |   .2561722   .0323297     7.92   0.000     .1928024     .319542
                    8  |   .2426197   .0355658     6.82   0.000     .1729067    .3123327
                    9  |   .2377639   .0387375     6.14   0.000     .1618341    .3136936
                   10  |   .2259058   .0420371     5.37   0.000     .1435083    .3083032
                   11  |   .2280912   .0454082     5.02   0.000      .139086    .3170964
                   12  |   .2211309   .0487517     4.54   0.000     .1255722    .3166896
                   13  |   .2116224   .0520688     4.06   0.000     .1095619     .313683
                   14  |   .2132758   .0554755     3.84   0.000     .1045376     .322014
                   15  |   .2102168   .0589152     3.57   0.000     .0947365    .3256971
                   16  |   .2084232   .0623103     3.34   0.001      .086288    .3305584
                   17  |   .1923235   .0659328     2.92   0.004      .063088    .3215591
                   18  |   .1926206   .0694223     2.77   0.006     .0565453     .328696
                   19  |   .1711208   .0732056     2.34   0.019     .0276298    .3146118
                   20  |   .1385993   .0801295     1.73   0.084    -.0184634     .295662
                   25  |   .0922791   .0916537     1.01   0.314    -.0873722    .2719305
                   30  |   .0964582   .1215799     0.79   0.428     -.141852    .3347683
                   40  |   .1395031   .1359736     1.03   0.305    -.1270203    .4060266
                   50  |   .1333511   .1493851     0.89   0.372    -.1594603    .4261624
                       |
                 _cons |    7.43172   .0326699   227.48   0.000     7.367684    7.495757
-----------------------+----------------------------------------------------------------
               sigma_u |  1.2301838
               sigma_e |  .55620715
                   rho |  .83027199   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.2277                         Obs per group: min =         1
       between = 0.1229                                        avg =       8.7
       overall = 0.1217                                        max =        25

                                                F(82,16123)        =    117.47
corr(u_i, Xb)  = 0.0176                         Prob > F           =    0.0000

                                              (Std. Err. adjusted for 16,124 clusters in id)
--------------------------------------------------------------------------------------------
                           |               Robust
                      lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
---------------------------+----------------------------------------------------------------
                   foreign |   .0658626   .0263778     2.50   0.013     .0141592    .1175661
           during_domestic |   .0516455   .0102175     5.05   0.000      .031618    .0716729
            after_domestic |   .0624337   .0194656     3.21   0.001     .0242789    .1005885
              during_expat |   .2134326   .0544511     3.92   0.000     .1067025    .3201627
               after_expat |   .2373304   .0710761     3.34   0.001     .0980134    .3766473
during_domestic_H_exporter |  -.0324157   .0151718    -2.14   0.033    -.0621541   -.0026773
 after_domestic_H_exporter |   .0102131   .0272669     0.37   0.708    -.0432332    .0636593
   during_expat_H_exporter |  -.0499672   .0632423    -0.79   0.429    -.1739292    .0739947
    after_expat_H_exporter |   .0532278   .0826045     0.64   0.519    -.1086862    .2151418
                           |
                  ind_year |
                        2  |   .0860463     .01945     4.42   0.000     .0479221    .1241705
                        3  |   .2808237   .0244958    11.46   0.000     .2328093    .3288381
                        4  |   .4857507   .0263838    18.41   0.000     .4340356    .5374659
                        5  |   .6403703   .0293055    21.85   0.000     .5829282    .6978125
                        6  |   .8259987   .0325957    25.34   0.000     .7621075    .8898898
                        7  |   .9500628   .0352537    26.95   0.000     .8809617    1.019164
                        8  |   1.020332   .0379662    26.87   0.000     .9459138     1.09475
                        9  |   1.146193   .0407288    28.14   0.000      1.06636    1.226026
                       10  |   1.259274   .0440311    28.60   0.000     1.172968     1.34558
                       11  |   1.326192   .0470941    28.16   0.000     1.233882    1.418502
                       12  |   1.351841   .0504313    26.81   0.000      1.25299    1.450692
                       13  |   1.393952   .0535979    26.01   0.000     1.288894     1.49901
                       14  |   1.436166   .0567569    25.30   0.000     1.324916    1.547416
                       15  |   1.501255   .0603491    24.88   0.000     1.382964    1.619546
                       16  |   1.541992   .0630546    24.45   0.000     1.418398    1.665586
                       17  |   1.595723   .0664198    24.02   0.000     1.465533    1.725913
                       18  |   1.525184   .0697004    21.88   0.000     1.388564    1.661805
                       19  |   1.551646   .0729514    21.27   0.000     1.408653    1.694639
                       20  |   1.598827   .0759461    21.05   0.000     1.449964    1.747689
                       21  |   1.616939   .0788108    20.52   0.000     1.462461    1.771417
                       22  |   1.673907   .0814877    20.54   0.000     1.514182    1.833632
                       23  |   1.717151   .0841701    20.40   0.000     1.552168    1.882134
                       24  |    1.74511   .0871465    20.02   0.000     1.574293    1.915926
                       25  |   1.754363   .0899214    19.51   0.000     1.578107    1.930619
                       26  |   -.232079   .0455368    -5.10   0.000    -.3213362   -.1428218
                       27  |  -.1029137   .0433971    -2.37   0.018    -.1879768   -.0178505
                       28  |    .062897   .0419314     1.50   0.134    -.0192932    .1450873
                       29  |   .2825833   .0420414     6.72   0.000     .2001775     .364989
                       30  |    .463855   .0420055    11.04   0.000     .3815197    .5461904
                       31  |   .6084771    .043443    14.01   0.000     .5233239    .6936302
                       32  |   .7669039   .0447834    17.12   0.000     .6791235    .8546844
                       33  |   .8315404   .0462706    17.97   0.000      .740845    .9222358
                       34  |   .9776282   .0484018    20.20   0.000     .8827554    1.072501
                       35  |   1.072459   .0504056    21.28   0.000     .9736582    1.171259
                       36  |    1.11914   .0530772    21.09   0.000     1.015102    1.223177
                       37  |   1.183673   .0557737    21.22   0.000      1.07435    1.292995
                       38  |   1.263441   .0584481    21.62   0.000     1.148876    1.378005
                       39  |    1.30197   .0612653    21.25   0.000     1.181883    1.422057
                       40  |   1.396567   .0648281    21.54   0.000     1.269496    1.523637
                       41  |    1.47071   .0672114    21.88   0.000     1.338968    1.602452
                       42  |   1.548764   .0700469    22.11   0.000     1.411464    1.686063
                       43  |   1.526463   .0732708    20.83   0.000     1.382844    1.670082
                       44  |   1.559348   .0764446    20.40   0.000     1.409508    1.709188
                       45  |   1.630677   .0793523    20.55   0.000     1.475138    1.786217
                       46  |   1.632465   .0823799    19.82   0.000     1.470992    1.793939
                       47  |   1.659527   .0847106    19.59   0.000     1.493484    1.825569
                       48  |    1.72449   .0870815    19.80   0.000     1.553801    1.895179
                       49  |   1.723828    .090302    19.09   0.000     1.546826     1.90083
                       50  |   1.770208   .0930186    19.03   0.000     1.587881    1.952534
                           |
                   age_cat |
                        1  |   .2840801   .0167296    16.98   0.000     .2512883    .3168719
                        2  |   .3009754   .0188919    15.93   0.000     .2639452    .3380056
                        3  |    .283005   .0211994    13.35   0.000     .2414518    .3245582
                        4  |   .2762308   .0237028    11.65   0.000     .2297707     .322691
                        5  |   .2711332    .026518    10.22   0.000      .219155    .3231114
                        6  |   .2551718   .0294903     8.65   0.000     .1973676     .312976
                        7  |   .2655052   .0325081     8.17   0.000     .2017856    .3292247
                        8  |   .2524837   .0357349     7.07   0.000     .1824394     .322528
                        9  |   .2486241   .0389201     6.39   0.000     .1723364    .3249118
                       10  |    .237424   .0422421     5.62   0.000     .1546248    .3202231
                       11  |   .2406468   .0456154     5.28   0.000     .1512355    .3300581
                       12  |   .2346992   .0489418     4.80   0.000     .1387678    .3306306
                       13  |   .2262978   .0522732     4.33   0.000     .1238366    .3287591
                       14  |   .2290849   .0556936     4.11   0.000     .1199193    .3382506
                       15  |   .2276352   .0591458     3.85   0.000     .1117029    .3435675
                       16  |   .2272236   .0625545     3.63   0.000     .1046099    .3498373
                       17  |   .2127805    .066147     3.22   0.001     .0831251    .3424359
                       18  |   .2146108   .0696105     3.08   0.002     .0781665     .351055
                       19  |   .1943038   .0733743     2.65   0.008      .050482    .3381255
                       20  |   .1656047   .0802708     2.06   0.039     .0082651    .3229444
                       25  |   .1231972   .0917165     1.34   0.179    -.0565774    .3029718
                       30  |   .1241182   .1216362     1.02   0.308    -.1143022    .3625386
                       40  |   .1628639   .1356378     1.20   0.230    -.1030013    .4287291
                       50  |   .1567603    .148864     1.05   0.292    -.1350296    .4485502
                           |
                     _cons |   7.423569   .0326773   227.18   0.000     7.359517     7.48762
---------------------------+----------------------------------------------------------------
                   sigma_u |  1.2201787
                   sigma_e |  .55682688
                       rho |  .82764049   (fraction of variance due to u_i)
--------------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_exporter + during_expat_H_exporter = 0

       F(  1, 16123) =    0.07
            Prob > F =    0.7849

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2276961313650099
key: p_value
value: .7848780526602932

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.2277                                         min =          1
     between = 0.1229                                         avg =        8.7
     overall = 0.1217                                         max =         25

                                                F(82,16123)       =     117.47
corr(u_i, Xb)  = 0.0176                         Prob > F          =     0.0000

                                              (Std. Err. adjusted for 16,124 clusters in id)
--------------------------------------------------------------------------------------------
                           |               Robust
                      lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
---------------------------+----------------------------------------------------------------
                   foreign |   .0658626   .0263778     2.50   0.013     .0141592    .1175661
           during_domestic |   .0516455   .0102175     5.05   0.000      .031618    .0716729
            after_domestic |   .0624337   .0194656     3.21   0.001     .0242789    .1005885
              during_expat |   .2134326   .0544511     3.92   0.000     .1067025    .3201627
               after_expat |   .2373304   .0710761     3.34   0.001     .0980134    .3766473
during_domestic_H_exporter |  -.0324157   .0151718    -2.14   0.033    -.0621541   -.0026773
 after_domestic_H_exporter |   .0102131   .0272669     0.37   0.708    -.0432332    .0636593
   during_expat_H_exporter |  -.0499672   .0632423    -0.79   0.429    -.1739292    .0739947
    after_expat_H_exporter |   .0532278   .0826045     0.64   0.519    -.1086862    .2151418
                           |
                  ind_year |
                        2  |   .0860463     .01945     4.42   0.000     .0479221    .1241705
                        3  |   .2808237   .0244958    11.46   0.000     .2328093    .3288381
                        4  |   .4857507   .0263838    18.41   0.000     .4340356    .5374659
                        5  |   .6403703   .0293055    21.85   0.000     .5829282    .6978125
                        6  |   .8259987   .0325957    25.34   0.000     .7621075    .8898898
                        7  |   .9500628   .0352537    26.95   0.000     .8809617    1.019164
                        8  |   1.020332   .0379662    26.87   0.000     .9459138     1.09475
                        9  |   1.146193   .0407288    28.14   0.000      1.06636    1.226026
                       10  |   1.259274   .0440311    28.60   0.000     1.172968     1.34558
                       11  |   1.326192   .0470941    28.16   0.000     1.233882    1.418502
                       12  |   1.351841   .0504313    26.81   0.000      1.25299    1.450692
                       13  |   1.393952   .0535979    26.01   0.000     1.288894     1.49901
                       14  |   1.436166   .0567569    25.30   0.000     1.324916    1.547416
                       15  |   1.501255   .0603491    24.88   0.000     1.382964    1.619546
                       16  |   1.541992   .0630546    24.45   0.000     1.418398    1.665586
                       17  |   1.595723   .0664198    24.02   0.000     1.465533    1.725913
                       18  |   1.525184   .0697004    21.88   0.000     1.388564    1.661805
                       19  |   1.551646   .0729514    21.27   0.000     1.408653    1.694639
                       20  |   1.598827   .0759461    21.05   0.000     1.449964    1.747689
                       21  |   1.616939   .0788108    20.52   0.000     1.462461    1.771417
                       22  |   1.673907   .0814877    20.54   0.000     1.514182    1.833632
                       23  |   1.717151   .0841701    20.40   0.000     1.552168    1.882134
                       24  |    1.74511   .0871465    20.02   0.000     1.574293    1.915926
                       25  |   1.754363   .0899214    19.51   0.000     1.578107    1.930619
                       26  |   -.232079   .0455368    -5.10   0.000    -.3213362   -.1428218
                       27  |  -.1029137   .0433971    -2.37   0.018    -.1879768   -.0178505
                       28  |    .062897   .0419314     1.50   0.134    -.0192932    .1450873
                       29  |   .2825833   .0420414     6.72   0.000     .2001775     .364989
                       30  |    .463855   .0420055    11.04   0.000     .3815197    .5461904
                       31  |   .6084771    .043443    14.01   0.000     .5233239    .6936302
                       32  |   .7669039   .0447834    17.12   0.000     .6791235    .8546844
                       33  |   .8315404   .0462706    17.97   0.000      .740845    .9222358
                       34  |   .9776282   .0484018    20.20   0.000     .8827554    1.072501
                       35  |   1.072459   .0504056    21.28   0.000     .9736582    1.171259
                       36  |    1.11914   .0530772    21.09   0.000     1.015102    1.223177
                       37  |   1.183673   .0557737    21.22   0.000      1.07435    1.292995
                       38  |   1.263441   .0584481    21.62   0.000     1.148876    1.378005
                       39  |    1.30197   .0612653    21.25   0.000     1.181883    1.422057
                       40  |   1.396567   .0648281    21.54   0.000     1.269496    1.523637
                       41  |    1.47071   .0672114    21.88   0.000     1.338968    1.602452
                       42  |   1.548764   .0700469    22.11   0.000     1.411464    1.686063
                       43  |   1.526463   .0732708    20.83   0.000     1.382844    1.670082
                       44  |   1.559348   .0764446    20.40   0.000     1.409508    1.709188
                       45  |   1.630677   .0793523    20.55   0.000     1.475138    1.786217
                       46  |   1.632465   .0823799    19.82   0.000     1.470992    1.793939
                       47  |   1.659527   .0847106    19.59   0.000     1.493484    1.825569
                       48  |    1.72449   .0870815    19.80   0.000     1.553801    1.895179
                       49  |   1.723828    .090302    19.09   0.000     1.546826     1.90083
                       50  |   1.770208   .0930186    19.03   0.000     1.587881    1.952534
                           |
                   age_cat |
                        1  |   .2840801   .0167296    16.98   0.000     .2512883    .3168719
                        2  |   .3009754   .0188919    15.93   0.000     .2639452    .3380056
                        3  |    .283005   .0211994    13.35   0.000     .2414518    .3245582
                        4  |   .2762308   .0237028    11.65   0.000     .2297707     .322691
                        5  |   .2711332    .026518    10.22   0.000      .219155    .3231114
                        6  |   .2551718   .0294903     8.65   0.000     .1973676     .312976
                        7  |   .2655052   .0325081     8.17   0.000     .2017856    .3292247
                        8  |   .2524837   .0357349     7.07   0.000     .1824394     .322528
                        9  |   .2486241   .0389201     6.39   0.000     .1723364    .3249118
                       10  |    .237424   .0422421     5.62   0.000     .1546248    .3202231
                       11  |   .2406468   .0456154     5.28   0.000     .1512355    .3300581
                       12  |   .2346992   .0489418     4.80   0.000     .1387678    .3306306
                       13  |   .2262978   .0522732     4.33   0.000     .1238366    .3287591
                       14  |   .2290849   .0556936     4.11   0.000     .1199193    .3382506
                       15  |   .2276352   .0591458     3.85   0.000     .1117029    .3435675
                       16  |   .2272236   .0625545     3.63   0.000     .1046099    .3498373
                       17  |   .2127805    .066147     3.22   0.001     .0831251    .3424359
                       18  |   .2146108   .0696105     3.08   0.002     .0781665     .351055
                       19  |   .1943038   .0733743     2.65   0.008      .050482    .3381255
                       20  |   .1656047   .0802708     2.06   0.039     .0082651    .3229444
                       25  |   .1231972   .0917165     1.34   0.179    -.0565774    .3029718
                       30  |   .1241182   .1216362     1.02   0.308    -.1143022    .3625386
                       40  |   .1628639   .1356378     1.20   0.230    -.1030013    .4287291
                       50  |   .1567603    .148864     1.05   0.292    -.1350296    .4485502
                           |
                     _cons |   7.423569   .0326773   227.18   0.000     7.359517     7.48762
---------------------------+----------------------------------------------------------------
                   sigma_u |  1.2201787
                   sigma_e |  .55682688
                       rho |  .82764049   (fraction of variance due to u_i)
--------------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.2277                         Obs per group: min =         1
       between = 0.1240                                        avg =       8.7
       overall = 0.1223                                        max =        25

                                                F(82,16123)        =    117.72
corr(u_i, Xb)  = 0.0196                         Prob > F           =    0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0661812   .0263985     2.51   0.012     .0144372    .1179251
       during_domestic |   .0191305   .0128611     1.49   0.137    -.0060787    .0443396
        after_domestic |   .0541236   .0222093     2.44   0.015     .0105908    .0976563
          during_expat |   .1271996   .0433812     2.93   0.003     .0421676    .2122316
           after_expat |   .2250216    .057431     3.92   0.000     .1124506    .3375927
during_domestic_H_slow |   .0317253   .0161074     1.97   0.049     .0001529    .0632976
 after_domestic_H_slow |   .0284338   .0279949     1.02   0.310    -.0264393    .0833068
   during_expat_H_slow |   .0946745   .0565942     1.67   0.094    -.0162563    .2056053
    after_expat_H_slow |    .095225   .0739908     1.29   0.198    -.0498052    .2402551
                       |
              ind_year |
                    2  |   .0853631   .0194474     4.39   0.000      .047244    .1234822
                    3  |   .2795904   .0244883    11.42   0.000     .2315905    .3275902
                    4  |   .4838267   .0263632    18.35   0.000      .432152    .5355015
                    5  |   .6378138    .029287    21.78   0.000      .580408    .6952195
                    6  |   .8229126   .0325775    25.26   0.000      .759057    .8867683
                    7  |   .9463901   .0352419    26.85   0.000     .8773122    1.015468
                    8  |    1.01605   .0379382    26.78   0.000     .9416875    1.090414
                    9  |   1.141626   .0406711    28.07   0.000     1.061906    1.221346
                   10  |   1.254284   .0439686    28.53   0.000     1.168101    1.340468
                   11  |   1.320733    .047028    28.08   0.000     1.228553    1.412913
                   12  |   1.345939   .0503329    26.74   0.000     1.247281    1.444597
                   13  |   1.387631   .0535031    25.94   0.000     1.282759    1.492504
                   14  |   1.429436   .0566583    25.23   0.000     1.318379    1.540493
                   15  |   1.494056   .0602568    24.79   0.000     1.375946    1.612167
                   16  |   1.534326   .0629436    24.38   0.000     1.410949    1.657702
                   17  |    1.58746   .0663002    23.94   0.000     1.457504    1.717416
                   18  |    1.51644   .0695737    21.80   0.000     1.380068    1.652812
                   19  |   1.542443   .0728314    21.18   0.000     1.399685    1.685201
                   20  |   1.589257   .0757944    20.97   0.000     1.440692    1.737823
                   21  |   1.606867   .0786631    20.43   0.000     1.452678    1.761055
                   22  |   1.663431    .081352    20.45   0.000     1.503972     1.82289
                   23  |   1.706262   .0840163    20.31   0.000     1.541581    1.870943
                   24  |   1.733973   .0870103    19.93   0.000     1.563423    1.904523
                   25  |   1.743014   .0898131    19.41   0.000      1.56697    1.919057
                   26  |  -.2310557   .0454709    -5.08   0.000    -.3201836   -.1419278
                   27  |  -.1028894    .043362    -2.37   0.018    -.1878837   -.0178951
                   28  |   .0621883    .041922     1.48   0.138    -.0199835    .1443602
                   29  |   .2810872   .0420503     6.68   0.000      .198664    .3635104
                   30  |   .4617523   .0420215    10.99   0.000     .3793855    .5441191
                   31  |    .605707   .0434709    13.93   0.000     .5204992    .6909149
                   32  |    .763565   .0447966    17.05   0.000     .6757587    .8513714
                   33  |   .8276723    .046305    17.87   0.000     .7369093    .9184352
                   34  |   .9733112   .0484416    20.09   0.000     .8783603    1.068262
                   35  |    1.06767   .0504178    21.18   0.000     .9688456    1.166495
                   36  |   1.113792   .0530557    20.99   0.000     1.009797    1.217787
                   37  |   1.177776   .0557511    21.13   0.000     1.068497    1.287054
                   38  |   1.256993    .058389    21.53   0.000     1.142544    1.371442
                   39  |   1.295166   .0612074    21.16   0.000     1.175193     1.41514
                   40  |   1.389308    .064767    21.45   0.000     1.262358    1.516258
                   41  |   1.463107    .067103    21.80   0.000     1.331578    1.594637
                   42  |   1.540589   .0699309    22.03   0.000     1.403517    1.677662
                   43  |   1.517708   .0731166    20.76   0.000     1.374392    1.661025
                   44  |   1.550096   .0762536    20.33   0.000      1.40063    1.699561
                   45  |      1.621   .0791657    20.48   0.000     1.465827    1.776174
                   46  |   1.622336   .0821761    19.74   0.000     1.461262     1.78341
                   47  |   1.649035   .0844963    19.52   0.000     1.483413    1.814657
                   48  |    1.71371   .0868425    19.73   0.000     1.543489    1.883931
                   49  |   1.712685   .0900281    19.02   0.000     1.536219     1.88915
                   50  |   1.758515   .0927382    18.96   0.000     1.576738    1.940293
                       |
               age_cat |
                    1  |   .2849601   .0167284    17.03   0.000     .2521705    .3177496
                    2  |   .3027641   .0188716    16.04   0.000     .2657737    .3397546
                    3  |   .2855371   .0211634    13.49   0.000     .2440545    .3270197
                    4  |   .2793504   .0236426    11.82   0.000     .2330082    .3256925
                    5  |   .2748848   .0264436    10.40   0.000     .2230524    .3267171
                    6  |   .2593929   .0294003     8.82   0.000      .201765    .3170208
                    7  |   .2703118   .0323932     8.34   0.000     .2068175     .333806
                    8  |   .2577998   .0356118     7.24   0.000     .1879967     .327603
                    9  |   .2543529   .0387773     6.56   0.000     .1783452    .3303607
                   10  |   .2436992   .0420702     5.79   0.000     .1612369    .3261615
                   11  |   .2474191   .0454244     5.45   0.000     .1583822     .336456
                   12  |   .2419425   .0487588     4.96   0.000     .1463698    .3375151
                   13  |   .2340482   .0520591     4.50   0.000     .1320067    .3360898
                   14  |   .2372834   .0554468     4.28   0.000     .1286015    .3459653
                   15  |   .2362626   .0588891     4.01   0.000     .1208333    .3516918
                   16  |   .2363334    .062274     3.80   0.000     .1142695    .3583973
                   17  |   .2222254   .0658891     3.37   0.001     .0930754    .3513754
                   18  |   .2243709   .0693562     3.24   0.001      .088425    .3603169
                   19  |   .2045269   .0731143     2.80   0.005     .0612147     .347839
                   20  |   .1767241   .0800143     2.21   0.027     .0198871    .3335611
                   25  |   .1350895   .0914866     1.48   0.140    -.0442345    .3144135
                   30  |   .1361517   .1214202     1.12   0.262    -.1018454    .3741488
                   40  |   .1742158    .135634     1.28   0.199    -.0916419    .4400735
                   50  |   .1684624   .1489681     1.13   0.258    -.1235316    .4604564
                       |
                 _cons |   7.422599   .0326714   227.19   0.000      7.35856    7.486639
-----------------------+----------------------------------------------------------------
               sigma_u |   1.219531
               sigma_e |  .55682892
                   rho |   .8274879   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_slow + during_expat_H_slow = 0

       F(  1, 16123) =    1.17
            Prob > F =    0.2789

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2276904533377971
key: p_value
value: .2788790242152552

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.2277                                         min =          1
     between = 0.1240                                         avg =        8.7
     overall = 0.1223                                         max =         25

                                                F(82,16123)       =     117.72
corr(u_i, Xb)  = 0.0196                         Prob > F          =     0.0000

                                          (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------
                       |               Robust
                  lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------+----------------------------------------------------------------
               foreign |   .0661812   .0263985     2.51   0.012     .0144372    .1179251
       during_domestic |   .0191305   .0128611     1.49   0.137    -.0060787    .0443396
        after_domestic |   .0541236   .0222093     2.44   0.015     .0105908    .0976563
          during_expat |   .1271996   .0433812     2.93   0.003     .0421676    .2122316
           after_expat |   .2250216    .057431     3.92   0.000     .1124506    .3375927
during_domestic_H_slow |   .0317253   .0161074     1.97   0.049     .0001529    .0632976
 after_domestic_H_slow |   .0284338   .0279949     1.02   0.310    -.0264393    .0833068
   during_expat_H_slow |   .0946745   .0565942     1.67   0.094    -.0162563    .2056053
    after_expat_H_slow |    .095225   .0739908     1.29   0.198    -.0498052    .2402551
                       |
              ind_year |
                    2  |   .0853631   .0194474     4.39   0.000      .047244    .1234822
                    3  |   .2795904   .0244883    11.42   0.000     .2315905    .3275902
                    4  |   .4838267   .0263632    18.35   0.000      .432152    .5355015
                    5  |   .6378138    .029287    21.78   0.000      .580408    .6952195
                    6  |   .8229126   .0325775    25.26   0.000      .759057    .8867683
                    7  |   .9463901   .0352419    26.85   0.000     .8773122    1.015468
                    8  |    1.01605   .0379382    26.78   0.000     .9416875    1.090414
                    9  |   1.141626   .0406711    28.07   0.000     1.061906    1.221346
                   10  |   1.254284   .0439686    28.53   0.000     1.168101    1.340468
                   11  |   1.320733    .047028    28.08   0.000     1.228553    1.412913
                   12  |   1.345939   .0503329    26.74   0.000     1.247281    1.444597
                   13  |   1.387631   .0535031    25.94   0.000     1.282759    1.492504
                   14  |   1.429436   .0566583    25.23   0.000     1.318379    1.540493
                   15  |   1.494056   .0602568    24.79   0.000     1.375946    1.612167
                   16  |   1.534326   .0629436    24.38   0.000     1.410949    1.657702
                   17  |    1.58746   .0663002    23.94   0.000     1.457504    1.717416
                   18  |    1.51644   .0695737    21.80   0.000     1.380068    1.652812
                   19  |   1.542443   .0728314    21.18   0.000     1.399685    1.685201
                   20  |   1.589257   .0757944    20.97   0.000     1.440692    1.737823
                   21  |   1.606867   .0786631    20.43   0.000     1.452678    1.761055
                   22  |   1.663431    .081352    20.45   0.000     1.503972     1.82289
                   23  |   1.706262   .0840163    20.31   0.000     1.541581    1.870943
                   24  |   1.733973   .0870103    19.93   0.000     1.563423    1.904523
                   25  |   1.743014   .0898131    19.41   0.000      1.56697    1.919057
                   26  |  -.2310557   .0454709    -5.08   0.000    -.3201836   -.1419278
                   27  |  -.1028894    .043362    -2.37   0.018    -.1878837   -.0178951
                   28  |   .0621883    .041922     1.48   0.138    -.0199835    .1443602
                   29  |   .2810872   .0420503     6.68   0.000      .198664    .3635104
                   30  |   .4617523   .0420215    10.99   0.000     .3793855    .5441191
                   31  |    .605707   .0434709    13.93   0.000     .5204992    .6909149
                   32  |    .763565   .0447966    17.05   0.000     .6757587    .8513714
                   33  |   .8276723    .046305    17.87   0.000     .7369093    .9184352
                   34  |   .9733112   .0484416    20.09   0.000     .8783603    1.068262
                   35  |    1.06767   .0504178    21.18   0.000     .9688456    1.166495
                   36  |   1.113792   .0530557    20.99   0.000     1.009797    1.217787
                   37  |   1.177776   .0557511    21.13   0.000     1.068497    1.287054
                   38  |   1.256993    .058389    21.53   0.000     1.142544    1.371442
                   39  |   1.295166   .0612074    21.16   0.000     1.175193     1.41514
                   40  |   1.389308    .064767    21.45   0.000     1.262358    1.516258
                   41  |   1.463107    .067103    21.80   0.000     1.331578    1.594637
                   42  |   1.540589   .0699309    22.03   0.000     1.403517    1.677662
                   43  |   1.517708   .0731166    20.76   0.000     1.374392    1.661025
                   44  |   1.550096   .0762536    20.33   0.000      1.40063    1.699561
                   45  |      1.621   .0791657    20.48   0.000     1.465827    1.776174
                   46  |   1.622336   .0821761    19.74   0.000     1.461262     1.78341
                   47  |   1.649035   .0844963    19.52   0.000     1.483413    1.814657
                   48  |    1.71371   .0868425    19.73   0.000     1.543489    1.883931
                   49  |   1.712685   .0900281    19.02   0.000     1.536219     1.88915
                   50  |   1.758515   .0927382    18.96   0.000     1.576738    1.940293
                       |
               age_cat |
                    1  |   .2849601   .0167284    17.03   0.000     .2521705    .3177496
                    2  |   .3027641   .0188716    16.04   0.000     .2657737    .3397546
                    3  |   .2855371   .0211634    13.49   0.000     .2440545    .3270197
                    4  |   .2793504   .0236426    11.82   0.000     .2330082    .3256925
                    5  |   .2748848   .0264436    10.40   0.000     .2230524    .3267171
                    6  |   .2593929   .0294003     8.82   0.000      .201765    .3170208
                    7  |   .2703118   .0323932     8.34   0.000     .2068175     .333806
                    8  |   .2577998   .0356118     7.24   0.000     .1879967     .327603
                    9  |   .2543529   .0387773     6.56   0.000     .1783452    .3303607
                   10  |   .2436992   .0420702     5.79   0.000     .1612369    .3261615
                   11  |   .2474191   .0454244     5.45   0.000     .1583822     .336456
                   12  |   .2419425   .0487588     4.96   0.000     .1463698    .3375151
                   13  |   .2340482   .0520591     4.50   0.000     .1320067    .3360898
                   14  |   .2372834   .0554468     4.28   0.000     .1286015    .3459653
                   15  |   .2362626   .0588891     4.01   0.000     .1208333    .3516918
                   16  |   .2363334    .062274     3.80   0.000     .1142695    .3583973
                   17  |   .2222254   .0658891     3.37   0.001     .0930754    .3513754
                   18  |   .2243709   .0693562     3.24   0.001      .088425    .3603169
                   19  |   .2045269   .0731143     2.80   0.005     .0612147     .347839
                   20  |   .1767241   .0800143     2.21   0.027     .0198871    .3335611
                   25  |   .1350895   .0914866     1.48   0.140    -.0442345    .3144135
                   30  |   .1361517   .1214202     1.12   0.262    -.1018454    .3741488
                   40  |   .1742158    .135634     1.28   0.199    -.0916419    .4400735
                   50  |   .1684624   .1489681     1.13   0.258    -.1235316    .4604564
                       |
                 _cons |   7.422599   .0326714   227.19   0.000      7.35856    7.486639
-----------------------+----------------------------------------------------------------
               sigma_u |   1.219531
               sigma_e |  .55682892
                   rho |   .8274879   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.2277                         Obs per group: min =         1
       between = 0.1236                                        avg =       8.7
       overall = 0.1225                                        max =        25

                                                F(82,16123)        =    117.09
corr(u_i, Xb)  = 0.0216                         Prob > F           =    0.0000

                                           (Std. Err. adjusted for 16,124 clusters in id)
-----------------------------------------------------------------------------------------
                        |               Robust
                   lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                foreign |   .0654484   .0264055     2.48   0.013     .0136907    .1172061
        during_domestic |   .0359446    .008304     4.33   0.000     .0196679    .0522213
         after_domestic |   .0545263   .0153236     3.56   0.000     .0244903    .0845623
           during_expat |   .1596456   .0339564     4.70   0.000     .0930873    .2262039
            after_expat |   .2468745   .0436163     5.66   0.000     .1613816    .3323673
during_domestic_H_early |    .017639   .0201831     0.87   0.382    -.0219222    .0572002
 after_domestic_H_early |    .066758   .0299036     2.23   0.026     .0081436    .1253724
   during_expat_H_early |   .0719534   .0592626     1.21   0.225    -.0442078    .1881146
    after_expat_H_early |   .0852732   .0727026     1.17   0.241    -.0572318    .2277783
                        |
               ind_year |
                     2  |   .0853334   .0194393     4.39   0.000     .0472302    .1234366
                     3  |   .2796455   .0244845    11.42   0.000     .2316532    .3276378
                     4  |   .4839662   .0263579    18.36   0.000     .4323017    .5356307
                     5  |   .6378316   .0292642    21.80   0.000     .5804706    .6951927
                     6  |   .8226373   .0325567    25.27   0.000     .7588227     .886452
                     7  |   .9458268   .0352158    26.86   0.000        .8768    1.014854
                     8  |   1.015075    .037925    26.77   0.000     .9407374    1.089412
                     9  |   1.140019   .0406577    28.04   0.000     1.060325    1.219713
                    10  |   1.252733   .0439449    28.51   0.000     1.166596     1.33887
                    11  |   1.319614   .0469805    28.09   0.000     1.227527    1.411701
                    12  |   1.345228   .0502874    26.75   0.000     1.246659    1.443797
                    13  |   1.387399   .0534155    25.97   0.000     1.282698    1.492099
                    14  |   1.429915   .0565343    25.29   0.000     1.319102    1.540729
                    15  |   1.495222   .0601003    24.88   0.000     1.377419    1.613025
                    16  |    1.53619   .0627734    24.47   0.000     1.413147    1.659233
                    17  |   1.590208   .0661179    24.05   0.000     1.460609    1.719806
                    18  |    1.51984   .0693574    21.91   0.000     1.383891    1.655788
                    19  |   1.546559   .0726042    21.30   0.000     1.404247    1.688871
                    20  |   1.594052   .0755532    21.10   0.000     1.445959    1.742144
                    21  |   1.612434   .0784178    20.56   0.000     1.458726    1.766141
                    22  |    1.66971   .0810695    20.60   0.000     1.510804    1.828615
                    23  |   1.713137   .0837286    20.46   0.000      1.54902    1.877254
                    24  |   1.741462   .0867161    20.08   0.000     1.571489    1.911435
                    25  |   1.751023   .0894883    19.57   0.000     1.575616     1.92643
                    26  |  -.2306436   .0454787    -5.07   0.000    -.3197868   -.1415003
                    27  |  -.1020929   .0433502    -2.36   0.019    -.1870642   -.0171216
                    28  |   .0629797   .0419077     1.50   0.133    -.0191641    .1451234
                    29  |    .281886   .0420189     6.71   0.000     .1995242    .3642478
                    30  |   .4621798    .041976    11.01   0.000     .3799022    .5444575
                    31  |   .6057681   .0434168    13.95   0.000     .5206664    .6908698
                    32  |   .7632646   .0447502    17.06   0.000     .6755492    .8509799
                    33  |   .8268833    .046247    17.88   0.000      .736234    .9175326
                    34  |   .9719227   .0483811    20.09   0.000     .8770905    1.066755
                    35  |   1.066504   .0503368    21.19   0.000     .9678379    1.165169
                    36  |   1.113063   .0530024    21.00   0.000     1.009172    1.216953
                    37  |   1.177526   .0556677    21.15   0.000     1.068411    1.286641
                    38  |   1.257166   .0583022    21.56   0.000     1.142887    1.371444
                    39  |   1.295796   .0611098    21.20   0.000     1.176014    1.415578
                    40  |   1.390639   .0646466    21.51   0.000     1.263925    1.517354
                    41  |   1.464923   .0669801    21.87   0.000     1.333634    1.596211
                    42  |   1.543048   .0697798    22.11   0.000     1.406272    1.679824
                    43  |   1.520768    .072964    20.84   0.000     1.377751    1.663786
                    44  |   1.553775   .0760831    20.42   0.000     1.404644    1.702907
                    45  |   1.625307   .0789758    20.58   0.000     1.470506    1.780109
                    46  |   1.627297   .0819834    19.85   0.000       1.4666    1.787994
                    47  |   1.654608   .0842846    19.63   0.000     1.489401    1.819815
                    48  |   1.719739   .0866285    19.85   0.000     1.549938    1.889541
                    49  |   1.719227   .0898052    19.14   0.000     1.543199    1.895255
                    50  |   1.765717   .0925055    19.09   0.000     1.584396    1.947038
                        |
                age_cat |
                     1  |   .2844404   .0167268    17.01   0.000     .2516541    .3172268
                     2  |   .3016154   .0188674    15.99   0.000     .2646332    .3385977
                     3  |   .2838523   .0211473    13.42   0.000     .2424012    .3253033
                     4  |   .2772359   .0236205    11.74   0.000     .2309371    .3235346
                     5  |   .2722655   .0264019    10.31   0.000     .2205149    .3240161
                     6  |   .2563343   .0293423     8.74   0.000     .1988202    .3138485
                     7  |   .2668152   .0323326     8.25   0.000     .2034397    .3301906
                     8  |   .2539137   .0355463     7.14   0.000      .184239    .3235885
                     9  |   .2500484   .0386939     6.46   0.000     .1742041    .3258927
                    10  |   .2389261   .0419692     5.69   0.000     .1566618    .3211903
                    11  |   .2421332    .045321     5.34   0.000     .1532991    .3309674
                    12  |   .2361681   .0486488     4.85   0.000      .140811    .3315252
                    13  |    .227831   .0519367     4.39   0.000     .1260293    .3296327
                    14  |   .2306173   .0553189     4.17   0.000     .1221861    .3390484
                    15  |   .2292023   .0587335     3.90   0.000     .1140781    .3443265
                    16  |   .2288161   .0621265     3.68   0.000     .1070413     .350591
                    17  |   .2142598   .0657169     3.26   0.001     .0854473    .3430723
                    18  |   .2160081   .0691786     3.12   0.002     .0804103    .3516059
                    19  |   .1956775   .0729374     2.68   0.007     .0527121    .3386428
                    20  |   .1669185   .0797959     2.09   0.036     .0105097    .3233274
                    25  |   .1241062   .0912193     1.36   0.174    -.0546937    .3029062
                    30  |   .1248866   .1211617     1.03   0.303    -.1126037    .3623769
                    40  |    .164058   .1355581     1.21   0.226     -.101651     .429767
                    50  |   .1576846   .1489447     1.06   0.290    -.1342636    .4496327
                        |
                  _cons |   7.424994   .0326908   227.13   0.000     7.360917    7.489072
------------------------+----------------------------------------------------------------
                sigma_u |  1.2198657
                sigma_e |  .55683009
                    rho |  .82756564   (fraction of variance due to u_i)
-----------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_early + during_expat_H_early = 0

       F(  1, 16123) =    0.78
            Prob > F =    0.3764

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .2276872333624779
key: p_value
value: .376388268371205

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.2277                                         min =          1
     between = 0.1236                                         avg =        8.7
     overall = 0.1225                                         max =         25

                                                F(82,16123)       =     117.09
corr(u_i, Xb)  = 0.0216                         Prob > F          =     0.0000

                                           (Std. Err. adjusted for 16,124 clusters in id)
-----------------------------------------------------------------------------------------
                        |               Robust
                   lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                foreign |   .0654484   .0264055     2.48   0.013     .0136907    .1172061
        during_domestic |   .0359446    .008304     4.33   0.000     .0196679    .0522213
         after_domestic |   .0545263   .0153236     3.56   0.000     .0244903    .0845623
           during_expat |   .1596456   .0339564     4.70   0.000     .0930873    .2262039
            after_expat |   .2468745   .0436163     5.66   0.000     .1613816    .3323673
during_domestic_H_early |    .017639   .0201831     0.87   0.382    -.0219222    .0572002
 after_domestic_H_early |    .066758   .0299036     2.23   0.026     .0081436    .1253724
   during_expat_H_early |   .0719534   .0592626     1.21   0.225    -.0442078    .1881146
    after_expat_H_early |   .0852732   .0727026     1.17   0.241    -.0572318    .2277783
                        |
               ind_year |
                     2  |   .0853334   .0194393     4.39   0.000     .0472302    .1234366
                     3  |   .2796455   .0244845    11.42   0.000     .2316532    .3276378
                     4  |   .4839662   .0263579    18.36   0.000     .4323017    .5356307
                     5  |   .6378316   .0292642    21.80   0.000     .5804706    .6951927
                     6  |   .8226373   .0325567    25.27   0.000     .7588227     .886452
                     7  |   .9458268   .0352158    26.86   0.000        .8768    1.014854
                     8  |   1.015075    .037925    26.77   0.000     .9407374    1.089412
                     9  |   1.140019   .0406577    28.04   0.000     1.060325    1.219713
                    10  |   1.252733   .0439449    28.51   0.000     1.166596     1.33887
                    11  |   1.319614   .0469805    28.09   0.000     1.227527    1.411701
                    12  |   1.345228   .0502874    26.75   0.000     1.246659    1.443797
                    13  |   1.387399   .0534155    25.97   0.000     1.282698    1.492099
                    14  |   1.429915   .0565343    25.29   0.000     1.319102    1.540729
                    15  |   1.495222   .0601003    24.88   0.000     1.377419    1.613025
                    16  |    1.53619   .0627734    24.47   0.000     1.413147    1.659233
                    17  |   1.590208   .0661179    24.05   0.000     1.460609    1.719806
                    18  |    1.51984   .0693574    21.91   0.000     1.383891    1.655788
                    19  |   1.546559   .0726042    21.30   0.000     1.404247    1.688871
                    20  |   1.594052   .0755532    21.10   0.000     1.445959    1.742144
                    21  |   1.612434   .0784178    20.56   0.000     1.458726    1.766141
                    22  |    1.66971   .0810695    20.60   0.000     1.510804    1.828615
                    23  |   1.713137   .0837286    20.46   0.000      1.54902    1.877254
                    24  |   1.741462   .0867161    20.08   0.000     1.571489    1.911435
                    25  |   1.751023   .0894883    19.57   0.000     1.575616     1.92643
                    26  |  -.2306436   .0454787    -5.07   0.000    -.3197868   -.1415003
                    27  |  -.1020929   .0433502    -2.36   0.019    -.1870642   -.0171216
                    28  |   .0629797   .0419077     1.50   0.133    -.0191641    .1451234
                    29  |    .281886   .0420189     6.71   0.000     .1995242    .3642478
                    30  |   .4621798    .041976    11.01   0.000     .3799022    .5444575
                    31  |   .6057681   .0434168    13.95   0.000     .5206664    .6908698
                    32  |   .7632646   .0447502    17.06   0.000     .6755492    .8509799
                    33  |   .8268833    .046247    17.88   0.000      .736234    .9175326
                    34  |   .9719227   .0483811    20.09   0.000     .8770905    1.066755
                    35  |   1.066504   .0503368    21.19   0.000     .9678379    1.165169
                    36  |   1.113063   .0530024    21.00   0.000     1.009172    1.216953
                    37  |   1.177526   .0556677    21.15   0.000     1.068411    1.286641
                    38  |   1.257166   .0583022    21.56   0.000     1.142887    1.371444
                    39  |   1.295796   .0611098    21.20   0.000     1.176014    1.415578
                    40  |   1.390639   .0646466    21.51   0.000     1.263925    1.517354
                    41  |   1.464923   .0669801    21.87   0.000     1.333634    1.596211
                    42  |   1.543048   .0697798    22.11   0.000     1.406272    1.679824
                    43  |   1.520768    .072964    20.84   0.000     1.377751    1.663786
                    44  |   1.553775   .0760831    20.42   0.000     1.404644    1.702907
                    45  |   1.625307   .0789758    20.58   0.000     1.470506    1.780109
                    46  |   1.627297   .0819834    19.85   0.000       1.4666    1.787994
                    47  |   1.654608   .0842846    19.63   0.000     1.489401    1.819815
                    48  |   1.719739   .0866285    19.85   0.000     1.549938    1.889541
                    49  |   1.719227   .0898052    19.14   0.000     1.543199    1.895255
                    50  |   1.765717   .0925055    19.09   0.000     1.584396    1.947038
                        |
                age_cat |
                     1  |   .2844404   .0167268    17.01   0.000     .2516541    .3172268
                     2  |   .3016154   .0188674    15.99   0.000     .2646332    .3385977
                     3  |   .2838523   .0211473    13.42   0.000     .2424012    .3253033
                     4  |   .2772359   .0236205    11.74   0.000     .2309371    .3235346
                     5  |   .2722655   .0264019    10.31   0.000     .2205149    .3240161
                     6  |   .2563343   .0293423     8.74   0.000     .1988202    .3138485
                     7  |   .2668152   .0323326     8.25   0.000     .2034397    .3301906
                     8  |   .2539137   .0355463     7.14   0.000      .184239    .3235885
                     9  |   .2500484   .0386939     6.46   0.000     .1742041    .3258927
                    10  |   .2389261   .0419692     5.69   0.000     .1566618    .3211903
                    11  |   .2421332    .045321     5.34   0.000     .1532991    .3309674
                    12  |   .2361681   .0486488     4.85   0.000      .140811    .3315252
                    13  |    .227831   .0519367     4.39   0.000     .1260293    .3296327
                    14  |   .2306173   .0553189     4.17   0.000     .1221861    .3390484
                    15  |   .2292023   .0587335     3.90   0.000     .1140781    .3443265
                    16  |   .2288161   .0621265     3.68   0.000     .1070413     .350591
                    17  |   .2142598   .0657169     3.26   0.001     .0854473    .3430723
                    18  |   .2160081   .0691786     3.12   0.002     .0804103    .3516059
                    19  |   .1956775   .0729374     2.68   0.007     .0527121    .3386428
                    20  |   .1669185   .0797959     2.09   0.036     .0105097    .3233274
                    25  |   .1241062   .0912193     1.36   0.174    -.0546937    .3029062
                    30  |   .1248866   .1211617     1.03   0.303    -.1126037    .3623769
                    40  |    .164058   .1355581     1.21   0.226     -.101651     .429767
                    50  |   .1576846   .1489447     1.06   0.290    -.1342636    .4496327
                        |
                  _cons |   7.424994   .0326908   227.13   0.000     7.360917    7.489072
------------------------+----------------------------------------------------------------
                sigma_u |  1.2198657
                sigma_e |  .55683009
                    rho |  .82756564   (fraction of variance due to u_i)
-----------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

Fixed-effects (within) regression               Number of obs      =    368105
Group variable: firm_person                     Number of groups   =     42279

R-sq:  within  = 0.2277                         Obs per group: min =         1
       between = 0.1237                                        avg =       8.7
       overall = 0.1226                                        max =        25

                                                F(82,16123)        =    118.05
corr(u_i, Xb)  = 0.0191                         Prob > F           =    0.0000

                                                (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------------
                             |               Robust
                        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------------+----------------------------------------------------------------
                     foreign |   .0655621   .0263926     2.48   0.013     .0138296    .1172946
             during_domestic |    .035003   .0095918     3.65   0.000      .016202    .0538041
              after_domestic |   .0703209    .015827     4.44   0.000     .0392983    .1013436
                during_expat |   .2062952    .033936     6.08   0.000     .1397769    .2728135
                 after_expat |   .2801202    .039487     7.09   0.000     .2027213    .3575191
during_domestic_H_young_firm |    .008045   .0117529     0.68   0.494     -.014992    .0310819
 after_domestic_H_young_firm |  -.0002542   .0227796    -0.01   0.991    -.0449048    .0443964
   during_expat_H_young_firm |  -.0704973   .0467369    -1.51   0.131    -.1621069    .0211123
    after_expat_H_young_firm |  -.0375493   .0590605    -0.64   0.525    -.1533145    .0782159
                             |
                    ind_year |
                          2  |   .0859427   .0194449     4.42   0.000     .0478285    .1240569
                          3  |   .2806523    .024491    11.46   0.000     .2326472    .3286573
                          4  |   .4854678    .026376    18.41   0.000     .4337679    .5371676
                          5  |   .6400508   .0293084    21.84   0.000     .5826031    .6974985
                          6  |   .8256376   .0326041    25.32   0.000       .76173    .8895452
                          7  |   .9496023   .0352756    26.92   0.000     .8804582    1.018746
                          8  |   1.019708   .0379862    26.84   0.000     .9452506    1.094165
                          9  |   1.145466   .0407437    28.11   0.000     1.065604    1.225328
                         10  |   1.258396   .0440404    28.57   0.000     1.172072     1.34472
                         11  |   1.325228   .0470964    28.14   0.000     1.232913    1.417542
                         12  |   1.350725   .0504129    26.79   0.000     1.251911     1.44954
                         13  |   1.392729   .0535642    26.00   0.000     1.287737    1.497721
                         14  |   1.434948   .0567097    25.30   0.000     1.323791    1.546105
                         15  |   1.499981   .0603085    24.87   0.000      1.38177    1.618192
                         16  |   1.540718   .0629937    24.46   0.000     1.417243    1.664193
                         17  |   1.594419   .0663659    24.02   0.000     1.464334    1.724503
                         18  |   1.523807   .0696411    21.88   0.000     1.387303    1.660312
                         19  |    1.55028   .0729116    21.26   0.000     1.407365    1.693195
                         20  |   1.597417   .0758954    21.05   0.000     1.448654     1.74618
                         21  |   1.615477   .0787772    20.51   0.000     1.461065    1.769889
                         22  |   1.672374    .081464    20.53   0.000     1.512695    1.832052
                         23  |   1.715507   .0841346    20.39   0.000     1.550594     1.88042
                         24  |   1.743514    .087149    20.01   0.000     1.572692    1.914336
                         25  |    1.75273   .0899208    19.49   0.000     1.576475    1.928985
                         26  |  -.2311793   .0454823    -5.08   0.000    -.3203297   -.1420289
                         27  |  -.1022043   .0433719    -2.36   0.018     -.187218   -.0171906
                         28  |   .0635194   .0419332     1.51   0.130    -.0186743    .1457131
                         29  |   .2832663   .0420639     6.73   0.000     .2008164    .3657161
                         30  |   .4642773   .0420443    11.04   0.000     .3818659    .5466888
                         31  |   .6087943    .043504    13.99   0.000     .5235217     .694067
                         32  |    .767184   .0448551    17.10   0.000     .6792629     .855105
                         33  |   .8316684    .046352    17.94   0.000     .7408133    .9225236
                         34  |   .9776052   .0484906    20.16   0.000     .8825582    1.072652
                         35  |   1.072273    .050465    21.25   0.000     .9733559     1.17119
                         36  |   1.118653   .0531151    21.06   0.000     1.014541    1.222764
                         37  |   1.182923   .0557986    21.20   0.000     1.073551    1.292294
                         38  |   1.262307   .0584545    21.59   0.000      1.14773    1.376885
                         39  |   1.300703   .0612965    21.22   0.000     1.180555    1.420851
                         40  |    1.39528   .0648644    21.51   0.000     1.268139    1.522421
                         41  |   1.469358   .0672061    21.86   0.000     1.337626    1.601089
                         42  |   1.547254   .0700299    22.09   0.000     1.409987     1.68452
                         43  |   1.524738   .0732251    20.82   0.000     1.381208    1.668267
                         44  |   1.557497   .0763666    20.39   0.000      1.40781    1.707184
                         45  |   1.628716   .0792937    20.54   0.000     1.473291     1.78414
                         46  |   1.630303    .082327    19.80   0.000     1.468932    1.791673
                         47  |   1.657334   .0846539    19.58   0.000     1.491402    1.823265
                         48  |   1.722198   .0870185    19.79   0.000     1.551632    1.892763
                         49  |   1.721415   .0902354    19.08   0.000     1.544543    1.898286
                         50  |   1.767591   .0929497    19.02   0.000     1.585399    1.949782
                             |
                     age_cat |
                          1  |   .2843408   .0167346    16.99   0.000      .251539    .3171425
                          2  |   .3014499   .0188945    15.95   0.000     .2644145    .3384853
                          3  |   .2836426   .0211988    13.38   0.000     .2420907    .3251946
                          4  |   .2769532   .0236983    11.69   0.000     .2305018    .3234046
                          5  |   .2719472   .0265122    10.26   0.000     .2199804     .323914
                          6  |   .2559927   .0294979     8.68   0.000     .1981735    .3138119
                          7  |   .2663675   .0325444     8.18   0.000     .2025769    .3301582
                          8  |   .2534169   .0357839     7.08   0.000     .1832765    .3235573
                          9  |   .2495641   .0389951     6.40   0.000     .1731295    .3259988
                         10  |   .2384644    .042348     5.63   0.000     .1554577    .3214712
                         11  |   .2431288   .0454332     5.35   0.000     .1540746     .332183
                         12  |   .2373707   .0487654     4.87   0.000     .1417851    .3329563
                         13  |   .2291837   .0520633     4.40   0.000     .1271339    .3312335
                         14  |   .2321197   .0554574     4.19   0.000     .1234169    .3408224
                         15  |   .2307973   .0588794     3.92   0.000     .1153872    .3462075
                         16  |   .2304966   .0622804     3.70   0.000     .1084202    .3525731
                         17  |   .2160868   .0658635     3.28   0.001      .086987    .3451866
                         18  |   .2179007    .069331     3.14   0.002     .0820042    .3537971
                         19  |   .1977556   .0730849     2.71   0.007     .0545012      .34101
                         20  |   .1692815   .0799618     2.12   0.034     .0125475    .3260155
                         25  |   .1268887   .0914183     1.39   0.165    -.0523013    .3060788
                         30  |   .1278558   .1213532     1.05   0.292      -.11001    .3657217
                         40  |   .1659763   .1357369     1.22   0.221     -.100083    .4320356
                         50  |   .1599889   .1490849     1.07   0.283    -.1322341    .4522118
                             |
                       _cons |   7.422016   .0326717   227.17   0.000     7.357976    7.486056
-----------------------------+----------------------------------------------------------------
                     sigma_u |   1.219667
                     sigma_e |  .55684306
                         rho |   .8275125   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------------

 ( 1)  - during_domestic_H_young_firm + during_expat_H_young_firm = 0

       F(  1, 16123) =    2.73
            Prob > F =    0.0983

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }
key: R2_within
value: .227651232861547
key: p_value
value: .0983182620646418

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Fixed-effects (within) regression               Number of obs     =    368,105
Group variable: firm_person                     Number of groups  =     42,279

R-sq:                                           Obs per group:
     within  = 0.2277                                         min =          1
     between = 0.1237                                         avg =        8.7
     overall = 0.1226                                         max =         25

                                                F(82,16123)       =     118.05
corr(u_i, Xb)  = 0.0191                         Prob > F          =     0.0000

                                                (Std. Err. adjusted for 16,124 clusters in id)
----------------------------------------------------------------------------------------------
                             |               Robust
                        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-----------------------------+----------------------------------------------------------------
                     foreign |   .0655621   .0263926     2.48   0.013     .0138296    .1172946
             during_domestic |    .035003   .0095918     3.65   0.000      .016202    .0538041
              after_domestic |   .0703209    .015827     4.44   0.000     .0392983    .1013436
                during_expat |   .2062952    .033936     6.08   0.000     .1397769    .2728135
                 after_expat |   .2801202    .039487     7.09   0.000     .2027213    .3575191
during_domestic_H_young_firm |    .008045   .0117529     0.68   0.494     -.014992    .0310819
 after_domestic_H_young_firm |  -.0002542   .0227796    -0.01   0.991    -.0449048    .0443964
   during_expat_H_young_firm |  -.0704973   .0467369    -1.51   0.131    -.1621069    .0211123
    after_expat_H_young_firm |  -.0375493   .0590605    -0.64   0.525    -.1533145    .0782159
                             |
                    ind_year |
                          2  |   .0859427   .0194449     4.42   0.000     .0478285    .1240569
                          3  |   .2806523    .024491    11.46   0.000     .2326472    .3286573
                          4  |   .4854678    .026376    18.41   0.000     .4337679    .5371676
                          5  |   .6400508   .0293084    21.84   0.000     .5826031    .6974985
                          6  |   .8256376   .0326041    25.32   0.000       .76173    .8895452
                          7  |   .9496023   .0352756    26.92   0.000     .8804582    1.018746
                          8  |   1.019708   .0379862    26.84   0.000     .9452506    1.094165
                          9  |   1.145466   .0407437    28.11   0.000     1.065604    1.225328
                         10  |   1.258396   .0440404    28.57   0.000     1.172072     1.34472
                         11  |   1.325228   .0470964    28.14   0.000     1.232913    1.417542
                         12  |   1.350725   .0504129    26.79   0.000     1.251911     1.44954
                         13  |   1.392729   .0535642    26.00   0.000     1.287737    1.497721
                         14  |   1.434948   .0567097    25.30   0.000     1.323791    1.546105
                         15  |   1.499981   .0603085    24.87   0.000      1.38177    1.618192
                         16  |   1.540718   .0629937    24.46   0.000     1.417243    1.664193
                         17  |   1.594419   .0663659    24.02   0.000     1.464334    1.724503
                         18  |   1.523807   .0696411    21.88   0.000     1.387303    1.660312
                         19  |    1.55028   .0729116    21.26   0.000     1.407365    1.693195
                         20  |   1.597417   .0758954    21.05   0.000     1.448654     1.74618
                         21  |   1.615477   .0787772    20.51   0.000     1.461065    1.769889
                         22  |   1.672374    .081464    20.53   0.000     1.512695    1.832052
                         23  |   1.715507   .0841346    20.39   0.000     1.550594     1.88042
                         24  |   1.743514    .087149    20.01   0.000     1.572692    1.914336
                         25  |    1.75273   .0899208    19.49   0.000     1.576475    1.928985
                         26  |  -.2311793   .0454823    -5.08   0.000    -.3203297   -.1420289
                         27  |  -.1022043   .0433719    -2.36   0.018     -.187218   -.0171906
                         28  |   .0635194   .0419332     1.51   0.130    -.0186743    .1457131
                         29  |   .2832663   .0420639     6.73   0.000     .2008164    .3657161
                         30  |   .4642773   .0420443    11.04   0.000     .3818659    .5466888
                         31  |   .6087943    .043504    13.99   0.000     .5235217     .694067
                         32  |    .767184   .0448551    17.10   0.000     .6792629     .855105
                         33  |   .8316684    .046352    17.94   0.000     .7408133    .9225236
                         34  |   .9776052   .0484906    20.16   0.000     .8825582    1.072652
                         35  |   1.072273    .050465    21.25   0.000     .9733559     1.17119
                         36  |   1.118653   .0531151    21.06   0.000     1.014541    1.222764
                         37  |   1.182923   .0557986    21.20   0.000     1.073551    1.292294
                         38  |   1.262307   .0584545    21.59   0.000      1.14773    1.376885
                         39  |   1.300703   .0612965    21.22   0.000     1.180555    1.420851
                         40  |    1.39528   .0648644    21.51   0.000     1.268139    1.522421
                         41  |   1.469358   .0672061    21.86   0.000     1.337626    1.601089
                         42  |   1.547254   .0700299    22.09   0.000     1.409987     1.68452
                         43  |   1.524738   .0732251    20.82   0.000     1.381208    1.668267
                         44  |   1.557497   .0763666    20.39   0.000      1.40781    1.707184
                         45  |   1.628716   .0792937    20.54   0.000     1.473291     1.78414
                         46  |   1.630303    .082327    19.80   0.000     1.468932    1.791673
                         47  |   1.657334   .0846539    19.58   0.000     1.491402    1.823265
                         48  |   1.722198   .0870185    19.79   0.000     1.551632    1.892763
                         49  |   1.721415   .0902354    19.08   0.000     1.544543    1.898286
                         50  |   1.767591   .0929497    19.02   0.000     1.585399    1.949782
                             |
                     age_cat |
                          1  |   .2843408   .0167346    16.99   0.000      .251539    .3171425
                          2  |   .3014499   .0188945    15.95   0.000     .2644145    .3384853
                          3  |   .2836426   .0211988    13.38   0.000     .2420907    .3251946
                          4  |   .2769532   .0236983    11.69   0.000     .2305018    .3234046
                          5  |   .2719472   .0265122    10.26   0.000     .2199804     .323914
                          6  |   .2559927   .0294979     8.68   0.000     .1981735    .3138119
                          7  |   .2663675   .0325444     8.18   0.000     .2025769    .3301582
                          8  |   .2534169   .0357839     7.08   0.000     .1832765    .3235573
                          9  |   .2495641   .0389951     6.40   0.000     .1731295    .3259988
                         10  |   .2384644    .042348     5.63   0.000     .1554577    .3214712
                         11  |   .2431288   .0454332     5.35   0.000     .1540746     .332183
                         12  |   .2373707   .0487654     4.87   0.000     .1417851    .3329563
                         13  |   .2291837   .0520633     4.40   0.000     .1271339    .3312335
                         14  |   .2321197   .0554574     4.19   0.000     .1234169    .3408224
                         15  |   .2307973   .0588794     3.92   0.000     .1153872    .3462075
                         16  |   .2304966   .0622804     3.70   0.000     .1084202    .3525731
                         17  |   .2160868   .0658635     3.28   0.001      .086987    .3451866
                         18  |   .2179007    .069331     3.14   0.002     .0820042    .3537971
                         19  |   .1977556   .0730849     2.71   0.007     .0545012      .34101
                         20  |   .1692815   .0799618     2.12   0.034     .0125475    .3260155
                         25  |   .1268887   .0914183     1.39   0.165    -.0523013    .3060788
                         30  |   .1278558   .1213532     1.05   0.292      -.11001    .3657217
                         40  |   .1659763   .1357369     1.22   0.221     -.100083    .4320356
                         50  |   .1599889   .1490849     1.07   0.283    -.1322341    .4522118
                             |
                       _cons |   7.422016   .0326717   227.17   0.000     7.357976    7.486056
-----------------------------+----------------------------------------------------------------
                     sigma_u |   1.219667
                     sigma_e |  .55684306
                         rho |   .8275125   (fraction of variance due to u_i)
----------------------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. *Szelekci az akviczis mintban
. xtset firm_person year
       panel variable:  firm_person (unbalanced)
        time variable:  year, 1992 to 2016, but with gaps
                delta:  1 unit

. areg f1.expat `outcomes' if ever_foreign==1&greenfield!=1, a(industry_year) cluster(frame_id)

Linear regression, absorbing indicators         Number of obs     =     94,112
Absorbed variable: industry_year                No. of categories =      1,651
                                                F(   4,   1468)   =      12.90
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0725
                                                Adj R-squared     =     0.0559
                                                Root MSE          =     0.4498

                           (Std. Err. adjusted for 1,469 clusters in frame_id)
------------------------------------------------------------------------------
             |               Robust
     F.expat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         lnL |   .0103876   .0059477     1.75   0.081    -.0012792    .0220544
        lnKL |   .0049095   .0047383     1.04   0.300    -.0043851    .0142041
        lnQL |   .0189954   .0079135     2.40   0.017     .0034726    .0345183
    exporter |   .0747732   .0137995     5.42   0.000     .0477044     .101842
       _cons |   .0070746   .0772507     0.09   0.927    -.1444589    .1586081
------------------------------------------------------------------------------

. do regram output/regression/selection 1 1

. args tablefile specname speclabel

. 
. local fmt "%10.5f"

. 
. * create directory if needed
. * FIXME: this only works with relative paths
. local list_of_dirs = subinstr("`tablefile'/columns","/"," ",.)

. local sofar "."

. foreach word in `list_of_dirs' {
  2.         local sofar "`sofar'/`word'"
  3.         capture mkdir "`sofar'"
  4. }

. 
. macro shift

. macro shift

. macro shift

. 
. local _others ""

. local _state "key"

. while "`1'"!="" {
  2.         if ("`_state'"=="key") {
  3.                 di "key: `1'"
  4.                 local _key `1'
  5.                 local _state "value"
  6.                 local _others "`_others' `1'"
  7.         }
  8.         else {
  9.                 di "value: `1'"
 10.                 local `_key' "`1'"
 11.                 local _state "key"
 12.         }
 13.         macro shift
 14. }

. 
. estimates

--------------------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------------------

Linear regression, absorbing indicators         Number of obs     =     94,112
Absorbed variable: industry_year                No. of categories =      1,651
                                                F(   4,   1468)   =      12.90
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0725
                                                Adj R-squared     =     0.0559
                                                Root MSE          =     0.4498

                           (Std. Err. adjusted for 1,469 clusters in frame_id)
------------------------------------------------------------------------------
             |               Robust
     F.expat |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
         lnL |   .0103876   .0059477     1.75   0.081    -.0012792    .0220544
        lnKL |   .0049095   .0047383     1.04   0.300    -.0043851    .0142041
        lnQL |   .0189954   .0079135     2.40   0.017     .0034726    .0345183
    exporter |   .0747732   .0137995     5.42   0.000     .0477044     .101842
       _cons |   .0070746   .0772507     0.09   0.927    -.1444589    .1586081
------------------------------------------------------------------------------

. tempname output coefs stats variables b se

. matrix `coefs' = r(table)

. local observations `e(N)'

. local R2 `e(r2)'

. 
. local `stats' : rownames(`coefs')

. local `variables' : colnames(`coefs')

. 
. 
. file open `output' using "`tablefile'/columns/`specname'.yaml", write text replace

. 
. file write `output' "id: " "`specname'" _newline

. file write `output' "label: " "`speclabel'" _newline

. 
. file write `output' "coefficients:" _newline

. foreach X in ``variables'' {
  2.         scalar `b' = `coefs'[rownumb(`coefs',"b"),colnumb(`coefs',"`X'")]
  3.         scalar `se' = `coefs'[rownumb(`coefs',"se"),colnumb(`coefs',"`X'")]
  4.         file write `output' (" - id: `X'") _newline
  5.         file write `output' ("   estimate: " + string(`b', "`fmt'")) _newline
  6.         file write `output' ("   standard_error: " + string(`se', "`fmt'")) _newline
  7.         file write `output' ("   t_statistic: " + string(`b'/`se', "`fmt'")) _newline
  8.         file write `output' ("   p_value: " + string(`coefs'[rownumb(`coefs',"pvalue"),colnumb(`coefs',"`X'")]), "`fmt'") _
> newline
  9. }

. file write `output' "extra_rows:" _newline

. foreach X in R2 observations `_others'{
  2.         if ("``X''"!="") {
  3.                 file write `output' (" - id: `X'") _newline
  4.                 file write `output' ("   value: ``X''") _newline
  5.         }
  6. }

. 
. file close `output'

. 
end of do-file

. 
. keep if ever_foreign==1
(405,099 observations deleted)

. 
. foreach X in outcomes sample_acquisitions {
  2.         global `X' ``X''
  3. }

. do event_study

. local N = Tbefore+Tduring+2

. 
. local T1 = Tbefore 

. local T2 = Tduring

. 
. foreach X in domestic expat {
  2.         * founders do not enter event study sample, only as controls
.         replace `X' = 0 if founder==1
  3.         gen byte `X'_p_0 = tenure==0 & (`X'==1)
  4.         forval t=1/`T1' {
  5.                 gen byte `X'_m_`t' = tenure== -`t' & (`X'==1)
  6.         }
  7.         forval t=1/`T2' {
  8.                 gen byte `X'_p_`t' = tenure== `t' & (`X'==1)
  9.         }
 10. }
(46,913 real changes made)
(54,236 real changes made)

. local X foreign

. gen byte `X'_p_0 = tenure_`X'==0

. forval t=1/`T1' {
  2.         gen byte `X'_m_`t' = tenure_`X'== -`t'
  3. }

. forval t=1/`T2' {
  2.         gen byte `X'_p_`t' = tenure_`X'== `t'
  3. }

. sort frame_id year

. 
. * illustrate window overlap and recoding
. l manager_id expat year tenure* if frame_id=="ft10072219"

        +----------------------------------------------------------------------------------------------------------------------+
  2671. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2006 |       -5 |     57 |       57 |       57 |       57 |       57 |       57 |       57 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       57 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2672. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2006 |       -5 |     -7 |       -7 |       -7 |       -7 |       -7 |       -7 |       -7 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -7 |       -7  |       -7  |       -7  |       -7  |       -7  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2673. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2006 |       -5 |      0 |        0 |        0 |        0 |        0 |        0 |        0 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2674. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2006 |       -5 |     -6 |       -6 |       -6 |       -6 |       -6 |       -6 |       -6 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -6 |       -6  |       -6  |       -6  |       -6  |       -6  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2675. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2006 |       -5 |     -7 |       -7 |       -7 |       -7 |       -7 |       -7 |       -7 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2676. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2007 |       -4 |      1 |        1 |        1 |        1 |        1 |        1 |        1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        1 |        1  |        1  |        1  |        1  |        1  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2677. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2007 |       -4 |     -6 |       -6 |       -6 |       -6 |       -6 |       -6 |       -6 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -6 |       -6  |       -6  |       -6  |       -6  |       -6  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2678. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2007 |       -4 |     -6 |       -6 |       -6 |       -6 |       -6 |       -6 |       -6 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2679. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2007 |       -4 |     58 |       58 |       58 |       58 |       58 |       58 |       58 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       58 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2680. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2007 |       -4 |     -5 |       -5 |       -5 |       -5 |       -5 |       -5 |       -5 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -5 |       -5  |       -5  |       -5  |       -5  |       -5  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2681. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2008 |       -3 |     -4 |       -4 |       -4 |       -4 |       -4 |       -4 |       -4 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -4 |       -4  |       -4  |       -4  |       -4  |       -4  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2682. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2008 |       -3 |     59 |       59 |       59 |       59 |       59 |       59 |       59 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       59 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2683. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2008 |       -3 |      2 |        2 |        2 |        2 |        2 |        2 |        2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        2 |        2  |        2  |        2  |        2  |        2  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2684. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2008 |       -3 |     -5 |       -5 |       -5 |       -5 |       -5 |       -5 |       -5 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -5 |       -5  |       -5  |       -5  |       -5  |       -5  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2685. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2008 |       -3 |     -5 |       -5 |       -5 |       -5 |       -5 |       -5 |       -5 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2686. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2009 |       -2 |     60 |       60 |       60 |       60 |       60 |       60 |       60 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       60 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2687. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2009 |       -2 |      3 |        3 |        3 |        3 |        3 |        3 |        3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        3 |        3  |        3  |        3  |        3  |        3  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2688. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2009 |       -2 |     -3 |       -3 |       -3 |       -3 |       -3 |       -3 |       -3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -3 |       -3  |       -3  |       -3  |       -3  |       -3  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2689. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2009 |       -2 |     -4 |       -4 |       -4 |       -4 |       -4 |       -4 |       -4 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -4 |       -4  |       -4  |       -4  |       -4  |       -4  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2690. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2009 |       -2 |     -4 |       -4 |       -4 |       -4 |       -4 |       -4 |       -4 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2691. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2010 |       -1 |     61 |       61 |       61 |       61 |       61 |       61 |       61 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       61 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2692. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2010 |       -1 |      4 |        4 |        4 |        4 |        4 |        4 |        4 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        4 |        4  |        4  |        4  |        4  |        4  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2693. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2010 |       -1 |     -2 |       -2 |       -2 |       -2 |       -2 |       -2 |       -2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -2 |       -2  |       -2  |       -2  |       -2  |       -2  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2694. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2010 |       -1 |     -3 |       -3 |       -3 |       -3 |       -3 |       -3 |       -3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -3 |       -3  |       -3  |       -3  |       -3  |       -3  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2695. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2010 |       -1 |     -3 |       -3 |       -3 |       -3 |       -3 |       -3 |       -3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2696. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2011 |        0 |     62 |       62 |       62 |       62 |       62 |       62 |       62 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       62 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2697. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2011 |        0 |      5 |        5 |        5 |        5 |        5 |        5 |        5 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        5 |        5  |        5  |        5  |        5  |        5  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2698. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2011 |        0 |     -1 |       -1 |       -1 |       -1 |       -1 |       -1 |       -1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -1 |       -1  |       -1  |       -1  |       -1  |       -1  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2699. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2011 |        0 |     -2 |       -2 |       -2 |       -2 |       -2 |       -2 |       -2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2700. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2011 |        0 |     -2 |       -2 |       -2 |       -2 |       -2 |       -2 |       -2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -2 |       -2  |       -2  |       -2  |       -2  |       -2  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2701. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2012 |        1 |      6 |        6 |        6 |        6 |        6 |        6 |        6 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        6 |        6  |        6  |        6  |        6  |        6  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2702. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2012 |        1 |      0 |        0 |        0 |        0 |        0 |        0 |        0 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2703. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2012 |        1 |     63 |       63 |       63 |       63 |       63 |       63 |       63 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       63 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2704. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2012 |        1 |     -1 |       -1 |       -1 |       -1 |       -1 |       -1 |       -1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2705. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2012 |        1 |     -1 |       -1 |       -1 |       -1 |       -1 |       -1 |       -1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       -1 |       -1  |       -1  |       -1  |       -1  |       -1  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2706. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2013 |        2 |      7 |        7 |        7 |        7 |        7 |        7 |        7 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        7 |        7  |        7  |        7  |        7  |        7  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2707. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2013 |        2 |      1 |        1 |        1 |        1 |        1 |        1 |        1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        1 |        1  |        1  |        1  |        1  |        1  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2708. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2013 |        2 |     64 |       64 |       64 |       64 |       64 |       64 |       64 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       64 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2709. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2013 |        2 |      0 |        0 |        0 |        0 |        0 |        0 |        0 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2710. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2013 |        2 |      0 |        0 |        0 |        0 |        0 |        0 |        0 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2711. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2014 |        3 |     65 |       65 |       65 |       65 |       65 |       65 |       65 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       65 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2712. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2014 |        3 |      1 |        1 |        1 |        1 |        1 |        1 |        1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        1 |        1  |        1  |        1  |        1  |        1  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2713. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2014 |        3 |      2 |        2 |        2 |        2 |        2 |        2 |        2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        2 |        2  |        2  |        2  |        2  |        2  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2714. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2014 |        3 |      8 |        8 |        8 |        8 |        8 |        8 |        8 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        8 |        8  |        8  |        8  |        8  |        8  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2715. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2014 |        3 |      1 |        1 |        1 |        1 |        1 |        1 |        1 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2716. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2015 |        4 |      9 |        9 |        9 |        9 |        9 |        9 |        9 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        9 |        9  |        9  |        9  |        9  |        9  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2717. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2015 |        4 |      2 |        2 |        2 |        2 |        2 |        2 |        2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2718. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2015 |        4 |      3 |        3 |        3 |        3 |        3 |        3 |        3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        3 |        3  |        3  |        3  |        3  |        3  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2719. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2015 |        4 |      2 |        2 |        2 |        2 |        2 |        2 |        2 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        2 |        2  |        2  |        2  |        2  |        2  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2720. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2015 |        4 |     66 |       66 |       66 |       66 |       66 |       66 |       66 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       66 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2721. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP18562 |     0 | 2016 |        5 |      3 |        3 |        3 |        3 |        3 |        3 |        3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        3 |        3  |        3  |        3  |        3  |        3  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2722. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP71420 |     0 | 2016 |        5 |     10 |       10 |       10 |       10 |       10 |       10 |       10 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |       10 |       10  |       10  |       10  |       10  |       10  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2723. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        |         PP45376 |     0 | 2016 |        5 |      3 |        3 |        3 |        3 |        3 |        3 |        3 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2724. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP235110_941109 |     0 | 2016 |        5 |     67 |       67 |       67 |       67 |       67 |       67 |       67 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |       67 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

        +----------------------------------------------------------------------------------------------------------------------+
  2725. |      manager_id | expat | year | tenure~n | tenure | tenure~c | tenure.. | tenure.. | tenure.. | tenure.. | tenure.. |
        | PP177715_998327 |     0 | 2016 |        5 |      4 |        4 |        4 |        4 |        4 |        4 |        4 |
        |----------------------------------------------------------------------------------------------------------------------|
        | tenure.. | tenure..  | tenure~t  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenur~DD | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~DE  | tenure..  |
        |        4 |        4  |        4  |        4  |        4  |        4  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  | tenur~ED  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------|
        | tenure.. | tenure..  | tenure..  | tenure..  | tenur~EE  | tenure..  | tenure..  | tenure..  | tenure..  | tenure..  |
        |        0 |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |        0  |
        |----------------------------------------------------------+-----------------------------------------------------------|
        |                         tenure..                         |                         tenure..                          |
        |                                0                         |                                0                          |
        +----------------------------------------------------------------------------------------------------------------------+

. 
. local Tbefore = Tbefore

. local Tafter = Tduring

. 
. * keep post event and after observations for estimation of fixed effects, but dummy these out
. gen byte post = (after==0) & tenure>Tduring

. gen byte post_expat = post & expat

. 
. foreach Y of var $outcomes {
  2.         * with firm FE, controls are years more than Tbefore before any event happens
.         xtreg `Y' *_m_* *_p_* i.ind_year i.age_cat if $sample_acquisitions & tenure<=Tduring [aw=inverse_weight], i(firm_perso
> n) fe vce(cluster id)
  3.         local title : variable label `e(depvar)'
  4. 
.         preserve
  5.         clear
  6.         set obs `N'
  7.         gen t = _n-2-`Tbefore'
  8.         label var t "Time since new manager (year)"
  9. 
.         gen expat_lower = 0
 10.         gen expat_upper = 0
 11.         label var expat_upper "95% CI of difference"
 12.         label var expat_lower "95% CI of difference"
 13.         foreach X in foreign domestic expat  {
 14.                 gen `X'_beta=0
 15.                 forval t=-`Tbefore'/`Tafter' {
 16.                         local tag "`t'"
 17.                         if (`t'<0) {
 18.                                 local tag = -`t'
 19.                                 local tag  _m_`tag'
 20.                         }
 21.                         else {
 22.                                 local tag  _p_`t'
 23.                         }
 24.                         replace `X'_beta = _b[`X'`tag'] if t==`t'
 25.                         matrix V = e(V)
 26.                         matrix V_diff = V["expat`tag'", "expat`tag'"] + V["domestic`tag'", "domestic`tag'"] - 2*V["expat`ta
> g'", "domestic`tag'"]
 27.                         scalar se_diff = sqrt(V_diff[1,1])
 28.                         replace expat_lower = `X'_beta-1.96*se_diff if t==`t'
 29.                         replace expat_upper = `X'_beta+1.96*se_diff if t==`t'
 30.                 }
 31.                 label var `X'_beta "`Y'"
 32. 
.         }
 33.         label var foreign_beta "Foreign owner"
 34.         label var expat_beta "Expat manager"
 35.         label var domestic_beta "Domestic manager"
 36. 
.         tw      (rarea expat_lower expat_upper  t if t>=-Tbefore-1 & t<=Tduring, fintensity(inten10) pstyle(p2)) ///
>                 (line domestic_beta  t if t>=-Tbefore-1 & t<=Tduring, sort pstyle(p1) lwidth(thick)) ///
>                 (line expat_beta  t if t>=-Tbefore-1 & t<=Tduring, sort pstyle(p2) lwidth(thick)) ///
>                 , scheme(538w) title(`title') aspect(0.67) xline(-0.5)
 37.         graph export output/figure/`Y'_event_study.png, replace width(800)
 38.         
.         restore
 39. 
. }

Fixed-effects (within) regression               Number of obs      =     52622
Group variable: firm_person                     Number of groups   =      7092

R-sq:  within  = 0.1304                         Obs per group: min =         1
       between = 0.1169                                        avg =       7.4
       overall = 0.1243                                        max =        12

                                                F(106,1510)        =      5.26
corr(u_i, Xb)  = -0.1910                        Prob > F           =    0.0000

                                 (Std. Err. adjusted for 1,511 clusters in id)
------------------------------------------------------------------------------
             |               Robust
         lnL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
domestic_m_1 |  -.0886394    .048045    -1.84   0.065    -.1828814    .0056026
domestic_m_2 |  -.0596189   .0391264    -1.52   0.128    -.1363667    .0171289
domestic_m_3 |   -.041924   .0296899    -1.41   0.158    -.1001618    .0163138
domestic_m_4 |  -.0093724   .0198285    -0.47   0.637    -.0482666    .0295218
   expat_m_1 |   .0401609   .0597609     0.67   0.502    -.0770623    .1573841
   expat_m_2 |   .0264481   .0475875     0.56   0.578    -.0668966    .1197928
   expat_m_3 |   .0233312   .0382443     0.61   0.542    -.0516862    .0983487
   expat_m_4 |   .0016592   .0267922     0.06   0.951    -.0508948    .0542131
 foreign_m_1 |  -.0401089   .0458692    -0.87   0.382     -.130083    .0498651
 foreign_m_2 |  -.0451824   .0472883    -0.96   0.339    -.1379401    .0475752
 foreign_m_3 |  -.0558159   .0434817    -1.28   0.199    -.1411068    .0294751
 foreign_m_4 |  -.0379549   .0377058    -1.01   0.314    -.1119162    .0360064
domestic_p_0 |  -.1176954   .0581813    -2.02   0.043    -.2318202   -.0035707
domestic_p_1 |  -.1388605   .0677092    -2.05   0.040    -.2716746   -.0060465
domestic_p_2 |  -.1654619    .078535    -2.11   0.035    -.3195111   -.0114126
domestic_p_3 |  -.1711025   .0893332    -1.92   0.056    -.3463327    .0041277
domestic_p_4 |  -.1796451   .1008905    -1.78   0.075    -.3775455    .0182553
domestic_p_5 |  -.1461617     .11251    -1.30   0.194    -.3668541    .0745307
domestic_p_6 |  -.0866883   .1243332    -0.70   0.486    -.3305723    .1571957
   expat_p_0 |  -.0252988    .074982    -0.34   0.736    -.1723787    .1217812
   expat_p_1 |  -.0294541   .0804138    -0.37   0.714    -.1871886    .1282805
   expat_p_2 |  -.0579235   .0914787    -0.63   0.527    -.2373624    .1215153
   expat_p_3 |  -.0753861   .1017477    -0.74   0.459     -.274968    .1241958
   expat_p_4 |  -.0596684   .1111264    -0.54   0.591     -.277647    .1583101
   expat_p_5 |   -.045497   .1248337    -0.36   0.716    -.2903628    .1993688
   expat_p_6 |  -.0540884    .134699    -0.40   0.688    -.3183053    .2101285
 foreign_p_0 |  -.0242694   .0474487    -0.51   0.609    -.1173417    .0688029
 foreign_p_1 |  -.0141934   .0465967    -0.30   0.761    -.1055945    .0772077
 foreign_p_2 |  -.0324277   .0463753    -0.70   0.485    -.1233946    .0585391
 foreign_p_3 |  -.0236557   .0440862    -0.54   0.592    -.1101325    .0628211
 foreign_p_4 |   -.085959   .0435705    -1.97   0.049    -.1714242   -.0004939
 foreign_p_5 |  -.0299007   .0407224    -0.73   0.463    -.1097792    .0499778
 foreign_p_6 |  -.0284609   .0350292    -0.81   0.417    -.0971719    .0402502
             |
    ind_year |
          2  |  -.0893388   .0554012    -1.61   0.107    -.1980103    .0193327
          3  |  -.2583125   .0805172    -3.21   0.001    -.4162498   -.1003752
          4  |   -.397204   .0987125    -4.02   0.000    -.5908322   -.2035759
          5  |  -.5053022   .1171468    -4.31   0.000    -.7350899   -.2755145
          6  |  -.6128997   .1396829    -4.39   0.000    -.8868927   -.3389066
          7  |  -.6990938   .1572408    -4.45   0.000    -1.007527   -.3906603
          8  |   -.693491   .1769257    -3.92   0.000    -1.040537   -.3464448
          9  |  -.7959142    .196868    -4.04   0.000    -1.182078   -.4097504
         10  |  -.8586222   .2143826    -4.01   0.000    -1.279141   -.4381029
         11  |  -.9580982   .2328308    -4.11   0.000    -1.414804   -.5013921
         12  |  -1.024464   .2522403    -4.06   0.000    -1.519242   -.5296852
         13  |  -1.097727   .2730387    -4.02   0.000    -1.633302   -.5621514
         14  |  -1.139616   .2923337    -3.90   0.000    -1.713039   -.5661931
         15  |  -1.155163   .3113644    -3.71   0.000    -1.765916   -.5444108
         16  |  -1.155928    .327097    -3.53   0.000    -1.797541   -.5143159
         17  |  -1.238263   .3428657    -3.61   0.000    -1.910806   -.5657191
         18  |  -1.347181   .3592332    -3.75   0.000     -2.05183    -.642532
         19  |  -1.329213    .372342    -3.57   0.000    -2.059575   -.5988505
         20  |  -1.365897   .3867772    -3.53   0.000    -2.124574   -.6072194
         21  |  -1.443741   .4035459    -3.58   0.000    -2.235311    -.652171
         22  |  -1.530578     .41891    -3.65   0.000    -2.352285   -.7088704
         23  |  -1.540421   .4340715    -3.55   0.000    -2.391868   -.6889737
         24  |  -1.586379   .4534445    -3.50   0.000    -2.475827   -.6969308
         25  |  -1.584052    .471907    -3.36   0.001    -2.509714   -.6583891
         26  |   1.453817   .1827669     7.95   0.000     1.095313    1.812321
         27  |   1.206053   .1770358     6.81   0.000     .8587905    1.553315
         28  |   .9975379   .1779966     5.60   0.000     .6483911    1.346685
         29  |   .7894766   .1778739     4.44   0.000     .4405704    1.138383
         30  |   .5891149   .1871919     3.15   0.002     .2219313    .9562986
         31  |   .4587625   .1951069     2.35   0.019     .0760533    .8414717
         32  |   .2985522   .2070442     1.44   0.150    -.1075725    .7046769
         33  |   .1824316     .22035     0.83   0.408     -.249793    .6146562
         34  |   .1346039   .2358284     0.57   0.568    -.3279822    .5971899
         35  |   .0280482   .2515993     0.11   0.911    -.4654729    .5215693
         36  |  -.0591438   .2655815    -0.22   0.824    -.5800917     .461804
         37  |  -.1893542   .2801596    -0.68   0.499    -.7388974    .3601889
         38  |  -.3181017   .2919977    -1.09   0.276    -.8908658    .2546623
         39  |  -.4012674   .3117363    -1.29   0.198    -1.012749    .2102147
         40  |  -.4021121   .3263247    -1.23   0.218     -1.04221    .2379857
         41  |  -.5009313    .340129    -1.47   0.141    -1.168107     .166244
         42  |  -.5919456   .3559985    -1.66   0.097     -1.29025    .1063583
         43  |    -.66676   .3729719    -1.79   0.074    -1.398358    .0648378
         44  |  -.7295129   .3909417    -1.87   0.062    -1.496359    .0373335
         45  |  -.8401815   .4034951    -2.08   0.037    -1.631652   -.0487111
         46  |  -.7710164   .4186287    -1.84   0.066    -1.592172     .050139
         47  |  -.7471785   .4299712    -1.74   0.082    -1.590583    .0962257
         48  |  -.7591796   .4427962    -1.71   0.087     -1.62774    .1093813
         49  |  -.7914107   .4598837    -1.72   0.085    -1.693489    .1106678
         50  |  -.7682646   .4722532    -1.63   0.104    -1.694606    .1580771
             |
     age_cat |
          1  |   .5153285    .067634     7.62   0.000     .3826619    .6479951
          2  |   .8446865   .0824601    10.24   0.000      .682938    1.006435
          3  |   1.082998   .0970736    11.16   0.000     .8925849    1.273412
          4  |   1.327394   .1126912    11.78   0.000     1.106346    1.548442
          5  |   1.514369   .1297634    11.67   0.000     1.259834    1.768905
          6  |   1.678044   .1427844    11.75   0.000     1.397967    1.958121
          7  |    1.83197   .1568082    11.68   0.000     1.524385    2.139555
          8  |   1.918926    .170566    11.25   0.000     1.584354    2.253497
          9  |   1.990226   .1846263    10.78   0.000     1.628074    2.352377
         10  |   2.068396   .1981592    10.44   0.000       1.6797    2.457093
         11  |   2.183405   .2113072    10.33   0.000     1.768919    2.597892
         12  |   2.230636   .2256639     9.88   0.000     1.787988    2.673284
         13  |   2.296178   .2403718     9.55   0.000      1.82468    2.767676
         14  |   2.310673   .2535733     9.11   0.000      1.81328    2.808066
         15  |   2.329587   .2681174     8.69   0.000     1.803665    2.855509
         16  |   2.319568   .2834873     8.18   0.000     1.763497    2.875638
         17  |   2.370374   .2975144     7.97   0.000     1.786789     2.95396
         18  |   2.391318   .3114918     7.68   0.000     1.780315     3.00232
         19  |   2.403253   .3251844     7.39   0.000     1.765392    3.041114
         20  |    2.42952     .34487     7.04   0.000     1.753045    3.105996
         25  |   2.425505   .3794674     6.39   0.000     1.681166    3.169844
         30  |   2.295091   .5301116     4.33   0.000     1.255258    3.334924
         40  |   2.631985   .5264682     5.00   0.000     1.599299    3.664672
         50  |   2.753974    .574731     4.79   0.000     1.626618     3.88133
             |
       _cons |    2.95142   .1318591    22.38   0.000     2.692773    3.210066
-------------+----------------------------------------------------------------
     sigma_u |  1.2417086
     sigma_e |  .66128495
         rho |  .77904634   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 12
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =     49207
Group variable: firm_person                     Number of groups   =      7009

R-sq:  within  = 0.1077                         Obs per group: min =         1
       between = 0.0391                                        avg =       7.0
       overall = 0.0726                                        max =        12

                                                F(106,1485)        =      6.02
corr(u_i, Xb)  = -0.0690                        Prob > F           =    0.0000

                                 (Std. Err. adjusted for 1,486 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnKL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
domestic_m_1 |   .0605408   .0650893     0.93   0.352     -.067136    .1882176
domestic_m_2 |   .0282061   .0522186     0.54   0.589    -.0742239    .1306361
domestic_m_3 |    .035677   .0386491     0.92   0.356    -.0401358    .1114897
domestic_m_4 |   .0521407   .0263568     1.98   0.048     .0004402    .1038413
   expat_m_1 |  -.0350847   .0819336    -0.43   0.669    -.1958025    .1256332
   expat_m_2 |  -.0273652   .0670125    -0.41   0.683    -.1588143     .104084
   expat_m_3 |  -.0756346   .0552496    -1.37   0.171    -.1840102     .032741
   expat_m_4 |  -.0191184     .03823    -0.50   0.617    -.0941089    .0558722
 foreign_m_1 |    .097301   .0580914     1.67   0.094     -.016649     .211251
 foreign_m_2 |   .0504137    .055965     0.90   0.368    -.0593652    .1601926
 foreign_m_3 |   .0332336   .0560706     0.59   0.553    -.0767523    .1432196
 foreign_m_4 |   .0436889   .0498634     0.88   0.381    -.0541213    .1414991
domestic_p_0 |   .0603721   .0791654     0.76   0.446    -.0949158      .21566
domestic_p_1 |   .0489804   .0937635     0.52   0.601    -.1349426    .2329033
domestic_p_2 |   .0431262   .1083543     0.40   0.691    -.1694174    .2556699
domestic_p_3 |   .0724035    .122019     0.59   0.553    -.1669445    .3117515
domestic_p_4 |   .0721034   .1420377     0.51   0.612    -.2065124    .3507193
domestic_p_5 |   .1012203   .1530272     0.66   0.508    -.1989521    .4013927
domestic_p_6 |   .1622641    .167154     0.97   0.332    -.1656189    .4901471
   expat_p_0 |   .0206451   .0976759     0.21   0.833    -.1709522    .2122425
   expat_p_1 |   .0459777   .1111711     0.41   0.679    -.1720915    .2640468
   expat_p_2 |   .0533391   .1247704     0.43   0.669    -.1914059     .298084
   expat_p_3 |    .058339   .1386232     0.42   0.674     -.213579    .3302571
   expat_p_4 |   .0704895   .1538407     0.46   0.647    -.2312787    .3722578
   expat_p_5 |   .0462929    .173519     0.27   0.790    -.2940755    .3866612
   expat_p_6 |   .0252491   .1930141     0.13   0.896    -.3533601    .4038584
 foreign_p_0 |    .098257   .0581066     1.69   0.091    -.0157228    .2122368
 foreign_p_1 |   .1571129   .0565722     2.78   0.006      .046143    .2680827
 foreign_p_2 |   .1330736   .0548897     2.42   0.015      .025404    .2407432
 foreign_p_3 |   .1422366   .0557598     2.55   0.011     .0328603    .2516129
 foreign_p_4 |   .1176205   .0545796     2.16   0.031     .0105592    .2246819
 foreign_p_5 |   .0246218    .057197     0.43   0.667    -.0875737    .1368174
 foreign_p_6 |   .0683598   .0449752     1.52   0.129    -.0198619    .1565816
             |
    ind_year |
          2  |   .0881436   .1052697     0.84   0.403    -.1183494    .2946367
          3  |   .8678483   .1359441     6.38   0.000     .6011853    1.134511
          4  |   1.043826   .1567473     6.66   0.000      .736356    1.351295
          5  |   1.244058   .1790444     6.95   0.000     .8928511    1.595265
          6  |   1.398904    .205592     6.80   0.000     .9956227    1.802186
          7  |    1.69406   .2316049     7.31   0.000     1.239753    2.148368
          8  |    1.86823   .2522857     7.41   0.000     1.373356    2.363104
          9  |   2.000955   .2775379     7.21   0.000     1.456547    2.545363
         10  |   2.128819   .3043862     6.99   0.000     1.531746    2.725892
         11  |   2.314916   .3316485     6.98   0.000     1.664366    2.965465
         12  |   2.344977   .3590955     6.53   0.000     1.640588    3.049365
         13  |   2.390644   .3887175     6.15   0.000      1.62815    3.153138
         14  |    2.46849   .4141161     5.96   0.000     1.656175    3.280805
         15  |   2.389762   .4406462     5.42   0.000     1.525407    3.254117
         16  |   2.429627   .4660956     5.21   0.000     1.515352    3.343903
         17  |   2.496017   .4903637     5.09   0.000     1.534138    3.457896
         18  |   2.488868   .5091526     4.89   0.000     1.490133    3.487603
         19  |   2.516123   .5329638     4.72   0.000     1.470681    3.561565
         20  |    2.45146   .5569375     4.40   0.000     1.358992    3.543928
         21  |   2.443407    .580368     4.21   0.000     1.304979    3.581835
         22  |    2.43329   .5999056     4.06   0.000     1.256537    3.610042
         23  |   2.427197    .620566     3.91   0.000     1.209918    3.644476
         24  |    1.77631   .6591253     2.69   0.007     .4833944    3.069226
         25  |   1.724043   .6945002     2.48   0.013     .3617372    3.086349
         26  |   .5509965    .205645     2.68   0.007     .1476109    .9543821
         27  |   .5722761    .204388     2.80   0.005     .1713562    .9731959
         28  |   .7608928   .1998027     3.81   0.000     .3689672    1.152818
         29  |   .9877059    .206126     4.79   0.000     .5833768    1.392035
         30  |   1.098947    .218025     5.04   0.000     .6712776    1.526617
         31  |   1.246007   .2337791     5.33   0.000     .7874342    1.704579
         32  |   1.500237   .2519088     5.96   0.000     1.006102    1.994372
         33  |   1.590802   .2711828     5.87   0.000      1.05886    2.122744
         34  |   1.698346   .2893627     5.87   0.000     1.130743    2.265949
         35  |   1.803703   .3087566     5.84   0.000     1.198058    2.409349
         36  |   1.897683   .3359003     5.65   0.000     1.238794    2.556573
         37  |   2.053801   .3642292     5.64   0.000     1.339342    2.768259
         38  |   2.067268    .396972     5.21   0.000     1.288583    2.845954
         39  |   2.177797   .4116484     5.29   0.000     1.370323    2.985271
         40  |   2.274897   .4326518     5.26   0.000     1.426223     3.12357
         41  |   2.285653   .4572183     5.00   0.000     1.388791    3.182516
         42  |   2.413501    .481431     5.01   0.000     1.469144    3.357858
         43  |   2.542377   .5029856     5.05   0.000     1.555739    3.529014
         44  |   2.423148   .5274775     4.59   0.000     1.388468    3.457829
         45  |   2.652994    .548279     4.84   0.000      1.57751    3.728478
         46  |    2.61318    .572059     4.57   0.000      1.49105    3.735309
         47  |   2.598376   .5902179     4.40   0.000     1.440627    3.756125
         48  |   2.554555   .6116646     4.18   0.000     1.354736    3.754373
         49  |   2.291468   .6347341     3.61   0.000     1.046397    3.536539
         50  |   2.346162   .6571662     3.57   0.000      1.05709    3.635235
             |
     age_cat |
          1  |  -.0441449   .1094768    -0.40   0.687    -.2588905    .1706007
          2  |   -.059261   .1261104    -0.47   0.638    -.3066345    .1881126
          3  |  -.0876003   .1456877    -0.60   0.548    -.3733759    .1981753
          4  |  -.0933825   .1661652    -0.56   0.574     -.419326    .2325609
          5  |  -.1421402   .1883958    -0.75   0.451    -.5116904    .2274101
          6  |  -.2188152    .210014    -1.04   0.298    -.6307709    .1931404
          7  |  -.2043354    .229332    -0.89   0.373    -.6541846    .2455137
          8  |  -.2515125   .2508894    -1.00   0.316    -.7436477    .2406227
          9  |  -.2986684   .2727955    -1.09   0.274    -.8337738     .236437
         10  |  -.3150943   .2917301    -1.08   0.280    -.8873411    .2571526
         11  |  -.2834446   .3118216    -0.91   0.363    -.8951022    .3282131
         12  |  -.3304975   .3320713    -1.00   0.320    -.9818761    .3208811
         13  |  -.4180897    .355993    -1.17   0.240    -1.116392    .2802129
         14  |  -.3945222   .3759243    -1.05   0.294    -1.131921    .3428769
         15  |  -.4595285   .3954592    -1.16   0.245    -1.235247    .3161896
         16  |  -.5436101   .4180488    -1.30   0.194    -1.363639    .2764189
         17  |  -.5482513   .4391535    -1.25   0.212    -1.409678    .3131758
         18  |   -.540987   .4581897    -1.18   0.238    -1.439755    .3577807
         19  |  -.6079265   .4775726    -1.27   0.203    -1.544715    .3288621
         20  |  -.6372713   .5127128    -1.24   0.214     -1.64299    .3684471
         25  |   -.643061   .5765816    -1.12   0.265    -1.774062      .48794
         30  |  -.1966644    .804505    -0.24   0.807    -1.774751    1.381423
         40  |    -.37461   .9203986    -0.41   0.684     -2.18003     1.43081
         50  |  -.0808318    1.03164    -0.08   0.938    -2.104459    1.942795
             |
       _cons |   4.779572    .184946    25.84   0.000     4.416789    5.142356
-------------+----------------------------------------------------------------
     sigma_u |  1.6490157
     sigma_e |  .86329648
         rho |   .7848828   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 12
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnKL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =     52622
Group variable: firm_person                     Number of groups   =      7092

R-sq:  within  = 0.1946                         Obs per group: min =         1
       between = 0.1973                                        avg =       7.4
       overall = 0.1979                                        max =        12

                                                F(106,1510)        =     19.65
corr(u_i, Xb)  = -0.0333                        Prob > F           =    0.0000

                                 (Std. Err. adjusted for 1,511 clusters in id)
------------------------------------------------------------------------------
             |               Robust
        lnQL |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
domestic_m_1 |  -.0092813   .0388966    -0.24   0.811    -.0855783    .0670158
domestic_m_2 |   .0331848   .0310767     1.07   0.286    -.0277733    .0941429
domestic_m_3 |   .0347838   .0248688     1.40   0.162    -.0139974    .0835649
domestic_m_4 |   .0364364   .0174207     2.09   0.037     .0022651    .0706076
   expat_m_1 |   .0937236    .045226     2.07   0.038     .0050112    .1824361
   expat_m_2 |    .053602   .0449594     1.19   0.233    -.0345874    .1417914
   expat_m_3 |   .0882465   .0348563     2.53   0.011     .0198745    .1566185
   expat_m_4 |   .0621997   .0312054     1.99   0.046     .0009892    .1234102
 foreign_m_1 |  -.0011801   .0357673    -0.03   0.974    -.0713389    .0689788
 foreign_m_2 |   .0000223   .0354948     0.00   0.999     -.069602    .0696466
 foreign_m_3 |   .0066915   .0378276     0.18   0.860    -.0675086    .0808917
 foreign_m_4 |    -.00858   .0316276    -0.27   0.786    -.0706187    .0534588
domestic_p_0 |    .058331   .0456183     1.28   0.201    -.0311508    .1478129
domestic_p_1 |   .0843778   .0536098     1.57   0.116    -.0207797    .1895353
domestic_p_2 |   .1042421   .0619153     1.68   0.092    -.0172071    .2256913
domestic_p_3 |   .1510713   .0685713     2.20   0.028     .0165663    .2855764
domestic_p_4 |   .1527122   .0787984     1.94   0.053    -.0018537     .307278
domestic_p_5 |   .1676826    .085772     1.95   0.051    -.0005623    .3359274
domestic_p_6 |   .1413844   .0941128     1.50   0.133    -.0432212      .32599
   expat_p_0 |   .1572909   .0519594     3.03   0.003     .0553705    .2592112
   expat_p_1 |   .2375367   .0593953     4.00   0.000     .1210308    .3540426
   expat_p_2 |    .232664   .0687053     3.39   0.001     .0978961    .3674318
   expat_p_3 |   .2881579   .0771779     3.73   0.000     .1367707    .4395452
   expat_p_4 |   .3008388   .0837544     3.59   0.000     .1365516     .465126
   expat_p_5 |   .3610668   .0922231     3.92   0.000     .1801678    .5419657
   expat_p_6 |   .3793364   .1024705     3.70   0.000     .1783368    .5803359
 foreign_p_0 |   .0081049   .0368717     0.22   0.826    -.0642203    .0804302
 foreign_p_1 |   .0456654   .0368321     1.24   0.215    -.0265822    .1179129
 foreign_p_2 |   .0358008   .0370831     0.97   0.334    -.0369391    .1085407
 foreign_p_3 |   .0331195   .0351576     0.94   0.346    -.0358434    .1020823
 foreign_p_4 |   .0427274   .0363772     1.17   0.240    -.0286278    .1140825
 foreign_p_5 |    .012453   .0366742     0.34   0.734    -.0594848    .0843908
 foreign_p_6 |   .0136507   .0331052     0.41   0.680    -.0512863    .0785878
             |
    ind_year |
          2  |   .0974957   .0540933     1.80   0.072    -.0086103    .2036017
          3  |   .3958074   .0709442     5.58   0.000     .2566477    .5349671
          4  |   .6089838    .083259     7.31   0.000     .4456682    .7722994
          5  |   .8044668   .0991891     8.11   0.000     .6099038    .9990298
          6  |    .982972   .1225355     8.02   0.000     .7426142     1.22333
          7  |   1.115152    .137086     8.13   0.000     .8462529    1.384051
          8  |   1.181547   .1519819     7.77   0.000     .8834288    1.479665
          9  |    1.36946   .1698578     8.06   0.000     1.036278    1.702643
         10  |   1.489184   .1873564     7.95   0.000     1.121677     1.85669
         11  |   1.607764   .2030323     7.92   0.000     1.209508    2.006019
         12  |   1.695407   .2226388     7.62   0.000     1.258692    2.132121
         13  |   1.779441   .2404903     7.40   0.000      1.30771    2.251171
         14  |     1.8762    .256512     7.31   0.000     1.373043    2.379358
         15  |   1.901884   .2753369     6.91   0.000     1.361801    2.441967
         16  |   1.927578   .2905893     6.63   0.000     1.357577     2.49758
         17  |   2.033687   .3067742     6.63   0.000     1.431938    2.635435
         18  |   1.947207   .3256393     5.98   0.000     1.308453     2.58596
         19  |    1.98759   .3387413     5.87   0.000     1.323137    2.652044
         20  |   2.000426   .3539486     5.65   0.000     1.306143    2.694709
         21  |   1.991163   .3737014     5.33   0.000     1.258134    2.724192
         22  |   2.144755    .385041     5.57   0.000     1.389484    2.900027
         23  |    2.19865    .398117     5.52   0.000     1.417729    2.979571
         24  |   2.266137   .4206475     5.39   0.000     1.441021    3.091252
         25  |   2.208797   .4323716     5.11   0.000     1.360685     3.05691
         26  |  -.7450774   .1361292    -5.47   0.000      -1.0121   -.4780551
         27  |  -.4445911   .1339219    -3.32   0.001    -.7072837   -.1818985
         28  |   -.220576   .1403339    -1.57   0.116    -.4958461     .054694
         29  |    .076212   .1380338     0.55   0.581    -.1945464    .3469703
         30  |   .2395288   .1443707     1.66   0.097    -.0436595    .5227171
         31  |   .4106822   .1525616     2.69   0.007      .111427    .7099374
         32  |   .6489846   .1644119     3.95   0.000     .3264848    .9714844
         33  |   .7797792   .1718278     4.54   0.000     .4427327    1.116826
         34  |   .9698321   .1838235     5.28   0.000     .6092556    1.330409
         35  |   1.088159    .193853     5.61   0.000     .7079096    1.468409
         36  |   1.119298   .2108462     5.31   0.000     .7057152     1.53288
         37  |   1.273195   .2226511     5.72   0.000     .8364571    1.709933
         38  |   1.347152   .2308903     5.83   0.000     .8942528    1.800052
         39  |   1.430419   .2528202     5.66   0.000     .9345027    1.926335
         40  |   1.613026   .2681412     6.02   0.000     1.087058    2.138995
         41  |   1.732568   .2826224     6.13   0.000     1.178194    2.286942
         42  |   1.791482   .2993286     5.99   0.000     1.204338    2.378626
         43  |   1.755585   .3153176     5.57   0.000     1.137078    2.374092
         44  |   1.729041   .3354284     5.15   0.000     1.071086    2.386996
         45  |   1.947813   .3436213     5.67   0.000     1.273788    2.621839
         46  |   1.896721   .3610637     5.25   0.000     1.188482    2.604961
         47  |    1.99614   .3691712     5.41   0.000     1.271998    2.720283
         48  |   1.965525   .3856026     5.10   0.000     1.209152    2.721899
         49  |   2.087028   .4018679     5.19   0.000      1.29875    2.875307
         50  |   2.001118   .4126192     4.85   0.000      1.19175    2.810485
             |
     age_cat |
          1  |    .306638   .0641312     4.78   0.000     .1808425    .4324336
          2  |   .2975045   .0722681     4.12   0.000     .1557481     .439261
          3  |   .2686785   .0849094     3.16   0.002     .1021257    .4352313
          4  |   .2520056   .0976468     2.58   0.010     .0604679    .4435433
          5  |   .2060953   .1132056     1.82   0.069    -.0159617    .4281522
          6  |   .1374142   .1255282     1.09   0.274    -.1088139    .3836423
          7  |   .1273763   .1391154     0.92   0.360    -.1455036    .4002562
          8  |   .1031907   .1530629     0.67   0.500    -.1970479    .4034292
          9  |   .0644091   .1677071     0.38   0.701    -.2645544    .3933727
         10  |   .0242257   .1819633     0.13   0.894    -.3327019    .3811533
         11  |   .0461326   .1970656     0.23   0.815    -.3404187    .4326839
         12  |   .0558428   .2119888     0.26   0.792     -.359981    .4716665
         13  |  -.0162599   .2291822    -0.07   0.943    -.4658092    .4332893
         14  |  -.0810455   .2435454    -0.33   0.739    -.5587686    .3966776
         15  |  -.0843315   .2596926    -0.32   0.745     -.593728     .425065
         16  |  -.1234506   .2763382    -0.45   0.655    -.6654981    .4185969
         17  |    -.19581    .290973    -0.67   0.501    -.7665642    .3749441
         18  |  -.1620075   .3074467    -0.53   0.598    -.7650753    .4410604
         19  |  -.2156267   .3206169    -0.67   0.501    -.8445283    .4132749
         20  |   -.278291   .3478168    -0.80   0.424    -.9605463    .4039643
         25  |  -.3873869   .3897436    -0.99   0.320    -1.151883    .3771092
         30  |  -.2843991   .5088772    -0.56   0.576     -1.28258     .713782
         40  |    -.73048   .5622034    -1.30   0.194    -1.833262    .3723023
         50  |  -.8120812   .6274932    -1.29   0.196    -2.042932    .4187695
             |
       _cons |   7.879087   .1117979    70.48   0.000     7.659791    8.098382
-------------+----------------------------------------------------------------
     sigma_u |  1.1588821
     sigma_e |  .60319056
         rho |  .78683566   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 12
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/lnQL_event_study.png written in PNG format)

Fixed-effects (within) regression               Number of obs      =     52622
Group variable: firm_person                     Number of groups   =      7092

R-sq:  within  = 0.0353                         Obs per group: min =         1
       between = 0.1555                                        avg =       7.4
       overall = 0.1106                                        max =        12

                                                F(106,1510)        =      2.71
corr(u_i, Xb)  = 0.1279                         Prob > F           =    0.0000

                                 (Std. Err. adjusted for 1,511 clusters in id)
------------------------------------------------------------------------------
             |               Robust
    exporter |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
domestic_m_1 |   -.006419   .0189092    -0.34   0.734    -.0435101    .0306721
domestic_m_2 |   .0038974   .0158345     0.25   0.806    -.0271625    .0349574
domestic_m_3 |  -.0048747   .0133297    -0.37   0.715    -.0310214    .0212721
domestic_m_4 |  -.0086898    .009888    -0.88   0.380    -.0280855     .010706
   expat_m_1 |   .0256228   .0245397     1.04   0.297    -.0225127    .0737583
   expat_m_2 |   .0149169   .0202192     0.74   0.461    -.0247438    .0545776
   expat_m_3 |   .0325222   .0177478     1.83   0.067    -.0022908    .0673352
   expat_m_4 |   .0210605   .0143019     1.47   0.141    -.0069933    .0491142
 foreign_m_1 |  -.0108583   .0152695    -0.71   0.477      -.04081    .0190934
 foreign_m_2 |  -.0027696     .01546    -0.18   0.858    -.0330949    .0275557
 foreign_m_3 |  -.0068908    .015752    -0.44   0.662    -.0377888    .0240073
 foreign_m_4 |  -.0129234   .0149083    -0.87   0.386    -.0421665    .0163198
domestic_p_0 |   .0003718   .0216758     0.02   0.986    -.0421461    .0428897
domestic_p_1 |   .0066554   .0245267     0.27   0.786    -.0414545    .0547653
domestic_p_2 |   .0003403   .0282299     0.01   0.990    -.0550336    .0557142
domestic_p_3 |   .0050762   .0319048     0.16   0.874    -.0575063    .0676586
domestic_p_4 |   .0070536   .0357295     0.20   0.844    -.0630312    .0771383
domestic_p_5 |  -.0023253   .0393253    -0.06   0.953    -.0794632    .0748126
domestic_p_6 |   .0045303   .0440084     0.10   0.918    -.0817938    .0908544
   expat_p_0 |   .0439842   .0267132     1.65   0.100    -.0084147     .096383
   expat_p_1 |   .0449579    .029711     1.51   0.130    -.0133213     .103237
   expat_p_2 |   .0513818   .0330558     1.55   0.120    -.0134583     .116222
   expat_p_3 |   .0660527   .0365792     1.81   0.071    -.0056986    .1378041
   expat_p_4 |   .0696526   .0402622     1.73   0.084    -.0093233    .1486284
   expat_p_5 |   .0524623    .044003     1.19   0.233    -.0338513    .1387759
   expat_p_6 |   .0402072   .0479128     0.84   0.402    -.0537754    .1341898
 foreign_p_0 |   .0266138    .015463     1.72   0.085    -.0037175     .056945
 foreign_p_1 |   .0268483   .0163648     1.64   0.101    -.0052518    .0589485
 foreign_p_2 |   .0137322   .0167499     0.82   0.412    -.0191233    .0465878
 foreign_p_3 |   .0151193   .0172606     0.88   0.381     -.018738    .0489767
 foreign_p_4 |   .0230912    .016047     1.44   0.150    -.0083856     .054568
 foreign_p_5 |   .0167029   .0165896     1.01   0.314    -.0158381    .0492439
 foreign_p_6 |   .0201574   .0151404     1.33   0.183     -.009541    .0498558
             |
    ind_year |
          2  |   .0194223   .0341151     0.57   0.569    -.0474958    .0863404
          3  |  -.0578289    .035502    -1.63   0.104    -.1274674    .0118095
          4  |   -.066561   .0399246    -1.67   0.096    -.1448745    .0117526
          5  |  -.0674428   .0439355    -1.54   0.125    -.1536239    .0187382
          6  |  -.0899996   .0493299    -1.82   0.068    -.1867619    .0067627
          7  |  -.0947605   .0525631    -1.80   0.072    -.1978649    .0083439
          8  |  -.0870231   .0582758    -1.49   0.136    -.2013333     .027287
          9  |  -.1152584   .0630618    -1.83   0.068    -.2389563    .0084396
         10  |  -.1357776   .0679257    -2.00   0.046    -.2690164   -.0025388
         11  |  -.1450134   .0728375    -1.99   0.047    -.2878868     -.00214
         12  |  -.1386174   .0778656    -1.78   0.075    -.2913536    .0141188
         13  |  -.1557338   .0827336    -1.88   0.060    -.3180188    .0065512
         14  |  -.1211515   .0882515    -1.37   0.170    -.2942601     .051957
         15  |  -.1158732   .0930469    -1.25   0.213     -.298388    .0666415
         16  |  -.1227039    .097691    -1.26   0.209    -.3143284    .0689206
         17  |  -.1057068   .1026182    -1.03   0.303    -.3069961    .0955825
         18  |  -.1016273   .1088171    -0.93   0.350    -.3150759    .1118213
         19  |  -.0942477   .1134129    -0.83   0.406    -.3167112    .1282159
         20  |  -.0437112   .1179795    -0.37   0.711    -.2751323    .1877099
         21  |  -.1130588   .1225911    -0.92   0.357    -.3535257    .1274081
         22  |  -.0946428   .1259899    -0.75   0.453    -.3417766     .152491
         23  |  -.1029347   .1311965    -0.78   0.433    -.3602813    .1544119
         24  |   -.179877   .1360827    -1.32   0.186    -.4468082    .0870542
         25  |  -.2282212   .1416981    -1.61   0.107    -.5061672    .0497248
         26  |   .1404882   .0589975     2.38   0.017     .0247623     .256214
         27  |   .1265988   .0571063     2.22   0.027     .0145828    .2386148
         28  |   .1374064    .058076     2.37   0.018     .0234882    .2513246
         29  |   .1253682   .0595505     2.11   0.035     .0085576    .2421787
         30  |   .1324884   .0596703     2.22   0.027     .0154431    .2495338
         31  |   .1077597   .0631168     1.71   0.088    -.0160462    .2315657
         32  |    .102064   .0646894     1.58   0.115    -.0248267    .2289546
         33  |   .0585403   .0677629     0.86   0.388    -.0743791    .1914597
         34  |   .0423457   .0714716     0.59   0.554    -.0978485    .1825398
         35  |   .0477956   .0751065     0.64   0.525    -.0995286    .1951198
         36  |   .0047446   .0803666     0.06   0.953    -.1528975    .1623867
         37  |   .0280815   .0827888     0.34   0.735    -.1343117    .1904747
         38  |   .0204244   .0870358     0.23   0.814    -.1502994    .1911482
         39  |   .0446971   .0921515     0.49   0.628    -.1360613    .2254556
         40  |   .0626142   .0956779     0.65   0.513    -.1250614    .2502898
         41  |    .049722   .0998966     0.50   0.619    -.1462287    .2456727
         42  |   .0413398   .1049735     0.39   0.694    -.1645695     .247249
         43  |   .0482368   .1105775     0.44   0.663    -.1686649    .2651385
         44  |  -.0042112   .1181474    -0.04   0.972    -.2359616    .2275392
         45  |    .004067   .1220323     0.03   0.973    -.2353038    .2434379
         46  |   .0258772     .12585     0.21   0.837    -.2209822    .2727366
         47  |   .0616863   .1314221     0.47   0.639    -.1961029    .3194755
         48  |   .0450613   .1385811     0.33   0.745    -.2267705    .3168931
         49  |  -.0944924   .1415768    -0.67   0.505    -.3722004    .1832157
         50  |  -.1143139   .1461658    -0.78   0.434    -.4010234    .1723957
             |
     age_cat |
          1  |   .0928698   .0264886     3.51   0.000     .0409114    .1448283
          2  |    .087453   .0281957     3.10   0.002     .0321461      .14276
          3  |   .1337359   .0319295     4.19   0.000      .071105    .1963668
          4  |   .1794635   .0357125     5.03   0.000     .1094121    .2495149
          5  |   .1743101    .039432     4.42   0.000     .0969629    .2516573
          6  |   .1937371   .0427611     4.53   0.000     .1098597    .2776146
          7  |   .2042389   .0461215     4.43   0.000     .1137699    .2947079
          8  |   .2292959   .0485066     4.73   0.000     .1341484    .3244434
          9  |   .2363504   .0524015     4.51   0.000     .1335629    .3391378
         10  |   .2691251   .0567884     4.74   0.000     .1577325    .3805177
         11  |    .282833    .060468     4.68   0.000     .1642229    .4014431
         12  |   .2859524   .0647635     4.42   0.000     .1589165    .4129883
         13  |   .2609818   .0685373     3.81   0.000     .1265435    .3954201
         14  |   .2616986   .0728058     3.59   0.000     .1188873    .4045098
         15  |   .2663445   .0766273     3.48   0.001     .1160373    .4166517
         16  |   .2599533   .0803798     3.23   0.001     .1022853    .4176213
         17  |   .2900117    .084919     3.42   0.001       .12344    .4565835
         18  |   .2718764   .0894205     3.04   0.002     .0964747     .447278
         19  |   .2768025   .0946996     2.92   0.004     .0910458    .4625592
         20  |   .2701281   .0994055     2.72   0.007     .0751405    .4651157
         25  |   .3257926   .1112251     2.93   0.003     .1076206    .5439646
         30  |   .2920881   .1686627     1.73   0.084    -.0387499    .6229261
         40  |   .3751994   .1838205     2.04   0.041     .0146289    .7357698
         50  |   .3770634   .2129933     1.77   0.077    -.0407307    .7948575
             |
       _cons |   .3602931   .0505753     7.12   0.000     .2610878    .4594985
-------------+----------------------------------------------------------------
     sigma_u |  .39230866
     sigma_e |  .28361457
         rho |  .65675478   (fraction of variance due to u_i)
------------------------------------------------------------------------------
number of observations (_N) was 0, now 12
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(1 real change made)
(file output/figure/exporter_event_study.png written in PNG format)

. 
end of do-file

. 
. log close
      name:  <unnamed>
       log:  /Users/koren/Google Drive/Research/expat/research_design/talk/output/estimate.log
  log type:  text
 closed on:   4 Dec 2018, 11:59:00
--------------------------------------------------------------------------------------------------------------------------------
